import{n as e}from"./rolldown-runtime-y2wrX6ue.js";import{a as t,c as n,d as r,f as i,h as a,i as o,l as s,n as c,o as l,p as u,r as d,s as f,t as p,u as m}from"./dnd-vendor-HKLgJs3t.js";import{a as h,c as g,i as _,l as v,n as y,o as b,r as x,s as S,t as C}from"./react-vendor-BbDLWN3g.js";import{$ as w,A as T,At as E,B as D,Bt as O,C as k,Ct as ee,D as te,Dt as A,E as j,Et as ne,F as re,Ft as ie,G as ae,Gt as oe,H as se,Ht as M,I as ce,It as N,J as P,K as le,L as ue,Lt as F,M as de,Mt as I,N as L,Nt as fe,O as pe,Ot as R,P as z,Pt as B,Q as me,R as he,Rt as ge,S as _e,St as ve,T as ye,Tt as be,U as xe,Ut as Se,V as Ce,Vt as we,W as Te,Wt as Ee,X as De,Y as Oe,Z as ke,_ as Ae,_t as je,a as Me,at as Ne,b as Pe,bt as V,c as Fe,ct as Ie,d as Le,dt as Re,et as ze,f as Be,ft as Ve,g as He,gt as H,h as Ue,ht as U,i as We,it as Ge,j as Ke,jt as qe,k as Je,kt as Ye,l as Xe,lt as Ze,m as Qe,mt as $e,n as et,nt as tt,o as nt,ot as rt,p as it,pt as at,q as ot,r as st,rt as ct,s as lt,st as ut,t as dt,tt as ft,u as pt,ut as mt,v as ht,vt as W,w as gt,wt as _t,x as vt,xt as yt,y as bt,yt as xt,z as St,zt as Ct}from"./mui-vendor-KPN5lz1z.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var wt=e(v()),G=e(a()),Tt={language:`zh-CN`,officialIdParseMode:!1},Et=`botc-app-config`;const K=new class{constructor(){this.config=Tt,y(this),this.loadConfig(),this.detectLanguageFromUrl(),this.setupUrlListener()}loadConfig(){try{let e=localStorage.getItem(Et);if(e){let t=JSON.parse(e);this.config={...Tt,...t}}}catch(e){console.error(`Failed to load config from localStorage:`,e)}}saveConfig(){try{localStorage.setItem(Et,JSON.stringify(this.config))}catch(e){console.error(`Failed to save config to localStorage:`,e)}}setupUrlListener(){window.addEventListener(`hashchange`,()=>{this.detectLanguageFromUrl()})}detectLanguageFromUrl(){let e=null;if(window.location.search&&(e=new URLSearchParams(window.location.search).get(`lang`),e===`en`||e===`zh-CN`)){this.config.language=e,this.saveConfig();let t=window.location.pathname+window.location.hash;window.history.replaceState({},``,t),this.updateUrlLanguage(e);return}let t=window.location.hash,n=t.indexOf(`?`);if(n!==-1){let r=t.substring(n+1);if(e=new URLSearchParams(r).get(`lang`),e===`en`||e===`zh-CN`){this.config.language!==e&&(this.config.language=e,this.saveConfig());return}}this.updateUrlLanguage(this.config.language)}updateUrlLanguage(e){let t=window.location.hash,n=t.indexOf(`?`),r=t,i=new URLSearchParams;n!==-1&&(r=t.substring(0,n),i=new URLSearchParams(t.substring(n+1))),i.set(`lang`,e);let a=`${r}?${i.toString()}`;window.history.replaceState({},``,a)}setLanguage(e){this.config.language=e,this.saveConfig(),this.updateUrlLanguage(e)}setOfficialIdParseMode(e){this.config.officialIdParseMode=e,this.saveConfig()}resetToDefault(){this.config={...Tt};try{localStorage.removeItem(Et),console.log(`已删除 localStorage 键:`,Et)}catch(e){console.error(`删除配置失败:`,e)}this.updateUrlLanguage(Tt.language)}get language(){return this.config.language}};var Dt=`botc-fonts-db`,Ot=1,kt=`custom-fonts`;const At=new class{constructor(){this.db=null}async init(){return new Promise((e,t)=>{let n=indexedDB.open(Dt,Ot);n.onerror=()=>{console.error(`Failed to open IndexedDB:`,n.error),t(n.error)},n.onsuccess=()=>{this.db=n.result,e()},n.onupgradeneeded=e=>{let t=e.target.result;if(!t.objectStoreNames.contains(kt)){let e=t.createObjectStore(kt,{keyPath:`id`});e.createIndex(`fontFamily`,`fontFamily`,{unique:!1}),e.createIndex(`createdAt`,`createdAt`,{unique:!1})}}})}async saveFont(e){return this.db||await this.init(),new Promise((t,n)=>{let r=this.db.transaction([kt],`readwrite`).objectStore(kt).put(e);r.onsuccess=()=>t(),r.onerror=()=>{console.error(`Failed to save font:`,r.error),n(r.error)}})}async getAllFonts(){return this.db||await this.init(),new Promise((e,t)=>{let n=this.db.transaction([kt],`readonly`).objectStore(kt).getAll();n.onsuccess=()=>e(n.result||[]),n.onerror=()=>{console.error(`Failed to get fonts:`,n.error),t(n.error)}})}async getFontById(e){return this.db||await this.init(),new Promise((t,n)=>{let r=this.db.transaction([kt],`readonly`).objectStore(kt).get(e);r.onsuccess=()=>t(r.result||null),r.onerror=()=>{console.error(`Failed to get font:`,r.error),n(r.error)}})}async deleteFont(e){return this.db||await this.init(),new Promise((t,n)=>{let r=this.db.transaction([kt],`readwrite`).objectStore(kt).delete(e);r.onsuccess=()=>t(),r.onerror=()=>{console.error(`Failed to delete font:`,r.error),n(r.error)}})}async clearAllFonts(){return this.db||await this.init(),new Promise((e,t)=>{let n=this.db.transaction([kt],`readwrite`).objectStore(kt).clear();n.onsuccess=()=>e(),n.onerror=()=>{console.error(`Failed to clear fonts:`,n.error),t(n.error)}})}async getStorageSize(){return(await this.getAllFonts()).reduce((e,t)=>e+(t.dataUrl?.length||0),0)}};var jt={nightOrderBackground:`green`,nightOrderBackgroundMode:`official`,customNightOrderBackground:``,mainBackgroundMode:`official`,customMainBackground:``,enableTwoPageMode:!1,titleHeightMd:180,titleFontSize:{xs:`1.2rem`,sm:`1.6rem`,md:`4.5rem`},fonts:{scriptTitle:`jicao, Dumbledor, serif`,teamDivider:`jicao, Dumbledor, serif`,characterName:`jicao, Dumbledor, serif`,characterAbility:`"Source Han Serif", "Source Han Serif SC", "Noto Serif CJK SC", "思源宋体", "Microsoft YaHei", "PingFang SC", serif`,jinxText:`jicao, Dumbledor, serif`,stateRuleTitle:`jicao, Dumbledor, serif`,stateRuleContent:`jicao, Dumbledor, serif`,specialRuleTitle:`jicao, Dumbledor, serif`,specialRuleContent:`jicao, Dumbledor, serif`},specialRuleTitleFontSize:`1rem`,specialRuleContentFontSize:`0.85rem`,customFonts:[],characterCard:{cardPaddingX:.5,cardPaddingY:.5,cardBorderRadius:1,cardGap:1,avatarWidthMd:99,avatarHeightMd:79,avatarBorderRadius:1,fabledIconWidthMd:74,fabledIconHeightMd:74,fabledIconBorderRadius:1,textAreaGap:.3,nameFontSizeMd:`1.2rem`,nameFontWeight:`bold`,nameLineHeight:1.2,descriptionFontSizeMd:`0.9rem`,descriptionLineHeight:1.5,jinxGap:.3,jinxPadding:.3,jinxBorderRadius:.5,jinxIconGap:.5,jinxIconWidthMd:45,jinxIconHeightMd:45,jinxIconBorderRadius:1,jinxTextFontSizeMd:`0.77rem`,jinxTextLineHeight:1.4}},Mt=`botc-ui-config`;const q=new class{constructor(){this.config=jt,y(this),this.loadConfig(),this.loadCustomFontsFromIndexedDB()}loadConfig(){try{let e=localStorage.getItem(Mt);if(e){let{customFonts:t,...n}=JSON.parse(e);this.config={...jt,...n},t&&Array.isArray(t)&&t.length>0&&this.migrateFontsToIndexedDB(t)}}catch(e){console.error(`Failed to load UI config from localStorage:`,e)}}async migrateFontsToIndexedDB(e){console.log(`Migrating ${e.length} fonts from localStorage to IndexedDB...`);try{for(let t of e)await At.saveFont({...t,createdAt:Date.now()});this.config.customFonts=e,this.saveConfig(),console.log(`Font migration completed successfully`)}catch(e){console.error(`Failed to migrate fonts:`,e)}}saveConfig(){try{let{customFonts:e,...t}=this.config;localStorage.setItem(Mt,JSON.stringify(t))}catch(e){console.error(`Failed to save UI config to localStorage:`,e)}}updateConfig(e){this.config={...this.config,...e},this.saveConfig()}updateCharacterCardConfig(e){this.config.characterCard={...this.config.characterCard,...e},this.saveConfig()}updateFontConfig(e){this.config.fonts={...this.config.fonts,...e},this.saveConfig()}setSpecialRuleTitleFontSize(e,t={}){let{persist:n=!0}=t,r=`${Number(e.toFixed(2))}rem`;this.config.specialRuleTitleFontSize=r,n&&this.saveConfig()}setSpecialRuleContentFontSize(e,t={}){let{persist:n=!0}=t,r=`${Number(e.toFixed(2))}rem`;this.config.specialRuleContentFontSize=r,n&&this.saveConfig()}async addCustomFont(e){try{await At.saveFont({...e,createdAt:Date.now()}),this.config.customFonts=[...this.config.customFonts,e],this.loadSingleFont(e),console.log(`Font saved to IndexedDB successfully:`,e.name)}catch(e){throw console.error(`Failed to save font to IndexedDB:`,e),e}}async removeCustomFont(e){try{await At.deleteFont(e),this.config.customFonts=this.config.customFonts.filter(t=>t.id!==e);let t=`custom-font-${e}`,n=document.getElementById(t);n&&n.remove(),console.log(`Font removed from IndexedDB successfully:`,e)}catch(e){throw console.error(`Failed to remove font from IndexedDB:`,e),e}}async loadCustomFontsFromIndexedDB(){try{let e=await At.getAllFonts();this.config.customFonts=e.map(e=>({id:e.id,name:e.name,fontFamily:e.fontFamily,dataUrl:e.dataUrl})),this.loadCustomFonts(),console.log(`Loaded ${e.length} custom fonts from IndexedDB`)}catch(e){console.error(`Failed to load fonts from IndexedDB:`,e),this.config.customFonts=[]}}loadSingleFont(e){let t=`custom-font-${e.id}`;if(document.getElementById(t))return;let n=document.createElement(`style`);n.id=t,n.textContent=`
      @font-face {
        font-family: '${e.fontFamily}';
        src: url('${e.dataUrl}');
      }
    `,document.head.appendChild(n)}loadCustomFonts(){this.config.customFonts.forEach(e=>{this.loadSingleFont(e)})}async resetToDefault(){this.config={...jt};try{let e=this.config.customFonts.map(e=>e.id);for(let t of e){await At.deleteFont(t);let e=`custom-font-${t}`,n=document.getElementById(e);n&&n.remove()}console.log(`所有自定义字体已从 IndexedDB 清理`)}catch(e){console.error(`清理自定义字体失败:`,e)}this.config.customFonts=[];try{localStorage.removeItem(Mt),console.log(`已删除 localStorage 键:`,Mt)}catch(e){console.error(`删除 UI 配置失败:`,e)}}get nightOrderBackgroundUrl(){if(this.config.nightOrderBackgroundMode===`custom`&&this.config.customNightOrderBackground)return this.config.customNightOrderBackground;switch(this.config.nightOrderBackground){case`purple`:return`/imgs/images/night_order/order_back_purple.png`;case`yellow`:return`/imgs/images/night_order/order_back_yellow2.jpg`;case`green`:return`/imgs/images/night_order/order_back_green.jpg`;default:return`/imgs/images/night_order/order_back_green.jpg`}}get mainBackgroundUrl(){return this.config.mainBackgroundMode===`custom`&&this.config.customMainBackground?this.config.customMainBackground:`/imgs/images/main_back.jpg`}get titleHeight(){return this.config.titleHeightMd}get titleFontSizeXs(){return this.config.titleFontSize.xs}get titleFontSizeSm(){return this.config.titleFontSize.sm}get titleFontSizeMd(){return this.config.titleFontSize.md}get scriptTitleFont(){return this.config.fonts.scriptTitle}get teamDividerFont(){return this.config.fonts.teamDivider}get characterNameFont(){return this.config.fonts.characterName}get characterAbilityFont(){return this.config.fonts.characterAbility}get jinxTextFont(){return this.config.fonts.jinxText}get stateRuleTitleFont(){return this.config.fonts.stateRuleTitle}get stateRuleContentFont(){return this.config.fonts.stateRuleContent}get specialRuleTitleFont(){return this.config.fonts.specialRuleTitle}get specialRuleContentFont(){return this.config.fonts.specialRuleContent}get specialRuleTitleFontSize(){return this.config.specialRuleTitleFontSize}get specialRuleContentFontSize(){return this.config.specialRuleContentFontSize}get availableFonts(){let e=[{value:`jicao, Dumbledor, serif`,label:`Jicao + Dumbledor (默认)`},{value:`"Source Han Serif", "Source Han Serif SC", "Noto Serif CJK SC", "思源宋体", "Microsoft YaHei", "PingFang SC", serif`,label:`思源宋体 (Source Han Serif)`},{value:`"Segoe UI", "Microsoft YaHei", "PingFang SC", sans-serif`,label:`系统默认 (System Default)`},{value:`sans-serif`,label:`无衬线字体 (Sans-serif)`},{value:`monospace`,label:`等宽字体 (Monospace)`}],t=this.config.customFonts.map(e=>({value:e.fontFamily,label:`${e.name} (自定义)`}));return[...e,...t]}},J=new class{constructor(){this.script=null,this.originalJson=``,this.normalizedJson=``,this.customTitle=``,this.customAuthor=``,y(this),this.loadFromStorage()}setScript(e){if(e)try{let t=JSON.parse(this.originalJson||`[]`),n=Array.isArray(t)?t.find(e=>e&&e.id===`_meta`):t&&t._meta,r=n&&(n.name_en||n.nameEn);typeof r==`string`&&r.trim()&&(e.titleEn=r.trim())}catch{}this.script=e,e&&this.generateNormalizedJson(e),this.saveToStorage()}generateNormalizedJson(e){try{let t=[],n={id:`_meta`,name:e.title,author:e.author||``};e.titleEn&&(n.name_en=e.titleEn),e.titleImage&&(n.titleImage=e.titleImage),e.titleImageSize&&(n.titleImageSize=e.titleImageSize),e.useTitleImage!==void 0&&(n.use_title_image=e.useTitleImage),e.playerCount&&(n.playerCount=e.playerCount),e.secondPageTitle!==void 0&&(n.second_page_title=e.secondPageTitle),e.secondPageTitleText&&(n.second_page_title_text=e.secondPageTitleText),e.secondPageTitleImage&&(n.second_page_title_image=e.secondPageTitleImage),e.secondPageTitleFontSize&&(n.second_page_title_font_size=e.secondPageTitleFontSize),e.secondPageTitleImageSize&&(n.second_page_title_image_size=e.secondPageTitleImageSize),e.useSecondPageTitleImage!==void 0&&(n.use_second_page_title_image=e.useSecondPageTitleImage),e.secondPagePplTable1!==void 0&&(n.second_page_ppl_table1=e.secondPagePplTable1),e.secondPagePplTable2!==void 0&&(n.second_page_ppl_table2=e.secondPagePplTable2),e.secondPageOrder&&e.secondPageOrder.length>0&&(n.second_page_order=e.secondPageOrder.join(` `));let r=[],i=[];e.specialRules&&e.specialRules.length>0&&e.specialRules.forEach(e=>{e.sourceType===`state`?r.push({stateName:e.title,stateDescription:e.content}):e.sourceType===`status`&&i.push({name:e.title,skill:e.content})}),e.secondPageRules&&e.secondPageRules.length>0&&e.secondPageRules.forEach(e=>{e.sourceType===`state`&&!r.some(t=>t.stateName===e.title)?r.push({stateName:e.title,stateDescription:e.content}):e.sourceType===`status`&&!i.some(t=>t.name===e.title)&&i.push({name:e.title,skill:e.content})}),r.length>0&&(n.state=r),i.length>0&&(n.status=i),t.push(n),e.all.forEach(e=>{let n={id:e.id,name:e.name,ability:e.ability,team:e.team,image:e.image};e.firstNight&&(n.firstNight=e.firstNight),e.otherNight&&(n.otherNight=e.otherNight),e.firstNightReminder&&(n.firstNightReminder=e.firstNightReminder),e.otherNightReminder&&(n.otherNightReminder=e.otherNightReminder),e.reminders&&e.reminders.length>0&&(n.reminders=e.reminders),e.remindersGlobal&&e.remindersGlobal.length>0&&(n.remindersGlobal=e.remindersGlobal),e.setup&&(n.setup=e.setup),t.push(n)});try{let e=JSON.parse(this.originalJson);(Array.isArray(e)?e:[]).filter(e=>(typeof e==`string`?{id:e}:e).team===`a jinxed`).forEach(e=>t.push(e))}catch(e){console.warn(`提取相克规则失败:`,e)}e.specialRules&&e.specialRules.length>0&&e.specialRules.forEach(e=>{e.sourceType===`special_rule`&&t.push({id:e.id,team:`special_rule`,title:e.title,content:e.content})}),this.normalizedJson=JSON.stringify(t,null,2),console.log(`✅ 已生成规范化JSON`)}catch(e){console.error(`生成规范化JSON失败:`,e),this.normalizedJson=this.originalJson}}setOriginalJson(e){this.originalJson=e,this.saveToStorage()}setCustomTitle(e){this.customTitle=e,this.saveToStorage()}setCustomAuthor(e){this.customAuthor=e,this.saveToStorage()}updateScript(e){e.script!==void 0&&(this.script=e.script),e.originalJson!==void 0&&(this.originalJson=e.originalJson),e.customTitle!==void 0&&(this.customTitle=e.customTitle),e.customAuthor!==void 0&&(this.customAuthor=e.customAuthor),this.saveToStorage()}updateCharacter(e,t){if(!this.script)return;console.log(`ScriptStore.updateCharacter 被调用:`,{characterId:e,updates:t,hasReminders:`reminders`in t,remindersValue:t.reminders});let n={...this.script},r=!1,i=null,a=null;for(let o of Object.keys(n.characters)){let s=n.characters[o].findIndex(t=>t.id===e);if(s!==-1){if(i){console.warn(`发现重复的角色ID: ${e}，在团队 ${a} 和 ${o} 中都存在`);continue}i=n.characters[o][s],a=o;let c={...i,...t};if(t.team&&t.team!==o){if(n.characters={...n.characters,[o]:n.characters[o].filter(t=>t.id!==e)},n.characters[o].length===0){let{[o]:e,...t}=n.characters;n.characters=t}n.characters[t.team]||(n.characters[t.team]=[]),n.characters={...n.characters,[t.team]:[...n.characters[t.team],c]}}else n.characters={...n.characters,[o]:n.characters[o].map(t=>t.id===e?c:t)};r=!0;break}}if(i&&r){let r=n.all.findIndex(t=>t.id===e);r!==-1&&(n.all=[...n.all],n.all[r]={...i,...t})}r?(this.setScript(n),console.log(`ScriptStore - 角色更新成功，准备同步JSON:`,{characterId:e,updatedCharacter:n.all.find(t=>t.id===e)}),this.updateCharacterInJson(e,t)):console.log(`没有找到要更新的角色:`,e)}reorderCharacters(e,t){if(!this.script)return;let n={...this.script,characters:{...this.script.characters,[e]:t.map(t=>this.script.characters[e].find(e=>e.id===t))}},r=[];Object.values(n.characters).forEach(e=>{r.push(...e)}),n.all=r,this.setScript(n);let i=n.all.map(e=>e.id);this.reorderCharactersInJson(i)}addCharacter(e){if(!this.script)return!1;let t={...this.script};return t.all.some(t=>t.id===e.id)?!1:(t.characters[e.team]||(t.characters[e.team]=[]),t.characters={...t.characters,[e.team]:[...t.characters[e.team],e]},t.all=[...t.all,e],this.setScript(t),this.addCharacterToJson(e),!0)}removeCharacter(e){if(!this.script)return;let t={...this.script};if(t.characters[e.team]&&(t.characters={...t.characters,[e.team]:t.characters[e.team].filter(t=>t.id!==e.id)},t.characters[e.team].length===0)){let{[e.team]:n,...r}=t.characters;t.characters=r}t.all=t.all.filter(t=>t.id!==e.id),this.setScript(t),this.removeCharacterFromJson(e.id)}replaceCharacter(e,t){if(!this.script)return!1;let n={...this.script};if(n.all.some(n=>n.id===t.id&&n.id!==e.id))return!1;let r=n.all.findIndex(t=>t.id===e.id);if(r===-1)return!1;if(n.all=[...n.all],n.all[r]=t,n.characters[e.team]&&n.characters[e.team].findIndex(t=>t.id===e.id)!==-1&&(n.characters={...n.characters,[e.team]:n.characters[e.team].filter(t=>t.id!==e.id)},n.characters[e.team].length===0)){let{[e.team]:t,...r}=n.characters;n.characters=r}return n.characters[t.team]||(n.characters[t.team]=[]),n.characters={...n.characters,[t.team]:[...n.characters[t.team],t]},this.setScript(n),this.replaceCharacterInJson(e.id,t),!0}updateTitleInfo(e){if(!this.script)return;let t={...this.script};e.title!==void 0&&(t.title=e.title),`titleImage`in e&&(e.titleImage?t.titleImage=e.titleImage:delete t.titleImage),e.titleImageSize!==void 0&&(t.titleImageSize=e.titleImageSize),e.useTitleImage!==void 0&&(t.useTitleImage=e.useTitleImage),e.author!==void 0&&(t.author=e.author),e.playerCount!==void 0&&(t.playerCount=e.playerCount),e.secondPageTitleText!==void 0&&(t.secondPageTitleText=e.secondPageTitleText),`secondPageTitleImage`in e&&(e.secondPageTitleImage?t.secondPageTitleImage=e.secondPageTitleImage:delete t.secondPageTitleImage),e.secondPageTitleFontSize!==void 0&&(t.secondPageTitleFontSize=e.secondPageTitleFontSize),e.secondPageTitleImageSize!==void 0&&(t.secondPageTitleImageSize=e.secondPageTitleImageSize),e.useSecondPageTitleImage!==void 0&&(t.useSecondPageTitleImage=e.useSecondPageTitleImage),this.setScript(t),this.syncTitleInfoToJson(e)}addSecondPageComponent(e){if(!this.script)return;let t={...this.script};switch(e){case`title`:t.secondPageTitle=!0;break;case`ppl_table1`:t.secondPagePplTable1=!0;break;case`ppl_table2`:t.secondPagePplTable2=!0;break}this.setScript(t),this.syncSecondPageComponentToJson(e,!0)}removeSecondPageComponent(e){if(!this.script)return;let t={...this.script};switch(e){case`title`:t.secondPageTitle=!1;break;case`ppl_table1`:t.secondPagePplTable1=!1;break;case`ppl_table2`:t.secondPagePplTable2=!1;break}this.setScript(t),this.syncSecondPageComponentToJson(e,!1)}updateSpecialRule(e){if(!this.script)return;let t={...this.script},n=t.specialRules.findIndex(t=>t.id===e.id);if(n!==-1&&(t.specialRules[n]=e),t.secondPageRules){let n=t.secondPageRules.findIndex(t=>t.id===e.id);n!==-1&&(t.secondPageRules[n]=e)}this.setScript(t),this.syncSpecialRuleUpdateToJson(e)}removeSpecialRule(e){if(!this.script)return;let t={...this.script};t.specialRules=t.specialRules.filter(t=>t.id!==e.id),t.secondPageRules&&=t.secondPageRules.filter(t=>t.id!==e.id),this.setScript(t),this.syncSpecialRuleToJson(e)}addCustomJinx(e,t,n){if(!this.script)return;let r={...this.script};n&&(r.jinx[e.name]||(r.jinx[e.name]={}),r.jinx[e.name][t.name]={reason:n,display:!0,isOfficial:!1}),this.setScript(r),this.syncCustomJinxToJson(e,t,n,`add`,!0)}updateOfficialJinx(e,t,n){if(!this.script)return;let r={...this.script};if(r.jinx[e.name]?.[t.name]){let i=r.jinx[e.name][t.name];r.jinx[e.name][t.name]={...i,...n}}if(r.jinx[t.name]?.[e.name]){let i=r.jinx[t.name][e.name];r.jinx[t.name][e.name]={...i,...n}}this.setScript(r),n.reason===void 0?n.display!==void 0&&this.syncJinxDisplayToJson(e,t,n.display):this.syncCustomJinxToJson(e,t,n.reason,`add`,n.display)}removeCustomJinx(e,t){if(!this.script)return;let n={...this.script};n.jinx[e.name]&&(delete n.jinx[e.name][t.name],Object.keys(n.jinx[e.name]).length===0&&delete n.jinx[e.name]),n.jinx[t.name]&&(delete n.jinx[t.name][e.name],Object.keys(n.jinx[t.name]).length===0&&delete n.jinx[t.name]),this.setScript(n),this.syncCustomJinxToJson(e,t,``,`remove`,void 0)}syncJinxDisplayToJson(e,t,n){console.log(`开始同步相克规则display状态到JSON`,{characterA:e.name,characterB:t.name,display:n});try{let r=JSON.parse(this.originalJson),i=Array.isArray(r)?r:[],a=i.findIndex(n=>typeof n==`string`?!1:n.team===`a jinxed`&&n.id===e.id&&n.jinx&&n.jinx.some(e=>e.id===t.id));if(a>=0){let e=i[a],r=e.jinx.find(e=>e.id===t.id);r&&(n===!0&&!r.reason?(e.jinx=e.jinx.filter(e=>e.id!==t.id),e.jinx.length===0&&i.splice(a,1)):r.display=n)}else if(n===!1){let n=i.findIndex(t=>typeof t==`string`?!1:t.team===`a jinxed`&&t.id===e.id),r={id:t.id,display:!1};if(n>=0)i[n].jinx.push(r);else{let t={id:e.id,team:`a jinxed`,jinx:[r]};i.push(t)}}let o=JSON.stringify(i,null,2);console.log(`相克规则display状态同步完成`),this.setOriginalJson(o)}catch(e){console.error(`同步相克规则display状态失败:`,e)}}syncCustomJinxToJson(e,t,n,r,i){console.log(`开始同步自定义相克关系到JSON`,{characterA:e.name,characterB:t.name,action:r});try{let a=JSON.parse(this.originalJson),o=Array.isArray(a)?a:[];if(r===`add`){let r=o.findIndex(n=>typeof n==`string`?!1:n.team===`a jinxed`&&n.id===e.id&&n.jinx&&n.jinx.some(e=>e.id===t.id));if(r>=0){let e=o[r].jinx.find(e=>e.id===t.id);e&&n&&(e.reason=n,i!==void 0&&(e.display=i))}else{let r=o.findIndex(t=>typeof t==`string`?!1:t.team===`a jinxed`&&t.id===e.id),a={id:t.id};if(n&&(a.reason=n),i!==void 0&&(a.display=i),r>=0)o[r].jinx.push(a);else{let t={id:e.id,team:`a jinxed`,jinx:[a]};o.push(t)}}}else if(r===`remove`){let n=o.findIndex(t=>typeof t==`string`?!1:t.team===`a jinxed`&&t.id===e.id);if(n>=0){let e=o[n];e.jinx=e.jinx.filter(e=>e.id!==t.id),e.jinx.length===0&&o.splice(n,1)}let r=o.findIndex(e=>typeof e==`string`?!1:e.team===`a jinxed`&&e.id===t.id);if(r>=0){let t=o[r];t.jinx=t.jinx.filter(t=>t.id!==e.id),t.jinx.length===0&&o.splice(r,1)}}let s=JSON.stringify(o,null,2);console.log(`自定义相克关系同步完成`),this.setOriginalJson(s)}catch(e){console.error(`同步自定义相克关系失败:`,e)}}syncTitleInfoToJson(e){console.log(`开始同步标题信息到JSON`,e);try{let t=JSON.parse(this.originalJson),n=Array.isArray(t)?t:[],r=!1,i=n.map(t=>{if(t.id===`_meta`){r=!0;let n={...t};return e.title!==void 0&&(n.name=e.title),`titleImage`in e&&(console.log(`处理 titleImage 字段:`,e.titleImage),e.titleImage?(n.titleImage=e.titleImage,console.log(`✅ 设置 titleImage:`,e.titleImage)):(delete n.titleImage,delete n.logo,console.log(`✅ 删除 titleImage 和 logo 字段`))),e.titleImageSize!==void 0&&(n.titleImageSize=e.titleImageSize),e.useTitleImage!==void 0&&(n.use_title_image=e.useTitleImage),e.author!==void 0&&(n.author=e.author),e.playerCount!==void 0&&(e.playerCount?n.playerCount=e.playerCount:delete n.playerCount),e.secondPageTitleText!==void 0&&(n.second_page_title_text=e.secondPageTitleText),`secondPageTitleImage`in e&&(e.secondPageTitleImage?n.second_page_title_image=e.secondPageTitleImage:delete n.second_page_title_image),e.secondPageTitleFontSize!==void 0&&(n.second_page_title_font_size=e.secondPageTitleFontSize),e.secondPageTitleImageSize!==void 0&&(n.second_page_title_image_size=e.secondPageTitleImageSize),e.useSecondPageTitleImage!==void 0&&(n.use_second_page_title_image=e.useSecondPageTitleImage),console.log(`更新后的 _meta:`,n),n}return t});if(!r){console.log(`未找到 _meta 项，创建新的 _meta`);let t={id:`_meta`,name:e.title||`Custom Your Script!`,author:e.author||``};e.titleImage&&(t.titleImage=e.titleImage),e.titleImageSize!==void 0&&(t.titleImageSize=e.titleImageSize),e.playerCount&&(t.playerCount=e.playerCount),e.secondPageTitleText&&(t.second_page_title_text=e.secondPageTitleText),e.secondPageTitleImage&&(t.second_page_title_image=e.secondPageTitleImage),e.secondPageTitleFontSize!==void 0&&(t.second_page_title_font_size=e.secondPageTitleFontSize),e.secondPageTitleImageSize!==void 0&&(t.second_page_title_image_size=e.secondPageTitleImageSize),i.unshift(t),console.log(`新创建的 _meta:`,t)}let a=JSON.stringify(i,null,2);console.log(`标题信息同步完成`),this.setOriginalJson(a)}catch(e){console.error(`同步标题信息失败:`,e)}}updateSecondPageOrder(e){if(!this.script)return;let t={...this.script};t.secondPageOrder=e,this.setScript(t),this.syncSecondPageOrderToJson(e)}syncSecondPageOrderToJson(e){console.log(`开始同步第二页组件顺序到JSON`,e);try{let t=JSON.parse(this.originalJson),n=Array.isArray(t)?t:[],r=!1,i=n.map(t=>{if(t.id===`_meta`){r=!0;let n={...t};return n.second_page_order=e.join(` `),n}return t});if(!r){let t={id:`_meta`,name:`Custom Your Script!`,author:``,second_page_order:e.join(` `)};i.unshift(t)}let a=JSON.stringify(i,null,2);console.log(`第二页组件顺序同步完成`),this.setOriginalJson(a)}catch(e){console.error(`同步第二页组件顺序失败:`,e)}}syncSecondPageComponentToJson(e,t){console.log(`开始同步第二页组件配置到JSON`,{componentType:e,enabled:t});try{let n=JSON.parse(this.originalJson),r=Array.isArray(n)?n:[],i=!1,a=r.map(n=>{if(n.id===`_meta`){i=!0;let r={...n};switch(e){case`title`:r.second_page_title=t;break;case`ppl_table1`:r.second_page_ppl_table1=t;break;case`ppl_table2`:r.second_page_ppl_table2=t;break}return r}return n});if(!i){let n={id:`_meta`,name:`Custom Your Script!`,author:``};switch(e){case`title`:n.second_page_title=t;break;case`ppl_table1`:n.second_page_ppl_table1=t;break;case`ppl_table2`:n.second_page_ppl_table2=t;break}a.unshift(n)}let o=JSON.stringify(a,null,2);console.log(`第二页组件配置同步完成`),this.setOriginalJson(o)}catch(e){console.error(`同步第二页组件配置失败:`,e)}}syncSpecialRuleUpdateToJson(e){console.log(`开始同步更新特殊规则到JSON`,e);try{let t=JSON.parse(this.originalJson),n=Array.isArray(t)?t:[],r=[];r=e.sourceType===`state`||e.sourceType===`status`?n.map(t=>{if(t.id===`_meta`){let n={...t};return e.sourceType===`state`&&n.state&&(n.state=n.state.map((t,n)=>n===e.sourceIndex?{...t,stateName:e.title,stateDescription:e.content}:t)),e.sourceType===`status`&&n.status&&(n.status=n.status.map((t,n)=>n===e.sourceIndex?{...t,name:e.title,skill:e.content}:t)),n}return t}):e.sourceType===`special_rule`?n.map(t=>t.id===e.id?{...t,title:e.title,content:e.content}:t):n;let i=JSON.stringify(r,null,2);console.log(`特殊规则更新同步完成`),this.setOriginalJson(i)}catch(e){console.error(`同步特殊规则更新失败:`,e)}}syncSpecialRuleToJson(e){console.log(`开始同步删除特殊规则到JSON`,e);try{let t=JSON.parse(this.originalJson),n=Array.isArray(t)?t:[],r=[];r=e.sourceType===`state`||e.sourceType===`status`?n.map(t=>{if(t.id===`_meta`){let n={...t};return e.sourceType===`state`&&n.state&&(n.state=n.state.filter((t,n)=>n!==e.sourceIndex),n.state.length===0&&delete n.state),e.sourceType===`status`&&n.status&&(n.status=n.status.filter((t,n)=>n!==e.sourceIndex),n.status.length===0&&delete n.status),n}return t}):e.sourceType===`special_rule`?n.filter(t=>t.id!==e.id):n;let i=JSON.stringify(r,null,2);console.log(`特殊规则删除同步完成，更新originalJson`),this.setOriginalJson(i)}catch(e){console.error(`同步特殊规则删除失败:`,e)}}updateCharacterInJson(e,t){console.log(`updateCharacterInJson:`,{characterId:e,updates:t});try{let n=JSON.parse(this.originalJson),r=Array.isArray(n)?n:[],i=!1,a=r.map(n=>{let r=typeof n==`string`?{id:n}:n;if(r.id===e&&r.id!==`_meta`&&r.team!==`a jinxed`&&r.team!==`special_rule`){if(i=!0,typeof n==`string`)return K.config.officialIdParseMode?(console.log(`官方ID模式：保持简化格式，不保存自定义到JSON`),n):(console.log(`普通模式：升级为完整格式，添加自定义字段`),{id:e,...t});if(K.config.officialIdParseMode){let e={...n};(`firstNight`in t||`otherNight`in t)&&(delete e.firstNight,delete e.otherNight,console.log(`官方ID模式：移除夜间顺序自定义，使用官方数据`));let r=Object.keys(t).filter(e=>e!==`firstNight`&&e!==`otherNight`).reduce((e,n)=>({...e,[n]:t[n]}),{});return{...e,...r}}else return{...n,...t}}return n});i?(this.setOriginalJson(JSON.stringify(a,null,2)),console.log(`✅ 角色JSON已更新`)):console.warn(`⚠️ 未找到要更新的角色:`,e)}catch(e){console.error(`❌ 更新角色JSON失败:`,e)}}addCharacterToJson(e){console.log(`addCharacterToJson:`,e.id);try{let t=JSON.parse(this.originalJson),n=Array.isArray(t)?t:[];if(n.some(t=>(typeof t==`string`?t:t.id)===e.id)){console.warn(`⚠️ 角色已存在，跳过添加:`,e.id);return}let r=n.length;for(let e=n.length-1;e>=0;e--){let t=n[e],i=typeof t==`string`?{id:t}:t;if(i.team===`a jinxed`||i.team===`special_rule`)r=e;else break}if(K.config.officialIdParseMode)n.splice(r,0,e.id);else{let t={id:e.id,name:e.name,ability:e.ability,team:e.team,image:e.image};e.firstNight&&(t.firstNight=e.firstNight),e.otherNight&&(t.otherNight=e.otherNight),e.firstNightReminder&&(t.firstNightReminder=e.firstNightReminder),e.otherNightReminder&&(t.otherNightReminder=e.otherNightReminder),e.reminders&&e.reminders.length>0&&(t.reminders=e.reminders),e.remindersGlobal&&e.remindersGlobal.length>0&&(t.remindersGlobal=e.remindersGlobal),e.setup&&(t.setup=e.setup),n.splice(r,0,t)}this.setOriginalJson(JSON.stringify(n,null,2)),console.log(`✅ 角色已添加到JSON`)}catch(e){console.error(`❌ 添加角色到JSON失败:`,e)}}removeCharacterFromJson(e){console.log(`removeCharacterFromJson:`,e);try{let t=JSON.parse(this.originalJson),n=(Array.isArray(t)?t:[]).filter(t=>(typeof t==`string`?t:t.id)!==e);this.setOriginalJson(JSON.stringify(n,null,2)),console.log(`✅ 角色已从JSON删除`)}catch(e){console.error(`❌ 从JSON删除角色失败:`,e)}}replaceCharacterInJson(e,t){console.log(`replaceCharacterInJson:`,{oldId:e,newId:t.id});try{let n=JSON.parse(this.originalJson),r=Array.isArray(n)?n:[],i=r.findIndex(t=>(typeof t==`string`?t:t.id)===e);if(i===-1){console.warn(`⚠️ 未找到要替换的角色:`,e);return}if(typeof r[i]==`string`&&K.config.officialIdParseMode)r[i]=t.id;else{let e={id:t.id,name:t.name,ability:t.ability,team:t.team,image:t.image};t.firstNight&&(e.firstNight=t.firstNight),t.otherNight&&(e.otherNight=t.otherNight),t.firstNightReminder&&(e.firstNightReminder=t.firstNightReminder),t.otherNightReminder&&(e.otherNightReminder=t.otherNightReminder),t.reminders&&t.reminders.length>0&&(e.reminders=t.reminders),t.remindersGlobal&&t.remindersGlobal.length>0&&(e.remindersGlobal=t.remindersGlobal),t.setup&&(e.setup=t.setup),r[i]=e}this.setOriginalJson(JSON.stringify(r,null,2)),console.log(`✅ 角色已替换`)}catch(e){console.error(`❌ 替换角色失败:`,e)}}reorderCharactersInJson(e){console.log(`reorderCharactersInJson:`,e);try{let t=JSON.parse(this.originalJson),n=Array.isArray(t)?t:[],r=null,i=new Map,a=[],o=[];n.forEach(e=>{let t=typeof e==`string`?{id:e}:e;t.id===`_meta`?r=e:t.team===`a jinxed`?a.push(e):t.team===`special_rule`?o.push(e):i.set(t.id,e)});let s=[];r&&s.push(r),e.forEach(e=>{i.has(e)&&s.push(i.get(e))}),s.push(...a),s.push(...o),this.setOriginalJson(JSON.stringify(s,null,2)),console.log(`✅ 角色顺序已更新`)}catch(e){console.error(`❌ 重排序失败:`,e)}}syncScriptToJson_DEPRECATED(e){console.warn(`⚠️ 使用了已废弃的 syncScriptToJson 方法`)}clear(){this.script=null,this.originalJson=``,this.normalizedJson=``,this.customTitle=``,this.customAuthor=``;try{localStorage.removeItem(`botc-script-data`),console.log(`已删除 localStorage 键: botc-script-data`)}catch(e){console.warn(`删除剧本数据失败:`,e)}}saveToStorage(){try{let e={script:this.script,originalJson:this.originalJson,normalizedJson:this.normalizedJson,customTitle:this.customTitle,customAuthor:this.customAuthor,timestamp:Date.now()};localStorage.setItem(`botc-script-data`,JSON.stringify(e))}catch(e){console.warn(`保存到 localStorage 失败:`,e)}}loadFromStorage(){try{let e=localStorage.getItem(`botc-script-data`);if(e){let t=JSON.parse(e);this.script=t.script||null,this.originalJson=t.originalJson||``,this.normalizedJson=t.normalizedJson||``,this.customTitle=t.customTitle||``,this.customAuthor=t.customAuthor||``}}catch(e){console.warn(`从 localStorage 加载失败:`,e)}}get hasStoredData(){return!!this.originalJson}async loadDefaultExample(){try{let e=await fetch(`/scripts/自定义剧本/example.json`);if(e.ok){let t=await e.json();return JSON.stringify(t,null,2)}}catch(e){console.warn(`加载默认示例失败:`,e)}return JSON.stringify([{id:`_meta`,author:`Onion`,name:`Custom Your Script!`},`noble`,`shugenja`,`pixie`,`highpriestess`,`villageidiot`,`mathematician`,`oracle`,`savant`,`philosopher`,`huntsman`,`artist`,`cannibal`,`ravenkeeper`,`recluse`,`klutz`,`mutant`,`damsel`,`poisoner`,`cerenovus`,`marionette`,`boffin`,`nodashii`,`imp`,`ojo`,`fanggu`],null,2)}},Nt={"zh-CN":{"common.back":`返回`,"common.loading":`加载中...`,"common.confirm":`确认`,"common.cancel":`取消`,"common.close":`关闭`,"common.success":`成功`,"common.error":`错误`,"common.warning":`警告`,"common.save":`保存`,"app.title":`血染钟楼剧本生成器`,"app.scriptRepository":`剧本仓库`,"app.emptyState":`请在上方输入剧本 JSON 并点击"生成剧本"按钮`,"seo.title":`Onion的钟楼工具 - 血染钟楼剧本生成器`,"seo.description":`专业的血染钟楼剧本生成工具，支持自定义角色配置、剧本导出、多种游戏模式。为血染钟楼爱好者提供便捷的剧本制作体验。`,"seo.keywords":`血染钟楼,剧本生成器,BOTC,Blood on the Clocktower,桌游工具`,"seo.appTitle":`Onion的钟楼工具`,"input.jsonLabel":`剧本 JSON`,"input.jsonPlaceholder":`粘贴官方剧本制作器导出的 JSON 数据...`,"input.generateScript":`生成剧本`,"input.uploadJson":`上传 JSON`,"input.uploadImage":`点击或拖拽上传图片`,"input.reuploadImage":`点击重新上传`,"input.exportPDF":`导出PDF`,"input.exportImage":`导出图片`,"input.exportJson":`导出 JSON`,"input.shareScript":`分享剧本`,"input.clear":`清空`,"input.advancedOptions":`高级选项`,"input.titleLabel":`剧本标题（可选）`,"input.titlePlaceholder":`自定义剧本`,"input.authorLabel":`剧本作者（可选）`,"input.authorPlaceholder":`作者名称`,"input.resetSettings":`恢复初始设置`,"input.errorEmpty":`请输入剧本 JSON 数据`,"input.errorParse":`解析 JSON 失败`,"input.jsonCopied":`JSON已复制到剪贴板！`,"input.exportJsonFailed":`导出JSON失败，请重试`,"input.exportImageFailed":`导出图片失败，请重试。如果问题持续，请刷新页面后重试。`,"input.officialIdParseMode":`只以官方ID解析（双语）`,"input.officialIdParseModeWarning":`开启后无法自定义编辑角色`,"input.twoPageMode":`双页模式`,"input.twoPageModeDesc":`相克、传奇、旅行者单独一页`,"upload.selectMode":`请选择上传模式：`,"upload.simpleMode":`简单上传`,"upload.syncMode":`文件同步`,"upload.experimental":`实验性`,"upload.simpleDesc":`从本地选择 JSON 文件并导入`,"upload.selectFile":`选择文件`,"upload.syncDesc":`实时同步编辑本地 JSON 文件`,"upload.syncFeature1":`修改会自动保存到本地文件`,"upload.syncFeature2":`文件变化会自动同步到编辑器`,"upload.syncFeature3":`支持 Ctrl+S 快捷键保存`,"upload.startSync":`打开文件并同步`,"upload.dropToUpload":`拖放文件以上传 JSON`,"upload.onlyJsonFiles":`仅支持 .json 文件`,"upload.fileUploaded":`JSON 文件已上传`,"upload.fileReadError":`文件读取失败`,"fileSync.syncing":`正在同步编辑`,"fileSync.experimental":`实验性`,"fileSync.started":`已开启文件同步监听`,"fileSync.stopped":`已关闭文件同步功能`,"fileSync.saved":`已保存到本地文件`,"fileSync.fileChanged":`检测到文件变化，已自动同步`,"dialog.resetTitle":`确认恢复初始设置`,"dialog.resetMessage":`此操作将清除所有自定义设置（包括语言偏好），恢复到默认状态。是否继续？`,"dialog.resetSuccess":`设置已恢复到初始状态`,"dialog.clearTitle":`确认清空剧本`,"dialog.clearMessage":`此操作将清空当前剧本、所有角色选择和 JSON 数据。是否继续？`,"dialog.printTitle":`打印设置提示`,"dialog.printMessage":`为获得最佳打印效果，请按照以下推荐设置进行配置`,"dialog.printBrowser":`推荐使用 Chrome 或 Edge 浏览器打印`,"dialog.printDevice":`不同设备可能需要调整缩放比例`,"dialog.printPaper":`纸张大小：A4`,"dialog.printScale":`缩放比例：40-60%（推荐 53% 最佳）`,"dialog.printMargin":`页边距：无`,"dialog.printConfirm":`确认打印`,"dialog.unlockModeTitle":`解锁编辑模式`,"dialog.unlockModeMessage":`当前处于"只以id解析模式"，该模式下无法编辑角色信息。是否解锁该模式以继续编辑？`,"dialog.unlockModeNote":`解锁后，您可以自由编辑角色的名称、描述等信息，但可能无法正常双语显示。`,"dialog.unlockAndEdit":`解锁并编辑`,"dialog.unlockSuccess":`已解锁只以id解析模式`,"dialog.exportJsonTitle":`导出JSON选项`,"dialog.exportJsonMessage":`请选择导出格式：`,"dialog.exportCurrentLangJson":`完整JSON (官方角色)`,"dialog.exportCurrentLangJsonDesc":`当前语言下, 所有能找到的官方角色, 都会按照当前语言的官方描述信息来导出完整JSON, 非官方角色保留原始JSON。`,"dialog.exportOriginalJson":`原始JSON (默认) (自定义)`,"dialog.exportOriginalJsonDesc":`导出编辑框中原封不动的JSON内容, 自定义程度最高。`,"dialog.exportIdOnly":`仅官方ID (官方角色)`,"dialog.exportIdOnlyDesc":`官方角色ID将会以ID导出, 非官方角色ID的保留完整JSON, 方便双语切换。`,"export.defaultScriptName":`剧本`,"export.currentLangSuffix":`完整`,"export.originalSuffix":`原始`,"export.idOnlySuffix":`仅ID`,"export.chineseLang":`中文`,"export.englishLang":`英文`,"dialog.exportImageTitle":`导出图片`,"dialog.exportImageMessage":`请使用 I 🧡 PDF 将PDF导出为图片`,"dialog.exportImageTip":`先导出PDF，然后使用 I 🧡 PDF 在线工具将PDF转换为图片格式`,"dialog.gotoILovePDF":`前往 I 🧡 PDF`,"info.supportOfficial":`• 支持官方剧本制作器的剧本 JSON`,"info.supportFormats":`• 支持鸦木布拉夫、汀西维尔、福波斯等各个人数的剧本格式`,"info.experimentalCharacters":`• 原创角色部分未收录，请使用完整 JSON 信息`,"script.author":`剧本作者`,"script.author2":`作者`,"script.playerCount":`支持`,"team.good":`善良阵营`,"team.evil":`邪恶阵营`,"team.townsfolk":`镇民`,"team.outsider":`外来者`,"team.minion":`爪牙`,"team.demon":`恶魔`,"team.fabled":`说书人·传奇角色`,"team.loric":`说书人·洛克角色`,"team.traveler":`旅行者`,"night.first":`首个夜晚`,"night.other":`其他夜晚`,"repo.title":`剧本仓库`,"repo.subtitle":`浏览和预览血染钟楼剧本`,"repo.searchPlaceholder":`搜索剧本名称、作者...`,"repo.noResults":`未找到匹配的剧本`,"repo.backToGenerator":`返回剧本生成器`,"repo.backToRepository":`返回剧本仓库`,"repo.exportJson":`导出JSON`,"repo.author":`作者`,"repo.aboutAndThanks":`关于 & 致谢`,"repo.categoryOfficial":`官方剧本`,"repo.categoryOfficialMix":`官混剧本`,"repo.categoryCustom":`自定义剧本`,"about.title":`关于 & 致谢`,"about.aboutProject":`关于项目`,"about.projectDescription":`这是一个完全免费且开源的血染钟楼剧本生成工具，旨在为钟楼爱好者提供便捷的剧本制作体验。本项目不收取任何费用，所有功能均可免费使用。如果您觉得这个工具对您有帮助，欢迎通过捐赠支持项目的持续开发和维护。`,"about.donate":`支持我们`,"about.acknowledgments":`致谢`,"about.specialThanks":`特别鸣谢`,"about.nusClub":`NUS 桌游社`,"about.designReference":`美工设计参考`,"about.museum":`钟楼博物馆`,"about.letterClosing":`怀着感恩的心，BigOnion 敬上`,"about.artAdviceTest":`美术建议与测试：Valen`,"about.translationProofreading":`角色翻译与校对`,"about.weedinAllen":`Weedin & Allen`,"error.scriptNotFound":`未找到剧本`,"error.noScriptName":`未指定剧本名称`,"error.loadFailed":`加载剧本失败`,"error.unknownError":`未知错误`,"error.noJsonParam":`缺少 JSON 参数`,"share.title":`分享剧本给朋友`,"share.step1":`步骤1：创建 Gist`,"share.step2":`步骤2：生成分享链接`,"share.step1Description":`访问 gist.github.com，粘贴你的 JSON 数据，创建 Gist，然后复制 Raw 链接`,"share.openGist":`打开 Gist`,"share.copyJson":`复制 JSON`,"share.copyJsonTooltip":`复制当前剧本的 JSON 数据`,"share.gistUrlLabel":`Gist Raw 链接`,"share.generatedLinks":`生成的分享链接`,"share.fullScriptLink":`完整剧本链接`,"share.compressedLink":`压缩链接`,"share.compressedDescription":`使用简化格式，只包含角色 ID，链接更短`,"share.copyLink":`复制链接`,editCharacter:`编辑角色`,basicInfo:`基本信息`,characterName:`角色名称`,team:`阵营`,ability:`能力描述`,imageUrl:`图片链接`,nightOrder:`夜晚行动顺序`,firstNight:`首夜顺序`,otherNight:`其他夜晚顺序`,storytellerReminders:`说书人提醒`,firstNightReminder:`首夜提醒`,otherNightReminder:`其他夜晚提醒`,reminderTokens:`提醒标记`,addReminder:`添加提醒标记（回车确认）`,addReminderPlaceholder:`输入提醒内容`,globalReminderTokens:`全局提醒标记`,addGlobalReminder:`添加全局提醒标记（回车确认）`,addGlobalReminderPlaceholder:`输入全局提醒内容`,preview:`预览`,"title.edit":`编辑标题`,"title.editFirstPage":`编辑第一页标题`,"title.editSecondPage":`编辑第二页标题`,"title.title":`剧本标题`,"title.titleText":`标题文本`,"title.titleImage":`标题图片链接（可选）`,"title.subtitle":`副标题（可选）`,"title.author":`作者`,"title.playerCount":`支持人数（可选）`,"title.fontSize":`标题字体大小`,"title.fontSizeXs":`手机端`,"title.fontSizeSm":`平板端`,"title.fontSizeMd":`桌面端`,"title.imageSize":`图片大小`,"title.useImage":`使用图片标题`,"title.imageUrl":`图片链接`,"title.dragDropHint":`拖拽图片到此处或`,"title.clickUpload":`点击上传`,"title.save":`保存`,"title.cancel":`取消`,townsfolk:`镇民`,outsider:`外来者`,minion:`爪牙`,demon:`恶魔`,fabled:`传奇`,loric:`洛克`,traveler:`旅行者`,characterLibrary:`角色库`,searchCharacters:`搜索角色名称、能力描述...`,addToScript:`添加到剧本`,noSearchResults:`未找到匹配的角色`,noCharactersInTeam:`该阵营暂无角色`,all:`全部`,loading:`加载中...`,selectedCharacters:`已选角色`,selected:`已选`,"jinx.rule":`相克规则`,"jinx.title":`相克规则`,"jinx.section":`相克规则`,"jinx.and":`与`,"character.edit":`编辑`,"character.delete":`删除`,"character.copyJson":`复制角色JSON`,"character.jsonCopied":`角色JSON已复制到剪贴板！`,"character.jsonCopyFailed":`复制失败，请重试`,"character.replace":`更换角色`,"library.pin":`固定`,"library.unpin":`解除固定`,"ui.settings":`UI 设置`,"ui.pinDrawer":`固定抽屉`,"ui.unpinDrawer":`解除固定`,"ui.searchSettings":`搜索设置...`,"ui.noResults":`没有找到匹配的设置`,"ui.manageCustomFonts":`管理自定义字体`,"ui.resetAllSettings":`重置所有设置`,"ui.resetUISettings":`重置所有UI设置`,"dialog.resetUIMessage":`确定要重置所有UI设置吗？`,"ui.category.backgroundSettings":`背景设置`,"ui.backgroundMode":`背景模式`,"ui.backgroundMode.official":`官方背景`,"ui.backgroundMode.custom":`自定义上传`,"ui.nightOrderBackgroundLabel":`夜晚顺序背景图`,"ui.mainBackgroundLabel":`中间区域背景图`,"ui.uploadBackground":`上传背景图`,"ui.removeBackground":`移除自定义背景`,"ui.backgroundPreview":`背景预览`,"ui.backgroundTip":`提示：上传的图片将转换为 Base64 存储在本地浏览器中`,"ui.category.pageLayout":`页面布局`,"ui.enableTwoPageMode":`启用双页面模式`,"ui.twoPageModeDesc":`相克、传奇、旅行者单独一页`,"ui.titleHeight":`标题区域高度`,"ui.nightOrderBackground":`夜晚顺序背景`,"ui.purpleBackground":`紫色背景`,"ui.yellowBackground":`黄色背景`,"ui.greenBackground":`青绿色背景`,"ui.category.cardLayout":`角色卡片布局`,"ui.cardPaddingX":`卡片内边距（水平）`,"ui.cardPaddingY":`卡片内边距（竖直）`,"ui.cardGap":`卡片元素间距`,"ui.textAreaGap":`文本区域间距`,"ui.category.iconSize":`图标大小配置`,"ui.avatarSize":`角色头像`,"ui.avatarWidthMd":`头像宽度`,"ui.avatarHeightMd":`头像高度`,"ui.adjustUI":`PDF导出设置`,"ui.jinxIconSize":`相克图标`,"ui.jinxIconWidthMd":`相克图标宽度`,"ui.jinxIconHeightMd":`相克图标高度`,"ui.fabledIconSize":`传奇图标`,"ui.fabledIconWidthMd":`传奇图标宽度`,"ui.fabledIconHeightMd":`传奇图标高度`,"ui.category.fontSettings":`字体设置`,"ui.font.scriptTitle":`剧本标题字体`,"ui.font.teamDivider":`阵营分割文字字体`,"ui.font.characterName":`角色名称字体`,"ui.font.characterAbility":`角色技能描述字体`,"ui.font.jinxText":`Jinx相克规则字体`,"ui.font.stateRuleTitle":`第一页特殊规则标题字体`,"ui.font.stateRuleContent":`第一页特殊规则内容字体`,"ui.font.specialRuleTitle":`第二页特殊规则标题字体`,"ui.font.specialRuleContent":`第二页特殊规则内容字体`,"ui.font.page1Rules":`第一页特殊规则字体`,"ui.font.page2Rules":`第二页特殊规则字体`,"ui.font.titleFont":`标题字体`,"ui.font.contentFont":`内容字体`,"ui.font.titleFontSize":`标题字号`,"ui.font.contentFontSize":`内容字号`,"fontUploader.title":`自定义字体管理`,"fontUploader.uploadNew":`上传新字体`,"fontUploader.fontName":`字体名称`,"fontUploader.fontNameHelper":`例如：我的自定义字体`,"fontUploader.fontFamily":`Font Family 名称`,"fontUploader.fontFamilyHelper":`CSS中使用的字体名称，例如：MyCustomFont`,"fontUploader.selectFile":`选择字体文件`,"fontUploader.fileSelected":`已选择文件`,"fontUploader.fileHelper":`支持 .ttf, .otf, .woff, .woff2 格式，最大 15MB`,"fontUploader.addFont":`添加字体`,"fontUploader.uploading":`上传中...`,"fontUploader.uploadedFonts":`已上传的字体`,"fontUploader.fontCount":`个`,"fontUploader.close":`关闭`,"fontUploader.deleteConfirm":`确定要删除这个自定义字体吗？`,"fontUploader.errorInvalidFile":`请选择有效的字体文件 (.ttf, .otf, .woff, .woff2)`,"fontUploader.errorFileSize":`字体文件大小不能超过 15MB`,"fontUploader.errorAllFields":`请填写所有字段并选择字体文件`,"fontUploader.errorReadFile":`读取字体文件失败`,"fontUploader.errorUpload":`上传字体失败，请重试`,"decorative.page2Text":`相克规则 · 传奇角色 · 旅行者`,"credits.designTitle":`美术设计`,"credits.designers":`大聪花`,"specialRules.title":`特殊规则`,"specialRules.add":`添加特殊规则`,"specialRules.edit":`编辑特殊规则`,"specialRules.delete":`删除规则`,"specialRules.stateRules":`状态规则`,"specialRules.dialogTitle":`添加自定义规则`,"specialRules.selectType":`选择规则类型`,"specialRules.specialRule":`特殊规则`,"specialRules.stateRule":`状态规则`,"specialRules.cancel":`取消`,"specialRules.confirm":`确定`,"customJinx.addTitle":`添加自定义相克关系`,"customJinx.editTitle":`编辑相克关系`,"customJinx.characterA":`角色 A`,"customJinx.characterB":`角色 B`,"customJinx.description":`相克规则描述`,"customJinx.descriptionZh":`中文描述`,"customJinx.descriptionEn":`英文描述`,"customJinx.descriptionPlaceholder":`输入相克规则描述...`,"customJinx.selectCharacter":`选择角色`,"customJinx.selectTarget":`选择相克角色`,"customJinx.selectCharactersError":`请选择两个角色`,"customJinx.sameCharacterError":`不能选择相同的角色`,"customJinx.descriptionError":`请填写相克规则描述`,"customJinx.hint":`提示：中文使用角色名称作为主键，英文使用角色ID作为主键。请至少填写一种语言的描述。`,"customJinx.addCustomJinx":`添加自定义相克`,"customJinx.delete":`删除`,"customJinx.custom":`自定义`,"customJinx.official":`官方`,"customJinx.management":`相克关系管理`,"customJinx.addNew":`添加新相克关系`,"customJinx.add":`添加`,"customJinx.hidden":`已隐藏`,"customJinx.show":`显示`,"customJinx.hide":`隐藏`,"customJinx.edit":`编辑`,"secondPage.addComponent":`添加组件`,"secondPage.title":`第二页标题`,"secondPage.playerTable1":`玩家配置表（标准）`,"secondPage.playerTable2":`玩家配置表（6-9人）`,"playerTable.playerCount":`玩家数量`,"playerTable.townsfolk":`镇民`,"playerTable.outsider":`外来者`,"playerTable.minion":`爪牙`,"playerTable.demon":`恶魔`},en:{"common.back":`Back`,"common.loading":`Loading...`,"common.confirm":`Confirm`,"common.cancel":`Cancel`,"common.close":`Close`,"common.success":`Success`,"common.error":`Error`,"common.warning":`Warning`,"common.save":`Save`,"app.title":`Blood on the Clocktower Script Generator`,"app.scriptRepository":`Script Repo`,"app.emptyState":`Please enter script JSON above and click "Generate Script" button`,"seo.title":`Onion's Clocktower Tool - Blood on the Clocktower Script Generator`,"seo.description":`Professional Blood on the Clocktower script generation tool with custom character configuration, script export, and multiple game modes. Providing convenient script creation experience for BOTC enthusiasts.`,"seo.keywords":`Blood on the Clocktower,BOTC,Script Generator,Board Game Tool,Clocktower`,"seo.appTitle":`Onion's Clocktower Tool`,"input.jsonLabel":`Script JSON`,"input.jsonPlaceholder":`Paste JSON data exported from official script maker...`,"input.generateScript":`Generate Script`,"input.uploadJson":`Upload JSON`,"input.uploadImage":`Click or drag to upload image`,"input.reuploadImage":`Click to reupload`,"input.exportPDF":`Export PDF`,"input.exportImage":`Export Image`,"input.exportJson":`Export JSON`,"input.shareScript":`Share Script`,"input.clear":`Clear`,"input.advancedOptions":`Advanced Options`,"input.titleLabel":`Script Title (Optional)`,"input.titlePlaceholder":`Custom Script`,"input.authorLabel":`Script Author (Optional)`,"input.authorPlaceholder":`Author Name`,"input.resetSettings":`Reset to Default`,"input.errorEmpty":`Please enter script JSON data`,"input.errorParse":`Failed to parse JSON`,"input.jsonCopied":`JSON copied to clipboard!`,"input.exportJsonFailed":`Failed to export JSON, please retry`,"input.exportImageFailed":`Failed to export image, please retry. If the problem persists, please refresh the page and try again.`,"input.officialIdParseMode":`Official ID Only Parsing (Bilingual)`,"input.officialIdParseModeWarning":`Cannot edit characters when enabled`,"input.twoPageMode":`Two-Page Mode`,"input.twoPageModeDesc":`Jinx, Fabled, Traveler on separate page`,"upload.selectMode":`Please select upload mode:`,"upload.simpleMode":`Simple Upload`,"upload.syncMode":`File Sync`,"upload.experimental":`Experimental`,"upload.simpleDesc":`Select and import JSON file from local`,"upload.selectFile":`Select File`,"upload.syncDesc":`Real-time sync and edit local JSON file`,"upload.syncFeature1":`Changes auto-save to local file`,"upload.syncFeature2":`File changes auto-sync to editor`,"upload.syncFeature3":`Support Ctrl+S shortcut to save`,"upload.startSync":`Open File and Sync`,"upload.dropToUpload":`Drop file to upload JSON`,"upload.onlyJsonFiles":`Only .json files supported`,"upload.fileUploaded":`JSON file uploaded`,"upload.fileReadError":`File read failed`,"fileSync.syncing":`Syncing`,"fileSync.experimental":`Experimental`,"fileSync.started":`File sync enabled`,"fileSync.stopped":`File sync disabled`,"fileSync.saved":`Saved to local file`,"fileSync.fileChanged":`File changed, auto-synced`,"dialog.resetTitle":`Confirm Reset to Default`,"dialog.resetMessage":`This will clear all custom settings (including language preferences) and restore to default state. Continue?`,"dialog.resetSuccess":`Settings have been reset to default`,"dialog.clearTitle":`Confirm Clear Script`,"dialog.clearMessage":`This will clear the current script, all character selections, and JSON data. Continue?`,"dialog.printTitle":`Print Settings`,"dialog.printMessage":`For best print results, please configure according to the following recommendations`,"dialog.printBrowser":`Recommended: Chrome or Edge browser`,"dialog.printDevice":`Different devices may require scale adjustment`,"dialog.printPaper":`Paper size: A4`,"dialog.printScale":`Scale: 40-60% (53% optimal)`,"dialog.printMargin":`Margins: None`,"dialog.printConfirm":`Confirm Print`,"dialog.unlockModeTitle":`Unlock Edit Mode`,"dialog.unlockModeMessage":`You are currently in "Official ID Parse Mode" which prevents editing character information. Would you like to unlock this mode to continue editing?`,"dialog.unlockModeNote":`After unlocking, you can freely edit character names, descriptions, etc., but this may affect bilingual display.`,"dialog.unlockAndEdit":`Unlock & Edit`,"dialog.unlockSuccess":`Official ID parse mode unlocked`,"dialog.exportJsonTitle":`Export JSON Options`,"dialog.exportJsonMessage":`Please choose export format:`,"dialog.exportCurrentLangJson":`Full JSON (Official Characters)`,"dialog.exportCurrentLangJsonDesc":`In the current language, all official characters found will be exported as complete JSON according to the official description in the current language, unofficial characters will keep original JSON.`,"dialog.exportOriginalJson":`Original JSON (Default) (Custom)`,"dialog.exportOriginalJsonDesc":`Export the unchanged JSON content from the editor, highest customization level.`,"dialog.exportIdOnly":`Official ID Only (Official Characters)`,"dialog.exportIdOnlyDesc":`Official character IDs will be exported as IDs, characters without official IDs will keep full JSON, convenient for bilingual switching.`,"export.defaultScriptName":`Script`,"export.currentLangSuffix":`Full`,"export.originalSuffix":`Original`,"export.idOnlySuffix":`IDOnly`,"export.chineseLang":`Chinese`,"export.englishLang":`English`,"dialog.exportImageTitle":`Export Image`,"dialog.exportImageMessage":`Please use I 🧡 PDF to export PDF to images`,"dialog.exportImageTip":`First export to PDF, then use I 🧡 PDF to convert PDF to image`,"dialog.gotoILovePDF":`Go to iLovePDF`,"info.supportOfficial":`• Support official script maker JSON format`,"info.supportFormats":`• Support Trouble Brewing, Sects & Violets, Bad Moon Rising and other formats`,"info.experimentalCharacters":`• Some original characters are not included, please use full JSON data`,"script.author":`Script Author`,"script.author2":`Author`,"script.playerCount":`Supports`,"team.good":`Good`,"team.evil":`Evil`,"team.townsfolk":`Townsfolk`,"team.outsider":`Outsider`,"team.minion":`Minion`,"team.demon":`Demon`,"team.fabled":`Fabled`,"team.loric":`Loric`,"team.traveler":`Traveler`,"night.first":`First Night`,"night.other":`Other Nights`,"repo.title":`Script Repository`,"repo.subtitle":`Browse and preview Blood on the Clocktower scripts`,"repo.searchPlaceholder":`Search script name, author...`,"repo.noResults":`No matching scripts found`,"repo.backToGenerator":`Back to Generator`,"repo.backToRepository":`Back to Repository`,"repo.exportJson":`Export JSON`,"repo.author":`Author`,"repo.aboutAndThanks":`About & Thanks`,"repo.categoryOfficial":`Official Scripts`,"repo.categoryOfficialMix":`Official Mix`,"repo.categoryCustom":`Custom Scripts`,"about.title":`About & Thanks`,"about.aboutProject":`About the Project`,"about.projectDescription":`This is a free, open-source Blood on the Clocktower script generator for players to easily create scripts. No fees apply, and all features are free to use. If you find it helpful, you can donate to support the project's development and maintenance.`,"about.donate":`Support Us`,"about.acknowledgments":`Acknowledgments`,"about.thankValen":`Valen - Art Advice & Bug Fixes`,"about.specialThanks":`Special Thanks`,"about.nusClub":`NUS Ravenswood Bluff Town`,"about.designReference":`Design Reference`,"about.museum":`Clocktower Museum`,"about.letterClosing":`With a grateful heart, BigOnion`,"about.artAdviceTest":`Art Advice & Test: Valen`,"about.translationProofreading":`Translation and Proofreading`,"about.weedinAllen":`Weedin & Allen`,"error.scriptNotFound":`Script not found`,"error.noScriptName":`No script name specified`,"error.loadFailed":`Failed to load script`,"error.unknownError":`Unknown error`,"error.noJsonParam":`Missing JSON parameter`,"share.title":`Share Script with Friends`,"share.step1":`Step 1: Create Gist`,"share.step2":`Step 2: Generate Share Link`,"share.step1Description":`Visit gist.github.com, paste your JSON data, create a Gist, then copy the Raw link`,"share.openGist":`Open Gist`,"share.copyJson":`Copy JSON`,"share.copyJsonTooltip":`Copy current script JSON data`,"share.gistUrlLabel":`Gist Raw Link`,"share.generatedLinks":`Generated Share Links`,"share.fullScriptLink":`Full Script Link`,"share.compressedLink":`Compressed Link`,"share.compressedDescription":`Uses simplified format with only character IDs, shorter URL`,"share.copyLink":`Copy Link`,editCharacter:`Edit Character`,basicInfo:`Basic Information`,characterName:`Character Name`,team:`Team`,ability:`Ability Description`,imageUrl:`Image URL`,nightOrder:`Night Action Order`,firstNight:`First Night Order`,otherNight:`Other Nights Order`,storytellerReminders:`Storyteller Reminders`,firstNightReminder:`First Night Reminder`,otherNightReminder:`Other Nights Reminder`,reminderTokens:`Reminder Tokens`,addReminder:`Add Reminder Token (Press Enter)`,addReminderPlaceholder:`Enter reminder text`,globalReminderTokens:`Global Reminder Tokens`,addGlobalReminder:`Add Global Reminder Token (Press Enter)`,addGlobalReminderPlaceholder:`Enter global reminder text`,preview:`Preview`,"title.edit":`Edit Title`,"title.editFirstPage":`Edit First Page Title`,"title.editSecondPage":`Edit Second Page Title`,"title.title":`Script Title`,"title.titleText":`Title Text`,"title.titleImage":`Title Image URL (Optional)`,"title.subtitle":`Subtitle (Optional)`,"title.author":`Author`,"title.playerCount":`Player Count (Optional)`,"title.fontSize":`Title Font Size`,"title.fontSizeXs":`Mobile`,"title.fontSizeSm":`Tablet`,"title.fontSizeMd":`Desktop`,"title.imageSize":`Image Size`,"title.useImage":`Use Image Title`,"title.imageUrl":`Image URL`,"title.dragDropHint":`Drag image here or`,"title.clickUpload":`click to upload`,"title.save":`Save`,"title.cancel":`Cancel`,townsfolk:`Townsfolk`,outsider:`Outsider`,minion:`Minion`,demon:`Demon`,fabled:`Fabled`,loric:`Loric`,traveler:`Traveler`,characterLibrary:`Character Library`,searchCharacters:`Search character name, ability...`,addToScript:`Add to Script`,noSearchResults:`No matching characters found`,noCharactersInTeam:`No characters in this team`,all:`All`,loading:`Loading...`,selectedCharacters:`Selected Characters`,selected:`Selected`,"jinx.rule":`Jinx Rule`,"jinx.title":`Jinx Rules`,"jinx.section":`Jinx Rules`,"jinx.and":`and`,"character.edit":`Edit`,"character.delete":`Delete`,"character.copyJson":`Copy Character JSON`,"character.jsonCopied":`Character JSON copied to clipboard!`,"character.jsonCopyFailed":`Copy failed, please try again`,"character.replace":`Replace Character`,"library.pin":`Pin`,"library.unpin":`Unpin`,"ui.settings":`UI Settings`,"ui.pinDrawer":`Pin Drawer`,"ui.unpinDrawer":`Unpin Drawer`,"ui.searchSettings":`Search settings...`,"ui.noResults":`No matching settings found`,"ui.manageCustomFonts":`Manage Custom Fonts`,"ui.resetAllSettings":`Reset All Settings`,"ui.resetUISettings":`Reset All UI Settings`,"dialog.resetUIMessage":`Are you sure you want to reset all UI settings?`,"ui.category.backgroundSettings":`Background Settings`,"ui.backgroundMode":`Background Mode`,"ui.backgroundMode.official":`Official Background`,"ui.backgroundMode.custom":`Custom Upload`,"ui.nightOrderBackgroundLabel":`Night Order Background`,"ui.mainBackgroundLabel":`Main Area Background`,"ui.uploadBackground":`Upload Background`,"ui.removeBackground":`Remove Custom Background`,"ui.backgroundPreview":`Background Preview`,"ui.backgroundTip":`Tip: Uploaded images will be converted to Base64 and stored locally`,"ui.category.pageLayout":`Page Layout`,"ui.enableTwoPageMode":`Enable Two-Page Mode`,"ui.twoPageModeDesc":`Jinx, fabled, travelers on separate page`,"ui.titleHeight":`Title Area Height`,"ui.nightOrderBackground":`Night Order Background`,"ui.purpleBackground":`Purple Background`,"ui.yellowBackground":`Yellow Background`,"ui.greenBackground":`Green Background`,"ui.category.cardLayout":`Character Card Layout`,"ui.cardPaddingX":`Card Padding (Horizontal)`,"ui.cardPaddingY":`Card Padding (Vertical)`,"ui.cardGap":`Card Element Gap`,"ui.textAreaGap":`Text Area Gap`,"ui.category.iconSize":`Icon Size Configuration`,"ui.avatarSize":`Character Avatar`,"ui.adjustUI":` Adjust Export Settings `,"ui.avatarWidthMd":`Avatar Width`,"ui.avatarHeightMd":`Avatar Height`,"ui.jinxIconSize":`Jinx Icon`,"ui.jinxIconWidthMd":`Jinx Icon Width`,"ui.jinxIconHeightMd":`Jinx Icon Height`,"ui.fabledIconSize":`Fabled Icon`,"ui.fabledIconWidthMd":`Fabled Icon Width`,"ui.fabledIconHeightMd":`Fabled Icon Height`,"ui.category.fontSettings":`Font Settings`,"ui.font.scriptTitle":`Script Title Font`,"ui.font.teamDivider":`Team Divider Font`,"ui.font.characterName":`Character Name Font`,"ui.font.characterAbility":`Character Ability Font`,"ui.font.jinxText":`Jinx Rule Font`,"ui.font.stateRuleTitle":`Page 1 Rule Title Font`,"ui.font.stateRuleContent":`Page 1 Rule Content Font`,"ui.font.specialRuleTitle":`Page 2 Rule Title Font`,"ui.font.specialRuleContent":`Page 2 Rule Content Font`,"ui.font.page1Rules":`Page 1 Special Rules Font`,"ui.font.page2Rules":`Page 2 Special Rules Font`,"ui.font.titleFont":`Title Font`,"ui.font.contentFont":`Content Font`,"ui.font.titleFontSize":`Title Font Size`,"ui.font.contentFontSize":`Content Font Size`,"fontUploader.title":`Custom Font Manager`,"fontUploader.uploadNew":`Upload New Font`,"fontUploader.fontName":`Font Name`,"fontUploader.fontNameHelper":`e.g., My Custom Font`,"fontUploader.fontFamily":`Font Family Name`,"fontUploader.fontFamilyHelper":`CSS font family name, e.g., MyCustomFont`,"fontUploader.selectFile":`Select Font File`,"fontUploader.fileSelected":`File Selected`,"fontUploader.fileHelper":`Supports .ttf, .otf, .woff, .woff2 formats, max 15MB`,"fontUploader.addFont":`Add Font`,"fontUploader.uploading":`Uploading...`,"fontUploader.uploadedFonts":`Uploaded Fonts`,"fontUploader.fontCount":``,"fontUploader.close":`Close`,"fontUploader.deleteConfirm":`Are you sure you want to delete this custom font?`,"fontUploader.errorInvalidFile":`Please select a valid font file (.ttf, .otf, .woff, .woff2)`,"fontUploader.errorFileSize":`Font file size cannot exceed 15MB`,"fontUploader.errorAllFields":`Please fill in all fields and select a font file`,"fontUploader.errorReadFile":`Failed to read font file`,"fontUploader.errorUpload":`Failed to upload font, please try again`,"decorative.page2Text":`Jinx Rules · Fabled · Travelers`,"credits.designTitle":`Design`,"credits.designers":`Onion`,"specialRules.title":`Special Rules`,"specialRules.add":`Add Special Rule`,"specialRules.edit":`Edit Special Rule`,"specialRules.delete":`Delete Rule`,"specialRules.stateRules":`State Rules`,"specialRules.dialogTitle":`Add Custom Rule`,"specialRules.selectType":`Select Rule Type`,"specialRules.specialRule":`Special Rule`,"specialRules.stateRule":`State Rule`,"specialRules.cancel":`Cancel`,"specialRules.confirm":`Confirm`,"customJinx.addTitle":`Add Custom Jinx`,"customJinx.editTitle":`Edit Jinx`,"customJinx.characterA":`Character A`,"customJinx.characterB":`Character B`,"customJinx.description":`Jinx Rule Description`,"customJinx.descriptionZh":`Chinese Description`,"customJinx.descriptionEn":`English Description`,"customJinx.descriptionPlaceholder":`Enter jinx rule description...`,"customJinx.selectCharacter":`Select Character`,"customJinx.selectTarget":`Select Target Character`,"customJinx.selectCharactersError":`Please select two characters`,"customJinx.sameCharacterError":`Cannot select the same character`,"customJinx.descriptionError":`Please fill in the jinx rule description`,"customJinx.hint":`Hint: Chinese uses character names as keys, English uses character IDs. Please fill in at least one language description.`,"customJinx.addCustomJinx":`Add Custom Jinx`,"customJinx.delete":`Delete`,"customJinx.custom":`Custom`,"customJinx.official":`Official`,"customJinx.management":`Jinx Management`,"customJinx.addNew":`Add New Jinx`,"customJinx.add":`Add`,"customJinx.hidden":`Hidden`,"customJinx.show":`Show`,"customJinx.hide":`Hide`,"customJinx.edit":`Edit`,"secondPage.addComponent":`Add Component`,"secondPage.title":`Second Page Title`,"secondPage.playerTable1":`Player Configuration (Standard)`,"secondPage.playerTable2":`Player Configuration (6-9 Players)`,"playerTable.playerCount":`Player Count`,"playerTable.townsfolk":`Townsfolk`,"playerTable.outsider":`Outsider`,"playerTable.minion":`Minion`,"playerTable.demon":`Demon`}};var Y=e(oe()),Pt=(0,G.createContext)(null);const Ft=C(({children:e})=>{let t={t:e=>{let t=K.language;return Nt[t][e]||e},language:K.language,setLanguage:e=>{K.setLanguage(e)}};return(0,Y.jsx)(Pt.Provider,{value:t,children:e})}),X=()=>{let e=(0,G.useContext)(Pt);if(!e)throw Error(`useTranslation must be used within I18nProvider`);return e};var It=null,Lt=0,Rt=()=>(It||(It=document.createElement(`div`),It.className=`mui-alert-wrapper`,It.style.cssText=`
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 9999;
      pointer-events: none;
      display: flex;
      flex-direction: column;
      gap: 8px;
    `,document.body.appendChild(It)),It),zt=e=>{let t=document.createElement(`span`);t.style.cssText=`
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    margin-right: 6px;
    margin-top: 2px;
    flex-shrink: 0;
  `;let n={success:{html:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm3.5 6.1L7.1 10.4c-.2.2-.4.3-.7.3s-.5-.1-.7-.3L3.5 8.2c-.4-.4-.4-1 0-1.4s1-.4 1.4 0L6.4 8.3l3.7-3.7c.4-.4 1-.4 1.4 0s.4 1 0 1.5z"/>
      </svg>`,color:`#52c41a`},error:{html:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm3.5 10.1c.4.4.4 1 0 1.4-.2.2-.4.3-.7.3s-.5-.1-.7-.3L8 9.4l-2.1 2.1c-.2.2-.4.3-.7.3s-.5-.1-.7-.3c-.4-.4-.4-1 0-1.4L6.6 8 4.5 5.9c-.4-.4-.4-1 0-1.4s1-.4 1.4 0L8 6.6l2.1-2.1c.4-.4 1-.4 1.4 0s.4 1 0 1.4L9.4 8l2.1 2.1z"/>
      </svg>`,color:`#ff4d4f`},warning:{html:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8.7.1c-.4-.2-.9-.2-1.3 0-.2.1-.4.2-.5.4L.2 13.2c-.2.4-.2.8 0 1.2.1.2.3.3.5.4.2.1.4.1.6.1h13.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.4.2-.4.2-.8 0-1.2L8.2.5c-.1-.2-.3-.3-.5-.4zM9 12H7v-2h2v2zm0-3H7V5h2v4z"/>
      </svg>`,color:`#faad14`},info:{html:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm1 12H7V7h2v5zm0-6H7V4h2v2z"/>
      </svg>`,color:`#1890ff`}},r=n[e]||n.success;return t.innerHTML=r.html,t.style.color=r.color,t},Bt=e=>{let t={success:`#52c41a40`,error:`#ff4d4f40`,warning:`#faad1440`,info:`#1890ff40`};return t[e]||t.success};const Vt=(e,t=2500,n)=>{let r=n?.kind??`success`,i=n?.zIndex??9999,a=t,o=Rt();o.style.zIndex=String(i);let s=document.createElement(`div`);s.className=`mui-alert-item`,s.setAttribute(`data-alert-id`,String(++Lt)),s.style.cssText=`
    max-width: 500px;
    width: fit-content;
    border: 1px solid ${Bt(r)};
    border-radius: 6px;
    box-shadow: 0 3px 6px -4px rgba(0,0,0,.12), 0 6px 16px 0 rgba(0,0,0,.08), 0 9px 28px 8px rgba(0,0,0,.05);
    font-size: 14px;
    font-weight: 400;
    padding: 10px 16px;
    display: inline-flex;
    align-items: flex-start;
    gap: 8px;
    cursor: pointer;
    pointer-events: auto;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    line-height: 1.5715;
    background-color: #ffffff;
    color: #000000d9;
    opacity: 0;
    transform: translateY(-30px) scale(0.9);
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    box-sizing: border-box;
  `;let c=zt(r),l=document.createElement(`span`);l.textContent=e,l.style.cssText=`
    flex: 1;
    min-width: 0;
    text-align: left;
    word-wrap: break-word;
    word-break: break-word;
    white-space: normal;
  `,s.appendChild(c),s.appendChild(l),o.appendChild(s),requestAnimationFrame(()=>{s.style.opacity=`1`,s.style.transform=`translateY(0) scale(1)`});let u=()=>{s.style.opacity=`0`,s.style.transform=`translateY(-20px) scale(0.9)`,setTimeout(()=>{s.parentNode&&(o.removeChild(s),o.children.length===0&&(document.body.removeChild(o),It=null))},300)};return s.addEventListener(`click`,u),a>0&&setTimeout(u,a),u},Ht=(e,t=2500)=>Vt(e,t,{kind:`success`}),Ut=(e,t=3e3)=>Vt(e,t,{kind:`error`}),Wt=(e,t=2500)=>Vt(e,t,{kind:`warning`}),Gt=(e,t=2e3)=>Vt(e,t,{kind:`info`});var Kt=null,qt=null;const Jt=e=>{Kt=e},Yt=()=>{Kt=null},Xt=e=>{qt=e},Zt=()=>{qt=null},Qt=(e=`已保存到本地存储`,t=2e3)=>Vt(`${e}`,t,{kind:`success`});var $t=e=>{(e.ctrlKey||e.metaKey)&&e.key===`s`&&(e.preventDefault(),qt?(qt(),console.log(`快捷键 Ctrl+S 已触发文件同步保存（跳过 localStorage）`)):Kt&&(Kt(),console.log(`快捷键 Ctrl+S 已触发 localStorage 保存`)))};const en=()=>{window.addEventListener(`keydown`,$t),console.log(`全局快捷键已初始化`)},tn=()=>{window.removeEventListener(`keydown`,$t),Kt=null,console.log(`全局快捷键已清理`)};var nn=C(()=>{let{language:e,setLanguage:t}=X(),[n,r]=(0,G.useState)(null),i=!!n,a=e=>{r(e.currentTarget)},o=()=>{r(null)},s=e=>{t(e),o()},c=e===`zh-CN`?`English`:`中文`;return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(A,{onClick:a,startIcon:(0,Y.jsx)(Pe,{}),size:`small`,sx:{color:`inherit`,textTransform:`none`,fontSize:`0.9rem`,"&:hover":{backgroundColor:`rgba(0, 0, 0, 0.04)`}},"aria-controls":i?`language-menu`:void 0,"aria-haspopup":`true`,"aria-expanded":i?`true`:void 0,children:c}),(0,Y.jsxs)(ze,{id:`language-menu`,anchorEl:n,open:i,onClose:o,disableScrollLock:!0,anchorOrigin:{vertical:`bottom`,horizontal:`right`},transformOrigin:{vertical:`top`,horizontal:`right`},children:[(0,Y.jsxs)(w,{onClick:()=>s(`zh-CN`),children:[(0,Y.jsx)(tt,{children:e===`zh-CN`?(0,Y.jsx)(re,{fontSize:`small`}):(0,Y.jsx)(`span`,{style:{width:20}})}),(0,Y.jsx)(ft,{children:`简体中文`})]}),(0,Y.jsxs)(w,{onClick:()=>s(`en`),children:[(0,Y.jsx)(tt,{children:e===`en`?(0,Y.jsx)(re,{fontSize:`small`}):(0,Y.jsx)(`span`,{style:{width:20}})}),(0,Y.jsx)(ft,{children:`English`})]})]})]})}),rn=M(e=>(0,Y.jsx)(Ce,{focusVisibleClassName:`.Mui-focusVisible`,disableRipple:!0,...e}))(({theme:e})=>({width:42,height:26,padding:0,"& .MuiSwitch-switchBase":{padding:0,margin:2,transitionDuration:`300ms`,"&.Mui-checked":{transform:`translateX(16px)`,color:`#fff`,"& + .MuiSwitch-track":{backgroundColor:`#65C466`,opacity:1,border:0,...e.applyStyles(`dark`,{backgroundColor:`#2ECA45`})},"&.Mui-disabled + .MuiSwitch-track":{opacity:.5}},"&.Mui-focusVisible .MuiSwitch-thumb":{color:`#33cf4d`,border:`6px solid #fff`},"&.Mui-disabled .MuiSwitch-thumb":{color:e.palette.grey[100],...e.applyStyles(`dark`,{color:e.palette.grey[600]})},"&.Mui-disabled + .MuiSwitch-track":{opacity:.7,...e.applyStyles(`dark`,{opacity:.3})}},"& .MuiSwitch-thumb":{boxSizing:`border-box`,width:22,height:22},"& .MuiSwitch-track":{borderRadius:26/2,backgroundColor:`#E9E9EA`,opacity:1,transition:e.transitions.create([`background-color`],{duration:500}),...e.applyStyles(`dark`,{backgroundColor:`#39393D`})}})),an=({open:e,onClose:t,onSimpleUpload:n,onFileSyncStart:r})=>{let{t:i}=X(),a=e=>{let r=e.target.files?.[0];if(r){let e=new FileReader;e.onload=e=>{let r=e.target?.result;n(r),t()},e.readAsText(r)}},o=async()=>{try{if(!(`showOpenFilePicker`in window)){alert(`您的浏览器不支持文件同步功能，请使用最新版 Chrome/Edge 浏览器`);return}let[e]=await window.showOpenFilePicker({types:[{description:`JSON Files`,accept:{"application/json":[`.json`]}}],multiple:!1}),n=await(await e.getFile()).text();r(e,n),t()}catch(e){e.name!==`AbortError`&&(console.error(`文件同步启动失败:`,e),alert(`文件同步启动失败，请重试`))}};return(0,Y.jsxs)(V,{open:e,onClose:t,maxWidth:`sm`,fullWidth:!0,disableScrollLock:!0,PaperProps:{sx:{borderRadius:3,boxShadow:`0 12px 48px rgba(0,0,0,0.15)`}},children:[(0,Y.jsxs)(H,{sx:{display:`flex`,alignItems:`center`,gap:1.5,pb:2,pt:3,px:3},children:[(0,Y.jsx)(st,{sx:{fontSize:32,color:`#1976d2`}}),(0,Y.jsx)(I,{variant:`h6`,component:`span`,sx:{fontWeight:700,fontSize:`1.25rem`},children:i(`input.uploadJson`)})]}),(0,Y.jsxs)(W,{sx:{px:3,pb:3},children:[(0,Y.jsx)(I,{variant:`body2`,sx:{color:`#666`,mb:3,lineHeight:1.7},children:i(`upload.selectMode`)}),(0,Y.jsxs)(R,{component:`label`,sx:{display:`block`,mb:2,p:2.5,borderRadius:2,border:`2px solid #e3f2fd`,backgroundColor:`#f5f5f5`,cursor:`pointer`,transition:`all 0.2s`,"&:hover":{borderColor:`#1976d2`,backgroundColor:`#e3f2fd`}},children:[(0,Y.jsxs)(R,{sx:{display:`flex`,alignItems:`center`,gap:1.5,mb:1},children:[(0,Y.jsx)(st,{sx:{color:`#1976d2`,fontSize:24}}),(0,Y.jsx)(I,{variant:`subtitle1`,sx:{fontWeight:600,color:`#1976d2`},children:i(`upload.simpleMode`)})]}),(0,Y.jsx)(I,{variant:`body2`,sx:{color:`#666`,fontSize:`0.9rem`},children:i(`upload.simpleDesc`)}),(0,Y.jsx)(`input`,{type:`file`,accept:`.json`,hidden:!0,onChange:a})]}),(0,Y.jsxs)(R,{onClick:o,sx:{p:2.5,borderRadius:2,border:`2px solid #fff3e0`,backgroundColor:`#f5f5f5`,cursor:`pointer`,transition:`all 0.2s`,"&:hover":{borderColor:`#ff9800`,backgroundColor:`#fff3e0`}},children:[(0,Y.jsxs)(R,{sx:{display:`flex`,alignItems:`center`,gap:1.5,mb:1},children:[(0,Y.jsx)(We,{sx:{color:`#ff9800`,fontSize:24}}),(0,Y.jsx)(I,{variant:`subtitle1`,sx:{fontWeight:600,color:`#ff9800`},children:i(`upload.syncMode`)}),(0,Y.jsx)(qe,{label:i(`upload.experimental`),size:`small`,sx:{height:20,fontSize:`0.65rem`,backgroundColor:`#ff9800`,color:`#fff`,fontWeight:`bold`}})]}),(0,Y.jsx)(I,{variant:`body2`,sx:{color:`#666`,fontSize:`0.9rem`,mb:1},children:i(`upload.syncDesc`)}),(0,Y.jsxs)(R,{sx:{pl:.5},children:[(0,Y.jsxs)(I,{variant:`body2`,sx:{mb:.3,color:`#757575`,fontSize:`0.85rem`},children:[`• `,i(`upload.syncFeature1`)]}),(0,Y.jsxs)(I,{variant:`body2`,sx:{mb:.3,color:`#757575`,fontSize:`0.85rem`},children:[`• `,i(`upload.syncFeature2`)]}),(0,Y.jsxs)(I,{variant:`body2`,sx:{color:`#757575`,fontSize:`0.85rem`},children:[`• `,i(`upload.syncFeature3`)]})]})]})]}),(0,Y.jsx)(xt,{sx:{px:3,py:2.5,backgroundColor:`#fafafa`},children:(0,Y.jsx)(A,{onClick:t,sx:{px:3,py:1,fontWeight:500,color:`#757575`,"&:hover":{backgroundColor:`#eeeeee`}},children:i(`common.cancel`)})})]})},on=({fileName:e,onClose:t})=>{let{t:n}=X();return(0,Y.jsxs)(R,{sx:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,backgroundColor:`#1976d2`,color:`#fff`,px:2,py:1.5,borderRadius:`4px 4px 0 0`,boxShadow:`0 2px 4px rgba(0,0,0,0.1)`,gap:2},children:[(0,Y.jsxs)(R,{sx:{display:`flex`,alignItems:`center`,gap:1.5,flex:1,minWidth:0},children:[(0,Y.jsx)(We,{sx:{animation:`rotate 2s linear infinite`,"@keyframes rotate":{"0%":{transform:`rotate(0deg)`},"100%":{transform:`rotate(360deg)`}},flexShrink:0}}),(0,Y.jsxs)(I,{variant:`body2`,sx:{fontWeight:600,fontSize:`0.9rem`,flex:1,minWidth:0,overflow:`hidden`,textOverflow:`ellipsis`,whiteSpace:`nowrap`},children:[n(`fileSync.syncing`),`: `,(0,Y.jsx)(`strong`,{children:e})]}),(0,Y.jsx)(qe,{label:n(`fileSync.experimental`),size:`small`,sx:{height:24,fontSize:`0.7rem`,backgroundColor:`#ff9800`,color:`#fff`,fontWeight:`bold`,flexShrink:0}})]}),(0,Y.jsx)(B,{size:`small`,onClick:t,sx:{color:`#fff`,"&:hover":{backgroundColor:`rgba(255, 255, 255, 0.2)`},flexShrink:0},"aria-label":n(`common.close`),children:(0,Y.jsx)(L,{})})]})},sn=C(({onGenerate:e,onExportPDF:t,onExportImage:n,onExportJson:r,onShare:i,onClear:a,onOpenUISettings:o,onAddCustomRule:s,onOpenAboutDialog:c,onJsonChange:l,hasScript:u,currentJson:d,jsonParseError:f})=>{let p=b(),{t:m}=X(),[h,g]=(0,G.useState)(``),[_,v]=(0,G.useState)(``),[y,x]=(0,G.useState)(``),[S,C]=(0,G.useState)(``),[w,T]=(0,G.useState)(!1),[E,O]=(0,G.useState)(!1),[ee,te]=(0,G.useState)(200),[j,ne]=(0,G.useState)(!1),[re,ie]=(0,G.useState)(!1),[oe,se]=(0,G.useState)(!1),[M,ce]=(0,G.useState)(!1),[N,P]=(0,G.useState)(null),[le,ue]=(0,G.useState)(``),F=(0,G.useRef)(null),de=(0,G.useRef)(0),L=(0,G.useRef)(null),z=(0,G.useRef)(!1),B=(0,G.useRef)(K.config.officialIdParseMode),me=(0,G.useRef)(0),ge=(0,G.useRef)(0),ve=(0,G.useRef)(0);(0,G.useEffect)(()=>{let t=K.config.officialIdParseMode,n=B.current;if(t!==n&&d&&d.trim()){console.log(`官方ID解析模式变化，重新生成剧本`,{from:n,to:t});try{e(d)}catch(e){console.error(`重新生成剧本失败:`,e)}}B.current=t},[K.config.officialIdParseMode,d,e]),(0,G.useEffect)(()=>{d&&d!==h&&(z.current=!0,g(d),setTimeout(()=>{z.current=!1},100))},[d]),(0,G.useCallback)(e=>{L.current&&clearTimeout(L.current),L.current=setTimeout(()=>{l&&!z.current&&l(e)},500)},[l]);let ye=(0,G.useCallback)(async()=>{if(!(!N||!M))try{let e=await N.createWritable();await e.write(h),await e.close(),Ht(m(`fileSync.saved`),1500),console.log(`已保存到本地文件:`,le)}catch(e){console.error(`保存到本地文件失败:`,e),Wt(`保存到本地文件失败`,2e3)}},[N,M,h,le,m]),be=(0,G.useCallback)(async()=>{if(!(!N||!M))try{let e=await N.getFile(),t=e.lastModified;if(de.current&&t>de.current){let t=await e.text();t!==h&&(z.current=!0,g(t),l&&l(t),Gt(m(`fileSync.fileChanged`),1500),console.log(`检测到文件变化，已同步`),setTimeout(()=>{z.current=!1},100))}de.current=t}catch(e){console.error(`检测文件变化失败:`,e)}},[N,M,h,l,m]);(0,G.useEffect)(()=>{if(M&&N)return F.current=window.setInterval(be,2e3),()=>{F.current&&=(clearInterval(F.current),null)}},[M,N,be]),(0,G.useEffect)(()=>{if(M&&N)return Xt(ye),()=>{Zt()}},[M,N,ye]),(0,G.useEffect)(()=>()=>{L.current&&clearTimeout(L.current),F.current&&clearInterval(F.current),Zt()},[]);let xe=e=>{g(e)},Se=e=>{e.preventDefault(),e.stopPropagation(),ve.current+=1,e.dataTransfer.items&&e.dataTransfer.items.length>0&&se(!0)},Ce=e=>{e.preventDefault(),e.stopPropagation()},we=e=>{e.preventDefault(),e.stopPropagation(),--ve.current,ve.current===0&&se(!1)},Te=e=>{e.preventDefault(),e.stopPropagation(),ve.current=0,se(!1);let t=e.dataTransfer.files;if(t&&t.length>0){let e=t[0];if(!e.name.endsWith(`.json`)){Wt(m(`upload.onlyJsonFiles`),2500);return}let n=new FileReader;n.onload=e=>{let t=e.target?.result;xe(t),Ht(m(`upload.fileUploaded`),2e3)},n.onerror=()=>{Wt(m(`upload.fileReadError`),2500)},n.readAsText(e)}},Ee=()=>{try{if(C(``),!h.trim()){C(m(`input.errorEmpty`));return}l&&!z.current&&l(h),e(h,_,y)}catch(e){C(e instanceof Error?e.message:m(`input.errorParse`))}},De=()=>{T(!0)},Oe=async()=>{try{J.clear(),K.resetToDefault(),await q.resetToDefault(),[`botc-script-data`,`botc-app-config`,`botc-ui-config`].forEach(e=>{try{localStorage.removeItem(e),console.log(`✓ 已删除 localStorage 键: ${e}`)}catch(t){console.error(`删除 ${e} 失败:`,t)}}),g(``),v(``),x(``),C(``),T(!1),console.log(`🎉 所有设置和数据已重置！`),setTimeout(()=>{window.location.reload()},500)}catch(e){console.error(`重置过程中出现错误:`,e),alert(`重置失败，请刷新页面后重试`),T(!1)}},ke=()=>{T(!1)},Ae=e=>{xe(e)},Me=async(e,t)=>{try{P(e),ue(e.name),ce(!0),de.current=(await e.getFile()).lastModified,xe(t),Ht(m(`fileSync.started`),2e3),console.log(`文件同步已启动:`,e.name)}catch(e){console.error(`启动文件同步失败:`,e),Wt(`启动文件同步失败`,2e3)}},Ne=()=>{ce(!1),P(null),ue(``),de.current=0,F.current&&=(clearInterval(F.current),null),Zt(),Gt(m(`fileSync.stopped`),2e3),console.log(`文件同步已关闭`)},Pe=()=>{u?O(!0):Fe()},Fe=()=>{v(``),x(``),C(``),O(!1),a&&a()},Ie=()=>{O(!1)},Le=e=>{e.preventDefault(),ne(!0),me.current=e.clientY,ge.current=ee};return(0,G.useEffect)(()=>{if(!j)return;let e=e=>{let t=e.clientY-me.current,n=Math.max(100,Math.min(800,ge.current+t));te(n)},t=()=>{ne(!1)};return document.addEventListener(`mousemove`,e),document.addEventListener(`mouseup`,t),()=>{document.removeEventListener(`mousemove`,e),document.removeEventListener(`mouseup`,t)}},[j]),(0,Y.jsxs)(Ct,{elevation:3,onDragEnter:Se,onDragOver:Ce,onDragLeave:we,onDrop:Te,sx:{p:{xs:2,sm:3,md:4},mb:3,backgroundColor:oe?`#f5f5f5`:`#fefefe`,borderRadius:2,border:oe?`3px dashed #9e9e9e`:`3px solid transparent`,transition:`all 0.3s`,position:`relative`,"@media print":{display:`none`}},children:[oe&&(0,Y.jsx)(R,{sx:{position:`absolute`,top:0,left:0,right:0,bottom:0,display:`flex`,alignItems:`center`,justifyContent:`center`,backgroundColor:`rgba(0, 0, 0, 0.05)`,pointerEvents:`none`,zIndex:9999,borderRadius:2},children:(0,Y.jsxs)(R,{sx:{display:`flex`,flexDirection:`column`,alignItems:`center`,gap:2,p:4,backgroundColor:`#ffffff`,borderRadius:3,border:`2px solid #e0e0e0`,boxShadow:`0 4px 12px rgba(0,0,0,0.08)`},children:[(0,Y.jsx)(st,{sx:{fontSize:64,color:`#757575`}}),(0,Y.jsx)(I,{variant:`h5`,sx:{color:`#424242`,fontWeight:700},children:m(`upload.dropToUpload`)}),(0,Y.jsx)(I,{variant:`body2`,sx:{color:`#666`},children:m(`upload.onlyJsonFiles`)})]})}),(0,Y.jsxs)(R,{sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,mb:3,flexWrap:`wrap`,gap:2},children:[(0,Y.jsx)(I,{variant:`h5`,sx:{fontWeight:`bold`,color:`#333`,fontSize:{xs:`1.3rem`,sm:`1.5rem`}},children:m(`app.title`)}),(0,Y.jsxs)(R,{sx:{display:`flex`,alignItems:`center`,gap:1},children:[(0,Y.jsx)(nn,{}),(0,Y.jsx)(A,{variant:`outlined`,startIcon:(0,Y.jsx)(_e,{}),onClick:c,sx:{borderColor:`#4caf50`,color:`#4caf50`,"&:hover":{borderColor:`#388e3c`,backgroundColor:`rgba(76, 175, 80, 0.08)`}},children:m(`repo.aboutAndThanks`)}),(0,Y.jsx)(A,{variant:`outlined`,startIcon:(0,Y.jsx)(ht,{}),onClick:()=>p(`/repo`),sx:{borderColor:`#0078ba`,color:`#0078ba`,"&:hover":{borderColor:`#005a8c`,backgroundColor:`rgba(0, 120, 186, 0.08)`}},children:m(`app.scriptRepository`)})]})]}),(0,Y.jsxs)(ae,{spacing:2,children:[M&&le&&(0,Y.jsx)(on,{fileName:le,onClose:Ne}),(0,Y.jsxs)(R,{sx:{position:`relative`},children:[(0,Y.jsx)(D,{multiline:!0,fullWidth:!0,label:m(`input.jsonLabel`),placeholder:m(`input.jsonPlaceholder`),value:h,onChange:e=>xe(e.target.value),variant:`outlined`,sx:{"& .MuiOutlinedInput-root":{fontFamily:`monospace`,fontSize:{xs:`0.8rem`,sm:`0.9rem`},height:`${ee}px`,alignItems:`flex-start`,borderTopLeftRadius:M?0:1,borderTopRightRadius:M?0:1},"& .MuiInputBase-input":{height:`100% !important`,overflow:`auto !important`}}}),(0,Y.jsx)(R,{onMouseDown:Le,sx:{position:`absolute`,bottom:0,left:0,right:0,height:`12px`,cursor:`ns-resize`,display:`flex`,alignItems:`center`,justifyContent:`center`,backgroundColor:j?`rgba(25, 118, 210, 0.1)`:`transparent`,transition:`background-color 0.2s`,"&:hover":{backgroundColor:`rgba(25, 118, 210, 0.08)`},"&::before":{content:`""`,width:`40px`,height:`4px`,borderRadius:`2px`,backgroundColor:j?`#1976d2`:`#bdbdbd`,transition:`background-color 0.2s`},"&:hover::before":{backgroundColor:`#1976d2`}}})]}),(S||f)&&(0,Y.jsx)(fe,{severity:`error`,onClose:()=>C(``),children:S||f}),(0,Y.jsxs)(R,{sx:{display:`flex`,gap:2,flexWrap:`wrap`},children:[(0,Y.jsx)(A,{variant:`contained`,size:`large`,startIcon:(0,Y.jsx)(pt,{}),onClick:Ee,sx:{flex:{xs:`1 1 100%`,sm:`1 1 20%`},minHeight:48},children:m(`input.generateScript`)}),(0,Y.jsx)(A,{variant:`outlined`,size:`large`,startIcon:(0,Y.jsx)(st,{}),onClick:()=>ie(!0),sx:{flex:{xs:`1 1 100%`,sm:`1 1 auto`},minHeight:48},children:m(`input.uploadJson`)}),(0,Y.jsx)(A,{variant:`outlined`,size:`large`,startIcon:(0,Y.jsx)(pe,{}),onClick:r,disabled:!u,sx:{flex:{xs:`1 1 100%`,sm:`1 1 auto`},minHeight:48},children:m(`input.exportJson`)}),(0,Y.jsx)(A,{variant:`outlined`,size:`large`,startIcon:(0,Y.jsx)(nt,{}),onClick:i,disabled:!u,sx:{flex:{xs:`1 1 100%`,sm:`1 1 auto`},minHeight:48},children:m(`input.shareScript`)}),(0,Y.jsx)(A,{variant:`outlined`,size:`large`,startIcon:(0,Y.jsx)(it,{}),onClick:t,disabled:!u,sx:{flex:{xs:`1 1 100%`,sm:`1 1 auto`},minHeight:48},children:m(`input.exportPDF`)}),(0,Y.jsx)(A,{variant:`outlined`,size:`large`,startIcon:(0,Y.jsx)(k,{}),onClick:n,disabled:!u,sx:{flex:{xs:`1 1 100%`,sm:`1 1 auto`},minHeight:48},children:m(`input.exportImage`)})]}),(0,Y.jsxs)(R,{sx:{display:`flex`,gap:2,flexWrap:`wrap`},children:[(0,Y.jsx)(A,{variant:`outlined`,size:`large`,color:`error`,startIcon:(0,Y.jsx)(pt,{}),onClick:Pe,sx:{flex:{xs:`1 1 100%`,sm:`1 1 44%`},minHeight:48},children:m(`input.clear`)}),(0,Y.jsx)(A,{variant:`contained`,color:`success`,size:`large`,startIcon:(0,Y.jsx)(he,{}),onClick:s,disabled:!u,sx:{flex:{xs:`1 1 100%`,sm:`1 1 auto`},minHeight:48},children:m(`specialRules.add`)}),(0,Y.jsx)(A,{variant:`contained`,size:`large`,startIcon:(0,Y.jsx)(lt,{}),onClick:o,sx:{flex:{xs:`1 1 100%`,sm:`1 1 auto`},minHeight:48,color:`#fff`,"&:hover":{backgroundColor:`#005583ff`}},children:m(`ui.adjustUI`)})]}),(0,Y.jsx)(R,{sx:{display:`flex`,gap:2,flexWrap:`wrap`},children:(0,Y.jsx)(A,{variant:`outlined`,color:`error`,size:`large`,startIcon:(0,Y.jsx)(Xe,{}),onClick:De,sx:{flex:{xs:`1 1 100%`},minHeight:48},children:m(`ui.resetAllSettings`)})}),(0,Y.jsx)(fe,{severity:`info`,sx:{mt:2},children:(0,Y.jsxs)(R,{sx:{display:`flex`,flexDirection:{xs:`column`,md:`row`},gap:{xs:2.5,md:40},alignItems:{xs:`stretch`,md:`center`}},children:[(0,Y.jsx)(R,{sx:{flex:{xs:`1 1 auto`,md:`0 0 auto`},maxWidth:{xs:`100%`,md:`1000px`}},children:(0,Y.jsxs)(I,{variant:`body2`,sx:{fontSize:{xs:`0.8rem`,sm:`0.85rem`},lineHeight:1.6},children:[m(`info.supportOfficial`),(0,Y.jsx)(`br`,{}),m(`info.supportFormats`),(0,Y.jsx)(`br`,{}),m(`info.experimentalCharacters`)]})}),(0,Y.jsxs)(R,{sx:{display:`flex`,flexDirection:`column`,gap:2,flex:{xs:`1 1 auto`,md:`1 1 0`},minWidth:{xs:`100%`,md:`300px`}},children:[(0,Y.jsxs)(R,{sx:{display:`flex`,alignItems:`center`,gap:2,justifyContent:`space-between`},children:[(0,Y.jsxs)(R,{sx:{flex:1,minWidth:0},children:[(0,Y.jsx)(I,{variant:`body2`,sx:{fontWeight:600,fontSize:`0.875rem`,mb:.25},children:m(`input.officialIdParseMode`)}),(0,Y.jsx)(I,{variant:`caption`,sx:{fontSize:`0.7rem`,color:`warning.main`,display:`block`},children:m(`input.officialIdParseModeWarning`)})]}),(0,Y.jsx)(rn,{checked:K.config.officialIdParseMode,onChange:e=>K.setOfficialIdParseMode(e.target.checked)})]}),(0,Y.jsxs)(R,{sx:{display:`flex`,alignItems:`center`,gap:2,justifyContent:`space-between`},children:[(0,Y.jsxs)(R,{sx:{flex:1,minWidth:0},children:[(0,Y.jsx)(I,{variant:`body2`,sx:{fontWeight:600,fontSize:`0.875rem`,mb:.25},children:m(`input.twoPageMode`)}),(0,Y.jsx)(I,{variant:`caption`,sx:{fontSize:`0.7rem`,color:`text.secondary`,display:`block`},children:m(`input.twoPageModeDesc`)})]}),(0,Y.jsx)(rn,{checked:q.config.enableTwoPageMode,onChange:e=>q.updateConfig({enableTwoPageMode:e.target.checked})})]})]})]})})]}),(0,Y.jsxs)(V,{open:w,onClose:ke,disableScrollLock:!0,"aria-labelledby":`reset-dialog-title`,"aria-describedby":`reset-dialog-description`,children:[(0,Y.jsx)(H,{id:`reset-dialog-title`,children:m(`dialog.resetTitle`)}),(0,Y.jsx)(W,{children:(0,Y.jsx)(je,{id:`reset-dialog-description`,children:m(`dialog.resetMessage`)})}),(0,Y.jsxs)(xt,{children:[(0,Y.jsx)(A,{onClick:ke,color:`primary`,children:m(`common.cancel`)}),(0,Y.jsx)(A,{onClick:Oe,color:`warning`,variant:`contained`,autoFocus:!0,children:m(`common.confirm`)})]})]}),(0,Y.jsxs)(V,{open:E,onClose:Ie,disableScrollLock:!0,"aria-labelledby":`clear-dialog-title`,"aria-describedby":`clear-dialog-description`,children:[(0,Y.jsx)(H,{id:`clear-dialog-title`,children:m(`dialog.clearTitle`)}),(0,Y.jsx)(W,{children:(0,Y.jsx)(je,{id:`clear-dialog-description`,children:m(`dialog.clearMessage`)})}),(0,Y.jsxs)(xt,{children:[(0,Y.jsx)(A,{onClick:Ie,color:`primary`,children:m(`common.cancel`)}),(0,Y.jsx)(A,{onClick:Fe,color:`error`,variant:`contained`,autoFocus:!0,children:m(`common.confirm`)})]})]}),(0,Y.jsx)(an,{open:re,onClose:()=>ie(!1),onSimpleUpload:Ae,onFileSyncStart:Me})]})});const cn={fortune_teller:`fortuneteller`,scarlet_woman:`scarletwoman`,tea_lady:`tealady`,snake_charmer:`snakecharmer`,town_crier:`towncrier`,evil_twin:`eviltwin`,bone_collector:`bonecollector`,bounty_hunter:`bountyhunter`,cult_leader:`cultleader`,poppy_grower:`poppygrower`,devils_advocate:`devilsadvocate`,"pit-hag":`pithag`,fang_gu:`fanggu`,no_dashii:`nodashii`,lil_monsta:`lilmonsta`,"al-hadikhia":`alhadikhia`,lord_of_typhon:`lordoftyphon`,high_priestess:`highpriestess`,village_idiot:`villageidiot`,plague_doctor:`plaguedoctor`,organ_grinder:`organgrinder`},ln={};Object.entries(cn).forEach(([e,t])=>{ln[t]=e});function un(e,t){return t===`en`?cn[e]||e:ln[e]||e}var dn=C(({open:e,onClose:t,script:n,originalJson:r,normalizedJson:i})=>{let{t:a}=X(),[o,s]=(0,G.useState)(``),[c,l]=(0,G.useState)(``),[u,d]=(0,G.useState)(``),f=[a(`share.step1`),a(`share.step2`)],p=()=>{try{let e=JSON.parse(i),t=[],r=e.find(e=>e.id===`_meta`);return r?t.push({id:`_meta`,name:r.name||n?.title,author:r.author||n?.author||``}):n&&t.push({id:`_meta`,name:n.title,author:n.author||``}),n&&Object.keys(n.characters).forEach(e=>{n.characters[e].forEach(e=>{let n=un(e.id,`en`);t.push(n)})}),JSON.stringify(t)}catch(e){return console.error(`Failed to generate compressed JSON:`,e),``}},m=e=>{let t=e.target.value;if(s(t),t){let e=window.location.origin+window.location.pathname+`#/repo/preview`,n=`${e}?json=${encodeURIComponent(t)}`;l(n);let r=p();if(r){let t=`${e}?json=${encodeURIComponent(r)}`;d(t)}}else l(``),d(``)},h=async e=>{try{await navigator.clipboard.writeText(e)}catch{let t=document.createElement(`textarea`);t.value=e,document.body.appendChild(t),t.select(),document.execCommand(`copy`),document.body.removeChild(t)}};return(0,Y.jsxs)(V,{open:e,onClose:t,disableScrollLock:!0,maxWidth:`md`,fullWidth:!0,PaperProps:{sx:{minHeight:`500px`}},children:[(0,Y.jsxs)(H,{sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[a(`share.title`),(0,Y.jsx)(B,{onClick:t,size:`small`,children:(0,Y.jsx)(L,{})})]}),(0,Y.jsxs)(W,{children:[(0,Y.jsx)(R,{sx:{mb:3},children:(0,Y.jsx)(se,{activeStep:-1,alternativeLabel:!0,children:f.map(e=>(0,Y.jsx)(Te,{children:(0,Y.jsx)(xe,{children:e})},e))})}),(0,Y.jsxs)(R,{sx:{mb:3},children:[(0,Y.jsx)(I,{variant:`h6`,sx:{mb:2},children:a(`share.step1`)}),(0,Y.jsx)(fe,{severity:`info`,sx:{mb:2},children:(0,Y.jsx)(I,{variant:`body2`,children:a(`share.step1Description`)})}),(0,Y.jsxs)(R,{sx:{display:`flex`,gap:1,alignItems:`center`},children:[(0,Y.jsx)(A,{variant:`outlined`,startIcon:(0,Y.jsx)(bt,{}),onClick:()=>{window.open(`https://gist.github.com`,`_blank`)},size:`small`,children:a(`share.openGist`)}),(0,Y.jsx)(le,{title:a(`share.copyJsonTooltip`),children:(0,Y.jsx)(A,{variant:`outlined`,startIcon:(0,Y.jsx)(Ke,{}),onClick:()=>h(i),size:`small`,children:a(`share.copyJson`)})})]})]}),(0,Y.jsxs)(R,{sx:{mb:3},children:[(0,Y.jsx)(I,{variant:`h6`,sx:{mb:2},children:a(`share.step2`)}),(0,Y.jsx)(D,{fullWidth:!0,label:a(`share.gistUrlLabel`),placeholder:`https://gist.githubusercontent.com/username/gist-id/raw/...`,value:o,onChange:m,sx:{mb:2}})]}),c&&(0,Y.jsxs)(R,{sx:{mb:2},children:[(0,Y.jsx)(I,{variant:`h6`,sx:{mb:2},children:a(`share.generatedLinks`)}),(0,Y.jsxs)(R,{sx:{mb:2},children:[(0,Y.jsx)(I,{variant:`subtitle2`,sx:{mb:1},children:a(`share.fullScriptLink`)}),(0,Y.jsxs)(R,{sx:{display:`flex`,gap:1},children:[(0,Y.jsx)(D,{fullWidth:!0,value:c,InputProps:{readOnly:!0},size:`small`}),(0,Y.jsx)(le,{title:a(`share.copyLink`),children:(0,Y.jsx)(B,{onClick:()=>h(c),size:`small`,children:(0,Y.jsx)(Ke,{})})})]})]})]})]})]})});const Z={good:`#0078ba`,evil:`#a32222ff`,fabled:`#d4af37`,loric:`#359026`,unknown:`#2d5c4f`,purple:`#b463aaff`,gray:`#999`,paper:{primary:`#2c2416`,secondary:`#3d3226`},nightOrder:{background:`#1a1d20`},text:{primary:`#000000`,secondary:`#000000`,tertiary:`#000000`}},fn={fontFamily:`"Source Han Serif", "Source Han Serif SC", "Noto Serif CJK SC", "思源宋体", "Microsoft YaHei", "PingFang SC", serif`,fallbackFontFamily:`"Segoe UI", "Microsoft YaHei", "PingFang SC", sans-serif`},pn={townsfolk:Z.good,outsider:Z.good,minion:Z.evil,demon:Z.evil,traveler:Z.purple,fabled:Z.fabled,loric:Z.loric},mn={townsfolk:`镇民`,outsider:`外来者`,minion:`爪牙`,demon:`恶魔`,traveler:`旅行者`,fabled:`传奇角色`,loric:`洛克角色`};function hn(e,t){return t||(pn[e]?pn[e]:Z.unknown)}function gn(e){return mn[e]?mn[e]:e.split(`_`).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(` `)}const _n=e=>{let t=e===`en`;return[{id:`angel`,name:t?`Angel`:`天使`,ability:t?`Something bad might happen to whoever is most responsible for the death of a new player. `:`对新玩家的死亡负最大责任的人，可能会遭遇一些不好的事情。`,team:`fabled`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/angel.png`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:t?[`Protected`]:[`保护`],setup:!1},{id:`bootlegger`,name:t?`Bootlegger`:`私货商人`,ability:t?`This script has homebrew characters or rules. `:`这个剧本包含有自制角色或自制规则。`,team:`fabled`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/bootlegger.png`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},{id:`bootlegger2`,name:t?`Village King`:`我是村规王`,ability:t?`This script has homebrew characters or rules. `:`这个剧本采用村规。`,team:`fabled`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/bootlegger.png`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},{id:`buddhist`,name:t?`Buddhist`:`佛陀`,ability:t?`For the first 2 minutes of each day, veteran players may not talk. `:`每个白天的前两分钟，老玩家不能发言。`,team:`fabled`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/buddhist.png`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},{id:`deusexfiasco`,name:t?`Deus Ex Fiasco`:`失败的上帝`,ability:t?`At least once per game, the Storyteller will make a mistake, correct it, and publicly admit to it.`:`每局游戏限一次，说书人可能会犯一个“错误”但会将其纠正，并公开承认自己曾处理有误`,team:`fabled`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/deusexfiasco.png`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},{id:`deus_ex_fiasco2`,name:t?`Deus Ex Fiasco 2`:`强权上帝`,ability:t?`Ths god controls all the rules in this game.`:`上帝在本场游戏就是规则的主宰，但是一旦宣布了特殊规则就必须遵守，否则可能会被玩家群殴。`,team:`fabled`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/deusexfiasco.png`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},{id:`djinn`,name:t?`Djinn`:`灯神`,ability:t?`Use the Djinn's special rule. All players know what it is.`:`使用灯神的相克规则。所有玩家都会知道其内容。`,team:`fabled`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/djinn.png`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},{id:`doomsayer`,name:t?`Doomsayer`:`末日预言者`,ability:t?`If 4 ormore players live,each livingplayermaypubliclychoose(oncepergame)that aplayerof theirown alignment dies.`:`如果大于等于四名玩家存活，每名当前存活的玩家可以公开要求你杀死一名与他阵营相同的玩家（每名玩家限一次）`,team:`fabled`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/doomsayer.png`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},{id:`duchess`,name:t?`Duchess`:`公爵夫人`,ability:t?`Each day, 3 players may choose to visit you. At night,each visitor learns how many visitors are evil, but 1 gets false info.`:`每个白天，三名玩家可以一起拜访你。当晚*他们会得知他们之中有几个是邪恶的，但其中一人的信息是错的。`,team:`fabled`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/duchess.png`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:t?[`No nomination 1`,`No nomination 2`,`No nomination 3`]:[`提名1`,`提名2`,`提名3`],setup:!1},{id:`ferryman`,name:t?`Ferryman`:`摆渡人`,ability:t?`On the final day, all dead players regain their vote token.`:`在游戏的最后一天所有已死亡玩家会重新获得投票标记。`,team:`fabled`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/ferryman.png`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},{id:`fiddler`,name:t?`Fiddler`:`小提琴手`,ability:t?`Once per game, the Demon secretly chooses an opposing player: all players choose which of these 2 players win. `:`每局游戏限一次，恶魔可以秘密选择一名对立阵营的玩家，所有玩家要表决：这两名玩家中谁的阵营获胜。（平局邪恶阵营获胜)`,team:`fabled`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/fiddler.png`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:t?[`Used`]:[`已使用`],setup:!1},{id:`fibbin`,name:t?`fibbin`:`骗人精`,ability:t?`Once per game, the Demon secretly chooses an opposing player: all players choose which of these 2 players win. `:`每局游戏限一次，一名善良玩家可能会得知“有问题”的信息。`,team:`fabled`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/fibbin.png`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:t?[`Used`]:[`已使用`],setup:!1},{id:`gardener`,name:t?`Gardener`:`园丁`,ability:t?`The Storyteller assigns 1 or more players'characters. `:`由说书人来为一名或更多玩家派发角色。`,team:`fabled`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/gardener.png`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:t?[`Used`]:[`已使用`],setup:!1},{id:`hells_librarian`,name:t?`Hell's Librarian`:`地狱藏书员`,ability:t?`Something bad might happen to whoever talks when the Storyteller has asked for silence. `:`当说书人宣布安静时，仍在说话的玩家可能会遭遇一些不好的事情。`,team:`fabled`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/hells_librarian.png`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:t?[`False info`]:[`错误信息`],setup:!1},{id:`revolutionary`,name:t?`Revolutionary`:`革命者`,ability:t?`2 neighboring players are known to be the same alignment. Once per game, 1 of them registers falsely.`:`公开声明—对邻座玩家本局游戏一直保持同一阵营。每局游戏限一次，他们中的一人可能被当作其他的角色/阵营。`,team:`fabled`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/revolutionary.png`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:t?[`Know`]:[`知道`],setup:!1},{id:`sentinel`,name:t?`Sentinel`:`哨兵`,ability:t?`There might be 1 extra or 1 fewer Outsider in play. `:`在初始设置时，可能会额外增加或减少一个外来者。`,team:`fabled`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/sentinel.png`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},{id:`spirit_of_ivory`,name:t?`Spirit of Ivory`:`圣洁之魂`,ability:t?`There can't be more than 1 extra evil player. `:`游戏过程中邪恶玩家的总数最多能比初始设置多一名。`,team:`fabled`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/spirit_of_ivory.png`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},{id:`stormcatcher`,name:t?`Storm Catcher`:`暴风捕手`,ability:t?`Name a good character. If in play, they can only die by execution, but evil players learn which player it is. `:`游戏开始时，你要宣布一个善良角色。如果该角色在场，他只能死于处决，但所有邪恶玩家会在首个夜晚得知他是哪—名玩家。`,team:`fabled`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/stormcatcher.png`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:t?[`Drunk`]:[`改名`],setup:!1},{id:`toymaker`,name:t?`Toymaker`:`玩具匠`,ability:t?`The Demon may choose not to attack must do this at least once per game. Evil players get normal starting info. `:`恶魔可以在夜晚选择放弃攻击（每局游戏至少一次)。邪恶玩家照常获取初始信息`,team:`fabled`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/toymaker.png`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},{id:`qilin`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/qilin.png`,name:t?`Qilin`:`麒麟`,ability:t?`On the last day of the game, something good happens to the luckiest players.`:`在游戏的最后一天，最幸运的玩家身上会发生一些好的事情。`,team:`fabled`,firstNight:0,otherNight:0},{id:`zuiyingdeshangdi`,image:`https://botcgrimoire.top/img/duck.bd99fd34.png`,name:t?`The Stubborn God`:`嘴硬的上帝`,ability:t?`"I may have a problem, but I won't admit it or talk about it."`:`“我可能有问题，但我就是不承认也不说”`,team:`fabled`,firstNight:0,otherNight:0},{id:`fabled_charactor`,image:`https://botcgrimoire.top/img/fableds.efacc32a.png`,name:t?`Fabled Charactor`:`传奇角色`,ability:t?`This is a fabled character.`:`这是一个传奇角色。`,team:`fabled`,firstNight:0,otherNight:0},{id:`onion`,image:`/imgs/icons/fabled/onion.png`,name:t?`Big Onion`:`大聪花`,ability:t?`This is a big onion.`:`这是一个传奇大聪花。`,team:`fabled`,firstNight:0,otherNight:0}]},vn=e=>{let t=e===`en`;return[{id:`gardener_loric`,name:t?`Gardener`:`园丁`,ability:t?`The Storyteller assigns 1 or more players' characters.`:`由说书人来为一名或更多玩家派发角色。`,team:`loric`,image:`/imgs/icons/Loric/gardener.webp`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},{id:`tor_loric`,name:t?`Tor`:`黄昏`,ability:t?`Players don't know their character or alignment. They learn them after they die.`:`玩家不知道他们的角色或阵营。他们会在死后得知。`,team:`loric`,image:`/imgs/icons/Loric/tor.webp`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},{id:`stormcatcher_loric`,name:t?`Storm Catcher`:`暴风捕手`,ability:t?`Name a good character. If in play, they can only die by execution, but evil players learn which player it is.`:`游戏开始时，你要宣布一个善良角色。如果该角色在场，他只能死于处决，但所有邪恶玩家会在首个夜晚得知他是哪一名玩家。`,team:`loric`,image:`/imgs/icons/Loric/stormcatcher.webp`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:t?[`Protected`]:[`保护`],setup:!1},{id:`bigwig_loric`,name:t?`Big Wig`:`大假发`,ability:t?`Each nominee chooses a player: until voting, only they may speak & they are mad the nominee is good or they might die.`:`每名被提名者选择一名玩家：直到投票前，只有他们可以发言，并且他们要疯狂地认为被提名者是善良的，否则他们可能会死亡。`,team:`loric`,image:`/imgs/icons/Loric/bigwig.webp`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:t?[`Nominee`,`Speaker`]:[`被提名者`,`发言人`],setup:!1},{id:`bootlegger_loric`,name:t?`Bootlegger`:`私货商人`,ability:t?`This script has homebrew characters or rules.`:`这个剧本包含有自制角色或自制规则。`,team:`loric`,image:`/imgs/icons/Loric/bootlegger.webp`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1}]};var yn={bureaucrat:{id:`bureaucrat`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/bureaucrat.png`,edition:`custom`,name:`官员`,ability:`每个夜晚，你要选择除你以外的一名玩家：明天白天，他的投票算作三票。`,team:`traveler`,firstNight:1,otherNight:1,firstNightReminder:`唤醒官员。让官员指向任意一名玩家。用官员的“3票”提示标记那名被选中的玩家。让官员入睡。`,otherNightReminder:`唤醒官员。让官员指向任意一名玩家。用官员的“3票”提示标记那名被选中的玩家。让官员入睡。`,reminders:[`3票`],setup:!1},beggar:{id:`beggar`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/beggar.png`,edition:`custom`,name:`乞丐`,ability:`你只能使用投票标记才能投票。死亡的玩家可以将他的投票标记给你，如果他这么做，你会得知他的阵营。你不会中毒和醉酒。`,team:`traveler`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},gunslinger:{id:`gunslinger`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/gunslinger.png`,edition:`custom`,name:`枪手`,ability:`每个白天，当首次投票被统计后，你可以选择一名刚投过票的玩家：他死亡。`,team:`traveler`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},thief:{id:`thief`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/thief.png`,edition:`custom`,name:`窃贼`,ability:`每个夜晚，你要选择除你以外的一名玩家：明天白天他的投票会被算作负数。`,team:`traveler`,firstNight:1,otherNight:1,firstNightReminder:`唤醒窃贼。让窃贼指向任意一名玩家。用窃贼的“负票”提示标记那名被选中的玩家。让窃贼入睡。`,otherNightReminder:`唤醒窃贼。让窃贼指向任意一名玩家。用窃贼的“负票”提示标记那名被选中的玩家。让窃贼入睡。`,reminders:[`负票`],setup:!1},scapegoat:{id:`scapegoat`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/scapegoat.png`,edition:`custom`,name:`替罪羊`,ability:`如果你的阵营的一名玩家被处决，你可能会代替他被处决。`,team:`traveler`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},judge:{id:`judge`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/judge.png`,edition:`custom`,name:`法官`,ability:`每局游戏限一次，如果其他玩家发起了提名，你可以选择让本次提名直接执行处决或让投票无效。`,team:`traveler`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`失去能力`],setup:!1},matron:{id:`matron`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/matron.png`,edition:`custom`,name:`女舍监`,ability:`每个白天，你可以选择至多三对玩家交换座位。玩家不能离开座位私聊。`,team:`traveler`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},voudon:{id:`voudon`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/voudon.png`,edition:`custom`,name:`巫毒师`,ability:`只有你和死亡的玩家可以投票，且投票不需要使用投票标记。忽略票数需要过半的要求。`,team:`traveler`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},apprentice:{id:`apprentice`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/apprentice.png`,edition:`custom`,name:`学徒`,ability:`在你的首个夜晚，如果你是善良的，你会获得一个镇民角色的能力；如果你是邪恶的，你会获得一个爪牙角色的能力。`,team:`traveler`,firstNight:1,otherNight:1,firstNightReminder:`在学徒加入游戏的首个夜晚，唤醒学徒。向学徒展示“你是”信息标记，然后展示一个镇民或爪牙的角色标记。在魔典上，将学徒的角色标记替换为刚刚展示的角色标记，并放置“是学徒”提示标记。这名玩家还是学徒，只是他拥有了该角色的能力。`,otherNightReminder:`在学徒加入游戏的首个夜晚，唤醒学徒。向学徒展示“你是”信息标记，然后展示一个镇民或爪牙的角色标记。在魔典上，将学徒的角色标记替换为刚刚展示的角色标记，并放置“是学徒”提示标记。这名玩家还是学徒，只是他拥有了该角色的能力。`,reminders:[`是学徒`],setup:!1},bishop:{id:`bishop`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/bishop.png`,edition:`custom`,name:`主教`,ability:`只有说书人可以发起提名。每个白天说书人至少要提名一名你对立阵营的玩家。`,team:`traveler`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`提名善良方`,`提名邪恶方`],setup:!1},deviant:{id:`deviant`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/deviant.png`,edition:`custom`,name:`怪咖`,ability:`如果你表现得很有趣，当天你不能被流放。`,team:`traveler`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},bone_collector:{id:`bone_collector`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/bone_collector.png`,edition:`custom`,name:`集骨者`,ability:`每局游戏限一次，在夜晚时*，你可以选择一名死亡的玩家：他重新获得能力直到下个黄昏。`,team:`traveler`,firstNight:0,otherNight:1,firstNightReminder:``,otherNightReminder:`每个夜晚，唤醒集骨者。集骨者要么摇头表示不使用能力，或者是指向任何一名已死亡的玩家。让集骨者重新入睡。`,reminders:[`重获能力`,`失去能力`],setup:!1},barista:{id:`barista`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/barista.png`,edition:`custom`,name:`咖啡师`,ability:`每个夜晚，直至下个黄昏，由说书人二选一：1）一名玩家解除并免受醉酒和中毒影响，且会得知正确信息；2）一名玩家的能力可以生效两次。该玩家会得知是哪个效果。`,team:`traveler`,firstNight:1,otherNight:1,firstNightReminder:`每个夜晚，移除先前的标记并在任一角色标记旁放置咖啡师的“清醒且健康”标记或“行动两次”提示。唤醒那个角色的玩家并向他展示“该角色的能力对你生效”信息标记，咖啡师标记和一根手指（代表他现在清醒且健康）或两根手指（代表他要行动两次）。让这名玩家入睡。`,otherNightReminder:`每个夜晚，移除先前的标记并在任一角色标记旁放置咖啡师的“清醒且健康”标记或“行动两次”提示。唤醒那个角色的玩家并向他展示“该角色的能力对你生效”信息标记，咖啡师标记和一根手指（代表他现在清醒且健康）或两根手指（代表他要行动两次）。让这名玩家入睡。`,reminders:[`清醒且健康`,`行动两次`,`？`],setup:!1},harlot:{id:`harlot`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/harlot.png`,edition:`custom`,name:`流莺`,ability:`每个夜晚*，你要选择一名存活的玩家：如果他同意，你会得知他的角色，但是你们两个可能同时死亡。`,team:`traveler`,firstNight:0,otherNight:1,firstNightReminder:``,otherNightReminder:`唤醒流莺。让流莺指向任意一名玩家。让流莺重新入睡。唤醒被选中的玩家，对该玩家展示“该角色的能力对你生效”提示标记和流莺角色标记。该玩家需要通过点头表示是，摇头表示否。然后让该玩家重新入睡。`,reminders:[`死亡`],setup:!1},butcher:{id:`butcher`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/butcher.png`,edition:`custom`,name:`屠夫`,ability:`每个白天，首次处决后，你可以再次发起提名。`,team:`traveler`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},gangster:{id:`gangster`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/gangster.png`,edition:`custom`,name:`黑帮`,ability:`每个白天限一次，你可以杀死与你邻近的两名存活的玩家中的一名，但需要另一边那个存活的玩家同意。`,team:`traveler`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},jiaohuazi:{id:`jiaohuazi`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/jiaohuazi.png`,name:`叫花子`,ability:`每个白天限一次，你可以公开选择一名其他玩家，让他选择一个非恶魔角色：你可能会获得这个角色的能力，直到下个黎明。`,team:`traveler`,firstNight:1,otherNight:1,firstNightReminder:`如果你决定不让叫花子获得这个角色的能力，无事发生。如果你决定让叫花子获得这个角色的能力，那么让他行动。如果该角色已在场，你可以自由决定是先唤醒原角色对应的玩家还是先唤醒叫花子玩家来进行行动。`,otherNightReminder:`如果你决定不让叫花子获得这个角色的能力，无事发生。如果你决定让叫花子获得这个角色的能力，那么让他行动。如果该角色已在场，你可以自由决定是先唤醒原角色对应的玩家还是先唤醒叫花子玩家来进行行动。`,reminders:[`乞讨`,`是叫花子`],setup:!1},gnome:{id:`gnome`,name:`侏儒`,image:`https://wiki.bloodontheclocktower.com/images/e/e0/Icon_gnome.png`,team:`traveler`,firstNight:0,firstNightReminder:``,otherNight:0,otherNightReminder:``,reminders:[`同伴`],setup:!1,ability:`当你加入游戏时，所有玩家会得知一名与你阵营相同的玩家。每当他被提名时，你可以杀死提名者。`},cacklejack:{id:`cacklejack`,image:`https://wiki.bloodontheclocktower.com/images/d/d7/Icon_cacklejack.png`,name:`笑匠`,team:`traveler`,otherNightReminder:`在今晚，将你今天选的玩家之外的任意玩家的角色标记替换为其他角色标记。唤醒该玩家，展示给他们“你是”卡片以及他们的新角色标记。`,reminders:[`不是我`],ability:`每天晚上选择一名玩家，今晚一名除了他以外的其他玩家将更换角色。`},washerwoman:{id:`washerwoman`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/washerwoman.png`,edition:`custom`,name:`洗衣妇`,ability:`在你的首个夜晚，你会得知两名玩家和一个镇民角色：这两名玩家之一是该角色。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3035,otherNight:0,firstNightReminder:`唤醒洗衣妇，对她指向两名玩家，并展示一个镇民角色标记。这两名玩家其中之一是这个镇民。`,otherNightReminder:``,reminders:[`镇民`,`错误`],setup:!1},librarian:{id:`librarian`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/librarian.png`,edition:`custom`,name:`图书管理员`,ability:`在你的首个夜晚，你会得知两名玩家和一个外来者角色：这两名玩家之一是该角色（或者你会得知没有外来者在场）。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3036,otherNight:0,firstNightReminder:`唤醒图书管理员，对他指向两名玩家，并展示一个外来者角色标记。这两名玩家其中之一是这个外来者。`,otherNightReminder:``,reminders:[`外来者`,`错误`],setup:!1},investigator:{id:`investigator`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/investigator.png`,edition:`custom`,name:`调查员`,ability:`在你的首个夜晚，你会得知两名玩家和一个爪牙角色：这两名玩家之一是该角色（或者你会得知没有爪牙在场）。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3037,otherNight:0,firstNightReminder:`唤醒调查员，对他指向两名玩家，并展示一个爪牙角色标记。这两名玩家其中之一是这个爪牙。`,otherNightReminder:``,reminders:[`爪牙`,`错误`],setup:!1},chef:{id:`chef`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/chef.png`,edition:`custom`,name:`厨师`,ability:`在你的首个夜晚，你会得知场上邻座的邪恶玩家有多少对。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3038,otherNight:0,firstNightReminder:`唤醒厨师，对他用手势比划数字来告知他邻座邪恶玩家有几对。`,otherNightReminder:``,reminders:[],setup:!1},empath:{id:`empath`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/empath.png`,edition:`custom`,name:`共情者`,ability:`每个夜晚，你会得知与你邻近的两名存活的玩家中邪恶玩家的数量。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3039,otherNight:80,firstNightReminder:`唤醒共情者，对他用手势比划数字来告知他与他邻近的存活玩家中有几人是邪恶玩家。`,otherNightReminder:`唤醒共情者，对他用手势比划数字来告知他与他邻近的存活玩家中有几人是邪恶玩家。`,reminders:[],setup:!1},fortune_teller:{id:`fortune_teller`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/fortune_teller.png`,edition:`custom`,name:`占卜师`,ability:`每个夜晚，你要选择两名玩家：你会得知他们之中是否有恶魔。会有一名善良玩家始终被你的能力当作恶魔。<i>（干扰项）</i>`,team:`townsfolk`,sch_team:`镇民`,firstNight:3040,otherNight:81,firstNightReminder:`唤醒占卜师，让他选择两名玩家。以点头或摇头告知他是否选中了恶魔。`,otherNightReminder:`唤醒占卜师，让他选择两名玩家。以点头或摇头告知他是否选中了恶魔。`,reminders:[`干扰项`],setup:!1},undertaker:{id:`undertaker`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/undertaker.png`,edition:`custom`,name:`送葬者`,ability:`每个夜晚*，你会得知今天白天死于处决的玩家的角色。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:83,firstNightReminder:``,otherNightReminder:`如果今天白天有玩家死于处决，唤醒送葬者，对他展示那名玩家的角色标记。`,reminders:[`死于今日`],setup:!1},monk:{id:`monk`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/monk.png`,edition:`custom`,name:`僧侣`,ability:`每个夜晚*，你要选择除你以外的一名玩家：当晚恶魔的负面能力对他无效。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:14,firstNightReminder:``,otherNightReminder:`唤醒僧侣，让他选择除自己以外的一名玩家，那名玩家今晚免受恶魔负面效果影响。`,reminders:[`保护`],setup:!1},ravenkeeper:{id:`ravenkeeper`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/ravenkeeper.png`,edition:`custom`,name:`守鸦人`,ability:`如果你在夜晚死亡，你会被唤醒，然后你要选择一名玩家：你会得知他的角色。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:70,firstNightReminder:``,otherNightReminder:`如果守鸦人死于夜晚，唤醒守鸦人，让他选择一名玩家。对他展示这名玩家的角色标记。`,reminders:[],setup:!1},virgin:{id:`virgin`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/virgin.png`,edition:`custom`,name:`贞洁者`,ability:`当你首次被提名时，如果提名你的玩家是镇民，他立刻被处决。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`失去能力`],setup:!1},slayer:{id:`slayer`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/slayer.png`,edition:`custom`,name:`猎手`,ability:`每局游戏限一次，你可以在白天时公开选择一名玩家：如果他是恶魔，他死亡。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`失去能力`],setup:!1},soldier:{id:`soldier`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/soldier.png`,edition:`custom`,name:`士兵`,ability:`恶魔的负面能力对你无效。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},mayor:{id:`mayor`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/mayor.png`,edition:`custom`,name:`镇长`,ability:`如果只有三名玩家存活且白天没有人被处决，你的阵营获胜。如果你在夜晚死亡，可能会有一名其他玩家代替你死亡。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},grandmother:{id:`grandmother`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/grandmother.png`,edition:`custom`,name:`祖母`,ability:`在你的首个夜晚，你会得知一名善良玩家和他的角色。如果恶魔杀死了他，你也会死亡。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3043,otherNight:66,firstNightReminder:`唤醒祖母，对她指向一名善良玩家，并展示该玩家的角色标记。`,otherNightReminder:`如果恶魔杀死了孙子，祖母死亡。`,reminders:[`孙子`,`死亡`],setup:!1},sailor:{id:`sailor`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/sailor.png`,edition:`custom`,name:`水手`,ability:`每个夜晚，你要选择一名存活的玩家：你或他之一会醉酒直到下个黄昏。你不会死亡。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3013,otherNight:5,firstNightReminder:`唤醒水手，让他选择一名玩家。决定他俩其中谁因为水手能力醉酒。`,otherNightReminder:`唤醒水手，让他选择一名玩家。决定他俩其中谁因为水手能力醉酒。`,reminders:[`醉酒`],setup:!1},chambermaid:{id:`chambermaid`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/chambermaid.png`,edition:`custom`,name:`侍女`,ability:`每个夜晚，你要选择除你以外的两名存活的玩家：你会得知他们中有几人在当晚因其自身能力而被唤醒。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3064,otherNight:100,firstNightReminder:`唤醒侍女，让她选择两名除自己以外的存活玩家。用手势比划数字来告知她这些玩家中因自己能力而唤醒的玩家数量。`,otherNightReminder:`唤醒侍女，让她选择两名除自己以外的存活玩家。用手势比划数字来告知她这些玩家中因自己能力而唤醒的玩家数量。`,reminders:[],setup:!1},exorcist:{id:`exorcist`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/exorcist.png`,edition:`custom`,name:`驱魔人`,ability:`每个夜晚*，你要选择一名玩家（与上个夜晚不同）：如果你选中了恶魔，他会得知你的角色，但他当晚不会因其自身能力而被唤醒。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:29,firstNightReminder:``,otherNightReminder:`唤醒驱魔人，让他选择一名与上一晚不同的玩家。如果他选中了恶魔，则在驱魔人入睡后通知该恶魔谁是驱魔人。`,reminders:[`被选择`],setup:!1},innkeeper:{id:`innkeeper`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/innkeeper.png`,edition:`custom`,name:`旅店老板`,ability:`每个夜晚*，你要选择两名玩家：他们当晚不会死亡，但其中一人会醉酒到下个黄昏。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:10,firstNightReminder:``,otherNightReminder:`唤醒旅店老板，让他选择两名玩家。这两名玩家今晚不死，同时需要决定他俩其中谁因为旅店老板能力醉酒。`,reminders:[`不会死亡`,`醉酒`],setup:!1},gambler:{id:`gambler`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/gambler.png`,edition:`custom`,name:`赌徒`,ability:`每个夜晚*，你要选择一名玩家并猜测该玩家的角色：如果你猜错了，你会死亡。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:12,firstNightReminder:``,otherNightReminder:`唤醒赌徒，让他进行猜测。如果猜测错误，他死亡。`,reminders:[`死亡`],setup:!1},gossip:{id:`gossip`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/gossip.png`,edition:`custom`,name:`造谣者`,ability:`每个白天，你可以公开发表一个声明。在当晚，如果该声明是正确的，会有一名玩家死亡。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:62,firstNightReminder:``,otherNightReminder:`如果造谣者今天白天的声明正确，一名玩家死亡。`,reminders:[`死亡`],setup:!1},courtier:{id:`courtier`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/courtier.png`,edition:`custom`,name:`侍臣`,ability:`每局游戏限一次，在夜晚时，你可以选择一个角色：如果该角色在场，一个该角色从当晚开始醉酒三天三夜。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3020,otherNight:11,firstNightReminder:`唤醒侍臣，他可以摇头不使用能力，或选择角色列表上的一个任意角色，该角色对应的玩家之一醉酒。`,otherNightReminder:`如果侍臣未曾使用能力，唤醒侍臣，他可以摇头不使用能力，或选择角色列表上的一个任意角色，该角色对应的玩家之一醉酒。`,reminders:[`醉酒1`,`醉酒2`,`醉酒3`,`失去能力`],setup:!1},professor:{id:`professor`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/professor.png`,edition:`custom`,name:`教授`,ability:`每局游戏限一次，在夜晚时*，你可以选择一名死亡的玩家：如果他是镇民，你会将他起死回生。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:76,firstNightReminder:``,otherNightReminder:`如果教授未曾使用能力且在城镇广场上有玩家死亡，唤醒教授，他可以摇头不使用能力，或选择一名已死亡的玩家。如果该玩家是镇民，该玩家被起死回生。`,reminders:[`复活`,`失去能力`],setup:!1},minstrel:{id:`minstrel`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/minstrel.png`,edition:`custom`,name:`吟游诗人`,ability:`当一名爪牙死于处决时，除了你和旅行者以外的所有其他玩家醉酒直到明天黄昏。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`全员醉酒`],setup:!1},tea_lady:{id:`tea_lady`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/tea_lady.png`,edition:`custom`,name:`茶艺师`,ability:`如果与你邻近的两名存活的玩家是善良的，他们不会死亡。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`不会死亡`],setup:!1},pacifist:{id:`pacifist`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/pacifist.png`,edition:`custom`,name:`和平主义者`,ability:`被处决的善良玩家可能不会死亡。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},fool:{id:`fool`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/fool.png`,edition:`custom`,name:`弄臣`,ability:`当你首次将要死亡时，你不会死亡。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`失去能力`],setup:!1},clockmaker:{id:`clockmaker`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/clockmaker.png`,edition:`custom`,name:`钟表匠`,ability:`在你的首个夜晚，你会得知恶魔与爪牙之间最近的距离。（邻座的玩家距离为1）`,team:`townsfolk`,sch_team:`镇民`,firstNight:3044,otherNight:0,firstNightReminder:`唤醒钟表匠，对他用手势比划数字来告知他恶魔与爪牙之间的最近距离。`,otherNightReminder:``,reminders:[],setup:!1},dreamer:{id:`dreamer`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/dreamer.png`,edition:`custom`,name:`筑梦师`,ability:`每个夜晚，你要选择除你及旅行者以外的一名玩家：你会得知一个善良角色和一个邪恶角色，该玩家是其中一个角色。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3045,otherNight:84,firstNightReminder:`唤醒筑梦师，让他选择一名除自己以外的非旅行者玩家。对他展示一善一恶两个角色标记。`,otherNightReminder:`唤醒筑梦师，让他选择一名除自己以外的非旅行者玩家。对他展示一善一恶两个角色标记。`,reminders:[],setup:!1},snake_charmer:{id:`snake_charmer`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/snake_charmer.png`,edition:`custom`,name:`舞蛇人`,ability:`每个夜晚，你要选择一名存活的玩家：如果你选中了恶魔，你和他交换角色和阵营，然后他中毒。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3021,otherNight:13,firstNightReminder:`唤醒舞蛇人，让他选择一名存活玩家。如果选中恶魔则执行角色和阵营的交换，并在舞蛇人入睡后通知旧恶魔角色变化。`,otherNightReminder:`唤醒舞蛇人，让他选择一名存活玩家。如果选中恶魔则执行角色和阵营的交换，并在舞蛇人入睡后通知旧恶魔角色变化。`,reminders:[`中毒`],setup:!1},mathematician:{id:`mathematician`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/mathematician.png`,edition:`custom`,name:`数学家`,ability:`每个夜晚，你会得知有多少名玩家的能力因为其他角色的能力而未正常生效。（从上个黎明到你被唤醒时）`,team:`townsfolk`,sch_team:`镇民`,firstNight:3065,otherNight:101,firstNightReminder:`唤醒数学家，用手势比划数字来告诉他今天有多少玩家的能力未正常生效。`,otherNightReminder:`唤醒数学家，用手势比划数字来告诉他今天有多少玩家的能力未正常生效。`,reminders:[`未正常生效`],setup:!1},flowergirl:{id:`flowergirl`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/flowergirl.png`,edition:`custom`,name:`卖花女孩`,ability:`每个夜晚*，你会得知在今天白天时是否有恶魔投过票。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:85,firstNightReminder:``,otherNightReminder:`唤醒卖花女孩，以点头或摇头告知她今天白天是否有恶魔参与投票。`,reminders:[`恶魔未投票`,`恶魔已投票`],setup:!1},town_crier:{id:`town_crier`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/town_crier.png`,edition:`custom`,name:`城镇公告员`,ability:`每个夜晚*，你会得知在今天白天时是否有爪牙发起过提名。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:86,firstNightReminder:``,otherNightReminder:`唤醒城镇公告员，以点头或摇头告知他今天白天是否有爪牙发起提名。`,reminders:[`爪牙未提名`,`爪牙已提名`],setup:!1},oracle:{id:`oracle`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/oracle.png`,edition:`custom`,name:`神谕者`,ability:`每个夜晚*，你会得知有多少名死亡的玩家是邪恶的。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:87,firstNightReminder:``,otherNightReminder:`唤醒神谕者，对他用手势比划数字来告知他当前死亡玩家中邪恶玩家的数量。`,reminders:[],setup:!1},savant:{id:`savant`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/savant.png`,edition:`custom`,name:`博学者`,ability:`每个白天，你可以私下询问说书人以得知两条信息：一个是正确的，一个是错误的。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},seamstress:{id:`seamstress`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/seamstress.png`,edition:`custom`,name:`女裁缝`,ability:`每局游戏限一次，在夜晚时，你可以选择除你以外的两名玩家：你会得知他们是否为同一阵营。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3046,otherNight:88,firstNightReminder:`唤醒女裁缝，她可以摇头不使用能力，或选择除自己以外的两名玩家。以点头或摇头告知她选择的玩家是否为同一阵营。`,otherNightReminder:`如果女裁缝未曾使用能力，唤醒女裁缝，她可以摇头不使用能力，或选择除自己以外的两名玩家。以点头或摇头告知她选择的玩家是否为同一阵营。`,reminders:[`失去能力`],setup:!1},philosopher:{id:`philosopher`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/philosopher.png`,edition:`custom`,name:`哲学家`,ability:`每局游戏限一次，在夜晚时，你可以选择一个善良角色：你获得该角色的能力。如果这个角色在场，他醉酒。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3,otherNight:2,firstNightReminder:`唤醒哲学家，他可以摇头不使用能力，或选择获得角色列表上的一个善良角色的能力。`,otherNightReminder:`如果哲学家未曾使用能力，唤醒哲学家，他可以摇头不使用能力，或选择获得角色列表上的一个善良角色的能力。`,reminders:[`醉酒`],remindersGlobal:[`是哲学家`],setup:!1},artist:{id:`artist`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/artist.png`,edition:`custom`,name:`艺术家`,ability:`每局游戏限一次，在白天时，你可以私下询问说书人一个是非问题，你会得知该问题的答案。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`失去能力`],setup:!1},juggler:{id:`juggler`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/juggler.png`,edition:`custom`,name:`杂耍艺人`,ability:`在你的首个白天，你可以公开猜测任意玩家的角色最多五次。在当晚，你会得知猜测正确的角色数量。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:89,firstNightReminder:``,otherNightReminder:`如果杂耍艺人在今天白天使用了能力，唤醒杂耍艺人，对他用手势比划数字来告知他白天猜测正确的次数。`,reminders:[`猜测正确`],setup:!1},sage:{id:`sage`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/sage.png`,edition:`custom`,name:`贤者`,ability:`如果恶魔杀死了你，在当晚你会被唤醒并得知两名玩家，其中一名是杀死你的那个恶魔。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:71,firstNightReminder:``,otherNightReminder:`如果贤者被恶魔杀死，唤醒贤者，对他指向两名玩家。其中之一是杀死贤者的恶魔。`,reminders:[],setup:!1},amnesiac:{id:`amnesiac`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/amnesiac.png`,edition:`custom`,name:`失忆者`,ability:`你不知道你的能力是什么。每个白天你可以找说书人猜测一次，你会得知你的猜测有多准确。<i>（无关/有关/接近/完美）</i>`,team:`townsfolk`,sch_team:`镇民`,firstNight:1.5,otherNight:1.5,firstNightReminder:`决定失忆者的能力，并根据具体能力决定是否需要唤醒失忆者、何时唤醒、唤醒后让他做出什么操作或得知什么信息。`,otherNightReminder:`根据失忆者的具体能力决定是否需要唤醒失忆者、何时唤醒、唤醒后让他做出什么操作或得知什么信息。`,reminders:[`？`],setup:!1},noble:{id:`noble`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/noble.png`,edition:`custom`,name:`贵族`,ability:`在你的首个夜晚，你会得知三名玩家：其中有且只有一名玩家是邪恶的。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3049,otherNight:0,firstNightReminder:`唤醒贵族，对他指向三名玩家。这三名玩家中有且仅有一名是邪恶玩家。`,otherNightReminder:``,reminders:[`被得知`],setup:!1},bounty_hunter:{id:`bounty_hunter`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/bounty_hunter.png`,edition:`custom`,name:`赏金猎人`,ability:`在你的首个夜晚，你会得知一名邪恶玩家。每当你得知的玩家死亡，你会在当晚得知另一名邪恶玩家。[会有一名镇民转变为邪恶阵营]`,team:`townsfolk`,sch_team:`镇民`,firstNight:3055,otherNight:94,firstNightReminder:`（在进入首个夜晚时立即通知赏金猎人转变的那个镇民他的阵营发生了变化）唤醒赏金猎人，对他指向一名邪恶玩家。`,otherNightReminder:`如果赏金猎人之前得知的玩家死亡，唤醒赏金猎人，对他指向一名新的邪恶玩家。`,reminders:[`得知`],setup:!0},pixie:{id:`pixie`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/pixie.png`,edition:`custom`,name:`小精灵`,ability:`在你的首个夜晚，你会得知一个在场的镇民角色。如果你“疯狂”地证明你是该角色，当他死亡时你获得该角色的能力。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3033,otherNight:0,firstNightReminder:`唤醒小精灵，对他展示一个在场镇民角色标记。`,otherNightReminder:``,reminders:[`疯狂`,`获得能力`],setup:!1},general:{id:`general`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/general.png`,edition:`custom`,name:`将军`,ability:`每个夜晚，你会得知说书人认为哪个阵营当前更有优势（善良/邪恶/均势）。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3063,otherNight:99,firstNightReminder:`唤醒将军，对他用手势比划当前的优势阵营。`,otherNightReminder:`唤醒将军，对他用手势比划当前的优势阵营。`,reminders:[],setup:!1},preacher:{id:`preacher`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/preacher.png`,edition:`custom`,name:`传教士`,ability:`每个夜晚，你要选择一名玩家：如果你选中了爪牙，他会得知被传教士选中。所有被你选中的爪牙失去能力。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3015,otherNight:7,firstNightReminder:`唤醒传教士，让他选择一名玩家。如果他选中了爪牙，该爪牙失去能力。在传教士入睡后通知该爪牙被传教士选中。`,otherNightReminder:`唤醒传教士，让他选择一名玩家。如果他选中了爪牙，该爪牙失去能力。在传教士入睡后通知该爪牙被传教士选中。`,reminders:[`失去能力`],setup:!1},balloonist:{id:`balloonist`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/balloonist.png`,edition:`custom`,name:`气球驾驶员`,ability:`每个夜晚，你会得知一名与上个夜晚得知的玩家角色类型不同的玩家。[+0~1外来者]`,team:`townsfolk`,sch_team:`镇民`,firstNight:3050,otherNight:90,firstNightReminder:`唤醒气球驾驶员，对他指向一名玩家。`,otherNightReminder:`唤醒气球驾驶员，对他指向一名玩家，这名玩家与之前气球驾驶员上一个夜晚得知过的玩家属于不同的角色类型。`,reminders:[`得知`],setup:!0},cult_leader:{id:`cult_leader`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/cult_leader.png`,edition:`custom`,name:`异教领袖`,ability:`每个夜晚，你会转变为与你邻近的一名存活的玩家的阵营。每个白天，你可以提议所有玩家加入你的教派，如果所有善良玩家同意加入，你的阵营获胜。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3057,otherNight:96,firstNightReminder:`如果异教领袖的阵营发生了变化，将他唤醒并通知他最新阵营。`,otherNightReminder:`如果异教领袖的阵营发生了变化，将他唤醒并通知他最新阵营。`,reminders:[],setup:!1},lycanthrope:{id:`lycanthrope`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/lycanthrope.png`,edition:`custom`,name:`半兽人`,ability:`每个夜晚*，你要选择一名存活玩家：如果他是善良的，他死亡，并且当晚恶魔不会造成死亡。会有一名善良玩家始终被当作邪恶阵营。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:30,otherNightReminder:`唤醒半兽人，让他选择一名玩家。如果该玩家是善良玩家，该玩家死亡，且当晚不会有其他玩家死亡。`,reminders:[`死亡`],setup:!1},nightwatchman:{id:`nightwatchman`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/nightwatchman.png`,edition:`custom`,name:`守夜人`,ability:`每局游戏限一次，在夜晚时，你可以选择一名玩家：他会得知你是守夜人。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3056,otherNight:95,firstNightReminder:`唤醒守夜人，他可以摇头不使用能力，或选择一名玩家。如果守夜人选择了玩家，则在守夜人入睡后通知那名玩家谁是守夜人。`,otherNightReminder:`如果守夜人未曾使用能力，唤醒守夜人，他可以摇头不使用能力，或选择一名玩家。如果守夜人选择了玩家，则在守夜人入睡后通知那名玩家谁是守夜人。`,reminders:[`失去能力`],setup:!1},engineer:{id:`engineer`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/engineer.png`,edition:`custom`,name:`工程师`,ability:`每局游戏限一次，在夜晚时，你可以选择让恶魔变成你选择的恶魔角色，或让所有爪牙变成你选择的爪牙角色。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3014,otherNight:6,firstNightReminder:`唤醒工程师，他可以摇头不使用能力，或选择角色列表上的恶魔或爪牙角色，来执行同角色类型的这些玩家的角色变化。`,otherNightReminder:`如果工程师未曾使用能力，唤醒工程师，他可以摇头不使用能力，或选择角色列表上的恶魔或爪牙角色，来执行同角色类型的这些玩家的角色变化。`,reminders:[`失去能力`],setup:!1},fisherman:{id:`fisherman`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/fisherman.png`,edition:`custom`,name:`渔夫`,ability:`每局游戏限一次，在白天时，你可以让说书人给你一些能帮助你的阵营获胜的建议。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`失去能力`],setup:!1},huntsman:{id:`huntsman`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/huntsman.png`,edition:`custom`,name:`巡山人`,ability:`每局游戏限一次，在夜晚时，你可以选择一名存活的玩家：如果你选中了落难少女，她会变成一个不在场的镇民角色。[+落难少女]`,team:`townsfolk`,sch_team:`镇民`,firstNight:3034,otherNight:77,firstNightReminder:`唤醒巡山人，他可以摇头不使用能力，或选择一名玩家。如果巡山人选中了落难少女，则在巡山人入睡后通知落难少女角色变化。`,otherNightReminder:`如果巡山人未曾使用能力，唤醒巡山人，他可以摇头不使用能力，或选择一名玩家。如果巡山人选中了落难少女，则在巡山人入睡后通知落难少女角色变化。`,reminders:[`失去能力`],setup:!0},alchemist:{id:`alchemist`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/alchemist.png`,edition:`custom`,name:`炼金术士`,ability:`你拥有一个爪牙角色的能力。当你使用能力时，说书人可能会要求你更换选择。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3.3,otherNight:0,firstNightReminder:`唤醒炼金术士，对他展示他获得的能力所对应的爪牙角色标记。`,remindersGlobal:[`是炼金术士`],setup:!1},farmer:{id:`farmer`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/farmer.png`,edition:`custom`,name:`农夫`,ability:`当你在夜晚死亡时，一名存活的善良玩家会变成农夫。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:74,firstNightReminder:``,otherNightReminder:`如果农夫死于夜晚，唤醒一名存活的善良玩家告知他角色变化。`,reminders:[],setup:!1},magician:{id:`magician`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/magician.png`,edition:`custom`,name:`魔术师`,ability:`恶魔会以为你是爪牙。爪牙会以为你是恶魔。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3.6,otherNight:0,firstNightReminder:`如果魔术师在场，则需要对爪牙信息环节和恶魔信息环节的相关内容进行调整。`,otherNightReminder:``,reminders:[],setup:!1},king:{id:`king`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/king.png`,edition:`custom`,name:`国王`,ability:`每个夜晚，如果死亡的玩家数量大于或等于存活的玩家数量，你会得知一个存活的角色。恶魔知道你是国王。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3009,otherNight:93,firstNightReminder:`如果国王在场，对恶魔展示国王角色标记并指向国王玩家。`,otherNightReminder:`如果满足国王的唤醒条件，唤醒国王，对他展示一个存活的角色标记。`,reminders:[],setup:!1},choirboy:{id:`choirboy`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/choirboy.png`,edition:`custom`,name:`唱诗男孩`,ability:`如果恶魔杀死了国王，你会得知哪名玩家是恶魔。[+国王]`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:73,firstNightReminder:``,otherNightReminder:`如果恶魔杀死了国王，唤醒唱诗男孩，对他指向恶魔。`,reminders:[],setup:!0},poppy_grower:{id:`poppy_grower`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/poppy_grower.png`,edition:`custom`,name:`罂粟种植者`,ability:`爪牙和恶魔互相不认识。如果你死亡，当晚他们会互相认识。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3.4,otherNight:4,firstNightReminder:`如果罂粟种植者在场，跳过今晚的爪牙信息和恶魔信息环节。`,otherNightReminder:`如果罂粟种植者死于白天，插入执行爪牙信息和恶魔信息（不包含恶魔伪装）流程。如果罂粟种植者死于夜晚，则在当前玩家行动结束后立即执行相关流程。`,reminders:[`唤醒邪恶`],setup:!1},atheist:{id:`atheist`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/atheist.png`,edition:`custom`,name:`无神论者`,ability:`说书人可以打破游戏规则。如果说书人被处决，善良阵营获胜，即使你已死亡。[无邪恶角色在场]`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!0},cannibal:{id:`cannibal`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/cannibal.png`,edition:`custom`,name:`食人族`,ability:`你拥有上个死于处决的玩家的能力。如果该玩家属于邪恶阵营，你中毒直到下个善良玩家死于处决。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`饱餐`,`中毒`],setup:!1},knight:{id:`knight`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/knight.png`,edition:`custom`,name:`骑士`,ability:`在你的首个夜晚，你会得知两名非恶魔玩家。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3048,otherNight:0,firstNightReminder:`唤醒骑士，对他指向两名非恶魔玩家。`,otherNightReminder:``,reminders:[`得知`],setup:!1},steward:{id:`steward`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/steward.png`,edition:`custom`,name:`事务官`,ability:`在你的首个夜晚，你会得知一名善良玩家。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3047,otherNight:0,firstNightReminder:`唤醒事务官，对他指向一名善良玩家。`,otherNightReminder:``,reminders:[`得知`],setup:!1},high_priestess:{id:`high_priestess`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/high_priestess.png`,edition:`custom`,name:`女祭司`,ability:`每个夜晚，你会得知一名说书人认为你最应该与其交流的玩家。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3060,otherNight:98,firstNightReminder:`唤醒女祭司，对她指向一名玩家。`,otherNightReminder:`唤醒女祭司，对她指向一名玩家。`,reminders:[],setup:!1},shugenja:{id:`shugenja`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/shugenja.png`,edition:`custom`,name:`修行者`,ability:`在你的首个夜晚，你会得知距离最近的邪恶玩家位于你的顺时针还是逆时针方向。如果两侧的邪恶玩家与你距离相等，你得知的信息由说书人决定。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3061,otherNight:0,firstNightReminder:`唤醒修行者，对他指向对应方向来告知他最近的邪恶玩家的方向。`,otherNightReminder:``,reminders:[],setup:!1},village_idiot:{id:`village_idiot`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/village_idiot.png`,edition:`custom`,name:`村夫`,ability:`每个夜晚，你要选择一名玩家：你会得知他的阵营。[+0~2村夫，复数村夫中有一人醉酒]`,team:`townsfolk`,sch_team:`镇民`,firstNight:3054,otherNight:92,firstNightReminder:`唤醒村夫，让他指向一名玩家，用手势告诉他那名玩家的阵营。`,otherNightReminder:`唤醒村夫，让他指向一名玩家，用手势告诉他那名玩家的阵营。`,reminders:[`醉酒`],setup:!0},banshee:{id:`banshee`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/banshee.png`,edition:`custom`,name:`报丧女妖`,ability:`如果恶魔杀死了你，所有玩家都会得知此事。从现在开始，你每天可以发起两次提名，每次投票时可以投两票。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:75,firstNightReminder:`如果恶魔杀死了报丧女妖，宣布“报丧女妖觉醒了”，并使用“具有能力”标记报丧女妖。`,reminders:[`具有能力`],setup:!1},alsaahir:{id:`alsaahir`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/alsaahir.png`,edition:`custom`,name:`戏法师`,ability:`每个白天，你可以公开进行一次谁是爪牙，谁是恶魔的猜测。如果你猜对，善良阵营获胜。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},yinyangshi:{id:`yinyangshi`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/yinyangshi.png`,edition:`custom`,name:`阴阳师`,ability:`在你的首个夜晚，你会得知两个善良角色和两个邪恶角色。其中有且只有两个角色在场。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3051,otherNight:0,firstNightReminder:`唤醒阴阳师，对他展示两个善良角色和两个邪恶角色。`,reminders:[`在场`,`不在场`],setup:!1},qintianjian:{id:`qintianjian`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/qintianjian.png`,edition:`custom`,name:`钦天监`,ability:`在你的首个夜晚，你会得知离你最近的邪恶玩家位于你的哪一侧（左/右/相同）。如果与你邻近的玩家中有邪恶阵营，你会得知错误信息。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3062,otherNight:0,firstNightReminder:`唤醒钦天监，对他指向对应方向来告知他最近的邪恶玩家的方向。`,otherNightReminder:``,reminders:[],setup:!1},dianxiaoer:{id:`dianxiaoer`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/dianxiaoer.png`,edition:`custom`,name:`店小二`,ability:`在你的首个夜晚，你会得知两名善良玩家。他们之中会有一人醉酒，即使你已死亡。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3053,otherNight:0,firstNightReminder:`唤醒店小二，对他指向两名善良玩家。`,otherNightReminder:``,reminders:[`熟客`,`醉酒`],setup:!1},xionghaizi:{id:`xionghaizi`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/xionghaizi.png`,edition:`custom`,name:`熊孩子`,ability:`每个夜晚，你要选择一个镇民角色：他们的能力会产生错误信息，直到下个黄昏。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3032,otherNight:17,firstNightReminder:`唤醒熊孩子，让他选择角色列表上的一个镇民角色，该角色会产生错误信息。`,otherNightReminder:`唤醒熊孩子，让他选择角色列表上的一个镇民角色，该角色会产生错误信息。`,reminders:[`捣蛋`],setup:!1},langzhong:{id:`langzhong`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/langzhong.png`,edition:`custom`,name:`郎中`,ability:`每个夜晚，你要选择除你以外的一名玩家：你会得知一个与他能力相关的词语。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3052,otherNight:91,firstNightReminder:`唤醒郎中，让他指向除他以外的一名玩家。对郎中展示一个与该玩家能力相关的词语。`,otherNightReminder:`唤醒郎中，让他指向除他以外的一名玩家。对郎中展示一个与该玩家能力相关的词语。`,reminders:[],setup:!1},dagengren:{id:`dagengren`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/dagengren.png`,edition:`custom`,name:`打更人`,ability:`每个夜晚*，你要猜测今晚首个死亡的玩家与你的距离。如果你猜测正确，则除你以外的所有玩家今晚不会死亡，但你可能会死亡。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:15,firstNightReminder:``,otherNightReminder:`唤醒打更人，让他进行猜测，并放置提示标记到对应玩家旁。`,reminders:[`警惕`,`死亡`],setup:!1},jinyiwei:{id:`jinyiwei`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/jinyiwei.png`,edition:`custom`,name:`锦衣卫`,ability:`每个夜晚*，你要选择一名玩家：如果他在下个黄昏前死亡，你代替他死亡。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:16,firstNightReminder:``,otherNightReminder:`唤醒锦衣卫，让他选择一名玩家。他现在开始保护那名玩家。`,reminders:[`保护`],setup:!1},heshang:{id:`heshang`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/heshang.png`,edition:`custom`,name:`和尚`,ability:`每个夜晚，当有邪恶玩家的能力首次选择或影响与你邻近的存活玩家时，改为此次能力不生效并持续至下个黎明，且你会得知你的能力被触发。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`已生效`],setup:!1},geling:{id:`geling`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/geling.png`,edition:`custom`,name:`歌伶`,ability:`每局游戏限一次，在白天时，你可以提议所有玩家观看你的演出，并从同意参加的玩家中选择你的观众。如果恶魔成为了观众，你会在当晚死亡。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:61,firstNightReminder:``,otherNightReminder:`如果歌伶今天白天使用了自己的能力且恶魔成为了观众，歌伶死亡。`,reminders:[`失去能力`,`死亡`],setup:!1},bianlianshi:{id:`bianlianshi`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/bianlianshi.png`,edition:`custom`,name:`变脸师`,ability:`每个白天，如果你“疯狂”地证明自己是一个善良角色（与之前不同），你可能会在当晚获得那个角色的能力，直到下个黄昏。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`疯狂`],remindersGlobal:[],setup:!1},banxian:{id:`banxian`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/banxian.png`,edition:`custom`,name:`半仙`,ability:`任何在夜晚使用自身能力选择你的其他玩家，会改为选中另一名邪恶玩家作为替代。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},xizi:{id:`xizi`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/xizi.png`,edition:`custom`,name:`戏子`,ability:`所有戏子互相认识。不论在场的戏子数量多少或存活与否，胜负结果会被对调。[所有善良玩家都是戏子]`,team:`townsfolk`,sch_team:`镇民`,firstNight:3012,otherNight:0,firstNightReminder:`唤醒所有戏子并让他们互认。`,otherNightReminder:``,reminders:[],setup:!0},wudaozhe:{id:`wudaozhe`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/wudaozhe.png`,edition:`custom`,name:`悟道者`,ability:`你以为你是一个外来者，但你实际上不是。如果有邪恶玩家的能力选择或影响了你，在该效果生效前你会变成一个不在场的镇民角色。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,remindersGlobal:[`是悟道者`],setup:!0},bingbi:{id:`bingbi`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/bingbi.png`,edition:`custom`,name:`秉笔`,ability:`如果你在白天死亡，当晚你会得知一名善良玩家。如果你在夜晚死亡，当晚你会得知一名邪恶玩家。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:74.1,firstNightReminder:``,otherNightReminder:`在夜晚时，如果秉笔旁放置了“死于今日”提示标记，唤醒秉笔。对他指向一名善良玩家。让秉笔重新入睡。移除“死于今日”提示标记。如果秉笔在夜晚死亡，唤醒秉笔。对他指向一名邪恶玩家。让秉笔重新入睡。`,reminders:[`死于今日`],remindersGlobal:[],setup:!1},chongfei:{id:`chongfei`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/chongfei.png`,edition:`custom`,name:`宠妃`,ability:`每局游戏限一次，说书人会在关于你的事情上打破规则。随后，你会秘密得知说书人为此做了什么。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`失去能力`],remindersGlobal:[],setup:!1},daoke:{id:`daoke`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/daoke.png`,edition:`custom`,name:`刀客`,ability:`在你的首个夜晚，你会得知一个在场的爪牙角色。每局游戏限一次，你可以在白天公开选择一名玩家：如果他是你得知的角色，他死亡。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3053.5,otherNight:0,firstNightReminder:`在首个夜晚，唤醒刀客，对他展示标记了“得知”的爪牙角色标记。`,otherNightReminder:``,reminders:[`得知`,`失去能力`],remindersGlobal:[],setup:!1},daoshi:{id:`daoshi`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/daoshi.png`,edition:`custom`,name:`道士`,ability:`每个夜晚*，你要选择一名玩家：如果你选中了恶魔，你死亡，然后他醉酒直到下个黎明。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:30.1,firstNightReminder:``,otherNightReminder:`唤醒道士，让其选择一名玩家。如果他选中了恶魔，在道士角色标记旁放置“死亡”提示标记，并且在恶魔角色标记旁放置“醉酒”提示标记。`,reminders:[`醉酒`,`死亡`],remindersGlobal:[],setup:!1},fangshi:{id:`fangshi`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/fangshi.png`,edition:`custom`,name:`方士`,ability:`在你的首个夜晚，你要选择一个数字。在该数字对应的那一个夜晚，你会得知对应数量的在场角色。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3053.6,otherNight:96.5,firstNightReminder:`唤醒方士，让他选一个数字。如果他选择了1，给他展示一个在场角色。`,otherNightReminder:`在游戏的对应天数唤醒方士，给他展示对应数量的在场角色。`,reminders:[`第一夜`,`第二夜`,`第三夜`,`第四夜`,`第五夜`],remindersGlobal:[],setup:!1},fengshuishi:{id:`fengshuishi`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/fengshuishi.png`,edition:`custom`,name:`风水师`,ability:`在你的首个夜晚，你会得知一名玩家的角色类型。每个夜晚*，你会从他的顺时针方向得知下一名非旅行者玩家的角色类型。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3053.7,otherNight:91.5,firstNightReminder:`唤醒风水师，告知他“得知”标记旁的玩家角色类型，并将标记顺时针移动一名玩家。`,otherNightReminder:`唤醒风水师，告知他“得知”标记旁的玩家角色类型，并将标记顺时针移动一名玩家。`,reminders:[`得知`],remindersGlobal:[],setup:!1},limao:{id:`limao`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/limao.png`,edition:`custom`,name:`狸猫`,ability:`每个夜晚*，你要选择一名玩家：如果他是善良角色且当晚被邪恶角色杀死，你和他交换角色。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:17.5,firstNightReminder:``,otherNightReminder:`唤醒狸猫，让他选择一名玩家，将“太子”标记放在对应玩家角色标记旁。如果当晚恶魔杀死了“太子”，交换狸猫与“太子”的角色，并依次唤醒告知。在新的交换后的角色（原狸猫现太子）旁放置“醉酒”标记。`,reminders:[`太子`,`醉酒`],remindersGlobal:[],setup:!1},qianke:{id:`qianke`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/qianke.png`,edition:`custom`,name:`掮客`,ability:`每个夜晚，你要选择两名存活玩家：如果他们阵营相同，今晚任何玩家使用自身能力选择他们之一作为目标时，改为选中另一名玩家。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3013.5,otherNight:5.5,firstNightReminder:``,otherNightReminder:`唤醒掮客，让他选择两名存活玩家。如果这两个玩家阵营相同，在他俩的角色标记旁放置“交换目标”提示标记。`,reminders:[`交换目标`],remindersGlobal:[],setup:!1},ranfangfangzhu:{id:`ranfangfangsdthw4etq45`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/ranfangfangzhu.png`,edition:`custom`,name:`染坊坊主`,ability:`如果你在夜晚死亡，恶魔的能力变成“每个夜晚*，可能会有一名玩家死亡。”`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:75.5,firstNightReminder:``,otherNightReminder:`如果染坊坊主死于夜晚，唤醒恶魔并告知他能力发生转变。（华白注：此处运行方式存疑，不知道是否需要唤醒，期待山雨规则落实。）`,reminders:[`改变能力`],remindersGlobal:[],setup:!1},shiguan:{id:`shiguan`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/shiguan.png`,edition:`custom`,name:`史官`,ability:`每个夜晚*，如果今天白天有玩家死于处决，你会得知存活镇民的数量。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:93.5,firstNightReminder:``,otherNightReminder:`如果今天白天有玩家死于处决，唤醒史官，告知其在场存活镇民数量。`,reminders:[`死于处决`],remindersGlobal:[],setup:!1},tixingguan:{id:`tixingguan`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/tixingguan.png`,edition:`custom`,name:`提刑官`,ability:`在你首次提名玩家后，你会在当晚得知他的角色。恶魔会被你的能力当作善良角色。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:83.5,firstNightReminder:``,otherNightReminder:`在提刑官首次提名后的当晚，唤醒提刑官，告知被其提名的玩家的角色。`,reminders:[`提名`],remindersGlobal:[],setup:!1},xuncha:{id:`xuncha`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/xuncha.png`,edition:`custom`,name:`巡察`,ability:`每个夜晚*，你要选择两个善良角色（与上个夜晚不同）：如果他们都存活，他们当晚不会死亡。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:30.2,firstNightReminder:``,otherNightReminder:`唤醒巡查，让他选择两个善良角色（镇民或外来者），如果他们都在场并存活（华白注：应该是需要在场的），他们两个今晚不会死亡。`,reminders:[`不会死亡`],remindersGlobal:[],setup:!1},yanshi:{id:`yanshi`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/yanshi.png`,edition:`custom`,name:`偃师`,ability:`如果你在夜晚死亡，你与一名存活爪牙玩家交换角色。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:75.4,firstNightReminder:``,otherNightReminder:`如果偃师死于夜晚，将偃师与一名存活爪牙玩家交换角色，然后分别唤醒告知角色发生变化。`,reminders:[``],remindersGlobal:[],setup:!1},yishi:{id:`yishi`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/yishi.png`,edition:`custom`,name:`驿使`,ability:`每个白天，你可以公开声明一个角色。在当晚，你会得知该角色是否在场。如果你因此得知了否，你失去此能力。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:91.6,firstNightReminder:``,otherNightReminder:`如果驿使白天公开声明了一个角色，唤醒驿使：1.如果该角色在场，得知是；2.如果该角色不在场，得知否，并且驿使失去能力。`,reminders:[`在场`,`失去能力`],remindersGlobal:[],setup:!1},yinluren:{id:`yinluren`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/yinluren.png`,edition:`custom`,name:`引路人`,ability:`每个夜晚，你要选择至多三名玩家：你会得知今晚是否有邪恶玩家的能力选择或影响了他们之中的玩家。`,team:`townsfolk`,sch_team:`镇民`,firstNight:3062.5,otherNight:98.5,firstNightReminder:`唤醒引路人，让他选择至多三名玩家，告诉引路人今晚是否有邪恶玩家的能力选择或影响了他们之中的玩家。`,otherNightReminder:`唤醒引路人，让他选择至多三名玩家，告诉引路人今晚是否有邪恶玩家的能力选择或影响了他们之中的玩家。`,reminders:[``],remindersGlobal:[],setup:!1},yongjiang:{id:`yongjiang`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/yongjiang.png`,edition:`custom`,name:`俑匠`,ability:`如果已死亡玩家中没有邪恶玩家，你只会死于处决。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`只会死于处决`],remindersGlobal:[],setup:!1},zhen:{id:`zhen`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/zhen.png`,edition:`custom`,name:`鸩`,ability:`每局游戏限一次，在夜晚时*，你可以选择一个镇民角色：如果他在场，他中毒并死亡。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:60.5,firstNightReminder:``,otherNightReminder:`唤醒鸩，如果鸩使用能力，让鸩选择一个镇民角色：如果这个镇民角色在场，这个镇民角色先中毒，再死亡。`,reminders:[`中毒`,`死亡`],remindersGlobal:[],setup:!1},zhifu:{id:`zhifu`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/zhifu.png`,edition:`custom`,name:`知府`,ability:`每个夜晚*，你会得知今天是否有非镇民且非旅行者的玩家死亡。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:91.7,firstNightReminder:``,otherNightReminder:`唤醒知府，告诉他今天是否有非镇民且非旅行者的玩家死亡。`,reminders:[``],remindersGlobal:[],setup:!1},princess:{id:`princess`,name:`公主`,ability:`在你的首个白天，如果你提名并处决了一名玩家，当晚恶魔不会造成死亡。`,team:`townsfolk`,image:`https://botc.letshare.fun/imgs/icons/townsfolk/princess.png`,firstNight:0,otherNight:35,firstNightReminder:``,otherNightReminder:``,reminders:[`没有死亡`],setup:!1},butler:{id:`butler`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/butler.png`,edition:`custom`,name:`管家`,ability:`每个夜晚，你要选择除你以外的一名玩家：明天白天，只有他投票时你才能投票。`,team:`outsider`,sch_team:`外来者`,firstNight:3041,otherNight:82,firstNightReminder:`唤醒管家，让他选择一名除自己以外的玩家，那名玩家成为他的主人。`,otherNightReminder:`唤醒管家，让他选择一名除自己以外的玩家，那名玩家成为他的主人。`,reminders:[`主人`],setup:!1},drunk:{id:`drunk`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/drunk.png`,edition:`custom`,name:`酒鬼`,ability:`你不知道你是酒鬼。你以为你是一个镇民角色，但其实你不是。`,team:`outsider`,sch_team:`外来者`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`是酒鬼`],remindersGlobal:[`是酒鬼`],setup:!0},recluse:{id:`recluse`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/recluse.png`,edition:`custom`,name:`陌客`,ability:`你可能会被当作邪恶阵营、爪牙角色或恶魔角色，即使你已死亡。`,team:`outsider`,sch_team:`外来者`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},saint:{id:`saint`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/saint.png`,edition:`custom`,name:`圣徒`,ability:`如果你死于处决，你的阵营落败。`,team:`outsider`,sch_team:`外来者`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},tinker:{id:`tinker`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/tinker.png`,edition:`custom`,name:`修补匠`,ability:`你随时可能死亡。`,team:`outsider`,sch_team:`外来者`,firstNight:0,otherNight:63,firstNightReminder:``,otherNightReminder:`在夜晚的任意时机，你都可以决定杀死修补匠。这里只是一个提示以免遗忘修补匠。`,reminders:[`死亡`],setup:!1},moonchild:{id:`moonchild`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/moonchild.png`,edition:`custom`,name:`月之子`,ability:`当你得知你死亡时，你要公开选择一名存活的玩家。如果他是善良的，在当晚他会死亡。`,team:`outsider`,sch_team:`外来者`,firstNight:0,otherNight:64,firstNightReminder:``,otherNightReminder:`如果月之子在今天白天的时候使用自己的能力选择了一名善良玩家，那名玩家死亡。`,reminders:[`死亡`],setup:!1},goon:{id:`goon`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/goon.png`,edition:`custom`,name:`莽夫`,ability:`每个夜晚，首个使用其自身能力选择了你的玩家会醉酒直到下个黄昏。你会转变为他的阵营。`,team:`outsider`,sch_team:`外来者`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`醉酒`],setup:!1},lunatic:{id:`lunatic`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/lunatic.png`,edition:`custom`,name:`疯子`,ability:`你以为你是一个恶魔，但其实你不是。恶魔知道你是疯子以及你在每个夜晚选择了哪些玩家。`,team:`outsider`,sch_team:`外来者`,firstNight:2005.3000000000002,otherNight:28,firstNightReminder:`唤醒疯子并向他提供恶魔信息。如可能，则让疯子进行相应的恶魔行动。随后在恶魔信息环节对恶魔提供疯子的相关信息。`,otherNightReminder:`如果疯子以为的恶魔会在当晚行动，唤醒疯子，并让他以恶魔的方式行动。`,reminders:[`被选择`],remindersGlobal:[`是疯子`],setup:!0},mutant:{id:`mutant`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/mutant.png`,edition:`custom`,name:`畸形秀演员`,ability:`如果你“疯狂”地证明自己是外来者，你可能被处决。`,team:`outsider`,sch_team:`外来者`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},sweetheart:{id:`sweetheart`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/sweetheart.png`,edition:`custom`,name:`心上人`,ability:`当你死亡时，会有一名玩家开始醉酒。`,team:`outsider`,sch_team:`外来者`,firstNight:0,otherNight:68,firstNightReminder:``,otherNightReminder:`如果心上人死亡，一名玩家醉酒。`,reminders:[`醉酒`],setup:!1},barber:{id:`barber`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/barber.png`,edition:`custom`,name:`理发师`,ability:`如果你死亡，在当晚恶魔可以选择两名玩家（不能选择其他恶魔）交换角色。`,team:`outsider`,sch_team:`外来者`,firstNight:0,otherNight:67,firstNightReminder:``,otherNightReminder:`如果理发师死于白天，唤醒恶魔让他决定是否使用理发师的能力。如果理发师死于夜晚，（如果让除攻击理发师以外的恶魔进行选择则需要等当前恶魔入睡后）让一名恶魔决定是否使用理发师的能力。`,reminders:[`今晚理发`],setup:!1},klutz:{id:`klutz`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/klutz.png`,edition:`custom`,name:`呆瓜`,ability:`当你得知你死亡时，你要公开选择一名存活的玩家：如果他是邪恶的，你的阵营落败。`,team:`outsider`,sch_team:`外来者`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},snitch:{id:`snitch`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/snitch.png`,edition:`custom`,name:`告密者`,ability:`爪牙会在其首个夜晚得知三个伪装。`,team:`outsider`,sch_team:`外来者`,firstNight:2005,otherNight:0,firstNightReminder:`如果告密者在场，对爪牙展示三个不在场的善良角色标记。`,otherNightReminder:``,reminders:[],setup:!1},acrobat:{id:`acrobat`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/acrobat.png`,edition:`custom`,name:`杂技演员`,ability:`每个夜晚*，你要选择一名玩家：如果当晚他醉酒或中毒，你死亡。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:2150,firstNightReminder:``,otherNightReminder:`让杂技演员选择一名玩家。标记该名玩家“被选择”。让杂技演员重新入睡。 如果被选择的玩家在当晚任何时刻醉酒或中毒，标记杂技演员”死亡“。`,reminders:[`被选择`,`死亡`],setup:!1},puzzlemaster:{id:`puzzlemaster`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/puzzlemaster.png`,edition:`custom`,name:`解谜大师`,ability:`一名玩家醉酒，即使你已死亡。每局游戏限一次，你可以猜测谁是那个醉酒的玩家，如果猜对了，你会得知谁是恶魔，但如果猜错了，你会得知错误的“谁是恶魔”信息。`,team:`outsider`,sch_team:`外来者`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`醉酒`,`已猜测`],setup:!1},heretic:{id:`heretic`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/heretic.png`,edition:`custom`,name:`异端分子`,ability:`对调胜负结果，即使你已死亡。`,team:`outsider`,sch_team:`外来者`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},damsel:{id:`damsel`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/damsel.png`,edition:`custom`,name:`落难少女`,ability:`所有爪牙都知道落难少女在场。每局游戏限一次，任意爪牙可以公开猜测你是落难少女，如果猜对，你的阵营落败。`,team:`outsider`,sch_team:`外来者`,firstNight:2005.1,otherNight:0,firstNightReminder:`如果落难少女在场，对爪牙展示落难少女角色标记。`,otherNightReminder:`0`,reminders:[`已被猜测`],setup:!1},golem:{id:`golem`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/golem.png`,edition:`custom`,name:`魔像`,ability:`每局游戏你只能发起提名一次。当你发起提名时，如果被你提名的玩家不是恶魔，他死亡。`,team:`outsider`,sch_team:`外来者`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`无法提名`],setup:!1},politician:{id:`politician`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/politician.png`,edition:`custom`,name:`政客`,ability:`如果你是对你的阵营落败负最大责任的人，你转变阵营并获胜，即使你已死亡。`,team:`outsider`,sch_team:`外来者`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},plague_doctor:{id:`plague_doctor`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/plague_doctor.png`,edition:`custom`,name:`瘟疫医生`,ability:`当你死亡时，说书人会获得一个爪牙能力。`,team:`outsider`,sch_team:`外来者`,firstNight:0,otherNight:72,firstNightReminder:``,otherNightReminder:`如果瘟疫医生死亡，说书人获得一项爪牙能力。`,reminders:[`说书人能力`],setup:!1},hatter:{id:`hatter`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/hatter.png`,edition:`custom`,name:`帽匠`,ability:`如果你死亡，当晚爪牙和恶魔玩家可以选择变成新的爪牙和恶魔角色。`,team:`outsider`,sch_team:`外来者`,firstNight:0,otherNight:3,firstNightReminder:``,otherNightReminder:`如果帽匠死于白天，（建议分别）唤醒恶魔和爪牙并让他们选择是否改变角色。如果帽匠死于夜晚，则在当前玩家行动结束后立即开始茶会。`,reminders:[`今晚茶会`],setup:!1},ogre:{id:`ogre`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/ogre.png`,edition:`custom`,name:`食人魔`,ability:`在你的首个夜晚，你要选择除你以外的一名玩家：你转变为他的阵营，即使你已醉酒或中毒，但你不知道你转变后的阵营。`,team:`outsider`,sch_team:`外来者`,firstNight:3059,otherNight:0,firstNightReminder:`唤醒食人魔，让他选择一名玩家。如果他选择了邪恶玩家，将他的角色标记在魔典中倒置以表示他转变为邪恶阵营。`,otherNightReminder:``,reminders:[`挚友`],setup:!1},zealot:{id:`zealot`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/zealot.png`,edition:`custom`,name:`狂热者`,ability:`如果有大于等于五名玩家存活，你必须在所有提名中投票。`,team:`outsider`,sch_team:`外来者`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},shaxing:{id:`shaxing`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/shaxing.png`,edition:`custom`,name:`煞星`,ability:`如果你死亡，当晚与你邻近的存活玩家之一可能会死亡。`,team:`outsider`,sch_team:`外来者`,firstNight:0,otherNight:65,firstNightReminder:``,otherNightReminder:`如果煞星死亡，决定是否让一名与他邻近的存活玩家死亡。`,reminders:[`死亡`],setup:!1},nichen:{id:`nichen`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/nichen.png`,edition:`custom`,name:`逆臣`,ability:`在你的首个夜晚，你要选择除你以外的一名玩家：如果他先死于处决，你会在当晚转变为邪恶；如果你先死于处决，他会在当晚转变为邪恶。`,team:`outsider`,sch_team:`外来者`,firstNight:3042,otherNight:25,firstNightReminder:`唤醒逆臣，让他选择一名除自己以外的玩家，那名玩家现在与他不共戴天。`,otherNightReminder:`如果逆臣或他的目标玩家，这两人之一死于处决，唤醒另一名玩家并通知他阵营变化。`,reminders:[`不共戴天`],setup:!1},shusheng:{id:`shusheng`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/shusheng.png`,edition:`custom`,name:`书生`,ability:`恶魔知道书生在场。每局游戏限一次，恶魔可以拜访说书人并猜测你是书生。如果恶魔猜测正确，即使你已死亡，当晚该恶魔可以选择一名玩家：他死亡。`,team:`outsider`,sch_team:`外来者`,firstNight:3011,otherNight:51,firstNightReminder:`如果书生在场，对恶魔展示书生角色标记。`,otherNightReminder:`如果恶魔猜中了书生，让恶魔选择一名玩家，该玩家死亡。`,reminders:[`已猜测`,`死亡`],setup:!1},shijie:{id:`shijie`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/shijie.png`,edition:`custom`,name:`使节`,ability:`每个夜晚限一次，一名玩家在使用自身能力选择邪恶玩家时会改为选中你，即使你已死亡。`,team:`outsider`,sch_team:`外来者`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`已触发`],setup:!1},jiubao:{id:`jiubao`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/jiubao.png`,edition:`custom`,name:`酒保`,ability:`与你邻近的善良玩家之一醉酒，即使你已死亡。`,team:`outsider`,sch_team:`外来者`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`醉酒`],remindersGlobal:[],setup:!1},rulianshi:{id:`rulianshi`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/rulianshi.png`,edition:`custom`,name:`入殓师`,ability:`如果你提名了恶魔且他死于这次处决，你会变成那个邪恶的恶魔。当剩余存活玩家小于等于四人时（旅行者除外），你失去能力。`,team:`outsider`,sch_team:`外来者`,firstNight:0,otherNight:27.5,firstNightReminder:``,otherNightReminder:`如果入殓师白天提名了恶魔且恶魔死于这次处决，唤醒入殓师，告知他变成新的邪恶的恶魔。`,reminders:[`入殓`],remindersGlobal:[],setup:!1},shutong:{id:`shutong`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/shutong.png`,edition:`custom`,name:`书童`,ability:`在你的首个夜晚，你要选择除你以外的一名玩家：除首个夜晚以外，当他被邪恶玩家的能力选择或影响时，你会在当晚死亡。`,team:`outsider`,sch_team:`外来者`,firstNight:3034.5,otherNight:60.5,firstNightReminder:`唤醒书童，让他选择一名玩家。`,otherNightReminder:`如果被书童选择的玩家被邪恶玩家的能力选择或影响时，书童会在当晚死亡。`,reminders:[`选择`,`死亡`],remindersGlobal:[],setup:!1},hermit:{id:`hermit`,name:`隐士`,ability:`你拥有所有外来者能力。[-0~1外来者]`,team:`outsider`,image:`https://botc.letshare.fun/imgs/icons/outsider/hermit.png`,firstNight:0,otherNight:0,firstNightReminder:`0`,otherNightReminder:`0`,reminders:[],setup:!1},poisoner:{id:`poisoner`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/poisoner.png`,edition:`custom`,name:`投毒者`,ability:`每个夜晚，你要选择一名玩家：他在当晚和明天白天中毒。`,team:`minion`,sch_team:`爪牙`,firstNight:3018,otherNight:9,firstNightReminder:`唤醒投毒者，让他选择一名玩家，那名玩家中毒。`,otherNightReminder:`唤醒投毒者，让他选择一名玩家，那名玩家中毒。`,reminders:[`中毒`],setup:!1},spy:{id:`spy`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/spy.png`,edition:`custom`,name:`间谍`,ability:`每个夜晚，你能查看魔典。你可能会被当作善良阵营、镇民角色或外来者角色，即使你已死亡。`,team:`minion`,sch_team:`爪牙`,firstNight:3058,otherNight:97,firstNightReminder:`唤醒间谍，让他查看魔典。`,otherNightReminder:`唤醒间谍，让他查看魔典。`,reminders:[],setup:!1},scarlet_woman:{id:`scarlet_woman`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/scarlet_woman.png`,edition:`custom`,name:`红唇女郎`,ability:`如果大于等于五名玩家存活时（旅行者不计算在内）恶魔死亡，你变成那个恶魔。`,team:`minion`,sch_team:`爪牙`,firstNight:0,otherNight:26,otherNightReminder:`如果红唇女郎的能力曾被触发，唤醒她并告知她变成了哪个恶魔角色。`,reminders:[`是恶魔`]},baron:{id:`baron`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/baron.png`,edition:`custom`,name:`男爵`,ability:`会有额外的外来者在场。[+2外来者]`,team:`minion`,sch_team:`爪牙`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!0},godfather:{id:`godfather`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/godfather.png`,edition:`custom`,name:`教父`,ability:`在你的首个夜晚，你会得知有哪些外来者角色在场。如果有外来者在白天死亡，你会在当晚被唤醒并且你要选择一名玩家：他死亡。[-1或+1外来者]`,team:`minion`,sch_team:`爪牙`,firstNight:3021,otherNight:53,firstNightReminder:`唤醒教父，对他展示外来者角色标记，告诉他有哪些外来者在场。`,otherNightReminder:`如果今天白天有外来者死亡，唤醒教父，让他攻击一名玩家。`,reminders:[`死于今日`,`死亡`],setup:!0},devils_advocate:{id:`devils_advocate`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/devils_advocate.png`,edition:`custom`,name:`魔鬼代言人`,ability:`每个夜晚，你要选择一名存活的玩家（与上个夜晚不同）：如果明天白天他被处决，他不会死亡。`,team:`minion`,sch_team:`爪牙`,firstNight:3022,otherNight:18,firstNightReminder:`唤醒魔鬼代言人，让他选择一名玩家，那名玩家处决不死。`,otherNightReminder:`唤醒魔鬼代言人，让他选择一名与上一晚不同的玩家，那名玩家处决不死。`,reminders:[`处决不死`],setup:!1},assassin:{id:`assassin`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/assassin.png`,edition:`custom`,name:`刺客`,ability:`每局游戏限一次，在夜晚时*，你可以选择一名玩家：他死亡，即使因为任何原因让他不会死亡。`,team:`minion`,sch_team:`爪牙`,firstNight:0,otherNight:52,firstNightReminder:``,otherNightReminder:`如果刺客未曾使用能力，唤醒刺客，他可以摇头不使用能力，或选择攻击一名玩家。`,reminders:[`死亡`,`失去能力`],setup:!1},mastermind:{id:`mastermind`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/mastermind.png`,edition:`custom`,name:`主谋`,ability:`如果恶魔因为死于处决而因此导致游戏结束时，再额外进行一个夜晚和一个白天。在那个白天如果有玩家被处决，他的阵营落败。`,team:`minion`,sch_team:`爪牙`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},evil_twin:{id:`evil_twin`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/evil_twin.png`,edition:`custom`,name:`镜像双子`,ability:`你与一名对立阵营的玩家互相知道对方是什么角色。如果其中善良玩家被处决，邪恶阵营获胜。如果你们都存活，善良阵营无法获胜。`,team:`minion`,sch_team:`爪牙`,firstNight:3023,otherNight:0,firstNightReminder:`分别独自唤醒镜像双子和对立双子，告知他们由于镜像双子能力而得知的信息。`,otherNightReminder:``,reminders:[`对立双子`],setup:!1},witch:{id:`witch`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/witch.png`,edition:`custom`,name:`女巫`,ability:`每个夜晚，你要选择一名玩家：如果他明天白天发起提名，他死亡。如果只有三名存活的玩家，你失去此能力。`,team:`minion`,sch_team:`爪牙`,firstNight:3024,otherNight:19,firstNightReminder:`唤醒女巫，让她选择一名玩家，那名玩家被诅咒。`,otherNightReminder:`唤醒女巫，让她选择一名玩家，那名玩家被诅咒。`,reminders:[`被诅咒`],setup:!1},cerenovus:{id:`cerenovus`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/cerenovus.png`,edition:`custom`,name:`洗脑师`,ability:`每个夜晚，你要选择一名玩家和一个善良角色。他明天白天和夜晚需要“疯狂”地证明自己是这个角色，不然他可能被处决。`,team:`minion`,sch_team:`爪牙`,firstNight:3025,otherNight:20,firstNightReminder:`唤醒洗脑师，让他选择一名玩家和角色列表上的一个善良角色，那名玩家明天需要“疯狂”证明自己是那个角色。在洗脑师入睡后通知那名玩家被洗脑。`,otherNightReminder:`唤醒洗脑师，让他选择一名玩家和角色列表上的一个善良角色，那名玩家明天需要“疯狂”证明自己是那个角色。在洗脑师入睡后通知那名玩家被洗脑。`,reminders:[`疯狂`],setup:!1},"pit-hag":{id:`pit-hag`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/pit-hag.png`,edition:`custom`,name:`麻脸巫婆`,ability:`每个夜晚*，你要选择一名玩家和一个角色，如果该角色不在场，他变成该角色。如果因此创造了一个恶魔，当晚的死亡由说书人决定。`,team:`minion`,sch_team:`爪牙`,firstNight:0,otherNight:8,firstNightReminder:``,otherNightReminder:`唤醒麻脸巫婆，让她选择一名玩家和角色列表上的一个角色。如果该角色不在场，则在麻脸巫婆入睡后通知该玩家角色变化。根据实际情况，可以将相关通知合并，例如玩家变成了恶魔，则在恶魔行动时一并唤醒，通知角色变化并让他执行相应行动。`,reminders:[],setup:!1},widow:{id:`widow`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/widow.png`,edition:`custom`,name:`寡妇`,ability:`在你的首个夜晚，你能查看魔典并选择一名玩家：他中毒。随后，始终会有一名善良玩家知道寡妇在场。`,team:`minion`,sch_team:`爪牙`,firstNight:3019,otherNight:0,firstNightReminder:`唤醒寡妇，让她查看魔典。在她查看完毕后让她选择一名玩家，那名玩家中毒。随后如果寡妇未醉酒中毒，唤醒一名善良玩家，对他展示寡妇角色标记。`,reminders:[`中毒`],remindersGlobal:[`被知晓`]},fearmonger:{id:`fearmonger`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/fearmonger.png`,edition:`custom`,name:`恐惧之灵`,ability:`每个夜晚，你要选择一名玩家：如果你提名他且他被处决，他的阵营落败。当你首次选择或更换目标时，所有玩家都会得知你选择了新的玩家。`,team:`minion`,sch_team:`爪牙`,firstNight:3026,otherNight:21,firstNightReminder:`唤醒恐惧之灵，让他选择一名玩家，随后通知所有玩家恐惧之灵选择了一名玩家。`,otherNightReminder:`唤醒恐惧之灵，让他选择一名玩家，随后如果恐惧之灵的目标发生了变更，通知所有玩家恐惧之灵选择了一名玩家。`,reminders:[`恐惧`],setup:!1},psychopath:{id:`psychopath`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/psychopath.png`,edition:`custom`,name:`精神病患者`,ability:`每个白天，在提名开始前，你可以公开选择一名玩家：他死亡。如果你被处决，提名你的玩家需要和你猜拳，只有你输了你才会死亡。`,team:`minion`,sch_team:`爪牙`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},goblin:{id:`goblin`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/goblin.png`,edition:`custom`,name:`哥布林`,ability:`如果你在被提名后公开声明自己是哥布林且在那个白天被处决，你的阵营获胜。`,team:`minion`,sch_team:`爪牙`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`已宣称`],setup:!1},mezepheles:{id:`mezepheles`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/mezepheles.png`,edition:`custom`,name:`灵言师`,ability:`在你的首个夜晚，你会得知一个关键词。首个说出该关键词的善良玩家会在当晚转变为邪恶阵营。`,team:`minion`,sch_team:`爪牙`,firstNight:3028,otherNight:23,firstNightReminder:`唤醒灵言师，对他展示他的关键词。`,otherNightReminder:`如果首次有善良玩家说出了灵言师的关键词，唤醒该玩家并通知他阵营变化。`,reminders:[`转为邪恶`,`失去能力`]},marionette:{id:`marionette`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/marionette.png`,edition:`custom`,name:`提线木偶`,ability:`你以为你是一个善良角色，但其实你不是。恶魔会知道你是提线木偶。[提线木偶会与恶魔邻座]`,team:`minion`,sch_team:`爪牙`,firstNight:3010,otherNight:0,firstNightReminder:`如果提线木偶在场，对恶魔展示提线木偶角色标记并指向提线木偶玩家。`,remindersGlobal:[`是提线木偶`],setup:!0},boomdandy:{id:`boomdandy`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/boomdandy.png`,edition:`custom`,name:`炸弹人`,ability:`如果你被处决，除三名玩家以外的其他所有玩家均会死亡。倒数十声后，被最多玩家手指指着的玩家死亡。`,team:`minion`,sch_team:`爪牙`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},organ_grinder:{id:`organ_grinder`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/organ_grinder.png`,edition:`custom`,name:`街头风琴手`,ability:`所有玩家在投票时闭眼，且票数会秘密统计。每个夜晚，你要选择自己是否醉酒，直到你下次选择。`,team:`minion`,sch_team:`爪牙`,firstNight:0,otherNight:0,reminders:[`即将被处决`]},vizier:{id:`vizier`,image:`https://wiki.bloodontheclocktower.com/images/a/a4/Icon_vizier.png`,edition:`custom`,name:`维齐尔`,ability:`所有玩家都知道你是维齐尔。你在白天时不会死亡。如果一次提名中有善良玩家投票，你可以让被提名者立即被处决。`,team:`minion`,sch_team:`爪牙`,firstNight:3075,otherNight:0,firstNightReminder:`如果维齐尔在场，告知所有人谁是维齐尔。`},harpy:{id:`harpy`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/harpy.png`,edition:`custom`,name:`鹰身女妖`,ability:`每个夜晚，你要选择两名玩家：明天第一名玩家需要“疯狂”地证明第二名玩家是邪恶的，否则他们之中可能会有人死亡。`,team:`minion`,sch_team:`爪牙`,firstNight:3027,otherNight:22,firstNightReminder:`唤醒鹰身女妖，让她选择两名玩家，第一名玩家明天需要“疯狂”证明第二名玩家邪恶。在鹰身女妖入睡后通知第一名玩家被鹰身女妖选中。`,otherNightReminder:`唤醒鹰身女妖，让她选择两名玩家，第一名玩家明天需要“疯狂”证明第二名玩家邪恶。在鹰身女妖入睡后通知第一名玩家被鹰身女妖选中。`,reminders:[`疯狂`,`第二名`],setup:!1},summoner:{id:`summoner`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/summoner.png`,edition:`custom`,name:`召唤师`,ability:`在首个夜晚，你会得知三个伪装。在第三个夜晚，你要选择一名玩家：他变成由你选择的邪恶恶魔。[无恶魔在场]`,team:`minion`,sch_team:`爪牙`,firstNight:2005.1999999999998,otherNight:27,firstNightReminder:`唤醒召唤师，对他展示三个不在场的善良角色标记。`,otherNightReminder:`如果这是游戏中的第三个夜晚，唤醒召唤师，让他选择一名玩家和一个恶魔角色，那名玩家变成由他选择的邪恶恶魔。`,reminders:[`第一晚`,`第二晚`,`第三晚`],setup:!0},boffin:{id:`boffin`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/boffin.png`,edition:`custom`,name:`科学怪人`,ability:`恶魔拥有一个不在场的善良角色的能力，即使他醉酒或中毒。你和他都知道他获得了什么能力。`,team:`minion`,sch_team:`爪牙`,firstNight:1.45,otherNight:0,firstNightReminder:`（分别或同时）唤醒科学怪人和恶魔，通知他们恶魔因为科学怪人而获得的善良角色的能力。`,otherNightReminder:``,reminders:[],setup:!0},wizard:{id:`wizard`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/wizard.png`,edition:`custom`,name:`巫师`,ability:`每局游戏限一次，你可以向说书人许愿。如果愿望被实现，可能会伴随着代价和线索。`,team:`minion`,sch_team:`爪牙`,firstNight:0,otherNight:0,reminders:[`？`],setup:!0},xaan:{id:`xaan`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/xaan.png`,edition:`custom`,name:`限`,ability:`在等同于初始外来者数量的夜晚，所有镇民玩家中毒直到下个黄昏。[外来者数量任意]`,team:`minion`,sch_team:`爪牙`,firstNight:3017.5,otherNight:8.5,reminders:[`第一夜`,`第二夜`,`第三夜`,`大限已至`],setup:!0},humeiniang:{id:`humeiniang`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/humeiniang.png`,edition:`custom`,name:`狐媚娘`,ability:`在你的首个夜晚，你要选择一名玩家：他会知道狐媚娘在场。如果你死于处决，当晚他转变为邪恶阵营。`,team:`minion`,sch_team:`爪牙`,firstNight:3029,otherNight:24,firstNightReminder:`唤醒狐媚娘，让她选择一名玩家。在狐媚娘入睡后通知那名玩家狐媚娘在场。`,otherNightReminder:`如果狐媚娘死于处决，唤醒她选择的玩家并通知他阵营变化。`,reminders:[`被魅惑`]},yangguren:{id:`yangguren`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/yangguren.png`,edition:`custom`,name:`养蛊人`,ability:`在你存活时提名你的玩家会在当晚死亡，即使你已死亡。`,team:`minion`,sch_team:`爪牙`,firstNight:0,otherNight:54,otherNightReminder:`今天白天提名了存活的养蛊人的玩家死亡。`,reminders:[`蛊`]},jinweijun:{id:`jinweijun`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/jinweijun.png`,edition:`custom`,name:`禁卫军`,ability:`“疯狂”地想要死亡的玩家可能会立即被处决。`,team:`minion`,sch_team:`爪牙`,firstNight:0,otherNight:0,firstNightReminder:``,reminders:[]},jinweijun2:{id:`jinweijun2`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/jinweijun.png`,edition:`custom`,name:`禁卫军Ⅱ`,ability:`在你的首个夜晚，你要选择存活或死亡。“疯狂”地想要这样做的玩家可能会立即被处决。`,team:`minion`,sch_team:`爪牙`,firstNight:3023.5,otherNight:0,firstNightReminder:``,reminders:[]},ganshiren:{id:`ganshiren`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/ganshiren.png`,edition:`custom`,name:`赶尸人`,ability:`与你邻近的两名镇民玩家会在其首次死亡时被当作仍然存活。[-1外来者]`,team:`minion`,sch_team:`爪牙`,firstNight:0,otherNight:0,reminders:[`活尸`],setup:!0},gudiao:{id:`gudiao`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/gudiao.png`,edition:`custom`,name:`蛊雕`,ability:`每个夜晚，你要选择左或右：你得知该方向上的下一名存活善良玩家的角色，他中毒且其他善良玩家以为他是邪恶的蛊雕，直到下个黄昏。`,team:`minion`,sch_team:`爪牙`,firstNight:3019.5,otherNight:9.5,firstNightReminder:`唤醒蛊雕，让他选择左或者右，他得知该方向上的下一名存活善良玩家的角色，这个善良玩家中毒且其他善良玩家以为他是邪恶的蛊雕，直到下个黄昏。`,otherNightReminder:`唤醒蛊雕，让他选择左或者右，他得知该方向上的下一名存活善良玩家的角色，这个善良玩家中毒且其他善良玩家以为他是邪恶的蛊雕，直到下个黄昏。`,reminders:[`中毒`],setup:!1},huapi:{id:`huapi`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/huapi.png`,edition:`custom`,name:`画皮`,ability:`在你的首个夜晚，你要选择一名存活玩家：他死亡但会被当作存活。当他下一次即将死亡时，他重生，随后你重获能力。`,team:`minion`,sch_team:`爪牙`,firstNight:3017.3,otherNight:54.5,firstNightReminder:`唤醒画皮，让画皮选择一名存活玩家，那名存活玩家变成活尸。`,otherNightReminder:`如果首夜被画皮变成活尸的玩家死亡，他重生，然后画皮重获能力。唤醒画皮，让画皮选择一名存活玩家，那名存活玩家变成活尸。`,reminders:[`活尸`,`失去能力`],setup:!1},mengpo:{id:`mengpo`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/mengpo.png`,edition:`custom`,name:`孟婆`,ability:`每个夜晚*，你要选择一名玩家：如果他存活，那么他要选择让自己失去能力，或死亡并保留能力直到下个黄昏。`,team:`minion`,sch_team:`爪牙`,firstNight:0,otherNight:54.6,firstNightReminder:``,otherNightReminder:`唤醒孟婆，让孟婆选择一名玩家。让被孟婆选择的玩家做出生或死的选择。`,reminders:[`存活并失去能力`,`死亡并保留能力`],setup:!1},niangjiushi:{id:`niangjiushi`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/niangjiushi.png`,edition:`custom`,name:`酿酒师`,ability:`每个夜晚，你要选择一个镇民角色：当他下一次通过自身能力获取信息时，改为得知你给出的信息。`,team:`minion`,sch_team:`爪牙`,firstNight:3019.6,otherNight:9.6,firstNightReminder:`唤醒酿酒师，让其选择一个镇民角色并给出一个符合该角色信息格式的信息，当他下一次通过自身能力获取信息时，改为得知酿酒师给出的信息。`,otherNightReminder:`唤醒酿酒师，让其选择一个镇民角色并给出一个符合该角色信息格式的信息，当他下一次通过自身能力获取信息时，改为得知酿酒师给出的信息。`,reminders:[`微醺`],setup:!1},wraith:{id:`wraith`,name:`亡魂`,ability:`你可以在夜晚睁眼。当其他邪恶玩家被唤醒时，你也会被唤醒。`,team:`minion`,image:`https://botc.letshare.fun/imgs/icons/minion/wraith.png`,firstNight:1.4,otherNight:1.4,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},imp:{id:`imp`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/imp.png`,edition:`custom`,name:`小恶魔`,ability:`每个夜晚*，你要选择一名玩家：他死亡。如果你以这种方式自杀，一名爪牙会变成小恶魔。`,team:`demon`,sch_team:`恶魔`,firstNight:0,otherNight:31,firstNightReminder:``,otherNightReminder:`唤醒小恶魔，让他攻击一名玩家。如果他成功自杀，则在他入睡后通知一名爪牙角色变化。`,reminders:[`死亡`],setup:!1},zombuul:{id:`zombuul`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/zombuul.png`,edition:`custom`,name:`僵怖`,ability:`每个夜晚*，如果今天白天没有人死亡，你会被唤醒并要选择一名玩家：他死亡。当你首次死亡后，你仍存活，但会被当作死亡。`,team:`demon`,sch_team:`恶魔`,firstNight:0,otherNight:32,firstNightReminder:``,otherNightReminder:`如果白天无人死亡，唤醒僵怖，让他攻击一名玩家。`,reminders:[`死于今日`,`死亡`],setup:!1},pukka:{id:`pukka`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/pukka.png`,edition:`custom`,name:`普卡`,ability:`每个夜晚，你要选择一名玩家：他中毒。上个因你的能力中毒的玩家会死亡并恢复健康。`,team:`demon`,sch_team:`恶魔`,firstNight:3030,otherNight:33,firstNightReminder:`唤醒普卡，让他选择一名玩家，那名玩家中毒。`,otherNightReminder:`唤醒普卡，让他选择一名玩家，该玩家中毒。上一个被普卡中毒的玩家死亡。`,reminders:[`中毒`,`死亡`],setup:!1},shabaloth:{id:`shabaloth`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/shabaloth.png`,edition:`custom`,name:`沙巴洛斯`,ability:`每个夜晚*，你要选择两名玩家：他们死亡。你上个夜晚选择过且当前死亡的玩家之一可能会被你反刍。`,team:`demon`,sch_team:`恶魔`,firstNight:0,otherNight:34,firstNightReminder:``,otherNightReminder:`决定上一夜被沙巴洛斯选择的玩家是否被反刍。然后唤醒沙巴洛斯，让他攻击两名玩家。`,reminders:[`死亡`,`复活`],setup:!1},po:{id:`po`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/po.png`,edition:`custom`,name:`珀`,ability:`每个夜晚*，你可以选择一名玩家：他死亡。如果你上次选择时没有选择任何玩家，当晚你要选择三名玩家：他们死亡。`,team:`demon`,sch_team:`恶魔`,firstNight:0,otherNight:35,firstNightReminder:``,otherNightReminder:`唤醒珀，他可以攻击一名玩家或不进行攻击，如果他上一次选择了不进行攻击，则此次必须攻击三名玩家。`,reminders:[`攻击三次`,`死亡`],setup:!1},fang_gu:{id:`fang_gu`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/fang_gu.png`,edition:`custom`,name:`方古`,ability:`每个夜晚*，你要选择一名玩家：他死亡。被该能力杀死的外来者变成邪恶的方古且你代替他死亡，但每局游戏仅能成功转化一次。[+1外来者]`,team:`demon`,sch_team:`恶魔`,firstNight:0,otherNight:36,otherNightReminder:`唤醒方古，让他攻击一名玩家。如果该玩家是外来者并成功转化，则方古死亡，在他入睡后通知那名外来者角色变化。`,reminders:[`死亡`,`限一次`],setup:!0},vigormortis:{id:`vigormortis`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/vigormortis.png`,edition:`custom`,name:`亡骨魔`,ability:`每个夜晚*，你要选择一名玩家：他死亡。被你杀死的爪牙保留他的能力，且与他邻近的两名镇民之一中毒。[-1外来者]`,team:`demon`,sch_team:`恶魔`,firstNight:0,otherNight:40,firstNightReminder:``,otherNightReminder:`唤醒亡骨魔，让他攻击一名玩家。`,reminders:[`死亡`,`保留能力`,`中毒`],setup:!0},no_dashii:{id:`no_dashii`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/no_dashii.png`,edition:`custom`,name:`诺-达鲺`,ability:`每个夜晚*，你要选择一名玩家：他死亡。与你邻近的两名镇民中毒。`,team:`demon`,sch_team:`恶魔`,firstNight:0,otherNight:37,firstNightReminder:``,otherNightReminder:`唤醒诺-达鲺，让他攻击一名玩家。`,reminders:[`死亡`,`中毒`],setup:!1},vortox:{id:`vortox`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/vortox.png`,edition:`custom`,name:`涡流`,ability:`每个夜晚*，你要选择一名玩家：他死亡。镇民玩家的能力都会产生错误信息。如果白天没人被处决，邪恶阵营获胜。`,team:`demon`,sch_team:`恶魔`,firstNight:0,otherNight:38,firstNightReminder:``,otherNightReminder:`唤醒涡流，让他攻击一名玩家。`,reminders:[`死亡`],setup:!1},lil_monsta:{id:`lil_monsta`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/lil_monsta.png`,edition:`custom`,name:`小怪宝`,ability:`每个夜晚，所有爪牙要秘密决定由哪名玩家来照看小怪宝并且“是恶魔”。每个夜晚*，可能会有一名玩家死亡。[+1爪牙]`,team:`demon`,sch_team:`恶魔`,firstNight:3016,otherNight:44,firstNightReminder:`唤醒所有爪牙选择由谁照看小怪宝。`,otherNightReminder:`唤醒所有爪牙选择由谁照看小怪宝。随后，决定今晚谁会因为小怪宝能力死亡。`,reminders:[],remindersGlobal:[`是恶魔`,`死亡`],setup:!0},lleech:{id:`lleech`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/lleech.png`,edition:`custom`,name:`痢蛭`,ability:`每个夜晚*，你要选择一名玩家：他死亡。在你的首个夜晚，你要选择一名存活的玩家：他中毒，只有当他处于死亡状态时你才会立即死亡。`,team:`demon`,sch_team:`恶魔`,firstNight:3017,otherNight:43,firstNightReminder:`唤醒痢蛭，让他选择一名玩家以寄生。`,otherNightReminder:`唤醒痢蛭，让他攻击一名玩家。`,reminders:[`中毒`,`死亡`],setup:!1},"al-hadikhia":{id:`al-hadikhia`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/al-hadikhia.png`,edition:`custom`,name:`哈迪寂亚`,ability:`每个夜晚*，你可以选择三名玩家（所有玩家会得知你选了谁）：他们分别秘密决定自己的生死，然后如果他们都存活则都死亡。`,team:`demon`,sch_team:`恶魔`,firstNight:0,otherNight:42,firstNightReminder:``,otherNightReminder:`唤醒哈迪寂亚，让他选择三名玩家。执行哈迪寂亚的能力流程（参考哈迪寂亚的百科页面）。`,reminders:[`1`,`2`,`3`,`选择生`,`选择死`],setup:!1},legion:{id:`legion`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/legion.png`,edition:`custom`,name:`军团`,ability:`每个夜晚*，可能有一名玩家死亡。如果一项提名只有邪恶玩家投票，投票无效。你也会被当作是爪牙。[多数玩家为军团]`,team:`demon`,sch_team:`恶魔`,firstNight:0,otherNight:39,firstNightReminder:``,otherNightReminder:`决定今晚谁会因为军团能力死亡。`,reminders:[`即将被处决`,`死亡`],setup:!0},leviathan:{id:`leviathan`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/leviathan.png`,edition:`custom`,name:`利维坦`,ability:`如果多于一名善良玩家被处决，邪恶阵营获胜。所有玩家都知道利维坦在场。在第五个白天结束时，邪恶阵营获胜。`,team:`demon`,sch_team:`恶魔`,firstNight:3070,otherNight:120,firstNightReminder:`如果利维坦在场，告知所有人利维坦在场，现在是第一个白天。`,otherNightReminder:`如果利维坦在场，告知所有人利维坦在场，现在是第几个白天。（如果玩家一致同意，则无需在已经知晓利维坦在场的前提下在其他夜晚执行此项操作。）`,reminders:[`第一天`,`第二天`,`第三天`,`第四天`,`第五天`,`善良被处决`],setup:!1},riot:{id:`riot`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/riot.png`,edition:`custom`,name:`暴乱`,ability:`在第三个白天，所有爪牙会变成暴乱，当天被提名的玩家会立即死亡且必须再次提名一名存活的玩家。`,team:`demon`,sch_team:`恶魔`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},ojo:{id:`ojo`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/ojo.png`,edition:`custom`,name:`奥赫`,ability:`每个夜晚*，你要选择一个角色：他死亡。如果该角色不在场，则由说书人来决定谁会被你杀死。`,team:`demon`,sch_team:`恶魔`,firstNight:0,otherNight:41,firstNightReminder:``,otherNightReminder:`唤醒奥赫，让他选择角色列表上的一个角色。该角色对应的玩家死亡，如果该角色不在场，替奥赫决定今晚谁会因为奥赫能力死亡。`,reminders:[`死亡`],setup:!1},kazali:{id:`kazali`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/kazali.png`,edition:`custom`,name:`卡扎力`,ability:`每个夜晚*，你要选择一名玩家：他死亡。[由你决定谁是什么爪牙，-或+任意数量外来者]`,team:`demon`,sch_team:`恶魔`,firstNight:3.5,otherNight:46,firstNightReminder:`唤醒卡扎力，让他选择玩家变成邪恶爪牙。`,otherNightReminder:`唤醒卡扎力，让他攻击一名玩家。`,reminders:[`死亡`],setup:!0},yaggababble:{id:`yaggababble`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/yaggababble.png`,edition:`custom`,name:`牙噶巴卜`,ability:`在你的首个夜晚，你会得知一段秘密短语。每次你在白天公开说出这段短语，当天便可能会有一名玩家在这之后死亡。`,team:`demon`,sch_team:`恶魔`,firstNight:3031,otherNight:45,firstNightReminder:`唤醒牙噶巴卜，对他展示他的秘密短语。`,otherNightReminder:`根据已放置的提示标记数量，选择最多等同于该数量的玩家死亡。该夜晚行动只是一个提示，死亡的造成时机可以是白天，也可以是夜晚的任何时候。`,reminders:[`死亡`],setup:!1},lord_of_typhon:{id:`lord_of_typhon`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/lord_of_typhon.png`,edition:`custom`,name:`堤丰之首`,ability:`每个夜晚*，你要选择一名玩家：他死亡。[邪恶角色全部邻座，你位于正中，+1爪牙，-或+任意数量外来者]`,team:`demon`,sch_team:`恶魔`,firstNight:1.4,otherNight:38.5,firstNightReminder:`将位于堤丰之首两侧的对应数量的玩家变成邪恶的爪牙，并分别唤醒他们通知他们的角色和阵营变化。`,otherNightReminder:`唤醒堤丰之首，让他攻击一名玩家。`,reminders:[`死亡`],setup:!0},hundun:{id:`hundun`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/hundun.png`,edition:`custom`,name:`混沌`,ability:`每个夜晚*，你要选择一名玩家：他死亡。如果你以这种方式杀死了一名与你邻近的镇民玩家，除旅行者外的所有善良玩家会中毒直到下个黄昏。`,team:`demon`,sch_team:`恶魔`,firstNight:0,otherNight:47,firstNightReminder:`0`,otherNightReminder:`唤醒混沌，让他攻击一名玩家。如果他杀死了自己邻近的镇民，所有善良玩家中毒。`,reminders:[`死亡`,`善良中毒`],setup:!1},qiongqi:{id:`qiongqi`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/qiongqi.png`,edition:`custom`,name:`穷奇`,ability:`每个夜晚*，你要选择一名玩家：他死亡。如果今天白天有外来者死亡，当晚改为你要选择一名玩家：他死亡，但被当作仍然存活，随后会有一名其他玩家死亡。[+1外来者]`,team:`demon`,sch_team:`恶魔`,firstNight:0,otherNight:48,firstNightReminder:`0`,otherNightReminder:`唤醒穷奇，让他攻击一名玩家。如果今天白天有外来者死亡，他攻击并杀死的玩家成为活尸，随后决定今晚谁会因为穷奇能力死亡。`,reminders:[`死于今日`,`死亡`,`活尸`],setup:!0},taowu:{id:`taowu`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/taowu.png`,edition:`custom`,name:`梼杌`,ability:`每个夜晚*，你要选择一名玩家：他死亡。当你将要死亡时，改为一名存活且具有能力的爪牙失去能力。你不会得知恶魔信息。`,team:`demon`,sch_team:`恶魔`,firstNight:2005.5,otherNight:50,firstNightReminder:`如果梼杌在场，跳过他的恶魔信息环节。`,otherNightReminder:`唤醒梼杌，让他攻击一名玩家。`,reminders:[`死亡`,`失去能力`],setup:!1},taotie:{id:`taotie`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/taotie.png`,edition:`custom`,name:`饕餮`,ability:`每个夜晚*，你要选择任意数量的非旅行者玩家或一名旅行者玩家：如果他们的角色类型均不相同，他们死亡。[+1外来者]`,team:`demon`,sch_team:`恶魔`,firstNight:0,otherNight:49,firstNightReminder:`0`,otherNightReminder:`唤醒饕餮，让他选择任意数量的非旅行者玩家或一名旅行者玩家。如果这些玩家角色类型不同，他们死亡。`,reminders:[`死亡`],setup:!0},baojun:{id:`baojun`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/baojun.png`,edition:`custom`,name:`暴君`,ability:`每个夜晚*，你可以选择至多两名玩家：他们死亡。你选择的玩家数量不能与上个夜晚死亡的玩家数量相同（超过二人时算作二人）。`,team:`demon`,sch_team:`恶魔`,firstNight:0,otherNight:50.2,firstNightReminder:``,otherNightReminder:`唤醒暴君，让他攻击至多两名玩家。但是暴君选择的玩家数量不能与上个夜晚死亡的玩家数量相同。`,reminders:[`死亡`],setup:!1},dianyuzhang:{id:`dianyuzhang`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/dianyuzhang.png`,edition:`custom`,name:`典狱长`,ability:`每个夜晚，你要选择至多三名玩家：如果明天白天他们之一死于处决，上次被你选择的其他玩家会在当晚死亡。否则，当晚他们之中会有一名玩家死亡。`,team:`demon`,sch_team:`恶魔`,firstNight:3031.5,otherNight:50.1,firstNightReminder:`唤醒典狱长，让他选择至多三名玩家。`,otherNightReminder:`唤醒典狱长，让他选择至多三名玩家。如果上个夜晚选择的玩家之中有人死于处决，上个夜晚选择的其余玩家均死亡，否则其中之一死亡。`,reminders:[`囚禁`,`死亡`],setup:!1},guhuoniao:{id:`guhuoniao`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/guhuoniao.png`,edition:`custom`,name:`姑获鸟`,ability:`每个夜晚*，你要选择一名玩家：他死亡。你可能会拥有上一个死于处决的爪牙的能力。`,team:`demon`,sch_team:`恶魔`,firstNight:0,otherNight:50.3,firstNightReminder:``,otherNightReminder:`唤醒姑获鸟，让他攻击一名玩家。`,reminders:[`死亡`,`获得能力`],setup:!1},jianning:{id:`jianning`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/jianning.png`,edition:`custom`,name:`奸佞`,ability:`每个夜晚*，你要选择一名玩家：他死亡。如果你今天白天没有投票，今晚你可以行动两次。`,team:`demon`,sch_team:`恶魔`,firstNight:0,otherNight:50.4,firstNightReminder:``,otherNightReminder:`唤醒奸佞，让他攻击一名玩家。如果他白天没投票，可以攻击两次。`,reminders:[`死亡`,`行动两次`],setup:!1},yanluo:{id:`yanluo`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/yanluo.png`,edition:`custom`,name:`阎罗`,ability:`在你的首个夜晚，你能查看魔典并选择一名玩家：他在第三个夜晚死亡，即使因为任何原因让他不会死亡。每个夜晚，你要选择一名玩家：上个夜晚被你选择的玩家死亡。`,team:`demon`,sch_team:`恶魔`,firstNight:3058.1,otherNight:50.5,firstNightReminder:`唤醒阎罗，让他查看魔典。让阎罗选择一名玩家，将“三更将死”标记放置该玩家角色标记旁。之后再让阎罗选择一名玩家，将“即将死亡”标记放置该玩家角色标记旁。`,otherNightReminder:`唤醒阎罗，让他选择一名玩家，将“即将死亡”标记放置该玩家角色标记旁，并将上一个夜晚的“即将死亡”标记替换为“死亡”标记。如果这是游戏的第三个夜晚，将“三更将死”标记的玩家判死，即使因为任何原因让他不会死亡。`,reminders:[`三更将死`,`即将死亡`,`死亡`],setup:!1}},bn={pagan:{name:`异教徒`,ability:`如果异端分子在场，所有其他善良镇民变为异教徒，并且得知邪恶玩家是谁及他们的角色。[+异端分子或-1外来者]`,image:`https://www.bloodstar.xyz/p/Airell_clocktower/Assets_of_Lei_Gallery/pagan_assets_of_lei_gallery.png`,author:`Zets`,id:`pagan`,team:`townsfolk`,firstNight:200,otherNight:0,firstNightReminder:`如果异教徒和异端分子都在场，唤醒所有善良的镇民，并告知他们都成为了异教徒。`,otherNightReminder:``,reminders:[],setup:!0},martyr:{name:`殉教少女`,author:`飞跃疯人院`,ability:`如果爪牙死于处决，当晚你会死亡，随后所有邪恶角色醉酒直到明天黄昏。`,image:`https://www.bloodstar.xyz/p/humlet/FRY7-9/78_fry79.png`,id:`martyr`,team:`townsfolk`,firstNight:0,otherNight:0,otherNightReminder:`如果当天一名爪牙死于处决，且当晚殉教少女能够因为自身能力死亡，将“殉教”与“死亡”提示标记放置在殉教少女旁，代表所有邪恶角色醉酒直到明天黄昏。`,reminders:[`殉教`,`死亡`]},snowman:{author:`飞跃疯人院`,name:`雪人`,ability:`每局游戏限一次，恶魔可以公开猜测你是雪人，如果猜中，当天他被处决时你会代替他被处决。如果白天没人被处决，你的阵营落败。`,image:`https://www.bloodstar.xyz/p/humlet/FRY7-9/_fry79.png`,id:`snowman`,team:`outsider`,firstNight:0,otherNight:0,reminders:[`已被猜测`,`被猜中`]},wandering_singer:{author:`飞跃疯人院`,name:`游歌者`,ability:`每个白天，你可以公开选择任意名存活玩家：其中的镇民会醉酒直到你再次选择。当晚你会得知正因你醉酒的人数。`,image:`https://www.bloodstar.xyz/p/humlet/FRY7-9/4_fry79.png`,id:`wandering_singer`,team:`townsfolk`,firstNight:0,otherNight:0,otherNightReminder:`如果游歌者在白天公开选择了，唤醒并告知他此刻场上因他醉酒的人数。`,reminders:[`醉酒`]},newspaper_boy:{author:`飞跃疯人院`,name:`送报童`,ability:`每个白天，你可以私下询问说书人以得知一条“新闻”，如果你公开宣读了该“新闻”，当天晚上你会得知它是否正确。`,image:`https://www.bloodstar.xyz/p/humlet/FRY7-9/58_fry79.png`,id:`newspaper_boy`,team:`townsfolk`,firstNight:0,otherNight:0,otherNightReminder:`得知正确与否`,reminders:[`真新闻`,`假新闻`]},genius:{id:`genius`,name:`天才`,ability:`每个夜晚，你可以选择一个善良角色：你获得该角色的能力，直到你下次选择。你每个奇数或偶数夜晚醉酒。`,team:`townsfolk`,image:`https://botc.letshare.fun/imgs/icons/townsfolk/genius.png`,author:`摸鱼学徒`,firstNight:3,otherNight:2,firstNightReminder:``,otherNightReminder:``,reminders:[`获得能力`,`醉酒`],setup:!1},nun:{id:`nun`,name:`修女`,ability:`善良的镇民玩家不会醉酒、中毒或得知错误信息。`,team:`townsfolk`,image:`https://botc.letshare.fun/imgs/icons/townsfolk/nun.png`,author:`摸鱼学徒`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`不会醉酒`,`不会中毒`,`不会得知错误信息`],setup:!1},meishuguanzhang:{id:`meishuguanzhang`,name:`美术馆长`,ability:`每个夜晚*，你要选择一名玩家：如果他同意，你得知他的精神状态，但他的精神状态可能发生改变。`,team:`traveler`,image:`/imgs/icons/血染德扑/insanity.png`,author:`Soup1618`,firstNight:1,otherNight:1,firstNightReminder:``,otherNightReminder:``,reminders:[`精神状态不佳`,`精神状态良好`],setup:!1},trade_dealer:{id:`trade_dealer`,name:`经销商`,ability:`每个夜晚，你会得知明天当电话铃响后接听电话后会发生什么，接听电话的人也会知道会发生什么，发生的事情可能会打破规则。`,team:`traveler`,image:`https://botc.letshare.fun/imgs/icons/血染德扑/经销商.png`,firstNight:1,otherNight:1,author:`Luis`,reminders:[`电话来了`],setup:!1},disappointed:{id:`disappointed`,edition:`custom`,image:`https://youke1.picui.cn/s1/2025/10/11/68e95986b417e.png`,name:`失望`,ability:`你以为你是一个爪牙，但其实你不是。`,author:`Moll`,team:`outsider`,firstNight:5,otherNight:5,setup:!1,firstNightReminder:``,otherNightReminder:``,reminders:[`是失望`]},jiutoushe:{id:`jiutoushe`,name:`九头蛇`,ability:`当与你同阵营的一名玩家死亡时，可能有一名同阵营玩家复活。`,team:`traveler`,author:`Hazel`,image:`https://botc.letshare.fun/imgs/icons/血染德扑/九头蛇.png`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},drugster:{id:`drugster`,name:`瘾君子`,ability:`你以为你是一个在场的善良玩家，但其实你不是。该角色的玩家会知道瘾君子在场。如果你们之中其中一人“疯狂”证明瘾君子在场，你们可能都会死亡。`,team:`traveler`,author:`Mar Hepto`,image:`https://botc.letshare.fun/imgs/icons/血染德扑/瘾君子.png`,firstNight:0,otherNight:63,firstNightReminder:``,otherNightReminder:``,reminders:[`是瘾君子`],setup:!0},wanou:{id:`wanou`,name:`玩偶`,author:`飞跃疯人院`,ability:`你以为你是一个善良角色，但其实你不是。如果你被恶魔杀死，恶魔要选择一名玩家：他变成玩偶。[玩偶会与恶魔邻座]`,image:`https://www.bloodstar.xyz/p/humlet/FRY7-9/65_fry79.png`,team:`minion`,firstNight:0,otherNight:0,otherNightReminder:`如果恶魔杀死了玩偶，提醒恶魔选择一名新的玩偶。`,remindersGlobal:[`新玩偶`,`初始玩偶`],setup:1},qimo:{id:`qimo`,name:`契魔`,ability:`每个夜晚*，你可以选择两名存活玩家签订死亡契约。如果他们中的一人因任何原因死亡，另一人也会随之一同死亡。[+1外来者]`,team:`demon`,image:`https://botc.letshare.fun/imgs/icons/血染德扑/契魔.png`,firstNight:0,otherNight:41,author:`摸鱼学徒`,firstNightReminder:``,otherNightReminder:`唤醒契魔，让他选择两名玩家。用“链接”标记他们。白天开始时，公开宣布这两名玩家被链接。`,reminders:[`链接`],setup:!1},risen:{id:`risen`,name:`魂归者`,ability:`所有玩家初始都已死亡。被处决的玩家会复活。如果某个阵营的所有玩家都存活，该阵营获胜。`,team:`demon`,image:`https://botc.letshare.fun/imgs/icons/demon/the_risen.png`,firstNight:0,otherNight:41.5,author:`摸鱼学徒`,firstNightReminder:``,reminders:[`链接`],setup:!1},virilus:{id:`virilus`,name:`活体病毒`,ability:`每个夜晚，你要选择一名玩家：他被你感染。如果被感染的玩家发起提名，他死亡并感染被提名的玩家。在第四个白天结束时，邪恶阵营获胜。`,team:`demon`,image:`https://botc.letshare.fun/imgs/icons/demon/virilus.png`,firstNight:0,otherNight:42.1,author:`Lei.`,firstNightReminder:``,reminders:[`链接`],setup:!1},kaixinhou:{name:`开心猴`,ability:`如果场上有爪牙存活，你不会死亡，所有玩家知道你是开心猴。每个白天限3次，你可以在提名开始前公开选择一名玩家与他猜拳，如果你获胜，他死亡。`,image:`https://free.picui.cn/free/2025/09/21/68d0091d5b270.png`,id:`kaixinhou`,team:`demon`,firstNight:128001,otherNight:0,firstNightReminder:`告诉所有人他是开心猴。`,otherNightReminder:``,reminders:[`不会死亡`,`死亡`,`第一次`,`第二次`,`第三次`],remindersGlobal:[],setup:!1},day_dreamer:{name:`白日梦想家`,ability:`你的能力是如果…，那么…。在你的首个白天拜访并告知说书人“那么”，说书人会告知你能力的“如果”。`,image:`https://www.bloodstar.xyz/p/Drus/5GMXJ/_5gmxj.png`,id:`day_dreamer`,team:`townsfolk`,firstNight:0,otherNight:0,reminders:[`醉酒`]},lost_dreamer:{name:`失去梦想家`,ability:`你的能力是如果…，那么…。在你的首个白天拜访并告知说书人“如果”，说书人会告知你能力的“那么”。`,image:`https://www.bloodstar.xyz/p/Drus/5GMXJ/1_5gmxj.png`,id:`lost_dreamer`,team:`outsider`,firstNight:0,otherNight:0,reminders:[`醉酒`]},gold_dreamer:{name:`氪金梦想家`,ability:`你的“如果”会更加容易。 你的能力是如果…，那么…。在你的首个白天拜访并告知说书人“那么”，说书人会告知你能力的“如果”。`,image:`https://www.bloodstar.xyz/p/Drus/5GMXJ/2_5gmxj.png`,id:`gold_dreamer`,team:`minion`,firstNight:0,otherNight:0,reminders:[`中毒`]},kill_dreamer:{name:`扼杀梦想家`,ability:`每个夜晚*，选择一名玩家：他死亡。 你的能力是如果…，那么…。在你的首个白天拜访并告知说书人“那么”，说书人会告知你能力的“如果”。`,image:`https://www.bloodstar.xyz/p/Drus/5GMXJ/3_5gmxj.png`,id:`kill_dreamer`,team:`demon`,firstNight:0,otherNight:0,reminders:[`中毒`,`死亡`]},yuan:{name:`冤`,ability:`每个夜晚*，你要选择一名玩家:他死亡。如果你在被提名后公开声明我冤呐（最后一天除外），在你死于处决后私下选择一名给你投票的玩家，他会变成邪恶的冤，但每局游戏仅能成功转化一次。[-1外来者]`,image:`https://oss.gstonegames.com/data_file/clocktower/role_icon/custom/d_8539280695861_536321d6.jpg`,id:`yuan`,team:`demon`,firstNight:0,otherNight:100,firstNightReminder:``,otherNightReminder:``,reminders:[`死亡`,`冤呐`],remindersGlobal:[],setup:1},apocalypse:{name:`天启召唤者`,ability:`每局游戏限一次，在白天时，如果只有四名或更少的玩家存活，你可以私下拜访说书人以查看魔典二十秒。`,image:`https://i.postimg.cc/VNYbv7sL/tianqi.png`,id:`apocalypse`,team:`townsfolk`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],remindersGlobal:[],setup:0},nailong:{name:`奶龙`,ability:`你可以对“你是奶龙”疯狂，如果你这样做，且有其他玩家对“自己是奶龙”疯狂，他有可能变成奶龙直至下个黎明`,image:`https://i.postimg.cc/SNd02vMs/nailong.webp`,id:`nailong`,team:`traveler`,firstNight:0,author:`星火乐`,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`我是奶龙`,`我才是奶龙`],setup:!1},pumpkin:{id:`pumpkin`,image:`https://www.helloimg.com/i/2024/11/05/672998f0c5079.png`,edition:`custom`,author:`万圣节特别角色`,name:`南瓜`,ability:`足够“吓人”的玩家可能不会死于处决且恶魔的负面能力对他无效。`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1}},xn=_n(`zh-CN`).reduce((e,t)=>(e[t.id]=t,e),{}),Sn=vn(`zh-CN`).reduce((e,t)=>(e[t.id]=t,e),{});const Q={...yn,...bn,...xn,...Sn};var Cn=e=>{try{let t=new URL(e);if(t.hostname===`clocktower-wiki.gstonegames.com`){let e=t.pathname.split(`/`),n=e[e.length-1];if(e.includes(`thumb`)&&n.includes(`px-`)){let e=n.match(/\d+px-(.+)/);e&&(n=e[1])}return`https://oss.gstonegames.com/data_file/clocktower/web/icons/${n.replace(/\.[^/.]+$/,``).toLowerCase()}.png`}return e}catch(t){return console.warn(`Failed to parse image URL:`,e,t),e}};function $({src:e,alt:t,sx:n,component:r=`img`,fallbackSrc:i=`/imgs/icons/75px-Di.png`,...a}){let[o,s]=(0,G.useState)(e),[c,l]=(0,G.useState)(!1),[u,d]=(0,G.useState)(!1),f=(0,G.useCallback)(()=>{if(!u&&e){let t=Cn(e);if(t!==e){s(t),d(!0);return}}s(i),l(!0)},[e,u,i]),p=(0,G.useCallback)(()=>{l(!1)},[]);return G.useEffect(()=>{s(e),l(!1),d(!1)},[e]),r===`avatar`?(0,Y.jsx)(Ye,{src:o,alt:t,sx:n,onError:f,onLoad:p,...a}):(0,Y.jsx)(R,{component:`img`,src:o,alt:t,sx:n,onError:f,onLoad:p,...a})}var wn=JSON.parse(`[{"id":"mathematician","jinx":[{"id":"chambermaid","reason":"The Chambermaid learns if the Mathematician wakes tonight or not, even though the Chambermaid wakes first."},{"id":"lunatic","reason":"The Mathematician learns if the Lunatic attacks a different player(s) than the real Demon attacked."}]},{"id":"cannibal","jinx":[{"id":"butler","reason":"If the Cannibal gains the Butler ability, the Cannibal learns this."},{"id":"juggler","reason":"If the Juggler guesses on their first day and dies by execution, tonight the living Cannibal learns how many guesses the Juggler got correct."},{"id":"zealot","reason":"If the Cannibal gains the Zealot ability, the Cannibal learns this."},{"id":"poppygrower","reason":"If the Cannibal eats the Poppy Grower, then dies or loses the Poppy Grower ability, the Demon and Minions learn each other that night."},{"id":"princess","reason":"If the Cannibal nominated, executed, & killed the Princess today, the Demon doesn’t kill tonight."}]},{"id":"pithag","jinx":[{"id":"damsel","reason":"If a Pit-Hag creates a Damsel, the Storyteller chooses which player it is."},{"id":"politician","reason":"If the Pit-Hag turns an evil player into the Politician, they can't turn good due to their own ability."},{"id":"villageidiot","reason":"If there is a spare token, the Pit-Hag can create an extra Village Idiot. If so, the drunk Village Idiot might change."},{"id":"cultleader","reason":"If the Pit-Hag turns an evil player into the Cult Leader, they can't turn good due to their own ability."},{"id":"goon","reason":"If the Pit-Hag turns an evil player into the Goon, they can't turn good due to their own ability."},{"id":"ogre","reason":"If the Pit-Hag turns an evil player into the Ogre, they can't turn good due to their own ability."}]},{"id":"cerenovus","jinx":[{"id":"goblin","reason":"The Cerenovus may choose to make a player mad that they are the Goblin."}]},{"id":"leviathan","jinx":[{"id":"soldier","reason":"If the Leviathan is in play, the Soldier is safe from all evil abilities."},{"id":"monk","reason":"If the Leviathan is in play, the Monk-protected-player is safe from all evil abilities."},{"id":"innkeeper","reason":"If the Leviathan is in play, the Innkeeper-protected-players are safe from all evil abilities."},{"id":"ravenkeeper","reason":"Each night*, the Leviathan chooses an alive player (different to previous nights): a chosen Ravenkeeper uses their ability but does not die."},{"id":"banshee","reason":"Each night*, the Leviathan chooses an alive good player (different to previous nights): a chosen Banshee dies & gains their ability."},{"id":"sage","reason":"Each night*, the Leviathan chooses an alive good player (different to previous nights): a chosen Sage uses their ability but does not die."},{"id":"farmer","reason":"Each night*, the Leviathan chooses an alive good player (different to previous nights): a chosen Farmer uses their ability but does not die."},{"id":"mayor","reason":"If the Leviathan is in play & no execution occurs on day 5, good wins."},{"id":"exorcist","reason":"Evil does not win when more than 1 good player has been executed, if the Exorcist is alive and has ever successfully chosen the Leviathan."},{"id":"grandmother","reason":"If Leviathan is in play and the Grandchild dies by execution, evil wins."},{"id":"king","reason":"If the Leviathan is in play, and at least 1 player is dead, the King learns an alive character each night."},{"id":"hatter","reason":"If the Hatter dies on or after day 5, the Demon cannot choose Leviathan."},{"id":"pithag","reason":"After day 5, the Pit-Hag cannot choose Leviathan."}]},{"id":"lilmonsta","jinx":[{"id":"poppygrower","reason":"If the Poppy Grower is in play, Minions don't wake together. They are woken one by one, until one of them chooses to take the Lil' Monsta token."},{"id":"scarletwoman","reason":"If there are 5 or more players alive and the player holding the Lil' Monsta token dies, the Scarlet Woman is given the Lil' Monsta token tonight."},{"id":"vizier","reason":"The Vizier can die by execution if they are babysitting Lil' Monsta."},{"id":"hatter","reason":"If a Demon chooses Lil' Monsta, they also choose a Minion to become and babysit Lil' Monsta tonight."}]},{"id":"legion","jinx":[{"id":"engineer","reason":"Legion and the Engineer can not both be in play at the start of the game. If the Engineer creates Legion, most players (including all evil players) become evil Legion."},{"id":"preacher","reason":"If the Preacher chooses Legion, Legion keeps their ability, but the Preacher might learn they are Legion."},{"id":"minstrel","reason":"If Legion died by execution today, Legion keeps their ability, but the Minstrel might learn they are Legion."},{"id":"hatter","reason":"If the Hatter dies and Legion is in play, nothing happens. If the Hatter dies and an evil player chooses Legion, all current evil players become Legion."},{"id":"zealot","reason":"The Zealot might register as evil to Legion's ability."}]},{"id":"scarletwoman","jinx":[{"id":"fanggu","reason":"If the Fang Gu chooses an Outsider and dies, the Scarlet Woman does not become the Fang Gu."},{"id":"alhadikhia","reason":"If there are two living Al-Hadikhias, the Scarlet Woman Al-Hadikhia becomes the Scarlet Woman again."}]},{"id":"spy","jinx":[{"id":"poppygrower","reason":"If the Poppy Grower is in play, the Spy does not see the Grimoire until the Poppy Grower dies."},{"id":"damsel","reason":"If the Spy is (or has been) in play, the Damsel is poisoned."},{"id":"ogre","reason":"The Spy registers as evil to the Ogre."},{"id":"heretic","reason":"Only 1 jinxed character can be in play."}]},{"id":"widow","jinx":[{"id":"poppygrower","reason":"If the Poppy Grower is in play, the Widow does not see the Grimoire until the Poppy Grower dies."},{"id":"damsel","reason":"If the Widow is (or has been) in play, the Damsel is poisoned."},{"id":"heretic","reason":"Only 1 jinxed character can be in play."}]},{"id":"yaggababble","jinx":[{"id":"exorcist","reason":"If the Exorcist chooses the Yaggababble, the Yaggababble ability does not kill tonight."}]},{"id":"summoner","jinx":[{"id":"clockmaker","reason":"If the Summoner is in play, the Clockmaker does not receive their information until a Demon is created."},{"id":"poppygrower","reason":"If the Poppy Grower is alive when the Summoner acts, the Summoner chooses which Demon, but the Storyteller chooses which player."},{"id":"marionette","reason":"The Marionette neighbors the Summoner. The Summoner knows who the Marionette is."},{"id":"pithag","reason":"The Summoner cannot create an in-play Demon. If the Summoner creates a not-in-play Demon, deaths tonight are arbitrary."},{"id":"hatter","reason":"The Summoner cannot create an in-play Demon. If the Summoner creates a not-in-play Demon, deaths tonight are arbitrary."},{"id":"courtier","reason":"If the Summoner is drunk on the 3rd night, the Summoner chooses which Demon, but the Storyteller chooses which player."},{"id":"engineer","reason":"If the Engineer removes a Summoner from play before that Summoner uses their ability, the Summoner uses their ability immediately."},{"id":"zombuul","reason":"If the Summoner turns a dead player into the Zombuul, the Storyteller treats that player as a Zombuul that has died once."},{"id":"pukka","reason":"The Summoner may choose a player to become the Pukka on the 2nd night."},{"id":"legion","reason":"If the Summoner creates Legion, most players (including all evil players) become evil Legion."},{"id":"kazali","reason":"The Summoner cannot create an in-play Demon. If the Summoner creates a not-in-play Demon, deaths tonight are arbitrary."},{"id":"preacher","reason":"If the Preacher chose the Summoner on or before the 3rd night, the Summoner chooses which Demon, but the Storyteller chooses which player."},{"id":"lordoftyphon","reason":"If the Summoner creates a Lord of Typhon, the Lord of Typhon must neighbor a Minion. The other neighbor becomes a not-in-play evil Minion."}]},{"id":"marionette","jinx":[{"id":"lilmonsta","reason":"The Marionette neighbors a Minion, not the Demon. The Marionette is not woken to choose who takes the Lil' Monsta token, and does not learn they are the Marionette if they have the Lil' Monsta token."},{"id":"poppygrower","reason":"When the Poppy Grower dies, the Demon learns the Marionette but the Marionette learns nothing."},{"id":"snitch","reason":"The Marionette does not learn 3 not in-play characters. The Demon learns an extra 3 instead."},{"id":"balloonist","reason":"If the Marionette thinks that they are the Balloonist, +1 Outsider might have been added."},{"id":"damsel","reason":"The Marionette does not learn that a Damsel is in play."},{"id":"huntsman","reason":"If the Marionette thinks that they are the Huntsman, the Damsel was added."},{"id":"wraith","reason":"The Wraith does not wake with the Marionette."}]},{"id":"lleech","jinx":[{"id":"mastermind","reason":"If the Mastermind is alive and the Lleech's host dies by execution, the Lleech lives but loses their ability."},{"id":"slayer","reason":"If the Slayer slays the Lleech's host, the host dies."}]},{"id":"kazali","jinx":[{"id":"goon","reason":"The Kazali can choose that the Goon player is one of their evil Minions."},{"id":"marionette","reason":"If the Kazali chooses to create a Marionette, they must choose one of their neighbors."},{"id":"huntsman","reason":"If the Kazali chooses the Damsel to become a Minion, and a Huntsman is in play, a good player becomes the Damsel."},{"id":"choirboy","reason":"The Kazali can not choose the King to become a Minion if a Choirboy is in play."},{"id":"soldier","reason":"The Kazali can choose that the Soldier player is one of their evil Minions."}]},{"id":"riot","jinx":[{"id":"mayor","reason":"The Mayor may choose to stop nominations. If they do so when only 1 Riot is alive, good wins. Otherwise, evil wins."},{"id":"monk","reason":"If Riot is in play, the Monk-protected player is safe from all evil abilities."},{"id":"farmer","reason":"Each night*, Riot chooses an alive good player (different to previous nights): a chosen Farmer uses their ability but does not die."},{"id":"innkeeper","reason":"If Riot is in play, the Innkeeper-protected player is safe from all evil abilities."},{"id":"sage","reason":"Each night*, Riot chooses an alive good player (different to previous nights): a chosen Sage uses their ability but does not die."},{"id":"banshee","reason":"Each night*, Riot chooses an alive good player (different to previous nights): a chosen Banshee dies & gains their ability."},{"id":"ravenkeeper","reason":"Each night*, Riot chooses an alive good player (different to previous nights): a chosen Ravenkeeper uses their ability but does not die."},{"id":"soldier","reason":"If Riot is in play, the Soldier is safe from all evil abilities."},{"id":"grandmother","reason":"If Riot is in play and the Grandchild dies during the day, the Grandmother dies too."},{"id":"king","reason":"If Riot is in play, and at least 1 player is dead, the King learns an alive character each night."},{"id":"exorcist","reason":"If the Exorcist chooses Riot on the 3rd night, Minions do not become Riot."}]},{"id":"butler","jinx":[{"id":"organgrinder","reason":"If the Organ Grinder is causing eyes closed voting, the Butler may raise their hand to vote but their vote is only counted if their master voted too."}]},{"id":"vizier","jinx":[{"id":"investigator","reason":"If the Investigator learns that the Vizier is in play, the existence of the Vizier is not announced by the Storyteller."},{"id":"preacher","reason":"If the Vizier loses their ability, they learn this. If the Vizier is executed while they have their ability, their team wins."},{"id":"courtier","reason":"If the Vizier loses their ability, they learn this. If the Vizier is executed while they have their ability, their team wins."},{"id":"fearmonger","reason":"The Vizier wakes with the Fearmonger, learns who they choose and cannot choose to immediately execute that player."},{"id":"politician","reason":"The Politician might register as evil to the Vizier."},{"id":"alsaahir","reason":"If the Vizier is in play, the Alsaahir must also guess which Demon(s) are in play."},{"id":"zealot","reason":"The Zealot might register as evil to the Vizier."},{"id":"lilmonsta","reason":"The Vizier can die by execution if they are babysitting Lil' Monsta."}]},{"id":"vortox","jinx":[{"id":"banshee","reason":"If the Vortox is in play and the Demon kills the Banshee, the players still learn that the Banshee has died."}]},{"id":"ogre","jinx":[{"id":"recluse","reason":"If the Recluse registers as evil to the Ogre, the Ogre learns that they are evil."},{"id":"spy","reason":"The Spy registers as evil to the Ogre."}]},{"id":"mastermind","jinx":[{"id":"alhadikhia","reason":"If the Al-Hadikhia dies by execution, and the Mastermind is alive, the Al-Hadikhia chooses 3 good players tonight: if all 3 choose to live, evil wins. Otherwise, good wins."}]},{"id":"boffin","jinx":[{"id":"cultleader","reason":"If the Demon has the Cult Leader ability, they can’t turn good due to this ability."},{"id":"goon","reason":"If the Demon has the Goon ability, they can’t turn good due to this ability."},{"id":"ogre","reason":"The Demon cannot have the Ogre ability."},{"id":"politician","reason":"The Demon cannot have the Politician ability."},{"id":"drunk","reason":"If the Demon would have the Drunk ability, the Boffin chooses a Townsfolk player to have this ability instead."},{"id":"villageidiot","reason":"If there is a spare token, the Boffin can give the Demon the Village Idiot ability."}]},{"id":"plaguedoctor","jinx":[{"id":"eviltwin","reason":"The Storyteller cannot gain the Evil Twin ability if the Plague Doctor dies."},{"id":"fearmonger","reason":"If the Plague Doctor dies, a living Minion gains the Fearmonger ability in addition to their own ability, and learns this."},{"id":"goblin","reason":"If the Plague Doctor dies, a living Minion gains the Goblin ability in addition to their own ability, and learns this."},{"id":"spy","reason":"If the Plague Doctor dies, a living Minion gains the Spy ability in addition to their own ability, and learns this."},{"id":"scarletwoman","reason":"If the Plague Doctor dies, a living Minion gains the Scarlet Woman ability in addition to their own ability, and learns this."},{"id":"boomdandy","reason":"If the Plague Doctor is executed and the Storyteller would gain the Boomdandy ability, the Boomdandy ability triggers immediately."},{"id":"baron","reason":"If the Storyteller gains the Baron ability, up to two players become not-in-play Outsiders."},{"id":"marionette","reason":"If the Demon has a neighbor who is alive and a Townsfolk or Outsider when the Plague Doctor dies, that player becomes an evil Marionette. If there is already an extra evil player, this does not happen."},{"id":"wraith","reason":"If the Plague Doctor dies, a living Minion gains the Wraith ability in addition to their own ability, and learns this."}]},{"id":"heretic","jinx":[{"id":"godfather","reason":"Only 1 jinxed character can be in play."},{"id":"baron","reason":"The Baron might only add 1 Outsider, not 2."},{"id":"pithag","reason":"A Pit-Hag can not create a Heretic."},{"id":"spy","reason":"Only 1 jinxed character can be in play."},{"id":"widow","reason":"Only 1 jinxed character can be in play."},{"id":"lleech","reason":"If the Lleech has poisoned the Heretic then the Lleech dies, the Heretic remains poisoned."},{"id":"boffin","reason":"The Demon cannot have the Heretic ability."}]},{"id":"bountyhunter","jinx":[{"id":"philosopher","reason":"If the Philosopher gains the Bounty Hunter ability, a Townsfolk might turn evil."},{"id":"kazali","reason":"An evil Townsfolk is only created if the Bounty Hunter is still in play after the Kazali acts."}]},{"id":"alhadikhia","jinx":[{"id":"princess","reason":"If the Princess nominated & executed a player on their 1st day, no one dies to the Al-Hadikhia ability tonight."}]},{"id":"alchemist","jinx":[{"id":"wraith","reason":"If the Alchemist has the Wraith ability, they do not, and a Wraith is in play. Each day, after the execution phase, the living Alchemist may publicly guess a living player as the Wraith: if correct, the Demon must choose the Wraith tonight."},{"id":"spy","reason":"If the Alchemist has the Spy ability, they do not, and a Spy is in play. Each day, after the execution phase, the living Alchemist may publicly guess a living player as the Spy. If correct, the Demon must choose the Spy tonight."},{"id":"widow","reason":"If the Alchemist has the Widow ability, they do not, and a Widow is in play. Each day, after the execution phase, the living Alchemist may publicly guess a living player as the Widow. If correct, the Demon must choose the Widow tonight."},{"id":"marionette","reason":"An Alchemist-Marionette has no Marionette ability & the Marionette is in play."},{"id":"summoner","reason":"The Alchemist-Summoner does not get bluffs, and chooses which Demon but not which player. If they die before this happens, evil wins. [No Demon]"},{"id":"mastermind","reason":"An Alchemist-Mastermind has no Mastermind ability & the Mastermind is not-in-play."},{"id":"organgrinder","reason":"If the Alchemist has the Organ Grinder ability, the Organ Grinder is in play & if both the Alchemist and Organ Grinder are sober, both are drunk."},{"id":"boffin","reason":"If the Alchemist has the Boffin ability, the Alchemist does not learn what ability the Demon has."}]},{"id":"magician","jinx":[{"id":"widow","reason":"When the Widow sees the Grimoire, the Demon and Magician's character tokens are removed."},{"id":"spy","reason":"When the Spy sees the Grimoire, the Demon and Magician's character tokens are removed."},{"id":"wraith","reason":"Each day, after the execution phase, the living Magician may publicly guess a living player as the Wraith: if correct, the Demon must choose the Wraith tonight."},{"id":"lilmonsta","reason":"Each night, the Magician chooses a Minion: if that Minion & Lil' Monsta are alive, that Minion babysits Lil’ Monsta."},{"id":"vizier","reason":"If the Vizier and Magician are both in play, the Demon does not learn the Minions."}]},{"id":"taowu","jinx":[{"id":"scarletwoman","reason":"The Scarlet Woman is considered \\"without ability\\" for the Taowu's ability."},{"id":"eviltwin","reason":"The Evil Twin is considered \\"without ability\\" for the Taowu's ability."},{"id":"mastermind","reason":"The Mastermind is considered \\"without ability\\" for the Taowu's ability."},{"id":"organgrinder","reason":"When the Taowu is executed, if the Organ Grinder has their ability, the Storyteller announces \\"no one was executed.\\""},{"id":"marionette","reason":"The Taowu does not learn who the Marionette is. After the Taowu causes the Marionette to lose their ability, the Taowu learns which Marionette it was, but the Marionette still believes they are a good character."},{"id":"hatter","reason":"If the Taowu changes to another character, Minions who lost their ability due to the Taowu die immediately."},{"id":"pithag","reason":"If the Taowu changes to another character, Minions who lost their ability due to the Taowu die immediately."},{"id":"engineer","reason":"If the Taowu changes to another character, Minions who lost their ability due to the Taowu die immediately."},{"id":"snakecharmer","reason":"If the Taowu changes to another character, Minions who lost their ability due to the Taowu die immediately."},{"id":"barber","reason":"If the Taowu changes to another character, Minions who lost their ability due to the Taowu die immediately."}]},{"id":"wudaozhe","jinx":[{"id":"villageidiot","reason":"If there are fewer than 3 Village Idiots in play, the Wudaozhe can become a new Village Idiot. If this causes more than 1 Village Idiot to be in play, one Village Idiot is drunk."}]},{"id":"yinluren","jinx":[{"id":"chambermaid","reason":"The Chambermaid learns if the Yinluren wakes tonight or not, even though the Chambermaid wakes first."},{"id":"mathematician","reason":"The Yinluren learns if the Mathematician is affected or not, even though they wake before the Mathematician."}]},{"id":"rulianshi","jinx":[{"id":"scarletwoman","reason":"When the Rulianshi nominates and executes the Demon and successfully becomes the evil Demon, the Scarlet Woman does not become the Demon."},{"id":"alhadikhia","reason":"If there are two living Al-Hadikhias, the Rulianshi who became Al-Hadikhia turns back into the Rulianshi, but remains evil."},{"id":"lilmonsta","reason":"If there are 5 or more players alive when the Rulianshi nominates and executes the player babysitting Lil' Monsta, the Rulianshi becomes the evil version of that character, and the original Rulianshi player must babysit Lil' Monsta tonight."},{"id":"lleech","reason":"If there are 5 or more players alive when the Rulianshi nominates and executes the host and they die from this execution, the original Lleech dies tonight, and the Rulianshi becomes the evil Lleech but cannot attack tonight."}]}]`),Tn={侍女:{数学家:`侍女会得知数学家是否醒来，即使她是在数学家之前醒来。`},食人族:{管家:`如果食人族获得了管家的能力，他会得知这一信息。`,杂耍艺人:`如果杂耍艺人在自己的首个白天猜测后在当天死于处决，当晚食人族会替杂耍艺人得知对应的信息。`,罂粟种植者:`如果食人族获得了罂粟种植者的能力，当他获得下一个能力时，爪牙和恶魔也会互相认识。`},瘟疫医生:{男爵:`如果说书人获得了男爵的能力，至多两名玩家会变成不在场的外来者。`,炸弹人:`如果瘟疫医生死于处决且说书人会因此获得炸弹人的能力，那么炸弹人的能力会立即被触发。`,镜像双子:`说书人无法在瘟疫医生死亡时获得镜像双子的能力。`,提线木偶:`如果在瘟疫医生死亡时说书人获得了提线木偶的能力，且与恶魔邻座的存活玩家中有镇民或外来者，其中一名玩家会变成邪恶的提线木偶。如果此时场上的邪恶玩家数量比初始设置时的数量超出一名或更多，改为无事发生。`,恐惧之灵:`如果瘟疫医生死亡且说书人会因此获得恐惧之灵的能力，改为一名存活的爪牙玩家获得此能力，且他会得知此事。`,哥布林:`如果瘟疫医生死亡且说书人会因此获得哥布林的能力，改为一名存活的爪牙玩家获得此能力，且他会得知此事。`,红唇女郎:`如果瘟疫医生死亡且说书人会因此获得红唇女郎的能力，改为一名存活的爪牙玩家获得此能力，且他会得知此事。`,间谍:`如果瘟疫医生死亡且说书人会因此获得间谍的能力，改为一名存活的爪牙玩家获得此能力，且他会得知此事。`,赶尸人:`如果瘟疫医生死亡且说书人会因此获得赶尸人的能力，改为一名存活的爪牙玩家获得此能力，且他会得知此事。`,养蛊人:`如果瘟疫医生死亡且说书人会因此获得养蛊人的能力，改为一名存活的爪牙玩家获得此能力，且他会得知此事。`,狐魅娘:`如果瘟疫医生死亡且说书人会因此获得狐魅娘的能力，改为一名存活的爪牙玩家获得此能力，且他会得知此事。`},麻脸巫婆:{异端分子:`麻脸巫婆无法创造异端分子。`,落难少女:`如果麻脸巫婆创造了落难少女，改为由说书人来决定哪一名玩家变成落难少女。`,政客:`被麻脸巫婆创造的邪恶政客无法因为自身能力转变为善良阵营。`,村夫:`如果村夫在场数量不足3人，麻脸巫婆可以创造新的村夫。如果她这么做，村夫的醉酒效果可能会更换目标。`,异教领袖:`被麻脸巫婆创造的邪恶异教领袖无法因为自身能力转变为善良阵营。`,莽夫:`被麻脸巫婆创造的邪恶莽夫无法因为自身能力转变为善良阵营。`},洗脑师:{哥布林:`洗脑师可以选择将玩家洗脑成哥布林。`},间谍:{魔术师:`当间谍查看魔典时，魔术师和恶魔的角色标记会被说书人移除。`,罂粟种植者:`如果罂粟种植者在场，直到其死亡前间谍无法查看魔典。`,落难少女:`如果间谍正在场或曾经在场，落难少女中毒。`,异端分子:`异端分子会被间谍当作一个不在场的外来者，异端分子会知道是哪个外来者。`},寡妇:{魔术师:`当寡妇查看魔典时，魔术师和恶魔的标记会被说书人移除。`,罂粟种植者:`如果罂粟种植者在场，直到其死亡前寡妇无法查看魔典。寡妇会在罂粟种植者死后的首个夜晚触发自身的能力。`,落难少女:`如果寡妇正在场或曾经在场，落难少女中毒。`,异端分子:`异端分子会被寡妇当作一个不在场的外来者，异端分子会知道是哪个外来者。`},教父:{异端分子:`异端分子会被教父当作一个不在场的外来者，异端分子会知道是哪个外来者。`},提线木偶:{告密者:`提线木偶不会得知三个不在场的角色，如果提线木偶与告密者均在场，改为由恶魔额外得知三个不在场角色。`,小怪宝:`提线木偶会与一名爪牙玩家邻座，而不是恶魔。提线木偶不会被唤醒来决定是否照看小怪宝，也不会在照看小怪宝时得知自己是提线木偶。`,罂粟种植者:`当罂粟种植者死亡后，恶魔会知道谁是提线木偶，但提线木偶什么都不会知道。`,气球驾驶员:`如果提线木偶抽到了气球驾驶员，也可能会+1外来者`,落难少女:`提线木偶不会得知落难少女在场。`,巡山人:`如果提线木偶抽到了巡山人，也会增加落难少女。`},男爵:{异端分子:`如果异端分子在剧本中，男爵的效果可能会只增加一个而非两个外来者。`},街头风琴手:{管家:`如果街头风琴手使得玩家需要闭眼投票，管家可以自由举手投票，但只在他的主人投票时他的票才会被统计。`},维齐尔:{调查员:`如果调查员的能力使其得知了维齐尔，则说书人不会告知所有人维齐尔在场。`,传教士:`如果维齐尔失去能力，他会得知这一信息。如果传教士在剧本列表中，且维齐尔在具有能力时被处决，他的阵营获胜。`,侍臣:`如果维齐尔失去能力，他会得知这一信息。如果侍臣在剧本列表中，且维齐尔在具有能力时被处决，他的阵营获胜。`,魔术师:`如果维齐尔和魔术师都在场，恶魔不会得知谁是爪牙。`,恐惧之灵:`在恐惧之灵因为自己的能力被唤醒时，维齐尔会一同被唤醒。他会得知恐惧之灵选择了哪名玩家，并且无法使用自己的能力让那名玩家立即被处决。`,政客:`维齐尔的能力可能会将政客当作邪恶阵营。`},召唤师:{炼金术士:`如果炼金术士获得了召唤师的能力，游戏会以初始有恶魔在场进行。炼金术士召唤师选择的玩家会变成恶魔但不会改变阵营。`,钟表匠:`如果召唤师在场，在创造恶魔之后钟表匠才会得知信息。`,罂粟种植者:`如果召唤师创造恶魔时罂粟种植者存活，由召唤师来选择创造哪种恶魔，由说书人来决定哪名玩家发生转变。`,提线木偶:`在初始设置时，提线木偶会与召唤师邻座。召唤师会得知谁是提线木偶。`,侍臣:`如果召唤师因为侍臣的能力在第三个夜晚醉酒，由召唤师来选择创造哪种恶魔，由说书人来决定哪名玩家发生转变。`,僵怖:`如果召唤师将一名已死亡的玩家变成了僵怖，该玩家会变成“已经死过一次”的僵怖。`,普卡:`召唤师可以选择在第二个夜晚将一名玩家变成普卡。`,工程师:`如果工程师的能力使得召唤师在使用自己的能力前离场，召唤师会在此前立即使用自己的能力。`,传教士:`如果召唤师在第三个夜晚或之前被传教士选中，由召唤师来选择创造哪种恶魔，由说书人来决定哪名玩家发生转变。`,麻脸巫婆:`召唤师无法创造已经在场的恶魔。如果召唤师创造了一名不在场的恶魔，当晚的死亡由说书人决定。`,帽匠:`召唤师无法创造已经在场的恶魔。如果召唤师创造了一个不在场的恶魔，当晚的死亡由说书人决定。`,卡扎力:`召唤师无法创造已经在场的恶魔。如果召唤师创造了一个不在场的恶魔，当晚的死亡由说书人决定。`},利维坦:{士兵:`如果利维坦在场，士兵免疫所有邪恶阵营的负面效果。`,僧侣:`如果利维坦在场，僧侣保护的玩家免疫所有邪恶阵营的负面效果。`,旅店老板:`如果利维坦在场，旅店老板保护的玩家免疫所有邪恶阵营的负面效果。`,守鸦人:`每个夜晚*，利维坦要选择一名存活的善良玩家（与之前的每个夜晚不同）：如果守鸦人被选择，他的能力生效但不会死亡。`,贤者:`每个夜晚*，利维坦要选择一名存活的善良玩家（与之前的每个夜晚不同）：如果贤者被选择，他的能力生效但不会死亡。`,报丧女妖:`每个夜晚*，利维坦要选择一名存活的善良玩家（与之前的每个夜晚不同）：如果报丧女妖被选择，他死亡并能力生效。`,农夫:`每个夜晚*，利维坦要选择一名存活的善良玩家（与之前的每个夜晚不同）：如果农夫被选择，他的能力生效但不会死亡。`,镇长:`如果利维坦在场，镇长存活且第五天没有处决发生，则善良阵营获胜。`,麻脸巫婆:`在第五个白天之后，麻脸巫婆无法创造利维坦。`,帽匠:`如果帽匠在第五个白天或之后死亡，恶魔不能选择变成利维坦。`,祖母:`如果利维坦在场，孙子死于处决，邪恶阵营获胜。`,驱魔人:`如果驱魔人存活并且成功选中过利维坦，即使有多于一名善良玩家被处决，邪恶阵营也不会获胜。`,国王:`如果利维坦在场，当至少一名玩家死亡时，国王每晚就会得知一个存活的角色。`,和尚:`如果利维坦发起的提名中被处决的玩家是与和尚邻近的存活玩家，那么那名玩家不会死亡，并且当晚和尚得知他的能力被触发。`,狸猫:`每个夜晚*，利维坦要选择一名存活的善良玩家（与之前的每个夜晚不同）：如果“太子”被选择，他会与狸猫交换角色但不会死亡。`,巡察:`如果利维坦在场，巡察保护的玩家免疫所有邪恶阵营的负面效果。`},哈迪寂亚:{红唇女郎:`如果出现两名存活的哈迪寂亚，则红唇女郎变成的哈迪寂亚会变回红唇女郎。`,主谋:`如果哈迪寂亚死于处决，且主谋存活，当晚哈迪寂亚要选择三名善良玩家：如果他们都选择存活，邪恶阵营获胜。否则，善良阵营获胜。`},小怪宝:{罂粟种植者:`如果罂粟种植者在场，爪牙们不会同时醒来选择照看小怪宝。他们会依次单独被唤醒，直到其中一人选择照看小怪宝。`,魔术师:`每个夜晚，由魔术师来选择一个爪牙角色：如果他和小怪宝均存活，由他来照看小怪宝。`,红唇女郎:`如果在五名及以上的玩家存活时照看小怪宝的玩家死亡，当晚红唇女郎必须要照看小怪宝。`,维齐尔:`照看小怪宝的维齐尔能够死于处决。`,帽匠:`如果恶魔选择了小怪宝，则还需要选择一个爪牙角色，他变成这个爪牙且当晚照看小怪宝。`},军团:{工程师:`军团和工程师不能在初始时同时在场。如果工程师创造了军团，那么包括所有邪恶玩家在内的绝大多数玩家都会变成邪恶的军团。`,传教士:`如果传教士选中了军团，军团仍然保留能力，但传教士可能会得知自己选中了军团。`,吟游诗人:`如果军团死于处决，所有军团保留能力，但吟游诗人可能会在当晚得知今天白天死于处决的玩家是军团。`,帽匠:`如果帽匠死亡时军团在场，则无事发生。如果帽匠死亡时一名邪恶玩家选择变成军团，当前所有邪恶玩家都会一同变成军团。`,召唤师:`如果召唤师创造了军团，包括所有邪恶玩家在内的绝大多数玩家都会变成邪恶的军团。`},方古:{红唇女郎:`如果方古成功转化了外来者并因此死去，红唇女郎不会变成方古。`},暴乱:{镇长:`镇长可以停止提名。如果他这样做了，并且场上只有一名暴乱存活，善良阵营获胜；否则，邪恶阵营获胜。`,僧侣:`如果暴乱在场，僧侣保护的玩家免疫所有邪恶阵营的负面效果。`,农夫:`每个夜晚*，暴乱要选择一名存活的善良玩家（与之前的每个夜晚不同）：如果农夫被选择，他的能力生效但不会死亡。`,旅店老板:`如果暴乱在场，旅店老板保护的玩家免疫所有邪恶阵营的负面效果。`,贤者:`每个夜晚*，暴乱要选择一名存活的善良玩家（与之前的每个夜晚不同）：如果贤者被选择，他的能力生效但不会死亡。`,守鸦人:`每个夜晚*，暴乱要选择一名存活的善良玩家（与之前的每个夜晚不同）：如果守鸦人被选择，他的能力生效但不会死亡。`,报丧女妖:`每个夜晚*，暴乱要选择一名存活的善良玩家（与之前的每个夜晚不同）：如果报丧女妖被选择，他死亡并能力生效。`,士兵:`如果暴乱在场，士兵免疫所有邪恶阵营的负面效果。`,祖母:`如果暴乱在场，孙子在白天死亡，祖母会一同死亡。`,国王:`如果暴乱在场，当至少一名玩家死亡时，国王每晚就会得知一个存活的角色。`,驱魔人:`如果驱魔人在第三个夜晚选中了暴乱，爪牙不会变成暴乱。`,巡察:`如果暴乱在场，巡察保护的玩家免疫所有邪恶阵营的负面效果。`},痢蛭:{主谋:`如果主谋存活且痢蛭的宿主死于处决，痢蛭存活但失去能力。`,猎手:`如果猎手选择了痢蛭的宿主，则宿主会死亡。`,异端分子:`如果痢蛭选择异端分子作为宿主，痢蛭死亡时异端分子仍会中毒。`},卡扎力:{赏金猎人:`在卡扎力行动完毕后，如果赏金猎人仍然在场，才会创造邪恶镇民。`,莽夫:`卡扎力可以把莽夫转变成邪恶的爪牙。`,提线木偶:`如果卡扎力选择创造提线木偶，他只能选择将自己的邻座玩家变成提线木偶。`,唱诗男孩:`如果唱诗男孩在场，卡扎力在选择国王后无法将他变成爪牙。`,巡山人:`如果卡扎力将落难少女变成了爪牙，并且巡山人在场，一名善良的玩家会变成落难少女。`,士兵:`卡扎力可以把士兵转变成邪恶的爪牙。`,半仙:`卡扎力可以把半仙转变成邪恶的爪牙。`,和尚:`卡扎力可以把与和尚邻近的玩家转变成邪恶的爪牙。`},牙噶巴卜:{驱魔人:`如果驱魔人选中了牙噶巴卜，那么牙噶巴卜的能力在当晚无法造成死亡。`},涡流:{报丧女妖:`如果恶魔杀死报丧女妖时涡流在场，玩家仍然会得知正确信息。`},理发师:{异教领袖:`通过理发师交换的邪恶异教领袖无法因为自身能力转变为善良阵营。`,莽夫:`通过理发师交换的邪恶莽夫无法因为自身能力转变为善良阵营。`,政客:`通过理发师交换的邪恶政客无法因为自身能力转变为善良阵营。`,落难少女:`如果恶魔选择交换落难少女的角色，参与角色交换的另一名玩家改为由说书人来决定。`},"戏子（改）":{间谍:`互为克星的角色在同一时间里只能有其中一个角色在场。`,镜像双子:`互为克星的角色在同一时间里只能有其中一个角色在场。`,寡妇:`互为克星的角色在同一时间里只能有其中一个角色在场。`,召唤师:`互为克星的角色在同一时间里只能有其中一个角色在场。`,暴乱:`互为克星的角色在同一时间里只能有其中一个角色在场。`,军团:`在戏子（改）存在于剧本中时，军团可以在游戏中任意时候向说书人示意自己“想要死亡”。说书人会在夜晚一同唤醒所有军团，并询问他们是否要一同死亡。`,利维坦:`在戏子（改）存在于剧本中时，利维坦可以在游戏中任意时候向说书人示意自己“想要死亡”。说书人会在当晚杀死这名玩家。`,小怪宝:`在戏子（改）存在于剧本中时，照看小怪宝的玩家可以在游戏中任意时候向说书人示意自己“想要死亡”。说书人会在当晚将小怪宝从游戏中移除。`,普卡:`在戏子（改）存在于剧本中时，普卡可以在游戏中任意时候向说书人示意自己“想要死亡”。说书人会在当晚杀死这名玩家。`,哥布林:`戏子（改）无法反转由哥布林的能力产生的胜负结果。`,恐惧之灵:`戏子（改）无法反转由恐惧之灵的能力产生的胜负结果。`,麻脸巫婆:`麻脸巫婆无法创造戏子（改），麻脸巫婆创造的邪恶玩家无法获得戏子（改）的能力。`,科学怪人:`科学怪人无法使恶魔获得戏子（改）的能力。`,无神论者:`无神论者在剧本中时，处决说书人导致的胜负结果不会被反转，无神论者不会因为戏子（改）的能力醉酒。`,疯子:`疯子不会因为戏子（改）能力参与互认，也不会因为戏子（改）的能力醉酒。`,国王:`国王不会因为戏子（改）的能力醉酒。`,告密者:`告密者不会因为戏子（改）的能力醉酒。`,落难少女:`落难少女不会因为戏子（改）的能力醉酒。`,书生:`书生不会因为戏子（改）的能力醉酒。`},悟道者:{村夫:`如果村夫在场数量不足3人，悟道者可以变成新的村夫。如果因此使得村夫的在场数量超过1人，会有一名村夫醉酒。`},异端分子:{狐魅娘:`互为克星的角色在同一时间里只能有其中一个角色在场。`},梼杌:{红唇女郎:`红唇女郎在梼杌的能力判断中被当作“不具有能力”。`,镜像双子:`镜像双子在梼杌的能力判断中被当作“不具有能力”。`,主谋:`主谋在梼杌的能力判断中被当作“不具有能力”。`,街头风琴手:`当梼杌被处决时，如果街头风琴手具有能力，说书人会宣布“无人被处决”。`,提线木偶:`梼杌不会得知谁是提线木偶。在梼杌使得提线木偶失去能力后，梼杌会得知对应的那一名提线木偶是谁，但提线木偶会仍然以为自己是一个善良角色。`,帽匠:`如果梼杌变成了其他角色，因为梼杌而失去能力的爪牙会立即死亡。`,麻脸巫婆:`如果梼杌变成了其他角色，因为梼杌而失去能力的爪牙会立即死亡。`,工程师:`如果梼杌变成了其他角色，因为梼杌而失去能力的爪牙会立即死亡。`,舞蛇人:`如果梼杌变成了其他角色，因为梼杌而失去能力的爪牙会立即死亡。`,理发师:`如果梼杌变成了其他角色，因为梼杌而失去能力的爪牙会立即死亡。`},食人魔:{陌客:`如果陌客被食人魔当作邪恶阵营，食人魔会得知自己转变为邪恶。`,熬药巫婆:`被麻脸巫婆创造的邪恶食人魔无法因为自身能力转变为善良阵营。`,间谍:`间谍必定被食人魔当作邪恶阵营。`},哲学家:{赏金猎人:`如果哲学家获得了赏金猎人的能力，可能会有一名镇民玩家转变为邪恶。`},戏法师:{维齐尔:`如果维齐尔在场，戏法师在进行猜测时还需要猜测恶魔的具体角色。`},狂热者:{食人族:`如果食人族获得了狂热者的能力，他会得知这一信息。`,维齐尔:`维齐尔的能力可能会将狂热者当作邪恶阵营。`,军团:`军团的能力可能会将狂热者当作邪恶阵营。`,暴乱:`狂热者在被提名后必须立马发起提名，即使自己已死亡。`},堤丰之首:{召唤师:`如果召唤师创造了堤丰之首，则堤丰之首必须与一名爪牙相邻，且堤丰之首另一侧的玩家变成一个不在场的邪恶爪牙。`},科学怪人:{村夫:`如果村夫在场数量不足3人，科学怪人可以让恶魔拥有村夫的能力。`,异教领袖:`如果恶魔拥有异教领袖的能力，他无法因为该能力转变为善良阵营。`,莽夫:`如果恶魔拥有莽夫的能力，他无法因为该能力转变为善良阵营。`,异端分子:`恶魔无法拥有异端分子的能力。`,食人魔:`恶魔无法拥有食人魔的能力。`,政客:`恶魔无法拥有政客的能力。`,酒鬼:`如果恶魔拥有酒鬼的能力，改为由科学怪人选择一名玩家：如果他是镇民，他醉酒。`},炼金术士:{科学怪人:`如果炼金术士拥有科学怪人的能力，炼金术士不会得知恶魔因此获得了哪个角色的能力。`,间谍:`如果炼金术士获得了间谍的能力，他无法查看魔典，并且间谍不能被当作善良阵营、镇民角色或外来者角色。`,寡妇:`如果炼金术士获得了寡妇的能力，他无法查看魔典。`},引路人:{侍女:`侍女会得知引路人是否醒来，即使她是在引路人之前醒来。`,数学家:`引路人会得知数学家是否被影响，即使他是在数学家之前醒来。`},入殓师:{红唇女郎:`入殓师提名并处决了恶魔并成功变成邪恶恶魔时，红唇女郎不会变成恶魔。`,哈迪寂亚:`如果出现两名存活的哈迪寂亚，则入殓师变成的哈迪寂亚会变回入殓师，但阵营保持邪恶。`,小怪宝:`如果在五名及以上的玩家存活时，入殓师提名并处决了照看小怪宝的玩家，入殓师会变为邪恶的该角色，当晚原入殓师玩家必须要照看小怪宝。`,痢蛭:`如果在大于等于五名玩家存活时，入殓师提名并处决了宿主且他死于这次处决，原本的痢蛭会在当晚死亡，入殓师变为邪恶的痢蛭且当晚无法攻击。`},公主:{食人族:`如果食人族提名并处决了公主且公主因此死亡，当晚恶魔不会造成死亡。`,哈迪寂亚:`如果公主在首个白天提名并处决了一名玩家，没有人会因为哈迪寂亚的能力而死亡。(公主与哈迪寂亚角色互动结果本应如此，此条仅做说明)`}},En={};wn.forEach(e=>{e.jinx&&Array.isArray(e.jinx)&&(En[e.id]={},e.jinx.forEach(t=>{En[e.id][t.id]=t.reason}))});const Dn=Tn,On=En;function kn(e,t,n=`zh-CN`){let r=n===`en`?On:Dn;return e in r&&t in r[e]||t in r&&e in r[t]}function An(e,t,n=`zh-CN`){let r=n===`en`?On:Dn;return e in r&&t in r[e]?r[e][t]:t in r&&e in r[t]?r[t][e]:``}var jn=C(function({open:e,character:t,onClose:n,onSave:r}){let{t:i,language:a}=X(),o=Se(),s=St(o.breakpoints.down(`sm`)),[c,l]=(0,G.useState)({}),[u,d]=(0,G.useState)([]),[f,p]=(0,G.useState)(null),[m,h]=(0,G.useState)(``),[g,_]=(0,G.useState)(null),[v,y]=(0,G.useState)(``),b=K.config.officialIdParseMode,x=J.script?.all.filter(e=>e.id!==t?.id)||[];(0,G.useEffect)(()=>{if(t&&J.script){let e=Q[t.id]||{},n={...e,...t};console.log(`CharacterEditDialog - 角色数据:`,{characterId:t.id,characterReminders:t.reminders,characterRemindersGlobal:t.remindersGlobal,defaultReminders:e.reminders,defaultRemindersGlobal:e.remindersGlobal,mergedReminders:n.reminders,mergedRemindersGlobal:n.remindersGlobal}),l(n);let r=[],i=t.name;t.id,J.script.jinx[i]&&Object.entries(J.script.jinx[i]).forEach(([e,t])=>{let n=J.script.all.find(t=>t.name===e);n&&r.push({targetCharacter:n,jinxInfo:t})}),d(r)}},[t,J.script,a]);let S=()=>{f&&m.trim()&&t&&(J.addCustomJinx(t,f,m.trim()),p(null),h(``),setTimeout(()=>{let e=[],n=t.name;t.id,J.script&&J.script.jinx[n]&&Object.entries(J.script.jinx[n]).forEach(([t,n])=>{let r=J.script.all.find(e=>e.name===t);r&&e.push({targetCharacter:r,jinxInfo:n})}),d(e)},100))},C=e=>{t&&!e.jinxInfo.isOfficial&&(J.removeCustomJinx(t,e.targetCharacter),d(t=>t.filter(t=>t.targetCharacter.id!==e.targetCharacter.id)))},O=e=>{if(!t)return;let n=!e.jinxInfo.display;J.updateOfficialJinx(t,e.targetCharacter,{display:n}),d(t=>t.map(t=>t.targetCharacter.id===e.targetCharacter.id?{...t,jinxInfo:{...t.jinxInfo,display:n}}:t))},k=(e,n)=>{t&&(J.updateOfficialJinx(t,e.targetCharacter,{reason:n}),d(t=>t.map(t=>t.targetCharacter.id===e.targetCharacter.id?{...t,jinxInfo:{...t.jinxInfo,reason:n}}:t)))},ee=()=>{if(K.config.officialIdParseMode){n();return}if(!t){n();return}if(g&&v){let e=u.find(e=>e.targetCharacter.id===g);e&&(k(e,v),_(null),y(``))}if(f&&m.trim()&&(J.addCustomJinx(t,f,m.trim()),p(null),h(``)),t){let e={},i={...Q[t.id]||{},...t};Object.keys(c).forEach(t=>{let n=t,r=c[n],a=i[n];if(n===`firstNight`||n===`otherNight`){let t=Number(r)||0;t!==(Number(a)||0)&&(e[n]=t)}else if(n===`firstNightReminder`||n===`otherNightReminder`){let t=String(r||``);t!==String(a||``)&&(e[n]=t)}else if(n===`reminders`||n===`remindersGlobal`){let t=Array.isArray(r)?r:[],i=Array.isArray(a)?a:[];JSON.stringify(t)!==JSON.stringify(i)&&(e[n]=t)}else r!==a&&(e[n]=r)}),Object.keys(e).length>0&&(console.log(`CharacterEditDialog - 保存角色更新:`,{characterId:t.id,updates:e,remindersInUpdates:e.reminders,remindersGlobalInUpdates:e.remindersGlobal}),r(t.id,e)),n()}},j=(e,t)=>{l(n=>({...n,[e]:t}))};if(!t)return null;let ne=[{value:`townsfolk`,label:i(`townsfolk`)},{value:`outsider`,label:i(`outsider`)},{value:`minion`,label:i(`minion`)},{value:`demon`,label:i(`demon`)},{value:`fabled`,label:i(`fabled`)},{value:`loric`,label:i(`loric`)},{value:`traveler`,label:i(`traveler`)}];return(0,Y.jsxs)(V,{open:e,onClose:n,disableScrollLock:!0,maxWidth:`md`,fullWidth:!0,fullScreen:s,PaperProps:{sx:{maxHeight:{xs:`100vh`,sm:`90vh`},margin:{xs:0,sm:2}}},children:[(0,Y.jsxs)(H,{sx:{p:2,borderBottom:1,borderColor:`divider`},children:[(0,Y.jsxs)(R,{sx:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,mb:1.5},children:[(0,Y.jsx)(I,{variant:`h6`,children:i(`editCharacter`)}),(0,Y.jsx)(B,{onClick:n,size:`small`,children:(0,Y.jsx)(L,{})})]}),(0,Y.jsxs)(R,{sx:{display:`flex`,gap:2,alignItems:`center`},children:[(0,Y.jsx)($,{src:c.image||t?.image||``,alt:c.name||t?.name||``,sx:{width:50,height:50,borderRadius:1,objectFit:`cover`,flexShrink:0}}),(0,Y.jsxs)(R,{children:[(0,Y.jsx)(I,{variant:`subtitle1`,fontWeight:`bold`,color:`primary`,children:c.name||t.name}),(0,Y.jsx)(I,{variant:`body2`,color:`text.secondary`,sx:{display:`-webkit-box`,WebkitBoxOrient:`vertical`,WebkitLineClamp:2,overflow:`hidden`,textOverflow:`ellipsis`},children:c.ability})]})]})]}),(0,Y.jsx)(W,{sx:{p:{xs:2,sm:3}},children:(0,Y.jsxs)(R,{component:`form`,sx:{display:`flex`,flexDirection:`column`,gap:2.5},children:[(0,Y.jsxs)(R,{component:`section`,children:[(0,Y.jsx)(I,{variant:`subtitle1`,fontWeight:`bold`,sx:{mb:1.5},children:i(`basicInfo`)}),(0,Y.jsxs)(R,{sx:{display:`flex`,flexDirection:`column`,gap:2},children:[(0,Y.jsxs)(R,{sx:{display:`flex`,flexDirection:{xs:`column`,sm:`row`},gap:2},children:[(0,Y.jsx)(D,{sx:{flex:1},label:i(`characterName`),value:c.name||``,onChange:e=>j(`name`,e.target.value),disabled:b}),(0,Y.jsxs)(Ve,{sx:{flex:1},disabled:b,children:[(0,Y.jsx)(Ie,{children:i(`team`)}),(0,Y.jsx)(Oe,{value:c.team||``,label:i(`team`),onChange:e=>j(`team`,e.target.value),children:ne.map(e=>(0,Y.jsx)(w,{value:e.value,children:e.label},e.value))})]})]}),(0,Y.jsx)(D,{fullWidth:!0,label:i(`ability`),multiline:!0,rows:2,value:c.ability||``,onChange:e=>j(`ability`,e.target.value),disabled:b}),(0,Y.jsx)(D,{fullWidth:!0,label:i(`imageUrl`),value:c.image||``,onChange:e=>j(`image`,e.target.value),disabled:b})]})]}),(0,Y.jsx)(U,{}),(0,Y.jsxs)(R,{component:`section`,children:[(0,Y.jsx)(I,{variant:`subtitle1`,fontWeight:`bold`,sx:{mb:1.5},children:i(`nightOrder`)}),(0,Y.jsxs)(R,{sx:{display:`flex`,flexDirection:{xs:`column`,sm:`row`},gap:2},children:[(0,Y.jsx)(D,{sx:{flex:1},label:i(`firstNight`),type:`number`,value:c.firstNight||0,onChange:e=>j(`firstNight`,Number(e.target.value)),disabled:b}),(0,Y.jsx)(D,{sx:{flex:1},label:i(`otherNight`),type:`number`,value:c.otherNight||0,onChange:e=>j(`otherNight`,Number(e.target.value)),disabled:b})]})]}),(0,Y.jsx)(U,{}),(0,Y.jsxs)(R,{component:`section`,children:[(0,Y.jsx)(I,{variant:`subtitle1`,fontWeight:`bold`,sx:{mb:1.5},children:i(`storytellerReminders`)}),(0,Y.jsxs)(R,{sx:{display:`flex`,flexDirection:`column`,gap:2},children:[(0,Y.jsx)(D,{fullWidth:!0,label:i(`firstNightReminder`),multiline:!0,rows:2,value:c.firstNightReminder||``,onChange:e=>j(`firstNightReminder`,e.target.value),disabled:b}),(0,Y.jsx)(D,{fullWidth:!0,label:i(`otherNightReminder`),multiline:!0,rows:2,value:c.otherNightReminder||``,onChange:e=>j(`otherNightReminder`,e.target.value),disabled:b})]}),(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(U,{}),(0,Y.jsxs)(R,{component:`section`,children:[(0,Y.jsx)(I,{variant:`subtitle1`,fontWeight:`bold`,sx:{mb:1.5},children:i(`reminderTokens`)}),(0,Y.jsxs)(R,{children:[(0,Y.jsx)(R,{sx:{display:`flex`,flexWrap:`wrap`,gap:1,mb:2},children:(c.reminders||[]).map((e,t)=>(0,Y.jsx)(qe,{label:e,onDelete:b?void 0:()=>{let e=[...c.reminders||[]];e.splice(t,1),j(`reminders`,e)}},t))}),(0,Y.jsx)(D,{fullWidth:!0,label:i(`addReminder`),placeholder:i(`addReminderPlaceholder`),disabled:b,onKeyPress:e=>{if(e.key===`Enter`){e.preventDefault();let t=e.target.value.trim();if(t){let n=[...c.reminders||[],t];j(`reminders`,n),e.target.value=``}}}})]})]}),(0,Y.jsxs)(R,{component:`section`,children:[(0,Y.jsx)(I,{variant:`subtitle1`,fontWeight:`bold`,sx:{mb:1.5},children:i(`globalReminderTokens`)}),(0,Y.jsxs)(R,{children:[(0,Y.jsx)(R,{sx:{display:`flex`,flexWrap:`wrap`,gap:1,mb:2},children:(c.remindersGlobal||[]).map((e,t)=>(0,Y.jsx)(qe,{label:e,color:`secondary`,onDelete:b?void 0:()=>{let e=[...c.remindersGlobal||[]];e.splice(t,1),j(`remindersGlobal`,e)}},t))}),(0,Y.jsx)(D,{fullWidth:!0,label:i(`addGlobalReminder`),placeholder:i(`addGlobalReminderPlaceholder`),disabled:b,onKeyPress:e=>{if(e.key===`Enter`){e.preventDefault();let t=e.target.value.trim();if(t){let n=[...c.remindersGlobal||[],t];j(`remindersGlobal`,n),e.target.value=``}}}})]})]})]})]}),(0,Y.jsx)(U,{}),(0,Y.jsxs)(R,{component:`section`,children:[(0,Y.jsx)(I,{variant:`subtitle1`,fontWeight:`bold`,sx:{mb:1.5},children:i(`customJinx.management`)}),u.length>0&&(0,Y.jsx)(ut,{sx:{mb:2,p:0},children:u.map((e,t)=>{let n=g===e.targetCharacter.id,r=e.jinxInfo.display===!1;return(0,Y.jsx)(Ge,{sx:{border:1,borderColor:r?`error.main`:`divider`,borderRadius:1,mb:1,p:1.5,backgroundColor:e.jinxInfo.isOfficial?`transparent`:`rgba(25, 118, 210, 0.08)`,opacity:r?.6:1,flexDirection:`column`,alignItems:`stretch`},children:(0,Y.jsxs)(R,{sx:{display:`flex`,alignItems:`flex-start`,width:`100%`,gap:1.5},children:[(0,Y.jsx)($,{src:e.targetCharacter.image,alt:e.targetCharacter.name,sx:{width:40,height:40,borderRadius:1,flexShrink:0}}),(0,Y.jsxs)(R,{sx:{flex:1,minWidth:0},children:[(0,Y.jsxs)(R,{sx:{display:`flex`,alignItems:`center`,gap:1,mb:.5},children:[(0,Y.jsx)(I,{variant:`subtitle2`,fontWeight:`bold`,children:e.targetCharacter.name}),e.jinxInfo.isOfficial&&(0,Y.jsx)(qe,{label:i(`customJinx.official`),size:`small`,color:`primary`,sx:{height:20}}),r&&(0,Y.jsx)(qe,{label:i(`customJinx.hidden`),size:`small`,color:`error`,sx:{height:20}})]}),n?(0,Y.jsx)(D,{fullWidth:!0,multiline:!0,rows:3,value:v,onChange:e=>y(e.target.value),sx:{mt:1},size:`small`}):(0,Y.jsx)(I,{variant:`body2`,color:`text.secondary`,sx:{mt:.5},children:e.jinxInfo.reason})]}),!b&&(0,Y.jsx)(R,{sx:{display:`flex`,gap:.5,flexShrink:0},children:n?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(B,{size:`small`,color:`primary`,onClick:()=>{k(e,v),_(null),y(``)},title:i(`common.save`),children:(0,Y.jsx)(re,{fontSize:`small`})}),(0,Y.jsx)(B,{size:`small`,onClick:()=>{_(null),y(``)},title:i(`common.cancel`),children:(0,Y.jsx)(ce,{fontSize:`small`})})]}):(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(B,{size:`small`,onClick:()=>O(e),title:i(r?`customJinx.show`:`customJinx.hide`),children:r?(0,Y.jsx)(dt,{fontSize:`small`}):(0,Y.jsx)(et,{fontSize:`small`})}),(0,Y.jsx)(B,{size:`small`,onClick:()=>{_(e.targetCharacter.id),y(e.jinxInfo.reason)},title:i(`customJinx.edit`),children:(0,Y.jsx)(te,{fontSize:`small`})}),!e.jinxInfo.isOfficial&&(0,Y.jsx)(B,{size:`small`,onClick:()=>C(e),title:i(`customJinx.delete`),children:(0,Y.jsx)(T,{fontSize:`small`})})]})})]})},t)})}),!b&&(0,Y.jsxs)(Ct,{variant:`outlined`,sx:{p:2,backgroundColor:`rgba(0, 0, 0, 0.02)`},children:[(0,Y.jsx)(I,{variant:`subtitle2`,sx:{mb:1.5},children:i(`customJinx.addNew`)}),(0,Y.jsxs)(R,{sx:{display:`flex`,flexDirection:`column`,gap:2},children:[(0,Y.jsx)(E,{value:f,onChange:(e,t)=>p(t),options:x,getOptionLabel:e=>e.name,renderOption:(e,t)=>(0,Y.jsxs)(R,{component:`li`,...e,sx:{display:`flex`,alignItems:`center`,gap:1},children:[(0,Y.jsx)($,{src:t.image,alt:t.name,sx:{width:32,height:32,borderRadius:1}}),(0,Y.jsx)(I,{children:t.name})]}),renderInput:e=>(0,Y.jsx)(D,{...e,label:i(`customJinx.selectTarget`),placeholder:i(`customJinx.selectCharacter`),InputProps:{...e.InputProps,startAdornment:f&&(0,Y.jsx)($,{src:f.image,alt:f.name,sx:{width:32,height:32,ml:1,borderRadius:1}})}})}),(0,Y.jsx)(D,{fullWidth:!0,multiline:!0,rows:3,label:i(`customJinx.description`),placeholder:i(`customJinx.descriptionPlaceholder`),value:m,onChange:e=>h(e.target.value)}),(0,Y.jsx)(A,{variant:`contained`,startIcon:(0,Y.jsx)(he,{}),onClick:S,disabled:!f||!m.trim(),fullWidth:!0,children:i(`customJinx.add`)})]})]})]})]})}),(0,Y.jsxs)(xt,{children:[(0,Y.jsx)(A,{onClick:n,children:i(`common.cancel`)}),(0,Y.jsx)(A,{onClick:ee,variant:`contained`,disabled:b,children:i(`common.save`)})]})]})});function Mn({onClick:e,show:t=!0}){return(0,Y.jsx)(ot,{in:t,children:(0,Y.jsx)(at,{color:`primary`,"aria-label":`add character`,onClick:e,sx:{position:`fixed`,bottom:{xs:20,sm:24},right:{xs:20,sm:24},zIndex:1200,backgroundColor:`#1976d2`,boxShadow:`0 4px 20px rgba(25, 118, 210, 0.4)`,"&:hover":{backgroundColor:`#1565c0`,boxShadow:`0 6px 25px rgba(25, 118, 210, 0.5)`},"@media print":{display:`none`}},children:(0,Y.jsx)(he,{})})})}var Nn=JSON.parse(`[{"id":"washerwoman","name":"Washerwoman","edition":"tb","team":"townsfolk","firstNight":33,"firstNightReminder":"Show the character token of a Townsfolk in play. Point to two players, one of which is that character.","otherNight":0,"otherNightReminder":"","reminders":["Townsfolk","Wrong"],"setup":false,"ability":"You start knowing that 1 of 2 players is a particular Townsfolk."},{"id":"librarian","name":"Librarian","edition":"tb","team":"townsfolk","firstNight":34,"firstNightReminder":"Show the character token of an Outsider in play. Point to two players, one of which is that character.","otherNight":0,"otherNightReminder":"","reminders":["Outsider","Wrong"],"setup":false,"ability":"You start knowing that 1 of 2 players is a particular Outsider. (Or that zero are in play.)"},{"id":"investigator","name":"Investigator","edition":"tb","team":"townsfolk","firstNight":35,"firstNightReminder":"Show the character token of a Minion in play. Point to two players, one of which is that character.","otherNight":0,"otherNightReminder":"","reminders":["Minion","Wrong"],"setup":false,"ability":"You start knowing that 1 of 2 players is a particular Minion."},{"id":"chef","name":"Chef","edition":"tb","team":"townsfolk","firstNight":36,"firstNightReminder":"Show the finger signal (0, 1, 2, …) for the number of pairs of neighbouring evil players.","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"You start knowing how many pairs of evil players there are."},{"id":"empath","name":"Empath","edition":"tb","team":"townsfolk","firstNight":37,"firstNightReminder":"Show the finger signal (0, 1, 2) for the number of evil alive neighbours of the Empath.","otherNight":53,"otherNightReminder":"Show the finger signal (0, 1, 2) for the number of evil neighbours.","reminders":[],"setup":false,"ability":"Each night, you learn how many of your 2 alive neighbours are evil."},{"id":"fortuneteller","name":"Fortune Teller","image":"https://oss.gstonegames.com/data_file/clocktower/web/icons/fortune_teller.png","edition":"tb","team":"townsfolk","firstNight":38,"firstNightReminder":"The Fortune Teller points to two players. Give the head signal (nod yes, shake no) for whether one of those players is the Demon. ","otherNight":54,"otherNightReminder":"The Fortune Teller points to two players. Show the head signal (nod 'yes', shake 'no') for whether one of those players is the Demon.","reminders":["Red herring"],"setup":false,"ability":"Each night, choose 2 players: you learn if either is a Demon. There is a good player that registers as a Demon to you."},{"id":"undertaker","name":"Undertaker","edition":"tb","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":55,"otherNightReminder":"If a player was executed today: Show that player’s character token.","reminders":["Executed"],"setup":false,"ability":"Each night*, you learn which character died by execution today."},{"id":"monk","name":"Monk","edition":"tb","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":12,"otherNightReminder":"The previously protected player is no longer protected. The Monk points to a player not themself. Mark that player 'Protected'.","reminders":["Protected"],"setup":false,"ability":"Each night*, choose a player (not yourself): they are safe from the Demon tonight."},{"id":"ravenkeeper","name":"Ravenkeeper","edition":"tb","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":52,"otherNightReminder":"If the Ravenkeeper died tonight: The Ravenkeeper points to a player. Show that player’s character token.","reminders":[],"setup":false,"ability":"If you die at night, you are woken to choose a player: you learn their character."},{"id":"virgin","name":"Virgin","edition":"tb","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["No ability"],"setup":false,"ability":"The 1st time you are nominated, if the nominator is a Townsfolk, they are executed immediately."},{"id":"slayer","name":"Slayer","edition":"tb","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["No ability"],"setup":false,"ability":"Once per game, during the day, publicly choose a player: if they are the Demon, they die."},{"id":"soldier","name":"Soldier","edition":"tb","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"You are safe from the Demon."},{"id":"mayor","name":"Mayor","edition":"tb","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"If only 3 players live & no execution occurs, your team wins. If you die at night, another player might die instead."},{"id":"butler","name":"Butler","edition":"tb","team":"outsider","firstNight":39,"firstNightReminder":"The Butler points to a player. Mark that player as 'Master'.","otherNight":67,"otherNightReminder":"The Butler points to a player. Mark that player as 'Master'.","reminders":["Master"],"setup":false,"ability":"Each night, choose a player (not yourself): tomorrow, you may only vote if they are voting too."},{"id":"drunk","name":"Drunk","edition":"tb","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"remindersGlobal":["Drunk"],"setup":true,"ability":"You do not know you are the Drunk. You think you are a Townsfolk character, but you are not."},{"id":"recluse","name":"Recluse","edition":"tb","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"You might register as evil & as a Minion or Demon, even if dead."},{"id":"saint","name":"Saint","edition":"tb","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"If you die by execution, your team loses."},{"id":"poisoner","name":"Poisoner","edition":"tb","team":"minion","firstNight":17,"firstNightReminder":"The Poisoner points to a player. That player is poisoned.","otherNight":7,"otherNightReminder":"The previously poisoned player is no longer poisoned. The Poisoner points to a player. That player is poisoned.","reminders":["Poisoned"],"setup":false,"ability":"Each night, choose a player: they are poisoned tonight and tomorrow day."},{"id":"spy","name":"Spy","edition":"tb","team":"minion","firstNight":49,"firstNightReminder":"Show the Grimoire to the Spy for as long as they need.","otherNight":68,"otherNightReminder":"Show the Grimoire to the Spy for as long as they need.","reminders":[],"setup":false,"ability":"Each night, you see the Grimoire. You might register as good & as a Townsfolk or Outsider, even if dead."},{"id":"scarletwoman","name":"Scarlet Woman","image":"https://oss.gstonegames.com/data_file/clocktower/web/icons/scarlet_woman.png","edition":"tb","team":"minion","firstNight":0,"firstNightReminder":"","otherNight":19,"otherNightReminder":"If the Scarlet Woman became the Demon today: Show the 'You are' card, then the demon token.","reminders":["Demon"],"setup":false,"ability":"If there are 5 or more players alive & the Demon dies, you become the Demon. (Travellers don’t count)"},{"id":"baron","name":"Baron","edition":"tb","team":"minion","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":true,"ability":"There are extra Outsiders in play. [+2 Outsiders]"},{"id":"imp","name":"Imp","edition":"tb","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":24,"otherNightReminder":"The Imp points to a player. That player dies. If the Imp chose themselves: Replace the character of 1 alive minion with a spare Imp token. Show the 'You are' card, then the Imp token.","reminders":["Dead"],"setup":false,"ability":"Each night*, choose a player: they die. If you kill yourself this way, a Minion becomes the Imp."},{"id":"bureaucrat","name":"Bureaucrat","edition":"tb","team":"traveler","firstNight":1,"firstNightReminder":"The Bureaucrat points to a player. Put the Bureaucrat's '3 votes' reminder by the chosen player's character token.","otherNight":1,"otherNightReminder":"The Bureaucrat points to a player. Put the Bureaucrat's '3 votes' reminder by the chosen player's character token.","reminders":["3 votes"],"setup":false,"ability":"Each night, choose a player (not yourself): their vote counts as 3 votes tomorrow."},{"id":"thief","name":"Thief","edition":"tb","team":"traveler","firstNight":1,"firstNightReminder":"The Thief points to a player. Put the Thief's 'Negative vote' reminder by the chosen player's character token.","otherNight":1,"otherNightReminder":"The Thief points to a player. Put the Thief's 'Negative vote' reminder by the chosen player's character token.","reminders":["Negative vote"],"setup":false,"ability":"Each night, choose a player (not yourself): their vote counts negatively tomorrow."},{"id":"gunslinger","name":"Gunslinger","edition":"tb","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Each day, after the 1st vote has been tallied, you may choose a player that voted: they die."},{"id":"scapegoat","name":"Scapegoat","edition":"tb","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"If a player of your alignment is executed, you might be executed instead."},{"id":"beggar","name":"Beggar","edition":"tb","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"You must use a vote token to vote. Dead players may choose to give you theirs. If so, you learn their alignment. You are sober & healthy."},{"id":"grandmother","name":"Grandmother","edition":"bmr","team":"townsfolk","firstNight":40,"firstNightReminder":"Show the marked character token. Point to the marked player.","otherNight":51,"otherNightReminder":"If the Grandmother’s grandchild was killed by the Demon tonight: The Grandmother dies.","reminders":["Grandchild"],"setup":false,"ability":"You start knowing a good player & their character. If the Demon kills them, you die too."},{"id":"sailor","name":"Sailor","edition":"bmr","team":"townsfolk","firstNight":11,"firstNightReminder":"The Sailor points to a living player. Either the Sailor, or the chosen player, is drunk.","otherNight":4,"otherNightReminder":"The previously drunk player is no longer drunk. The Sailor points to a living player. Either the Sailor, or the chosen player, is drunk.","reminders":["Drunk"],"setup":false,"ability":"Each night, choose an alive player: either you or they are drunk until dusk. You can't die."},{"id":"chambermaid","name":"Chambermaid","edition":"bmr","team":"townsfolk","firstNight":51,"firstNightReminder":"The Chambermaid points to two players. Show the number signal (0, 1, 2, …) for how many of those players wake tonight for their ability.","otherNight":70,"otherNightReminder":"The Chambermaid points to two players. Show the number signal (0, 1, 2, …) for how many of those players wake tonight for their ability.","reminders":[],"setup":false,"ability":"Each night, choose 2 alive players (not yourself): you learn how many woke tonight due to their ability."},{"id":"exorcist","name":"Exorcist","edition":"bmr","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":21,"otherNightReminder":"The Exorcist points to a player, different from the previous night. If that player is the Demon: Wake the Demon. Show the Exorcist token. Point to the Exorcist. The Demon does not act tonight.","reminders":["Chosen"],"setup":false,"ability":"Each night*, choose a player (different to last night): the Demon, if chosen, learns who you are then doesn't wake tonight."},{"id":"innkeeper","name":"Innkeeper","edition":"bmr","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":9,"otherNightReminder":"The previously protected and drunk players lose those markers. The Innkeeper points to two players. Those players are protected. One is drunk.","reminders":["Protected","Drunk"],"setup":false,"ability":"Each night*, choose 2 players: they can't die tonight, but 1 is drunk until dusk."},{"id":"gambler","name":"Gambler","edition":"bmr","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":10,"otherNightReminder":"The Gambler points to a player, and a character on their sheet. If incorrect, the Gambler dies.","reminders":["Dead"],"setup":false,"ability":"Each night*, choose a player & guess their character: if you guess wrong, you die."},{"id":"gossip","name":"Gossip","edition":"bmr","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":38,"otherNightReminder":"If the Gossip’s public statement was true: Choose a player not protected from dying tonight. That player dies.","reminders":["Dead"],"setup":false,"ability":"Each day, you may make a public statement. Tonight, if it was true, a player dies."},{"id":"courtier","name":"Courtier","edition":"bmr","team":"townsfolk","firstNight":19,"firstNightReminder":"The Courtier either shows a 'no' head signal, or points to a character on the sheet. If the Courtier used their ability: If that character is in play, that player is drunk.","otherNight":8,"otherNightReminder":"Reduce the remaining number of days the marked player is poisoned. If the Courtier has not yet used their ability: The Courtier either shows a 'no' head signal, or points to a character on the sheet. If the Courtier used their ability: If that character is in play, that player is drunk.","reminders":["Drunk 3","Drunk 2","Drunk 1","No ability"],"setup":false,"ability":"Once per game, at night, choose a character: they are drunk for 3 nights & 3 days."},{"id":"professor","name":"Professor","edition":"bmr","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":43,"otherNightReminder":"If the Professor has not used their ability: The Professor either shakes their head no, or points to a player. If that player is a Townsfolk, they are now alive.","reminders":["Alive","No ability"],"setup":false,"ability":"Once per game, at night*, choose a dead player: if they are a Townsfolk, they are resurrected."},{"id":"minstrel","name":"Minstrel","edition":"bmr","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Everyone drunk"],"setup":false,"ability":"When a Minion dies by execution, all other players (except Travellers) are drunk until dusk tomorrow."},{"id":"tealady","image":"https://oss.gstonegames.com/data_file/clocktower/web/icons/tea_lady.png","name":"Tea Lady","edition":"bmr","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Can not die"],"setup":false,"ability":"If both your alive neighbours are good, they can't die."},{"id":"pacifist","name":"Pacifist","edition":"bmr","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Executed good players might not die."},{"id":"fool","name":"Fool","edition":"bmr","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["No ability"],"setup":false,"ability":"The first time you die, you don't."},{"id":"tinker","name":"Tinker","edition":"bmr","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":49,"otherNightReminder":"The Tinker might die.","reminders":["Dead"],"setup":false,"ability":"You might die at any time."},{"id":"moonchild","name":"Moonchild","edition":"bmr","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":50,"otherNightReminder":"If the Moonchild used their ability to target a player today: If that player is good, they die.","reminders":["Dead"],"setup":false,"ability":"When you learn that you died, publicly choose 1 alive player. Tonight, if it was a good player, they die."},{"id":"goon","name":"Goon","edition":"bmr","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Drunk"],"setup":false,"ability":"Each night, the 1st player to choose you with their ability is drunk until dusk. You become their alignment."},{"id":"lunatic","name":"Lunatic","edition":"bmr","team":"outsider","firstNight":8,"firstNightReminder":"If 7 or more players: Show the Lunatic a number of arbitrary 'Minions', players equal to the number of Minions in play. Show 3 character tokens of arbitrary good characters. If the token received by the Lunatic is a Demon that would wake tonight: Allow the Lunatic to do the Demon actions. Place their 'attack' markers. Wake the Demon. Show the Demon’s real character token. Show them the Lunatic player. If the Lunatic attacked players: Show the real demon each marked player. Remove any Lunatic 'attack' markers.","otherNight":20,"otherNightReminder":"Allow the Lunatic to do the actions of the Demon. Place their 'attack' markers. If the Lunatic selected players: Wake the Demon. Show the 'attack' marker, then point to each marked player. Remove any Lunatic 'attack' markers.","reminders":["Attack 1","Attack 2","Attack 3"],"setup":false,"ability":"You think you are a Demon, but you are not. The Demon knows who you are & who you choose at night."},{"id":"godfather","name":"Godfather","edition":"bmr","team":"minion","firstNight":21,"firstNightReminder":"Show each of the Outsider tokens in play.","otherNight":37,"otherNightReminder":"If an Outsider died today: The Godfather points to a player. That player dies.","reminders":["Died today","Dead"],"setup":true,"ability":"You start knowing which Outsiders are in play. If 1 died today, choose a player tonight: they die. [−1 or +1 Outsider]"},{"id":"devilsadvocate","name":"Devil's Advocate","image":"https://oss.gstonegames.com/data_file/clocktower/web/icons/devils_advocate.png","edition":"bmr","team":"minion","firstNight":22,"firstNightReminder":"The Devil’s Advocate points to a living player. That player survives execution tomorrow.","otherNight":13,"otherNightReminder":"The Devil’s Advocate points to a living player, different from the previous night. That player survives execution tomorrow.","reminders":["Survives execution"],"setup":false,"ability":"Each night, choose a living player (different to last night): if executed tomorrow, they don't die."},{"id":"assassin","name":"Assassin","edition":"bmr","team":"minion","firstNight":0,"firstNightReminder":"","otherNight":36,"otherNightReminder":"If the Assassin has not yet used their ability: The Assassin either shows the 'no' head signal, or points to a player. That player dies.","reminders":["Dead","No ability"],"setup":false,"ability":"Once per game, at night*, choose a player: they die, even if for some reason they could not."},{"id":"mastermind","name":"Mastermind","edition":"bmr","team":"minion","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"If the Demon dies by execution (ending the game), play for 1 more day. If a player is then executed, their team loses."},{"id":"zombuul","name":"Zombuul","edition":"bmr","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":25,"otherNightReminder":"If no-one died during the day: The Zombuul points to a player. That player dies.","reminders":["Died today","Dead"],"setup":false,"ability":"Each night*, if no-one died today, choose a player: they die. The 1st time you die, you live but register as dead."},{"id":"pukka","name":"Pukka","edition":"bmr","team":"demon","firstNight":28,"firstNightReminder":"The Pukka points to a player. That player is poisoned.","otherNight":26,"otherNightReminder":"The Pukka points to a player. That player is poisoned. The previously poisoned player dies. ","reminders":["Poisoned","Dead"],"setup":false,"ability":"Each night, choose a player: they are poisoned. The previously poisoned player dies then becomes healthy."},{"id":"shabaloth","name":"Shabaloth","edition":"bmr","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":27,"otherNightReminder":"One player that the Shabaloth chose the previous night might be resurrected. The Shabaloth points to two players. Those players die.","reminders":["Dead","Alive"],"setup":false,"ability":"Each night*, choose 2 players: they die. A dead player you chose last night might be regurgitated."},{"id":"po","name":"Po","edition":"bmr","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":28,"otherNightReminder":"If the Po chose no-one the previous night: The Po points to three players. Otherwise: The Po either shows the 'no' head signal , or points to a player. Chosen players die","reminders":["Dead","3 attacks"],"setup":false,"ability":"Each night*, you may choose a player: they die. If your last choice was no-one, choose 3 players tonight."},{"id":"apprentice","name":"Apprentice","edition":"bmr","team":"traveler","firstNight":1,"firstNightReminder":"Show the Apprentice the 'You are' card, then a Townsfolk or Minion token. In the Grimoire, replace the Apprentice token with that character token, and put the Apprentice's 'Is the Apprentice' reminder by that character token.","otherNight":0,"otherNightReminder":"","reminders":["Is the Apprentice"],"setup":false,"ability":"On your 1st night, you gain a Townsfolk ability (if good), or a Minion ability (if evil)."},{"id":"matron","name":"Matron","edition":"bmr","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Each day, you may choose up to 3 sets of 2 players to swap seats. Players may not leave their seats to talk in private."},{"id":"judge","name":"Judge","edition":"bmr","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["No ability"],"setup":false,"ability":"Once per game, if another player nominated, you may choose to force the current execution to pass or fail."},{"id":"bishop","name":"Bishop","edition":"bmr","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Nominate good","Nominate evil"],"setup":false,"ability":"Only the Storyteller can nominate. At least 1 opposite player must be nominated each day."},{"id":"voudon","name":"Voudon","edition":"bmr","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Only you and the dead can vote. They don't need a vote token to do so. A 50% majority is not required."},{"id":"clockmaker","name":"Clockmaker","edition":"snv","team":"townsfolk","firstNight":41,"firstNightReminder":"Show the hand signal for the number (1, 2, 3, etc.) of places from Demon to closest Minion.","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"You start knowing how many steps from the Demon to its nearest Minion."},{"id":"dreamer","name":"Dreamer","edition":"snv","team":"townsfolk","firstNight":42,"firstNightReminder":"The Dreamer points to a player. Show 1 good and 1 evil character token; one of these is correct.","otherNight":56,"otherNightReminder":"The Dreamer points to a player. Show 1 good and 1 evil character token; one of these is correct.","reminders":[],"setup":false,"ability":"Each night, choose a player (not yourself or Travellers): you learn 1 good and 1 evil character, 1 of which is correct."},{"id":"snakecharmer","name":"Snake Charmer","image":"https://oss.gstonegames.com/data_file/clocktower/web/icons/snake_charmer.png","edition":"snv","team":"townsfolk","firstNight":20,"firstNightReminder":"The Snake Charmer points to a player. If that player is the Demon: swap the Demon and Snake Charmer character and alignments. Wake each player to inform them of their new role and alignment. The new Snake Charmer is poisoned.","otherNight":11,"otherNightReminder":"The Snake Charmer points to a player. If that player is the Demon: swap the Demon and Snake Charmer character and alignments. Wake each player to inform them of their new role and alignment. The new Snake Charmer is poisoned.","reminders":["Poisoned"],"setup":false,"ability":"Each night, choose an alive player: a chosen Demon swaps characters & alignments with you & is then poisoned."},{"id":"mathematician","name":"Mathematician","edition":"snv","team":"townsfolk","firstNight":52,"firstNightReminder":"Show the hand signal for the number (0, 1, 2, etc.) of players whose ability malfunctioned due to other abilities.","otherNight":71,"otherNightReminder":"Show the hand signal for the number (0, 1, 2, etc.) of players whose ability malfunctioned due to other abilities.","reminders":["Abnormal"],"setup":false,"ability":"Each night, you learn how many players’ abilities worked abnormally (since dawn) due to another character's ability."},{"id":"flowergirl","name":"Flowergirl","edition":"snv","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":57,"otherNightReminder":"Nod 'yes' or shake head 'no' for whether the Demon voted today. Place the 'Demon not voted' marker (remove 'Demon voted', if any).","reminders":["Demon voted","Demon not voted"],"setup":false,"ability":"Each night*, you learn if a Demon voted today."},{"id":"towncrier","name":"Town Crier","image":"https://oss.gstonegames.com/data_file/clocktower/web/icons/town_crier.png","edition":"snv","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":58,"otherNightReminder":"Nod 'yes' or shake head 'no' for whether a Minion nominated today. Place the 'Minion not nominated' marker (remove 'Minion nominated', if any).","reminders":["Minions not nominated","Minion nominated"],"setup":false,"ability":"Each night*, you learn if a Minion nominated today."},{"id":"oracle","name":"Oracle","edition":"snv","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":59,"otherNightReminder":"Show the hand signal for the number (0, 1, 2, etc.) of dead evil players.","reminders":[],"setup":false,"ability":"Each night*, you learn how many dead players are evil."},{"id":"savant","name":"Savant","edition":"snv","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Each day, you may visit the Storyteller to learn 2 things in private: 1 is true & 1 is false."},{"id":"seamstress","name":"Seamstress","edition":"snv","team":"townsfolk","firstNight":43,"firstNightReminder":"The Seamstress either shows a 'no' head signal, or points to two other players. If the Seamstress chose players , nod 'yes' or shake 'no' for whether they are of same alignment.","otherNight":60,"otherNightReminder":"If the Seamstress has not yet used their ability: the Seamstress either shows a 'no' head signal, or points to two other players. If the Seamstress chose players , nod 'yes' or shake 'no' for whether they are of same alignment.","reminders":["No ability"],"setup":false,"ability":"Once per game, at night, choose 2 players (not yourself): you learn if they are the same alignment."},{"id":"philosopher","name":"Philosopher","edition":"snv","team":"townsfolk","firstNight":2,"firstNightReminder":"The Philosopher either shows a 'no' head signal, or points to a good character on their sheet. If they chose a character: Swap the out-of-play character token with the Philosopher token and add the 'Is the Philosopher' reminder. If the character is in play, place the drunk marker by that player.","otherNight":2,"otherNightReminder":"If the Philosopher has not used their ability: the Philosopher either shows a 'no' head signal, or points to a good character on their sheet. If they chose a character: Swap the out-of-play character token with the Philosopher token and add the 'Is the Philosopher' reminder. If the character is in play, place the drunk marker by that player.","reminders":["Drunk","Is the Philosopher"],"setup":false,"ability":"Once per game, at night, choose a good character: gain that ability. If this character is in play, they are drunk."},{"id":"artist","name":"Artist","edition":"snv","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["No ability"],"setup":false,"ability":"Once per game, during the day, privately ask the Storyteller any yes/no question."},{"id":"juggler","name":"Juggler","edition":"snv","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":61,"otherNightReminder":"If today was the Juggler’s first day: Show the hand signal for the number (0, 1, 2, etc.) of 'Correct' markers. Remove markers.","reminders":["Correct"],"setup":false,"ability":"On your 1st day, publicly guess up to 5 players' characters. That night, you learn how many you got correct."},{"id":"sage","name":"Sage","edition":"snv","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":42,"otherNightReminder":"If the Sage was killed by a Demon: Point to two players, one of which is that Demon.","reminders":[],"setup":false,"ability":"If the Demon kills you, you learn that it is 1 of 2 players."},{"id":"mutant","name":"Mutant","edition":"snv","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"If you are “mad” about being an Outsider, you might be executed."},{"id":"sweetheart","name":"Sweetheart","edition":"snv","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":41,"otherNightReminder":"Choose a player that is drunk.","reminders":["Drunk"],"setup":false,"ability":"When you die, 1 player is drunk from now on."},{"id":"barber","name":"Barber","edition":"snv","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":40,"otherNightReminder":"If the Barber died today: Wake the Demon. Show the 'This character selected you' card, then Barber token. The Demon either shows a 'no' head signal, or points to 2 players. If they chose players: Swap the character tokens. Wake each player. Show 'You are', then their new character token.","reminders":["Haircuts tonight"],"setup":false,"ability":"If you died today or tonight, the Demon may choose 2 players (not another Demon) to swap characters."},{"id":"klutz","name":"Klutz","edition":"snv","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"When you learn that you died, publicly choose 1 alive player: if they are evil, your team loses."},{"id":"eviltwin","name":"Evil Twin","image":"https://oss.gstonegames.com/data_file/clocktower/web/icons/evil_twin.png","edition":"snv","team":"minion","firstNight":23,"firstNightReminder":"Wake the Evil Twin and their twin. Confirm that they have acknowledged each other. Point to the Evil Twin. Show their Evil Twin token to the twin player. Point to the twin. Show their character token to the Evil Twin player.","otherNight":0,"otherNightReminder":"","reminders":["Twin"],"setup":false,"ability":"You & an opposing player know each other. If the good player is executed, evil wins. Good can't win if you both live."},{"id":"witch","name":"Witch","edition":"snv","team":"minion","firstNight":24,"firstNightReminder":"The Witch points to a player. If that player nominates tomorrow they die immediately.","otherNight":14,"otherNightReminder":"If there are 4 or more players alive: The Witch points to a player. If that player nominates tomorrow they die immediately.","reminders":["Cursed"],"setup":false,"ability":"Each night, choose a player: if they nominate tomorrow, they die. If just 3 players live, you lose this ability."},{"id":"cerenovus","name":"Cerenovus","edition":"snv","team":"minion","firstNight":25,"firstNightReminder":"The Cerenovus points to a player, then to a character on their sheet. Wake that player. Show the 'This character selected you' card, then the Cerenovus token. Show the selected character token. If the player is not mad about being that character tomorrow, they can be executed.","otherNight":15,"otherNightReminder":"The Cerenovus points to a player, then to a character on their sheet. Wake that player. Show the 'This character selected you' card, then the Cerenovus token. Show the selected character token. If the player is not mad about being that character tomorrow, they can be executed.","reminders":["Mad"],"setup":false,"ability":"Each night, choose a player & a good character: they are “mad” they are this character tomorrow, or might be executed."},{"id":"pithag","name":"Pit-Hag","image":"https://oss.gstonegames.com/data_file/clocktower/web/icons/pit-hag.png","edition":"snv","team":"minion","firstNight":0,"firstNightReminder":"","otherNight":16,"otherNightReminder":"The Pit-Hag points to a player and a character on the sheet. If this character is not in play, wake that player and show them the 'You are' card and the relevant character token. If the character is in play, nothing happens.","reminders":[],"setup":false,"ability":"Each night*, choose a player & a character they become (if not-in-play). If a Demon is made, deaths tonight are arbitrary."},{"id":"fanggu","image":"https://oss.gstonegames.com/data_file/clocktower/web/icons/fang_gu.png","name":"Fang Gu","edition":"snv","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":29,"otherNightReminder":"The Fang Gu points to a player. That player dies. Or, if that player was an Outsider and there are no other Fang Gu in play: The Fang Gu dies instead of the chosen player. The chosen player is now an evil Fang Gu. Wake the new Fang Gu. Show the 'You are' card, then the Fang Gu token. Show the 'You are' card, then the thumb-down 'evil' hand sign.","reminders":["Dead","Once"],"setup":true,"ability":"Each night*, choose a player: they die. The 1st Outsider this kills becomes an evil Fang Gu & you die instead. [+1 Outsider]"},{"id":"vigormortis","name":"Vigormortis","edition":"snv","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":32,"otherNightReminder":"The Vigormortis points to a player. That player dies. If a Minion, they keep their ability and one of their Townsfolk neighbours is poisoned.","reminders":["Dead","Has ability","Poisoned"],"setup":true,"ability":"Each night*, choose a player: they die. Minions you kill keep their ability & poison 1 Townsfolk neighbour. [−1 Outsider]"},{"id":"nodashii","image":"https://oss.gstonegames.com/data_file/clocktower/web/icons/no_dashii.png","name":"No Dashii","edition":"snv","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":30,"otherNightReminder":"The No Dashii points to a player. That player dies.","reminders":["Dead","Poisoned"],"setup":false,"ability":"Each night*, choose a player: they die. Your 2 Townsfolk neighbours are poisoned."},{"id":"vortox","name":"Vortox","edition":"snv","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":31,"otherNightReminder":"The Vortox points to a player. That player dies.","reminders":["Dead"],"setup":false,"ability":"Each night*, choose a player: they die. Townsfolk abilities yield false info. Each day, if no-one is executed, evil wins."},{"id":"barista","name":"Barista","edition":"snv","team":"traveler","firstNight":1,"firstNightReminder":"Choose a player, wake them and tell them which Barista power is affecting them. Treat them accordingly (sober/healthy/true info or activate their ability twice).","otherNight":1,"otherNightReminder":"Choose a player, wake them and tell them which Barista power is affecting them. Treat them accordingly (sober/healthy/true info or activate their ability twice).","reminders":["Sober & Healthy","Ability twice"],"setup":false,"ability":"Each night, until dusk, 1) a player becomes sober, healthy and gets true info, or 2) their ability works twice. They learn which."},{"id":"harlot","name":"Harlot","edition":"snv","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":1,"otherNightReminder":"The Harlot points at any player. Then, put the Harlot to sleep. Wake the chosen player, show them the 'This character selected you' token, then the Harlot token. That player either nods their head yes or shakes their head no. If they nodded their head yes, wake the Harlot and show them the chosen player's character token. Then, you may decide that both players die.","reminders":["Dead"],"setup":false,"ability":"Each night*, choose a living player: if they agree, you learn their character, but you both might die."},{"id":"butcher","name":"Butcher","edition":"snv","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Each day, after the 1st execution, you may nominate again."},{"id":"bonecollector","name":"Bone Collector","image":"https://oss.gstonegames.com/data_file/clocktower/web/icons/bone_collector.png","edition":"snv","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":1,"otherNightReminder":"The Bone Collector either shakes their head no or points at any dead player. If they pointed at any dead player, put the Bone Collector's 'Has Ability' reminder by the chosen player's character token. (They may need to be woken tonight to use it.)","reminders":["No ability","Has ability"],"setup":false,"ability":"Once per game, at night, choose a dead player: they regain their ability until dusk."},{"id":"deviant","name":"Deviant","edition":"snv","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"If you were funny today, you cannot die by exile."},{"id":"noble","name":"Noble","edition":"","team":"townsfolk","firstNight":44,"firstNightReminder":"Point to 3 players including one evil player, in no particular order.","otherNight":0,"otherNightReminder":"","reminders":["Seen"],"setup":false,"ability":"You start knowing 3 players, 1 and only 1 of which is evil."},{"id":"bountyhunter","name":"Bounty Hunter","image":"https://oss.gstonegames.com/data_file/clocktower/web/icons/bounty_hunter.png","edition":"","team":"townsfolk","firstNight":46,"firstNightReminder":"Point to 1 evil player. Wake the townsfolk who is evil and show them the 'You are' card and the thumbs down evil sign.","otherNight":64,"otherNightReminder":"If the known evil player has died, point to another evil player. ","reminders":["Known"],"setup":true,"ability":"You start knowing 1 evil player. If the player you know dies, you learn another evil player tonight. [1 Townsfolk is evil]"},{"id":"pixie","name":"Pixie","edition":"","team":"townsfolk","firstNight":29,"firstNightReminder":"Show the Pixie 1 in-play Townsfolk character token.","otherNight":0,"otherNightReminder":"","reminders":["Mad","Has ability"],"setup":false,"ability":"You start knowing 1 in-play Townsfolk. If you were mad that you were this character, you gain their ability when they die."},{"id":"general","name":"General","edition":"","team":"townsfolk","firstNight":50,"firstNightReminder":"Show the General thumbs up for good winning, thumbs down for evil winning or thumb to the side for neither.","otherNight":69,"otherNightReminder":"Show the General thumbs up for good winning, thumbs down for evil winning or thumb to the side for neither.","reminders":[],"setup":false,"ability":"Each night, you learn which alignment the Storyteller believes is winning: good, evil, or neither."},{"id":"preacher","name":"Preacher","edition":"","team":"townsfolk","firstNight":14,"firstNightReminder":"The Preacher chooses a player. If a Minion is chosen, wake the Minion and show the 'This character selected you' card and then the Preacher token.","otherNight":6,"otherNightReminder":"The Preacher chooses a player. If a Minion is chosen, wake the Minion and show the 'This character selected you' card and then the Preacher token.","reminders":["At a sermon"],"setup":false,"ability":"Each night, choose a player: a Minion, if chosen, learns this. All chosen Minions have no ability."},{"id":"king","name":"King","edition":"","team":"townsfolk","firstNight":10,"firstNightReminder":"Wake the Demon, show them the 'This character selected you' card, show the King token and point to the King player.","otherNight":63,"otherNightReminder":"If there are more dead than living, show the King a character token of a living player.","reminders":[],"setup":false,"ability":"Each night, if the dead outnumber the living, you learn 1 alive character. The Demon knows who you are."},{"id":"balloonist","name":"Balloonist","edition":"","team":"townsfolk","firstNight":45,"firstNightReminder":"Choose a character type. Point to a player whose character is of that type. Place the Balloonist's Seen reminder next to that character.","otherNight":62,"otherNightReminder":"Choose a character type that does not yet have a Seen reminder next to a character of that type. Point to a player whose character is of that type, if there are any. Place the Balloonist's Seen reminder next to that character.","reminders":["Seen Townsfolk","Seen Outsider","Seen Minion","Seen Demon","Seen Traveller"],"setup":true,"ability":"Each night, you learn 1 player of each character type, until there are no more types to learn. [+1 Outsider]"},{"id":"cultleader","name":"Cult Leader","image":"https://oss.gstonegames.com/data_file/clocktower/web/icons/cult_leader.png","edition":"","team":"townsfolk","firstNight":48,"firstNightReminder":"If the cult leader changed alignment, show them the thumbs up good signal of the thumbs down evil signal accordingly.","otherNight":66,"otherNightReminder":"If the cult leader changed alignment, show them the thumbs up good signal of the thumbs down evil signal accordingly.","reminders":[],"setup":false,"ability":"Each night, you become the alignment of an alive neighbour. If all good players choose to join your cult, your team wins."},{"id":"lycanthrope","name":"Lycanthrope","edition":"","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":22,"otherNightReminder":"The Lycanthrope points to a living player: if good, they die and no one else can die tonight.","reminders":["Dead"],"setup":false,"ability":"Each night*, choose a living player: if good, they die, but they are the only player that can die tonight."},{"id":"amnesiac","name":"Amnesiac","edition":"","team":"townsfolk","firstNight":32,"firstNightReminder":"Decide the Amnesiac's entire ability. If the Amnesiac's ability causes them to wake tonight: Wake the Amnesiac and run their ability.","otherNight":47,"otherNightReminder":"If the Amnesiac's ability causes them to wake tonight: Wake the Amnesiac and run their ability.","reminders":["?"],"setup":false,"ability":"You do not know what your ability is. Each day, privately guess what it is: you learn how accurate you are."},{"id":"nightwatchman","name":"Nightwatchman","edition":"","team":"townsfolk","firstNight":47,"firstNightReminder":"The Nightwatchman may point to a player. Wake that player, show the 'This character selected you' card and the Nightwatchman token, then point to the Nightwatchman player.","otherNight":65,"otherNightReminder":"The Nightwatchman may point to a player. Wake that player, show the 'This character selected you' card and the Nightwatchman token, then point to the Nightwatchman player.","reminders":["No ability"],"setup":false,"ability":"Once per game, at night, choose a player: they learn who you are."},{"id":"engineer","name":"Engineer","edition":"","team":"townsfolk","firstNight":13,"firstNightReminder":"The Engineer shows a 'no' head signal, or points to a Demon or points to the relevant number of Minions. If the Engineer chose characters, replace the Demon or Minions with the choices, then wake the relevant players and show them the You are card and the relevant character tokens.","otherNight":5,"otherNightReminder":"The Engineer shows a 'no' head signal, or points to a Demon or points to the relevant number of Minions. If the Engineer chose characters, replace the Demon or Minions with the choices, then wake the relevant players and show them the 'You are' card and the relevant character tokens.","reminders":["No ability"],"setup":false,"ability":"Once per game, at night, choose which Minions or which Demon is in play."},{"id":"fisherman","name":"Fisherman","edition":"","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["No ability"],"setup":false,"ability":"Once per game, during the day, visit the Storyteller for some advice to help you win."},{"id":"huntsman","name":"Huntsman","edition":"","team":"townsfolk","firstNight":30,"firstNightReminder":"The Huntsman shakes their head 'no' or points to a player. If they point to the Damsel, wake that player, show the 'You are' card and a not-in-play character token.","otherNight":45,"otherNightReminder":"The Huntsman shakes their head 'no' or points to a player. If they point to the Damsel, wake that player, show the 'You are' card and a not-in-play character token.","reminders":["No ability"],"setup":true,"ability":"Once per game, at night, choose a living player: the Damsel, if chosen, becomes a not-in-play Townsfolk. [+the Damsel]"},{"id":"alchemist","name":"Alchemist","edition":"","team":"townsfolk","firstNight":3,"firstNightReminder":"Show the Alchemist a not-in-play Minion token","otherNight":0,"otherNightReminder":"","reminders":[],"remindersGlobal":["Is the Alchemist"],"setup":false,"ability":"You have a not-in-play Minion ability."},{"id":"farmer","name":"Farmer","edition":"","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":48,"otherNightReminder":"If a Farmer died tonight, choose another good player and make them the Farmer. Wake this player, show them the 'You are' card and the Farmer character token.","reminders":[],"setup":false,"ability":"If you die at night, an alive good player becomes a Farmer."},{"id":"magician","name":"Magician","edition":"","team":"townsfolk","firstNight":5,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"The Demon thinks you are a Minion. Minions think you are a Demon."},{"id":"choirboy","name":"Choirboy","edition":"","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":44,"otherNightReminder":"If the King was killed by the Demon, wake the Choirboy and point to the Demon player.","reminders":[],"setup":true,"ability":"If the Demon kills the King, you learn which player is the Demon. [+ the King]"},{"id":"poppygrower","name":"Poppy Grower","image":"https://oss.gstonegames.com/data_file/clocktower/web/icons/poppy_grower.png","edition":"","team":"townsfolk","firstNight":4,"firstNightReminder":"Do not inform the Demon/Minions who each other are","otherNight":3,"otherNightReminder":"If the Poppy Grower has died, show the Minions/Demon who each other are.","reminders":["Evil wakes"],"setup":false,"ability":"Minions & Demons do not know each other. If you die, they learn who each other are that night."},{"id":"atheist","name":"Atheist","edition":"","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":true,"ability":"The Storyteller can break the game rules & if executed, good wins, even if you are dead. [No evil characters]"},{"id":"cannibal","name":"Cannibal","edition":"","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Poisoned","Died today"],"setup":false,"ability":"You have the ability of the recently killed executee. If they are evil, you are poisoned until a good player dies by execution."},{"id":"snitch","name":"Snitch","edition":"","team":"outsider","firstNight":7,"firstNightReminder":"After Minion info wake each Minion and show them three not-in-play character tokens. These may be the same or different to each other and the ones shown to the Demon.","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Minions start knowing 3 not-in-play characters."},{"id":"acrobat","name":"Acrobat","edition":"","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":39,"otherNightReminder":"Every night, the Acrobat chooses a player. If the chosen player is drunk or poisoned, you die.","reminders":["Dead","Chosen"],"setup":false,"ability":"Each night*, choose a player: if they are or become drunk or poisoned tonight, you die."},{"id":"puzzlemaster","name":"Puzzlemaster","edition":"","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Drunk","Guess used"],"setup":false,"ability":"1 player is drunk, even if you die. If you guess (once) who it is, learn the Demon player, but guess wrong & get false info."},{"id":"heretic","name":"Heretic","edition":"","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Whoever wins, loses & whoever loses, wins, even if you are dead."},{"id":"damsel","name":"Damsel","edition":"","team":"outsider","firstNight":31,"firstNightReminder":"Wake all the Minions, show them the 'This character selected you' card and the Damsel token.","otherNight":46,"otherNightReminder":"If selected by the Huntsman, wake the Damsel, show 'You are' card and a not-in-play Townsfolk token.","reminders":["Guess used"],"setup":false,"ability":"All Minions know you are in play. If a Minion publicly guesses you (once), your team loses."},{"id":"golem","name":"Golem","edition":"","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Can not nominate"],"setup":false,"ability":"You may only nominate once per game. When you do, if the nominee is not the Demon, they die."},{"id":"politician","name":"Politician","edition":"","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"If you were the player most responsible for your team losing, you change alignment & win, even if dead."},{"id":"widow","name":"Widow","edition":"","team":"minion","firstNight":18,"firstNightReminder":"Show the Grimoire to the Widow for as long as they need. The Widow points to a player. That player is poisoned. Wake a good player. Show the 'These characters are in play' card, then the Widow character token.","otherNight":0,"otherNightReminder":"","reminders":["Poisoned"],"remindersGlobal":["Knows"],"setup":false,"ability":"On your 1st night, look at the Grimoire and choose a player: they are poisoned. 1 good player knows a Widow is in play."},{"id":"fearmonger","name":"Fearmonger","edition":"","team":"minion","firstNight":26,"firstNightReminder":"The Fearmonger points to a player. Place the Fear token next to that player and announce that a new player has been selected with the Fearmonger ability.","otherNight":17,"otherNightReminder":"The Fearmonger points to a player. If different from the previous night, place the Fear token next to that player and announce that a new player has been selected with the Fearmonger ability.","reminders":["Fear"],"setup":false,"ability":"Each night, choose a player. If you nominate & execute them, their team loses. All players know if you choose a new player."},{"id":"psychopath","name":"Psychopath","edition":"","team":"minion","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Each day, before nominations, you may publicly choose a player: they die. If executed, you only die if you lose roshambo."},{"id":"goblin","name":"Goblin","edition":"","team":"minion","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Claimed"],"setup":false,"ability":"If you publicly claim to be the Goblin when nominated & are executed that day, your team wins."},{"id":"mezepheles","name":"Mezepheles","edition":"","team":"minion","firstNight":27,"firstNightReminder":"Show the Mezepheles their secret word.","otherNight":18,"otherNightReminder":"Wake the 1st good player that said the Mezepheles' secret word and show them the 'You are' card and the thumbs down evil signal.","reminders":["Turns evil","No ability"],"setup":false,"ability":"You start knowing a secret word. The 1st good player to say this word becomes evil that night."},{"id":"marionette","name":"Marionette","edition":"","team":"minion","firstNight":12,"firstNightReminder":"Select one of the good players next to the Demon and place the Is the Marionette reminder token. Wake the Demon and show them the Marionette.","otherNight":0,"otherNightReminder":"","reminders":[],"remindersGlobal":["Is the Marionette"],"setup":true,"ability":"You think you are a good character but you are not. The Demon knows who you are. [You neighbour the Demon]"},{"id":"boomdandy","name":"Boomdandy","edition":"","team":"minion","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"If you are executed, all but 3 players die. 1 minute later, the player with the most players pointing at them dies."},{"id":"lilmonsta","name":"Lil' Monsta","edition":"","team":"demon","firstNight":15,"firstNightReminder":"Wake all Minions together, allow them to vote by pointing at who they want to babysit Lil' Monsta.","otherNight":35,"otherNightReminder":"Wake all Minions together, allow them to vote by pointing at who they want to babysit Lil' Monsta. Choose a player, that player dies.","reminders":[],"remindersGlobal":["Is the Demon","Dead"],"setup":true,"ability":"Each night, Minions choose who babysits Lil' Monsta's token & \\"is the Demon\\". A player dies each night*. [+1 Minion]"},{"id":"lleech","name":"Lleech","edition":"","team":"demon","firstNight":16,"firstNightReminder":"The Lleech points to a player. Place the Poisoned reminder token.","otherNight":34,"otherNightReminder":"The Lleech points to a player. That player dies.","reminders":["Dead","Poisoned"],"setup":false,"ability":"Each night*, choose a player: they die. You start by choosing an alive player: they are poisoned - you die if & only if they die."},{"id":"alhadikhia","name":"Al-Hadikhia","edition":"","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":33,"otherNightReminder":"The Al-Hadikhia chooses 3 players. Announce the first player, wake them to nod yes to live or shake head no to die, kill or resurrect accordingly, then put to sleep and announce the next player. If all 3 are alive after this, all 3 die.","reminders":["1","2","3","Chose death","Chose life"],"setup":false,"ability":"Each night*, choose 3 players (all players learn who): each silently chooses to live or die, but if all live, all die."},{"id":"legion","name":"Legion","edition":"","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":23,"otherNightReminder":"Choose a player, that player dies.","reminders":["Dead","About to die"],"setup":true,"ability":"Each night*, a player might die. Executions fail if only evil voted. You register as a Minion too. [Most players are Legion]"},{"id":"leviathan","name":"Leviathan","edition":"","team":"demon","firstNight":54,"firstNightReminder":"Place the Leviathan 'Day 1' marker. Announce 'The Leviathan is in play; this is Day 1.'","otherNight":73,"otherNightReminder":"Change the Leviathan Day reminder for the next day.","reminders":["Day 1","Day 2","Day 3","Day 4","Day 5","Good player executed"],"setup":false,"ability":"If more than 1 good player is executed, you win. All players know you are in play. After day 5, evil wins."},{"id":"riot","name":"Riot","edition":"","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":true,"ability":"Nominees die, but may nominate again immediately (on day 3, they must). After day 3, evil wins. [All Minions are Riot]"},{"id":"gangster","name":"Gangster","edition":"","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Once per day, you may choose to kill an alive neighbour, if your other alive neighbour agrees."},{"id":"alsaahir","name":"Alsaahir","image":"https://wiki.bloodontheclocktower.com/images/8/8e/Icon_alsaahir.png","edition":"","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Incorrect Guess"],"setup":false,"ability":"Each day, if you publicly guess which players are Minion(s) and which are Demon(s), good wins."},{"id":"banshee","name":"Banshee","edition":"","image":"https://wiki.bloodontheclocktower.com/images/6/63/Icon_banshee.png","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Undead Banshee"],"setup":false,"ability":"If the Demon kills you, all players learn this. From now on, you may nominate twice per day and vote twice per nomination."},{"id":"highpriestess","name":"High Priestess","edition":"","team":"townsfolk","image":"https://wiki.bloodontheclocktower.com/images/6/63/Icon_highpriestess.png","firstNight":50,"firstNightReminder":"Point to the player you believe the High Priestess should talk to most.","otherNight":69,"otherNightReminder":"Point to the player you believe the High Priestess should talk to most.","reminders":[],"setup":false,"ability":"Each night, learn which player the Storyteller believes you should talk to most."},{"id":"knight","name":"Knight","edition":"","team":"townsfolk","image":"https://wiki.bloodontheclocktower.com/images/8/8e/Icon_knight.png","firstNight":33,"firstNightReminder":"Point to the two known players.","otherNight":0,"otherNightReminder":"","reminders":[],"remindersGlobal":["Know"],"setup":false,"ability":"You start knowing 2 players that are not the Demon."},{"id":"shugenja","name":"Shugenja","edition":"","team":"townsfolk","firstNight":41,"image":"https://wiki.bloodontheclocktower.com/images/1/11/Icon_shugenja.png","firstNightReminder":"Point to the direction the closest evil is.","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"You start knowing if your closest evil player is clockwise or anti-clockwise. If equidistant, this info is arbitrary."},{"id":"villageidiot","name":"Village Idiot","edition":"","image":"https://wiki.bloodontheclocktower.com/images/d/da/Icon_villageidiot.png","team":"townsfolk","firstNight":38,"firstNightReminder":"Wake any Village Idiot. They point to a player. Reveal their allignment. Repeat with a different Village Idiot until all were woken.","otherNight":54,"otherNightReminder":"Wake any Village Idiot. They point to a player. Reveal their allignment. Repeat with a different Village Idiot until all were woken.","reminders":["Drunk"],"setup":true,"ability":"Each night, choose a player: you learn their alignment. [+0 to +2 Village Idiots. 1 of the extras is drunk]"},{"id":"hatter","name":"Hatter","edition":"","team":"outsider","image":"https://wiki.bloodontheclocktower.com/images/4/44/Icon_hatter.png","firstNight":0,"firstNightReminder":"","otherNight":40,"otherNightReminder":"If the Hatter died today: Wake Demon and Minions. Show the 'This character selected you' card, then Hatter token. Each either shows a 'no' head signal, or points to another character of the same type of their current character. If they chose a character: Change their character to the selected one. If a player chooses the same character as another, shake your head and gesture them to choose again.","reminders":["Tea party tonight!"],"setup":false,"ability":"If you died today or tonight, the Minion & Demon players may choose new Minion & Demon characters to be."},{"id":"ogre","name":"Ogre","edition":"","image":"https://wiki.bloodontheclocktower.com/images/2/25/Icon_ogre.png","team":"outsider","firstNight":40,"firstNightReminder":"Wake the Ogre. They point to a player. If they point at an evil player, mark the Ogre as evil.","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"On your 1st night, choose a player (not yourself): you become their alignment (you don't know which) even if drunk or poisoned."},{"id":"plaguedoctor","name":"Plague Doctor","edition":"","image":"https://wiki.bloodontheclocktower.com/images/e/e2/Icon_plaguedoctor.png","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"remindersGlobal":["Storyteller ability"],"setup":false,"ability":"When you die, the Storyteller gains a Minion ability."},{"id":"zealot","name":"Zealot","edition":"","image":"https://wiki.bloodontheclocktower.com/images/1/16/Icon_zealot.png","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"If there are 5 or more players alive, you must vote for every nomination."},{"id":"boffin","name":"Boffin","edition":"","image":"https://wiki.bloodontheclocktower.com/images/e/e0/Icon_boffin.png","team":"minion","firstNight":1,"firstNightReminder":"Wake the Boffin and the Demon. Show them a not-in-play good character, then place the token next to the Demon.","otherNight":0,"otherNightReminder":"","reminders":[],"setup":true,"ability":"The Demon (even if drunk or poisoned) has a not-in-play good character's ability. You both know which."},{"id":"harpy","name":"Harpy","edition":"","image":"https://wiki.bloodontheclocktower.com/images/d/d3/Icon_harpy.png","team":"minion","firstNight":25,"firstNightReminder":"Wake the Harpy. They select one player, then another. Wake the first player. Show them the 'This character selected you' info token, then the Harpy token, and finally the second player.","otherNight":15,"otherNightReminder":"Wake the Harpy. They select one player, then another. Wake the first player. Show them the 'This character selected you' info token, then the Harpy token, and finally the second player.","reminders":["Mad","2nd"],"setup":false,"ability":"Each night, choose 2 players: tomorrow, the 1st player is mad that the 2nd is evil, or one or both might die."},{"id":"organgrinder","name":"Organ Grinder","edition":"","image":"https://wiki.bloodontheclocktower.com/images/6/61/Icon_organgrinder.png","team":"minion","firstNight":16,"firstNightReminder":"Wake the Organ Grinder. The Organ Grinder either nods or shakes their head. If they nod, mark them as Drunk.","otherNight":30,"otherNightReminder":"Wake the Organ Grinder. The Organ Grinder either nods or shakes their head. If they nod, mark them as Drunk.","reminders":["Drunk"],"setup":false,"ability":"All players keep their eyes closed when voting and the vote tally is secret. Each night, choose if you are drunk until dusk."},{"id":"summoner","name":"Summoner","edition":"","image":"https://wiki.bloodontheclocktower.com/images/1/1a/Icon_summoner.png","team":"minion","firstNight":7,"firstNightReminder":"Wake the Summoner. Show them three not-in-play characters as bluffs. Place a Night 1 reminder next to them.","otherNight":23,"otherNightReminder":"Increase the Night Counter. If it is the third night, wake the Summoner. They point to a player, and a Demon on the character sheet. Put the summoner to sleep and wake the chosen player. Show them the 'You Are' info token, then the Demon token. Show them the 'You Are' info token, then a thumbs down. Replace their character token with the new Demon token.","reminders":["Night 1","Night 2","Night 3"],"setup":true,"ability":"You get 3 bluffs. On the 3rd night, choose a player: they become an evil Demon of your choice. [No Demon]"},{"id":"vizier","name":"Vizier","edition":"","image":"https://wiki.bloodontheclocktower.com/images/a/a4/Icon_vizier.png","team":"minion","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"All players know you are the Vizier. You cannot die during the day. If good voted, you may choose to execute immediately."},{"id":"wizard","image":"https://wiki.bloodontheclocktower.com/images/b/b5/Icon_wizard.png?raw=true","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Ability used"],"remindersGlobal":[],"setup":false,"name":"Wizard","team":"minion","ability":"Once per game, choose to make a wish. If granted, it might have a price and leave a clue as to its nature."},{"id":"xaan","name":"Xaan","edition":"","image":"https://wiki.bloodontheclocktower.com/images/0/0c/Icon_xaan.png","team":"minion","firstNight":0,"firstNightReminder":"","otherNight":7,"otherNightReminder":"On each night, add the next 'Night X' token. On the night that equals the number of outsiders, replace all 'Night X' tokens with the 'X' token. Everyone is poisoned tonight.","reminders":["Night 1","Night 2","Night 3","X"],"setup":true,"ability":"On night X, all Townsfolk are poisoned until dusk. [X Outsiders]"},{"id":"kazali","name":"Kazali","edition":"","team":"demon","image":"https://wiki.bloodontheclocktower.com/images/3/3c/Icon_kazali.png","firstNight":1,"firstNightReminder":"Wake the Kazali. The Kazali points at a player and a Minion on the character sheet. Replace their old token with the Minion token. Show them the 'You Are' info token, then the Minion character token, and give a thumbs down. Repeat until the normal number of Minions exist.","otherNight":24,"otherNightReminder":"The Kazali points to a player. That player dies.","reminders":["Dead"],"setup":true,"ability":"Each night*, choose a player: they die. [You choose which players are which Minions. -? to +? Outsiders]"},{"id":"lordoftyphon","name":"Lord of Typhon","edition":"","team":"demon","image":"https://wiki.bloodontheclocktower.com/images/c/cf/Icon_lordoftyphon.png","firstNight":0,"firstNightReminder":"","otherNight":24,"otherNightReminder":"The Lord of Typhon points to a player. That player dies.","reminders":["Dead"],"setup":true,"ability":"Each night*, choose a player: they die. [Evil characters are in a line. You are in the middle. +1 Minion. -? to +? Outsiders]"},{"id":"ojo","name":"Ojo","edition":"","team":"demon","image":"https://wiki.bloodontheclocktower.com/images/6/6f/Icon_ojo.png","firstNight":0,"firstNightReminder":"","otherNight":24,"otherNightReminder":"The Ojo points to a character icon on their character sheet. If that character is in play, their player dies. If not, the storyteller chooses a player to die.","reminders":["Dead"],"setup":false,"ability":"Each night*, choose a character: they die. If they are not in play, the Storyteller chooses who dies."},{"id":"yaggababble","image":"https://wiki.bloodontheclocktower.com/images/0/08/Icon_yaggababble.png?raw=true","firstNight":5,"firstNightReminder":"Show the Yaggababble their phrase","otherNight":36,"otherNightReminder":"Kill a number of players equalling or less the ammount of babble tokens.","reminders":["Babbled"],"remindersGlobal":[],"setup":false,"name":"Yaggababble","team":"demon","ability":"You start knowing a secret phrase. For each time you said it publicly today, a player might die."},{"id":"gnome","name":"Gnome","edition":"","image":"https://wiki.bloodontheclocktower.com/images/e/e0/Icon_gnome.png","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Amigo"],"setup":false,"ability":"All players start knowing a player of your alignment. You may choose to kill anyone who nominates them."},{"id":"xizi","image":"https://oss.gstonegames.com/data_file/clocktower/web/icons/xizi.png","edition":"custom","name":"Actor","ability":"All Actors know each other. Regardless of how many Actors are in play or alive, the win condition is reversed. [All good players are Actors]","team":"townsfolk","sch_team":"Townsfolk","firstNight":3012,"otherNight":0,"firstNightReminder":"Wake all Actors and have them acknowledge each other.","otherNightReminder":"","reminders":[],"setup":true},{"id":"hermit","name":"Hermit","image":"https://botc.letshare.fun/imgs/icons/outsider/hermit.png","edition":"","team":"outsider","firstNightReminder":"","otherNightReminder":"","reminders":["1","2","3"],"setup":true,"ability":"You have all Outsider abilities. [-0 or -1 Outsider]"},{"id":"princess","name":"Princess","image":"https://botc.letshare.fun/imgs/icons/townsfolk/princess.png","edition":"","team":"townsfolk","firstNightReminder":"","otherNightReminder":"If it was the Princess' first day today, and they nominated and executed a player, the Demon doesn't kill.","reminders":["Doesn't Kill"],"setup":false,"ability":"On your 1st day, if you nominated & executed a player, the Demon doesn't kill tonight."},{"id":"cacklejack","image":"https://wiki.bloodontheclocktower.com/images/d/d7/Icon_cacklejack.png","name":"Cacklejack","otherNightReminder":"Replace the character token of any player (besides the player the Cacklejack chose today) with a different character token. Wake that player and show them the 'You are' card and their new character token.","reminders":["Not Me"],"ability":"Each day, choose a player: a different player changes character tonight.","team":"traveler"},{"id":"wraith","image":"https://botc.letshare.fun/imgs/icons/minion/wraith.png","name":"Wraith","edition":"","team":"minion","firstNightReminder":"Wake the Wraith tonight whenever other evil players wake.","otherNightReminder":"Wake the Wraith tonight whenever other evil players wake.","reminders":[],"setup":false,"ability":"You may choose to open your eyes at night. You wake when other evil players do."},{"id":"steward","image":"https://oss.gstonegames.com/data_file/clocktower/web/icons/steward.png","edition":"custom","name":"Steward","ability":"You start knowing 1 good player.","team":"townsfolk","firstNight":3047,"otherNight":0,"firstNightReminder":"During the first night, wake the Steward. Point to the player marked KNOW. Put the Steward to sleep.","otherNightReminder":"","reminders":["Known"],"setup":false},{"id":"jiaohuazi","name":"Pauper","edition":"custom","team":"traveler","firstNight":1,"firstNightReminder":"If you decide the Beggar does not gain the ability, nothing happens. If you decide the Beggar gains the ability, wake them. If the character is in play, you may decide whether to wake the original player or the Beggar player first to act.","otherNight":1,"otherNightReminder":"If you decide the Beggar does not gain the ability, nothing happens. If you decide the Beggar gains the ability, wake them. If the character is in play, you may decide whether to wake the original player or the Beggar player first to act.","reminders":["Begging","Is Beggar"],"setup":false,"ability":"Once per day, you may publicly choose another player. They choose a non-Demon character: you might gain this character's ability until the next dawn."},{"id":"yinyangshi","name":"Yin-Yang Diviner","edition":"custom","team":"townsfolk","firstNight":3051,"firstNightReminder":"Wake the Yin-Yang Diviner. Show them two good characters and two evil characters.","otherNight":0,"otherNightReminder":"","reminders":["In play","Not in play"],"setup":false,"ability":"On your first night, you learn two good characters and two evil characters. Exactly two of these characters are in play."},{"id":"qintianjian","name":"Stargazer","edition":"custom","team":"townsfolk","firstNight":3062,"firstNightReminder":"Wake the Qintianjian. Point in the direction of the nearest evil player.","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"On your first night, you learn which of your sides (left/right/same) the nearest evil player is on. If an evil player is adjacent to you, you learn false information."},{"id":"dianxiaoer","name":"Waiter","edition":"custom","team":"townsfolk","firstNight":3053,"firstNightReminder":"Wake the Waiter. Point to two good players.","otherNight":0,"otherNightReminder":"","reminders":["Regulars","Drunk"],"setup":false,"ability":"On your first night, you learn two good players. One of them is drunk, even if you are dead."},{"name":"Rascal","ability":"Each night, choose a Townsfolk character: their ability returns false information until the next dusk.","image":"https://oss.gstonegames.com/data_file/clocktower/web/icons/xionghaizi.png","id":"xionghaizi","team":"townsfolk","firstNight":3032,"otherNight":17,"firstNightReminder":"Wake the Rascal. They choose a Townsfolk character from the character list. That character's ability returns false information.","otherNightReminder":"Wake the Rascal. They choose a Townsfolk character from the character list. That character's ability returns false information.","reminders":["Mischief"]},{"id":"langzhong","name":"Herb Doctor","edition":"custom","team":"townsfolk","firstNight":3052,"firstNightReminder":"Wake the Herb Doctor. They point to a player other than themself. Show the Herb Doctor a word related to that player's ability.","otherNight":91,"otherNightReminder":"Wake the Herb Doctor. They point to a player other than themself. Show the Herb Doctor a word related to that player's ability.","reminders":[],"setup":false,"ability":"Each night, choose a player other than yourself: you learn a word related to their ability."},{"id":"dagengren","name":"Firewatcher","edition":"custom","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":15,"otherNightReminder":"Wake the Firewatcher. They make a guess. Place reminder tokens by the corresponding players.","reminders":["Alert","Death"],"setup":false,"ability":"Each night*, you must guess the distance to the first player who will die tonight. If you are correct, all other players cannot die tonight, but you might."},{"id":"jinyiwei","name":"Brocadier","edition":"custom","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":16,"otherNightReminder":"Wake the brocadier. They choose a player. They are now protecting that player.","reminders":["Protecting"],"setup":false,"ability":"Each night*, choose a player: if they would die before the next dusk, you die instead."},{"id":"heshang","name":"Heshang","edition":"custom","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Triggered"],"setup":false,"ability":"Each night, the first time an evil player's ability targets or affects a living neighbor of yours, that ability fails until dawn, and you learn your ability was triggered."},{"id":"geling","name":"Diva","edition":"custom","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":61,"otherNightReminder":"If the Diva used their ability today and the Demon was in the audience, the Songstress dies.","reminders":["Ability lost","Death"],"setup":false,"ability":"Once per game, during the day, you may propose all players watch your performance, and choose your audience from those who agree. If the Demon is in the audience, you die tonight."},{"id":"bianlianshi","name":"Face Changer","edition":"custom","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Mad"],"setup":false,"ability":"Each day, if you are 'mad' that you are a good character (different from before), you might gain that character's ability tonight, until the next dusk."},{"id":"banxian","name":"Banxian","edition":"custom","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Any other player who uses their ability to choose you at night, instead chooses an evil player."},{"id":"wudaozhe","name":"Enlightened One","edition":"custom","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":true,"ability":"You think you are an Outsider, but you are not. If an evil player's ability targets or affects you, you become a Townsfolk character that is not in play before it resolves.","remindersGlobal":["Is Enlightened One"]},{"id":"bingbi","name":"Brush Holder","edition":"custom","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":74,"otherNightReminder":"At night, if the 'Died Today' reminder is by the Scribe, wake the Scribe. Point to a good player. Put the Scribe to sleep. Remove 'Died Today'. If the Scribe dies at night, wake the Scribe. Point to an evil player. Put the Scribe to sleep.","reminders":["Died Today"],"setup":false,"ability":"If you die during the day, you learn a good player that night. If you die at night, you learn an evil player that night."},{"id":"chongfei","name":"Favored Consort","edition":"custom","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Ability lost"],"setup":false,"ability":"Once per game, the Storyteller will break the rules for you. Then, you learn privately what the Storyteller did."},{"id":"daoke","name":"Swordman","edition":"custom","team":"townsfolk","firstNight":3053,"firstNightReminder":"On the first night, wake the Swordman. Show them the Minion character token marked 'Learns'.","otherNight":0,"otherNightReminder":"","reminders":["Learns","Ability lost"],"setup":false,"ability":"On your first night, you learn one Minion in play. Once per game, you may publicly choose a player: if they are the character you learned, they die."},{"id":"daoshi","name":"Daoshi","edition":"custom","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":30,"otherNightReminder":"Wake the Daoshi. They choose a player. If they chose the Demon, place a 'Death' reminder by the Daoshi token, and a 'Drunk' reminder by the Demon token.","reminders":["Drunk","Death"],"setup":false,"ability":"Each night*, choose a player: if you choose the Demon, you die, and they become drunk until the next dawn."},{"id":"fangshi","name":"Fangshi","edition":"custom","team":"townsfolk","firstNight":3053,"firstNightReminder":"Wake the Fangshi. They choose a number. If they chose 1, show them one character that is in play.","otherNight":96,"otherNightReminder":"On the corresponding night, wake the Fangshi. Show them the corresponding number of characters that are in play.","reminders":["Night 1","Night 2","Night 3","Night 4","Night 5"],"setup":false,"ability":"On your first night, choose a number. On the night corresponding to that number, you learn that many characters that are in play."},{"id":"fengshuishi","name":"Fengshui Master","edition":"custom","team":"townsfolk","firstNight":3053,"firstNightReminder":"Wake the Fengshui Master. Tell them the character type of the player by the 'Learns' token. Move the token one step clockwise.","otherNight":91,"otherNightReminder":"Wake the Fengshui Master. Tell them the character type of the player by the 'Learns' token. Move the token one step clockwise.","reminders":["Learns"],"setup":false,"ability":"On your first night, you learn the character type of one player. Each night*, you learn the character type of the next non-Traveler player in clockwise order."},{"id":"limao","name":"Li Mao","edition":"custom","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":17,"otherNightReminder":"Wake the Li Mao. They choose a player. Place the 'Prince' token by that player's character token. If the Demon kills the 'Prince' tonight, swap the Li Mao and 'Prince' roles. Wake each to inform them. Place the 'Drunk' token by the new swapped character (the original Li Mao).","reminders":["Prince","Drunk"],"setup":false,"ability":"Each night*, choose a player: if they are a good character and are killed by an evil player tonight, you and they swap characters."},{"id":"qianke","name":"Broker","edition":"custom","team":"townsfolk","firstNight":3013,"firstNightReminder":"","otherNight":5,"otherNightReminder":"Wake the Broker. They choose two living players. If they are the same alignment, place 'Swap Target' reminders by their character tokens.","reminders":["Swap Target"],"setup":false,"ability":"Each night, choose two living players: if they have the same alignment, any ability used on one of them tonight targets the other instead."},{"id":"ranfangfangzhu","name":"Dyer","edition":"custom","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":75,"otherNightReminder":"If the Dyer dies at night, wake the Demon and inform them their ability has changed. (Note: Unsure if waking is needed, pending rule clarification.)","reminders":["Ability changed"],"setup":false,"ability":"If you die at night, the Demon's ability becomes 'Each night*, a player might die.'"},{"id":"shiguan","name":"Historian","edition":"custom","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":93,"otherNightReminder":"If a player died by execution today, wake the Historian. Tell them the number of living Townsfolk.","reminders":["Died by execution"],"setup":false,"ability":"Each night*, if a player died by execution today, you learn the number of living Townsfolk."},{"id":"tixingguan","name":"Magistrate","edition":"custom","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":83,"otherNightReminder":"The night after the Magistrate first nominates, wake the Magistrate. Tell them the character of the player they nominated.","reminders":["Nominated"],"setup":false,"ability":"The night after you first nominate a player, you learn their character. The Demon counts as a good character to your ability."},{"id":"xuncha","name":"Patrolman","edition":"custom","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":30,"otherNightReminder":"Wake the Patrolman. They choose two good characters (Townsfolk or Outsider). If they are both in play and alive, they cannot die tonight.","reminders":["Cannot die"],"setup":false,"ability":"Each night*, choose two good characters (different from last night): if they are both alive, they cannot die tonight."},{"id":"yanshi","name":"Puppeteer","edition":"custom","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":75,"otherNightReminder":"If the Puppeteer dies at night, swap their character with a living Minion. Wake each to inform them of their new role.","reminders":[""],"setup":false,"ability":"If you die at night, you swap characters with a living Minion."},{"id":"yishi","name":"Messenger","edition":"custom","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":91,"otherNightReminder":"If the Messenger publicly declared a character today, wake the Messenger: 1. If the character is in play, learn 'yes'. 2. If not in play, learn 'no', and the Messenger loses their ability.","reminders":["In play","Ability lost"],"setup":false,"ability":"Each day, you may publicly declare a character. That night, you learn if that character is in play. If you learn 'no' because of this, you lose this ability."},{"id":"yinluren","name":"Guide","edition":"custom","team":"townsfolk","firstNight":3062,"firstNightReminder":"Wake the Guide. They choose up to three players. Tell the Guide if an evil player's ability targeted or affected any of them tonight.","otherNight":98,"otherNightReminder":"Wake the Guide. They choose up to three players. Tell the Guide if an evil player's ability targeted or affected any of them tonight.","reminders":[""],"setup":false,"ability":"Each night, choose up to three players: you learn if an evil player's ability targeted or affected any of them tonight."},{"id":"yongjiang","name":"Artisan","edition":"custom","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Dies only by execution"],"setup":false,"ability":"If there are no evil players among the dead, you can only die by execution."},{"id":"zhen","name":"Zhen","edition":"custom","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":60,"otherNightReminder":"Wake the Zhen. If the Zhen uses their ability, they choose a Townsfolk character: If that character is in play, they are poisoned, then die.","reminders":["Poisoned","Death"],"setup":false,"ability":"Once per game, at night*, you may choose a Townsfolk character: if they are in play, they are poisoned and die."},{"id":"zhifu","name":"Prefect","edition":"custom","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":91,"otherNightReminder":"Wake the Prefect. Tell them if any non-Townsfolk, non-Traveler player died today.","reminders":[""],"setup":false,"ability":"Each night*, you learn if any non-Townsfolk, non-Traveler player died today."},{"id":"shaxing","name":"Mr. Misfortune","edition":"custom","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":65,"otherNightReminder":"If the Mr. Misfortune dies, decide if one of their living neighbors dies.","reminders":["Death"],"setup":false,"ability":"If you die, one of your living neighbors might die tonight."},{"id":"nichen","name":"Turncoat","edition":"custom","team":"outsider","firstNight":3042,"firstNightReminder":"Wake the Turncoat. They choose a player other than themself. That player is now their Nemesis.","otherNight":25,"otherNightReminder":"If the Turncoat or their target dies by execution, wake the other player and inform them of their alignment change.","reminders":["Nemesis"],"setup":false,"ability":"On your first night, choose a player other than yourself: if they die by execution first, you become evil that night. If you die by execution first, they become evil that night."},{"id":"shusheng","name":"Pedant","edition":"custom","team":"outsider","firstNight":3011,"firstNightReminder":"If the Pedant is in play, show the Demon the Pedant character token.","otherNight":51,"otherNightReminder":"If the Demon guesses the Pedant correctly, let the Demon choose a player: that player dies.","reminders":["Guessed","Death"],"setup":false,"ability":"The Demon knows a Pedant is in play. Once per game, the Demon may visit the Storyteller and guess you are the Pedant. If correct, even if you are dead, the Demon chooses a player tonight: they die."},{"id":"shijie","name":"Envoy","edition":"custom","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Triggered"],"setup":false,"ability":"Once per night, a player using their ability to choose an evil player chooses you instead, even if you are dead."},{"id":"jiubao","name":"Bartender","edition":"custom","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Drunk"],"setup":false,"ability":"One of your good neighbors is drunk, even if you are dead."},{"id":"rulianshi","name":"Mortician","edition":"custom","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":27,"otherNightReminder":"If the Mortician nominated the Demon today and the Demon died by that execution, wake the Mortician and inform them they become the new evil Demon.","reminders":["Inter"],"setup":false,"ability":"If you nominate the Demon and they die by that execution, you become that evil Demon. You lose this ability when 4 or fewer players (not counting Travelers) are alive."},{"id":"shutong","name":"Bookboy","edition":"custom","team":"outsider","firstNight":3034,"firstNightReminder":"Wake the Bookboy. They choose a player.","otherNight":60,"otherNightReminder":"If the player chosen by the Bookboy is targeted or affected by an evil ability, the Page dies tonight.","reminders":["Chosen","Death"],"setup":false,"ability":"On your first night, choose a player other than yourself: each night (except the first), if they are targeted or affected by an evil player's ability, you die tonight."},{"id":"humeiniang","name":"Hu Meiniang","edition":"custom","team":"minion","firstNight":3029,"firstNightReminder":"Wake the Hu Meiniang. They choose a player. After the Hu Meiniang sleeps, inform that player a Hu Meiniang is in play.","otherNight":24,"otherNightReminder":"If the Hu Meiniang dies by execution, wake their chosen player and inform them of their alignment change.","reminders":["Charmed"],"setup":false,"ability":"On your first night, choose a player: they learn a Hu Meiniang is in play. If you die by execution, they become evil that night."},{"id":"yangguren","name":"Bug Keeper","edition":"custom","team":"minion","firstNight":0,"firstNightReminder":"","otherNight":54,"otherNightReminder":"The player who nominated the living Bug Keeper today dies.","reminders":["Gu"],"setup":false,"ability":"A player who nominates you while you are alive dies tonight, even if you are dead."},{"id":"jinweijun","name":"Imperialist","edition":"custom","team":"minion","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"A player who is 'mad' that they want to die might be executed immediately."},{"id":"jinweijun2","name":"Imperialist Ⅱ","edition":"custom","team":"minion","firstNight":3023,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"On your first night, you must choose 'living' or 'dead'. A player who is 'mad' that they want to do this might be executed immediately."},{"id":"ganshiren","name":"Corpse Walker","edition":"custom","team":"minion","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Living Dead"],"setup":true,"ability":"Your two Townsfolk neighbors are treated as alive the first time they die. [-1 Outsider]"},{"id":"gudiao","name":"Gu Diao","ability":"Each night, choose left or right: you learn the character of the next living good player in that direction. They are poisoned and register as an evil Gu Diao, until next dusk.","image":"https://oss.gstonegames.com/data_file/clocktower/web/icons/gudiao.png","team":"minion","firstNight":3019.5,"otherNight":9.5,"firstNightReminder":"Wake the Gu Diao. They choose left or right. They learn the character of the next living good player in that direction. That player is poisoned and register as an evil Gu Diao, until next dusk.","otherNightReminder":"Wake the Gu Diao. They choose left or right. They learn the character of the next living good player in that direction. That player is poisoned and register as an evil Gu Diao, until next dusk.","reminders":["Poisoned"],"remindersGlobal":[],"setup":false},{"id":"huapi","name":"Huapi","edition":"custom","team":"minion","firstNight":3017,"firstNightReminder":"Wake the Huapi. They choose a living player. That player becomes a 'Living Dead'.","otherNight":54,"otherNightReminder":"If the player turned into a 'Living Dead' by the Huapi on the first night dies, they are resurrected, and the Huapi regains their ability. Wake the Huapi. They choose a living player. That player becomes a 'Living Dead'.","reminders":["Living Dead","Ability lost"],"setup":false,"ability":"On your first night, choose a living player: they die but are treated as alive. The next time they would die, they are resurrected, and you regain this ability."},{"id":"mengpo","name":"Meng Po","edition":"custom","team":"minion","firstNight":0,"firstNightReminder":"","otherNight":54,"otherNightReminder":"Wake Meng Po. Meng Po chooses a player. That player must choose to live or die.","reminders":["Alive & Ability Lost","Dead & Keep Ability"],"setup":false,"ability":"Each night*, choose a player: if they are alive, they must choose to either lose their ability, or die and keep their ability until the next dusk."},{"id":"niangjiushi","name":"Brewer","edition":"custom","team":"minion","firstNight":3019,"firstNightReminder":"Wake the Brewer. They choose a Townsfolk character and give a piece of information in that character's format. The next time that character gains info, they learn the Brewer's info instead.","otherNight":9,"otherNightReminder":"Wake the Brewer. They choose a Townsfolk character and give a piece of information in that character's format. The next time that character gains info, they learn the Brewer's info instead.","reminders":["Tipsy"],"setup":false,"ability":"Each night, choose a Townsfolk character: the next time they gain information from their ability, they learn what you decide instead."},{"id":"hundun","name":"Hundun","edition":"custom","team":"demon","firstNight":0,"firstNightReminder":"0","otherNight":47,"otherNightReminder":"Wake Hundun. They attack a player. If they kill an adjacent Townsfolk, all good players are poisoned.","reminders":["Death","Good Poisoned"],"setup":false,"ability":"Each night*, choose a player: they die. If you kill a Townsfolk neighbor this way, all good players (except Travelers) are poisoned until next dusk."},{"id":"qiongqi","name":"Qiongqi","edition":"custom","team":"demon","firstNight":0,"firstNightReminder":"0","otherNight":48,"otherNightReminder":"Wake Qiongqi. They attack a player. If an Outsider died today, the player they attack becomes a 'Living Dead', then decide who else dies tonight due to Qiongqi's ability.","reminders":["Died Today","Death","Living Dead"],"setup":true,"ability":"Each night*, choose a player: they die. If an Outsider died today, instead, choose a player: they die but are treated as alive, and then one other player dies. [+1 Outsider]"},{"id":"taowu","name":"Taowu","edition":"custom","team":"demon","firstNight":2005,"firstNightReminder":"If Taowu is in play, skip the Demon info step.","otherNight":50,"otherNightReminder":"Wake Taowu. They attack a player.","reminders":["Death","Ability lost"],"setup":false,"ability":"Each night*, choose a player: they die. When you would die, a living Minion with an ability loses their ability instead. You do not learn Demon info."},{"id":"taotie","name":"Taotie","edition":"custom","team":"demon","firstNight":0,"firstNightReminder":"0","otherNight":49,"otherNightReminder":"Wake Taotie. They choose any number of non-Traveler players or one Traveler. If these players all have different character types, they die.","reminders":["Death"],"setup":true,"ability":"Each night*, choose any number of non-Traveler players, or one Traveler: if their character types are all different, they die. [+1 Outsider]"},{"id":"baojun","name":"Tyrant","edition":"custom","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":50,"otherNightReminder":"Wake the Tyrant. They attack up to two players. The number of players chosen cannot be the same as the number of players who died last night.","reminders":["Death"],"setup":false,"ability":"Each night*, you may choose up to two players: they die. The number of players you choose cannot be the same as the number of players who died last night (more than 2 counts as 2)."},{"id":"dianyuzhang","name":"Warden","edition":"custom","team":"demon","firstNight":3031,"firstNightReminder":"Wake the Warden. They choose up to three players.","otherNight":50,"otherNightReminder":"Wake the Warden. They choose up to three players. If one of the players chosen last night dies by execution, the rest of the players chosen last night die. Otherwise, one of them dies.","reminders":["Imprisoned","Death"],"setup":false,"ability":"Each night, choose up to three players: if one of them dies by execution tomorrow, the others you chose last night die tonight. Otherwise, one of them dies tonight."},{"id":"guhuoniao","name":"Guhuo","edition":"custom","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":50,"otherNightReminder":"Wake Guhuo. They attack a player.","reminders":["Death","Gained Ability"],"setup":false,"ability":"Each night*, choose a player: they die. You might have the ability of the last Minion who died by execution."},{"id":"jianning","name":"Sycophant","edition":"custom","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":50,"otherNightReminder":"Wake the Sycophant. They attack a player. If they did not vote today, they may attack twice.","reminders":["Death","Act Twice"],"setup":false,"ability":"Each night*, choose a player: they die. If you did not vote today, you may act twice tonight."},{"name":"Yanluo","ability":"On your first night, you see the Grimoire and choose a player: they die on the 3rd night, even if for some reason they could not. Each night, choose a player: the player you chose last night dies.","image":"https://oss.gstonegames.com/data_file/clocktower/web/icons/yanluo.png","id":"yanluo","team":"demon","firstNight":3058.1,"otherNight":50.5,"firstNightReminder":"Wake Yanluo. They look at the Grimoire. They choose a player. Place 'Dies on 3rd Night' reminder. Then, they choose another player. Place 'Dies Tonight' reminder.","otherNightReminder":"Wake Yanluo. They choose a player. Place 'Dies Tonight' reminder. Change last night's 'Dies Tonight' reminder to 'Death'. If this is the 3rd night, the player with 'Dies on 3rd Night' dies, even if for some reason they could not.","reminders":["Dies on 3rd Night","Dies Tonight","Death"],"remindersGlobal":[],"setup":false}]`),Pn={};Nn.forEach(e=>{let t=un(e.id,`zh-CN`);Pn[e.id]={id:e.id,name:e.name||e.id,edition:e.edition||`custom`,team:e.team,ability:e.ability||``,firstNight:e.firstNight||0,otherNight:e.otherNight||0,firstNightReminder:e.firstNightReminder||``,otherNightReminder:e.otherNightReminder||``,reminders:e.reminders||[],remindersGlobal:e.remindersGlobal||[],setup:e.setup||!1,image:e.image||`https://oss.gstonegames.com/data_file/clocktower/web/icons/${t}.png`}});var Fn=_n(`en`).reduce((e,t)=>(e[t.id]=t,e),{}),In=vn(`en`).reduce((e,t)=>(e[t.id]=t,e),{}),Ln={pagan:{name:`Pagan`,ability:`If the Heretic is in play, all other good Townsfolk become Pagans and learn who the evil players are and their roles. [+Heretic or -1 Outsider]`,image:`https://www.bloodstar.xyz/p/Airell_clocktower/Assets_of_Lei_Gallery/pagan_assets_of_lei_gallery.png`,id:`pagan`,team:`townsfolk`,author:`Zets`,firstNight:200,otherNight:0,firstNightReminder:`If both the Pagan and Heretic are in play, wake all good Townsfolk and inform them they have all become Pagans.`,otherNightReminder:``,reminders:[],setup:!0},martyr:{name:`Martyr Girl`,author:`飞跃疯人院`,ability:`If a Minion dies by execution, you die tonight. Then, all evil players are drunk until dusk tomorrow.`,image:`https://www.bloodstar.xyz/p/humlet/FRY7-9/78_fry79.png`,id:`martyr`,team:`townsfolk`,firstNight:0,otherNight:0,otherNightReminder:`If a Minion died by execution today, and the Martyr Girl can die tonight due to their ability, place the 'Martyr' and 'Dead' reminders by the Martyr Girl, indicating all evil players are drunk until dusk tomorrow.`,reminders:[`Martyr`,`Dead`]},snowman:{author:`飞跃疯人院`,name:`Snowman`,ability:`Once per game, the Demon may publicly guess you are the Snowman. If correct, you are executed instead of them if they are executed today. If no one is executed during the day, your team loses.`,image:`https://www.bloodstar.xyz/p/humlet/FRY7-9/_fry79.png`,id:`snowman`,team:`outsider`,firstNight:0,otherNight:0,reminders:[`Guessed`,`Guessed Correctly`]},wandering_singer:{author:`飞跃疯人院`,name:`Wandering Singer`,ability:`Each day, you may publicly choose any number of alive players: the Townsfolk among them are drunk until you choose again. Tonight, you learn how many players are drunk because of you.`,image:`https://www.bloodstar.xyz/p/humlet/FRY7-9/4_fry79.png`,id:`wandering_singer`,team:`townsfolk`,firstNight:0,otherNight:0,otherNightReminder:`If the Wandering Singer made a public choice during the day, wake them and tell them the number of players currently drunk due to them.`,reminders:[`Drunk`]},newspaper_boy:{author:`飞跃疯人院`,name:`Newspaper Boy`,ability:`Each day, you may privately ask the Storyteller for a piece of 'news'. If you publicly announce this 'news', tonight you learn if it was correct.`,image:`https://www.bloodstar.xyz/p/humlet/FRY7-9/58_fry79.png`,id:`newspaper_boy`,team:`townsfolk`,firstNight:0,otherNight:0,otherNightReminder:`Learn if correct or not`,reminders:[`True News`,`False News`]},genius:{id:`genius`,name:`Genius`,ability:`Each night, you may choose a good player: you gain their ability until you choose again. You are drunk on either odd or even nights.`,team:`townsfolk`,image:`https://botc.letshare.fun/imgs/icons/townsfolk/genius.png`,author:`摸鱼学徒`,firstNight:3,otherNight:2,firstNightReminder:``,otherNightReminder:``,reminders:[`Gained Ability`,`Drunk`],setup:!1},nun:{id:`nun`,name:`Nun`,ability:`Good Townsfolk players cannot be drunk, poisoned, or learn false information.`,team:`townsfolk`,image:`https://botc.letshare.fun/imgs/icons/townsfolk/nun.png`,author:`摸鱼学徒`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`Not Drunk`,`Not Poisoned`,`No False Info`],setup:!1},meishuguanzhang:{id:`meishuguanzhang`,name:`Museum Curator`,ability:`Each night*, you must choose a player: if they agree, you learn their sanity status, but their sanity status might change.`,team:`traveler`,image:`/imgs/icons/血染德扑/insanity.png`,author:`Soup1618`,firstNight:1,otherNight:1,firstNightReminder:``,otherNightReminder:``,reminders:[`Insane`,`Sane`],setup:!1},trade_dealer:{id:`trade_dealer`,name:`Trade Dealer`,ability:`Each night, you learn what will happen tomorrow when the phone rings and is answered. The person who answers also knows. What happens might break the rules.`,team:`traveler`,image:`https://botc.letshare.fun/imgs/icons/血染德扑/经销商.png`,firstNight:1,otherNight:1,author:`Luis`,reminders:[`Phone Call`],setup:!1},disappointed:{id:`disappointed`,edition:`custom`,image:`https://youke1.picui.cn/s1/2025/10/11/68e95986b417e.png`,name:`Disappointed`,ability:`You think you are a Minion, but you are not.`,author:`Moll`,team:`outsider`,firstNight:5,otherNight:5,setup:!1,firstNightReminder:``,otherNightReminder:``,reminders:[`Is Disappointed`]},jiutoushe:{id:`jiutoushe`,name:`Hydra`,ability:`When a player on your team dies, a player on your team might be resurrected.`,team:`traveler`,author:`Hazel`,image:`https://botc.letshare.fun/imgs/icons/血染德扑/九头蛇.png`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1},drugster:{id:`drugster`,name:`Drugster`,ability:`You think you are a good player in play, but you are not. The player who has this role knows the Drugster is in play. If one of you 'madly' proves the Drugster is in play, you both might die.`,team:`traveler`,author:`Mar Hepto`,image:`https://botc.letshare.fun/imgs/icons/血染德扑/瘾君子.png`,firstNight:0,otherNight:63,firstNightReminder:``,otherNightReminder:``,reminders:[`Is Drugster`],setup:!0},wanou:{id:`wanou`,name:`Doll`,author:`飞跃疯人院`,ability:`You think you are a good character, but you are not. If you are killed by the Demon, the Demon must choose a player: they become the Doll. [The Doll sits next to the Demon]`,image:`https://www.bloodstar.xyz/p/humlet/FRY7-9/65_fry79.png`,team:`minion`,firstNight:0,otherNight:0,otherNightReminder:`If the Demon killed the Doll, remind the Demon to choose a new Doll.`,remindersGlobal:[`New Doll`,`Original Doll`],setup:1},qimo:{id:`qimo`,name:`Contract Demon`,ability:`Each night*, you may choose two alive players to form a death pact. If one of them dies for any reason, the other dies too. [+1 Outsider]`,team:`demon`,image:`https://botc.letshare.fun/imgs/icons/血染德扑/契魔.png`,firstNight:0,otherNight:41,author:`摸鱼学徒`,firstNightReminder:``,otherNightReminder:`Wake the Contract Demon. They choose two players. Mark them with 'Linked'. At the start of the day, publicly announce these two players are linked.`,reminders:[`Linked`],setup:!1},risen:{id:`risen`,name:`Risen`,ability:`All players start dead. Executed players are resurrected. If all players of a team are alive, that team wins.`,team:`demon`,image:`https://botc.letshare.fun/imgs/icons/demon/the_risen.png`,firstNight:0,otherNight:41.5,author:`摸鱼学徒`,firstNightReminder:``,reminders:[`Linked`],setup:!1},virilus:{id:`virilus`,name:`Virilus`,ability:`Each night, you must choose a player: they are infected by you. If an infected player nominates, they die, and the nominated player becomes infected. At the end of the fourth day, the evil team wins.`,team:`demon`,image:`https://botc.letshare.fun/imgs/icons/demon/virilus.png`,firstNight:0,otherNight:42.1,author:`Lei.`,firstNightReminder:``,reminders:[`Linked`],setup:!1},kaixinhou:{name:`Happy Monkey`,ability:`If there are evil players alive, you can not die. All players know you are the Happy Monkey. You can publicly choose a player to play roshambo with you each day. If you win, they die.`,image:`https://free.picui.cn/free/2025/09/21/68d0091d5b270.png`,id:`kaixinhou`,team:`demon`,author:`祥东&小赤`,firstNight:128001,otherNight:0,firstNightReminder:`Tell all players he is the Happy Monkey.`,otherNightReminder:``,reminders:[`Not Dead`,`Dead`,`First Time`,`Second Time`,`Third Time`],remindersGlobal:[],setup:!1},day_dreamer:{name:`Day Dreamer`,ability:`Your ability is if…, then…. At your first day, visit the Storyteller and tell them "then". The Storyteller will tell you the "if" of your ability.`,image:`https://www.bloodstar.xyz/p/Drus/5GMXJ/_5gmxj.png`,author:`阿源`,id:`day_dreamer`,team:`townsfolk`,firstNight:0,otherNight:0,reminders:[`Drunk`]},lost_dreamer:{name:`Lost Dreamer`,ability:`Your ability is if…, then…. At your first day, visit the Storyteller and tell them "if". The Storyteller will tell you the "then" of your ability.`,image:`https://www.bloodstar.xyz/p/Drus/5GMXJ/1_5gmxj.png`,id:`lost_dreamer`,author:`阿源`,team:`outsider`,firstNight:0,otherNight:0,reminders:[`Drunk`]},gold_dreamer:{name:`Gold Dreamer`,ability:`Your "if" is easier. Your ability is if…, then…. At your first day, visit the Storyteller and tell them "then". The Storyteller will tell you the "if" of your ability.`,image:`https://www.bloodstar.xyz/p/Drus/5GMXJ/2_5gmxj.png`,id:`gold_dreamer`,team:`minion`,author:`阿源`,firstNight:0,otherNight:0,reminders:[`Poisoned`]},kill_dreamer:{name:`Kill Dreamer`,ability:`Each night*, choose a player: they die. Your ability is if…, then…. At your first day, visit the Storyteller and tell them "then". The Storyteller will tell you the "if" of your ability.`,image:`https://www.bloodstar.xyz/p/Drus/5GMXJ/3_5gmxj.png`,id:`kill_dreamer`,author:`阿源`,team:`demon`,firstNight:0,otherNight:0,reminders:[`Poisoned`,`Dead`]},yuan:{name:`Yuan`,ability:`Each night*, you must choose a player: they die. If you publicly declare "I'm framed!" (except the last day), after you are executed, privately choose a player who voted for you. He will become the evil Yuan, but only one successful conversion can be made per game. [-1 Outsider]`,image:`https://oss.gstonegames.com/data_file/clocktower/role_icon/custom/d_8539280695861_536321d6.jpg`,id:`yuan`,author:`驯鹿&痴愚`,team:`demon`,firstNight:0,otherNight:100,firstNightReminder:``,otherNightReminder:``,reminders:[`Dead`,`Framed`],remindersGlobal:[],setup:1},apocalypse:{name:`Apocalypse Caller`,ability:`Once per game, at the start of the day, if there are four or fewer players alive, you may privately visit the Storyteller to view the Book of Apocalypse for twenty seconds.`,image:`https://i.postimg.cc/VNYbv7sL/tianqi.png`,id:`apocalypse`,team:`townsfolk`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],remindersGlobal:[],setup:0},nailong:{name:`Nailong`,ability:`You can go crazy about "I'm Nailong". If you do this, and another player goes crazy about "I'm Nailong", he may become Nailong until the next dawn.`,image:`https://i.postimg.cc/SNd02vMs/nailong.webp`,id:`nailong`,team:`traveler`,author:`星火乐`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[`I'm Nailong`,`I'm not Nailong`],setup:!1},pumpkin:{id:`pumpkin`,image:`/imgs/icons/townsfolk/pumpkin.png`,edition:`custom`,name:`Pumpkin`,author:`Halloween Only🎃`,ability:`Players who are "spooky" might survive execution be safe from the Demon.`,team:`townsfolk`,sch_team:`镇民`,firstNight:0,otherNight:0,firstNightReminder:``,otherNightReminder:``,reminders:[],setup:!1}};const Rn={...Pn,...Ln,...Fn,...In},zn={主教:`zhujiao`,主谋:`zhumou`,乞丐:`qigai`,书生:`shusheng`,书童:`shutong`,事务官:`shiwuguan`,亡骨魔:`wanggumo`,亡魂:`wanghun`,传教士:`chuanjiaoshi`,使节:`shijie`,侍女:`shinv`,侍臣:`shichen`,侏儒:`zhuru`,俑匠:`yongjiang`,修行者:`xiuxingzhe`,修补匠:`xiubujiang`,偃师:`yanshi`,僧侣:`senglv`,僵怖:`jiangbu`,入殓师:`rulianshi`,公主:`gongzhu`,共情者:`gongqingzhe`,典狱长:`dianyuzhang`,养蛊人:`yangguren`,军团:`juntuan`,农夫:`nongfu`,刀客:`daoke`,利维坦:`liweitan`,刺客:`cike`,半仙:`banxian`,半兽人:`banshouren`,卖花女孩:`maihuanvhai`,博学者:`boxuezhe`,占卜师:`zhanbuishi`,卡扎力:`kazhali`,厨师:`chushi`,变脸师:`bianlianshi`,叫花子:`jiaohuazi`,召唤师:`zhaohuanshi`,史官:`shiguan`,吟游诗人:`yinyoushiren`,呆瓜:`daigua`,告密者:`gaomizhe`,和尚:`heshang`,和平主义者:`hepingzhuyizhe`,咖啡师:`kafeishi`,哈迪寂亚:`hadijiya`,哥布林:`gebulin`,哲学家:`zhexuejia`,唱诗男孩:`changshananhai`,国王:`guowang`,图书管理员:`tushugualiyuan`,圣徒:`shengtu`,城镇公告员:`chengzhengonggaoyuan`,堤丰之首:`difengzhishou`,士兵:`shibing`,失忆者:`shiyizhe`,奥赫:`aohe`,女巫:`nvwu`,女祭司:`nvjisi`,女舍监:`nvshejian`,女裁缝:`nvcaifeng`,奸佞:`jianning`,姑获鸟:`guhuoniao`,孟婆:`mengpo`,学徒:`xuetu`,守夜人:`shouyeren`,守鸦人:`shouyaren`,官员:`guanyuan`,宠妃:`chongfei`,寡妇:`guafu`,将军:`jiangjun`,小怪宝:`xiaoguaibao`,小恶魔:`xiaoemo`,小精灵:`xiaojingling`,屠夫:`tufu`,巡察:`xuncha`,巡山人:`xunshanren`,工程师:`gongchengshi`,巫师:`wushi`,巫毒师:`wudushi`,帽匠:`maojiang`,店小二:`dianxiaoer`,异教领袖:`yijiaolingxiu`,异端分子:`yiduanfenzi`,弄臣:`nongchen`,引路人:`yinluren`,心上人:`xinshangren`,怪咖:`guaika`,恐惧之灵:`kongjuzhiling`,悟道者:`wudaozhe`,戏子:`xizi`,戏法师:`xifashi`,打更人:`dagengren`,投毒者:`touduzhe`,报丧女妖:`baosangnvyao`,掮客:`qianke`,提刑官:`tixingguan`,提线木偶:`tixianmuou`,政客:`zhengke`,教授:`jiaoshou`,教父:`jiaofu`,数学家:`shuxuejia`,方古:`fanggu`,方士:`fangshi`,旅店老板:`lvdianlaoban`,无神论者:`wushenlunzhe`,普卡:`puka`,暴乱:`baoluan`,暴君:`baojun`,替罪羊:`tizuiyang`,月之子:`yuezhizi`,杂技演员:`zajiyanyuan`,杂耍艺人:`zashuayiren`,村夫:`cunfu`,枪手:`qiangshou`,染坊坊主:`ranfangfangzhu`,梼杌:`taowu`,歌伶:`geling`,气球驾驶员:`qiqiujiashiyuan`,水手:`shuishou`,沙巴洛斯:`shabaluosi`,法官:`faguan`,洗脑师:`xinaoshi`,洗衣妇:`xiyifu`,流莺:`liuying`,涡流:`woliu`,混沌:`hundun`,渔夫:`yufu`,灵言师:`lingyanshi`,炸弹人:`zhadanren`,炼金术士:`lianjinshushi`,煞星:`shaxing`,熊孩子:`xionghaizi`,牙噶巴卜:`yagababu`,狂热者:`kuangrezhe`,狐媚娘:`humeiniang`,狸猫:`limao`,猎手:`lieshou`,珀:`po`,理发师:`lifashi`,男爵:`nanjue`,画皮:`huapi`,畸形秀演员:`jixingxiuyanyuan`,疯子:`fengzi`,痢蛭:`lizhi`,瘟疫医生:`wenyiyisheng`,知府:`zhifu`,祖母:`zumu`,神谕者:`shenyuzhe`,禁卫军:`jinweijun`,禁卫军Ⅱ:`jinweijun2`,秉笔:`bingbi`,科学怪人:`kexueguairen`,穷奇:`qiongqi`,窃贼:`qiezei`,笑匠:`xiaojiang`,筑梦师:`zhumengshi`,管家:`guanjia`,精神病患者:`jingshenbinghuanzhe`,红唇女郎:`hongchunnvlang`,维齐尔:`weiqier`,罂粟种植者:`yingsuzhongzhizhe`,舞蛇人:`wusheren`,艺术家:`yishujia`,茶艺师:`chayishi`,莽夫:`mangfu`,落难少女:`luonanshaonv`,蛊雕:`gudiao`,街头风琴手:`jietoufengqinshou`,解谜大师:`jiemidashi`,"诺-达鲺":`nuodashi`,调查员:`diachayuan`,贞洁者:`zhenjiezhe`,贤者:`xianzhe`,贵族:`guizu`,赌徒:`dutu`,赏金猎人:`shangjinlieren`,赶尸人:`ganshiren`,送葬者:`songzangzhe`,逆臣:`nichen`,造谣者:`zaoyaozhe`,道士:`daoshi`,郎中:`langzhong`,酒保:`jiubao`,酒鬼:`jiugui`,酿酒师:`niangjiushi`,钟表匠:`zhongbiaojiang`,钦天监:`qintianjian`,锦衣卫:`jinyiwei`,镇长:`zhenzhang`,镜像双子:`jingxiangshuangzi`,间谍:`jiandie`,阎罗:`yanluo`,阴阳师:`yinyangshi`,陌客:`moke`,限:`xian`,隐士:`yinshi`,集骨者:`jiguzhe`,风水师:`fengshuishi`,食人族:`shirenzu`,食人魔:`shirenmo`,饕餮:`taotie`,驱魔人:`qumoren`,驿使:`yishi`,骑士:`qishi`,魔像:`moxiang`,魔术师:`moshushi`,魔鬼代言人:`moguidaiyanren`,鸩:`zhen`,鹰身女妖:`yingshennvyao`,麻脸巫婆:`malianwupo`,黑帮:`heibang`,天使:`tianshi`,私酒贩:`sijiufan`,我是村规王:`woshicunguiwang`,佛陀:`fotuo`,失败的上帝:`shibaideshangdi`,强权上帝:`qiangquanshangdi`,灯神:`dengshen`,末日降临:`morijiangling`,公爵夫人:`gongkefuren`,摆渡人:`baiduren`,小提琴手:`xiaotiqinshou`,骗人精:`pianrenjing`,园丁:`yuanding`,地狱图书管理员:`diyutushugualiyuan`,革命者:`gemingzhe`,哨兵:`shaobing`,圣洁之魂:`shengjizhihun`,暴风捕手:`baofengbushou`,玩具匠:`wanjujiang`,麒麟:`qilin`,嘴硬的上帝:`zuiyingdeshangdi`,传奇角色:`chuanqijiaose`,大聪花:`daconghua`};var Bn=C(({open:e,onClose:t,onAddCharacter:n,onRemoveCharacter:r,selectedCharacters:i=[],initialTeam:a,position:o})=>{let{t:s,language:c}=X(),[l,u]=(0,G.useState)(``),[d,f]=(0,G.useState)(0),[p,m]=(0,G.useState)(!1),[h,g]=(0,G.useState)(!1),[_,v]=(0,G.useState)(!1),y=G.useRef({x:0,y:0}),b=G.useRef({x:0,y:0}),x=G.useRef(null),S=G.useRef(null),C=G.useRef(null),w=(0,G.useMemo)(()=>c===`en`?Rn:Q,[c]),T=(0,G.useMemo)(()=>{let e={townsfolk:[],outsider:[],minion:[],demon:[],fabled:_n(c),loric:vn(c),traveler:[]},t=new Set;return Object.values(w).forEach(n=>{let r=n;t.has(r.id)||r.team===`fabled`||r.team===`loric`||(t.add(r.id),e[r.team]&&e[r.team].push(r))}),e},[w,c]),E=(0,G.useMemo)(()=>{if(!e)return{townsfolk:[],outsider:[],minion:[],demon:[],fabled:[],loric:[],traveler:[]};if(!l.trim())return T;let t=l.toLowerCase(),n={townsfolk:[],outsider:[],minion:[],demon:[],fabled:[],loric:[],traveler:[]};return Object.entries(T).forEach(([e,r])=>{let i=e;n[i]=r.filter(e=>{let n=e.name.toLowerCase().includes(t),r=e.ability.toLowerCase().includes(t),i=zn[e.name]?.includes(t),a=e.id.toLowerCase().includes(t);return n||r||i||a})}),n},[T,l,e]),O=[{key:`selected`,label:s(`selectedCharacters`),color:Z.good},{key:`all`,label:s(`all`),color:Z.text.primary},{key:`townsfolk`,label:s(`townsfolk`),color:Z.good},{key:`outsider`,label:s(`outsider`),color:Z.good},{key:`minion`,label:s(`minion`),color:Z.evil},{key:`demon`,label:s(`demon`),color:Z.evil},{key:`fabled`,label:s(`fabled`),color:Z.fabled},{key:`loric`,label:s(`loric`),color:Z.loric},{key:`traveler`,label:s(`traveler`),color:Z.purple}],k=O[d],ee=(0,G.useMemo)(()=>{if(k.key===`selected`){if(!l.trim())return i;let e=l.toLowerCase();return i.filter(t=>{let n=t.name.toLowerCase().includes(e),r=t.ability.toLowerCase().includes(e),i=zn[t.name]?.includes(e),a=t.id.toLowerCase().includes(e);return n||r||i||a})}if(k.key===`all`)return Object.values(E).flat();let e=E[k.key];return e?e.filter(e=>e.team===k.key):[]},[k.key,E,i,l]);(0,G.useEffect)(()=>{if(e){if(m(!0),u(``),y.current={x:0,y:0},x.current&&(x.current.style.transform=`translate(0px, 0px)`),v(!1),a){let e=O.findIndex(e=>e.key===a);e!==-1&&f(e)}else f(0);let e=setTimeout(()=>{m(!1),C.current&&C.current.focus()},200);return()=>clearTimeout(e)}},[e,a]);let te=(0,G.useCallback)(e=>{n(e)},[n]),A=(0,G.useCallback)(e=>{r&&r(e)},[r]),j=(0,G.useCallback)(()=>{t()},[t]),re=(0,G.useCallback)(e=>{h||e.target===e.currentTarget&&j()},[h,j]),ae=(0,G.useCallback)(e=>{e.currentTarget.classList.contains(`draggable-header`)&&(v(!0),b.current={x:e.clientX-y.current.x,y:e.clientY-y.current.y},e.preventDefault())},[]),oe=(0,G.useCallback)(e=>{!_||!x.current||(S.current!==null&&cancelAnimationFrame(S.current),S.current=requestAnimationFrame(()=>{if(!x.current)return;let t=x.current.getBoundingClientRect(),n=t.width,r=t.height,i=x.current.getBoundingClientRect(),a=i.left-y.current.x,o=i.top-y.current.y,s=e.clientX-b.current.x,c=e.clientY-b.current.y,l=a+s,u=o+c,d=window.innerWidth-n,f=window.innerHeight-r;l<0?s=0-a:l>d&&(s=d-a),u<0?c=0-o:u>f&&(c=f-o);let p={x:s,y:c};y.current=p,x.current.style.transform=`translate(${p.x}px, ${p.y}px)`}))},[_]),se=(0,G.useCallback)(()=>{v(!1),S.current!==null&&(cancelAnimationFrame(S.current),S.current=null)},[]);(0,G.useEffect)(()=>{if(_)return window.addEventListener(`mousemove`,oe),window.addEventListener(`mouseup`,se),()=>{window.removeEventListener(`mousemove`,oe),window.removeEventListener(`mouseup`,se)}},[_,oe,se]);let M=G.memo(({character:e,teamColor:t})=>(0,Y.jsx)($,{component:`avatar`,src:e.image,alt:e.name,sx:{width:48,height:48,border:`2px solid ${t}`}})),ce=G.memo(({character:e,index:t,teamColor:n,showTeamChip:r,isSelected:i,onAddCharacter:a,onRemoveCharacter:o})=>{let c=`${e.team}-${e.id}-${t}`;return(0,Y.jsxs)(G.Fragment,{children:[(0,Y.jsxs)(Ge,{component:`div`,onClick:()=>{i&&o?o(e):a(e)},sx:{py:1.5,cursor:`pointer`,backgroundColor:i?`rgba(25, 118, 210, 0.08)`:`transparent`,border:i?`1px solid rgba(25, 118, 210, 0.3)`:`1px solid transparent`,borderRadius:1,mb:.5,"&:hover":{backgroundColor:i?`rgba(25, 118, 210, 0.12)`:`rgba(0, 0, 0, 0.04)`}},children:[(0,Y.jsx)(ct,{children:(0,Y.jsx)(M,{character:e,teamColor:n})}),(0,Y.jsx)(ft,{primary:(0,Y.jsxs)(R,{sx:{display:`flex`,alignItems:`center`,gap:1,flexWrap:`wrap`},children:[(0,Y.jsx)(I,{variant:`subtitle2`,sx:{fontWeight:`bold`,color:n,fontSize:`0.9rem`},children:e.name}),i&&(0,Y.jsx)(qe,{label:s(`selected`),size:`small`,sx:{height:18,fontSize:`0.6rem`,backgroundColor:Z.good,color:`#fff`,"& .MuiChip-label":{px:.5}}}),r&&(0,Y.jsx)(qe,{label:O.find(t=>t.key===e.team)?.label||e.team,size:`small`,sx:{height:18,fontSize:`0.6rem`,backgroundColor:n,color:`#fff`,"& .MuiChip-label":{px:.5}}}),e.author&&(0,Y.jsx)(qe,{label:`@${e.author}`,size:`small`,sx:{height:16,fontSize:`0.55rem`,backgroundColor:`#9e9e9e`,color:`#fff`,"& .MuiChip-label":{px:.5}}})]}),secondary:(0,Y.jsx)(I,{variant:`body2`,color:`text.secondary`,sx:{fontSize:`0.75rem`,lineHeight:1.3,display:`-webkit-box`,WebkitLineClamp:2,WebkitBoxOrient:`vertical`,overflow:`hidden`},children:e.ability})})]}),(0,Y.jsx)(U,{})]},c)});return(0,Y.jsxs)(Y.Fragment,{children:[e&&!h&&(0,Y.jsx)(R,{onClick:re,sx:{position:`fixed`,top:0,left:0,right:0,bottom:0,zIndex:1e3,backgroundColor:`transparent`,display:e?`block`:`none`,"@media print":{display:`none`}}}),(0,Y.jsx)(R,{ref:x,sx:{position:`fixed`,...o?{top:Math.min(o.y,window.innerHeight-750),left:Math.min(o.x,window.innerWidth-420)}:{bottom:{xs:80,sm:100},right:{xs:16,sm:24}},zIndex:1001,display:e?`block`:`none`,"@media print":{display:`none`}},children:(0,Y.jsxs)(ne,{sx:{width:{xs:340,sm:400},height:{xs:`min(calc(100vh - 180px), 720px)`,sm:`min(calc(100vh - 120px), 830px)`},maxHeight:{xs:`calc(100vh - 5px)`,sm:`calc(100vh - 5px)`},boxShadow:6,borderRadius:2,display:`flex`,flexDirection:`column`,opacity:e?1:0,transition:_?`none`:`opacity 0.15s ease-out`,cursor:_?`grabbing`:`default`,userSelect:`none`,WebkitUserSelect:`none`,MozUserSelect:`none`,msUserSelect:`none`,"& *":{userSelect:_?`none !important`:`auto`,WebkitUserSelect:_?`none !important`:`auto`,MozUserSelect:_?`none !important`:`auto`,msUserSelect:_?`none !important`:`auto`}},children:[(0,Y.jsxs)(R,{className:`draggable-header`,onMouseDown:ae,sx:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,p:2,pb:1,borderBottom:`1px solid #e0e0e0`,cursor:_?`grabbing`:`grab`,"&:active":{cursor:`grabbing`}},children:[(0,Y.jsxs)(R,{sx:{display:`flex`,alignItems:`center`,gap:1},children:[(0,Y.jsx)($,{src:`/imgs/images/logo2.png`,alt:`BOTC`,sx:{height:24,objectFit:`contain`}}),(0,Y.jsx)(I,{variant:`h6`,sx:{fontSize:`1rem`},children:s(`characterLibrary`)})]}),(0,Y.jsxs)(R,{sx:{display:`flex`,gap:.5},children:[(0,Y.jsx)(B,{onClick:e=>{e.stopPropagation(),g(!h)},size:`small`,title:s(h?`library.unpin`:`library.pin`),sx:{color:h?Z.good:`text.secondary`,transition:`all 0.2s`,"&:hover":{color:Z.good,backgroundColor:`rgba(76, 175, 80, 0.08)`}},children:h?(0,Y.jsx)(Be,{}):(0,Y.jsx)(Le,{})}),(0,Y.jsx)(B,{onClick:e=>{e.stopPropagation(),j()},size:`small`,sx:{"&:hover":{color:Z.evil,backgroundColor:`rgba(244, 67, 54, 0.08)`}},children:(0,Y.jsx)(L,{})})]})]}),(0,Y.jsx)(R,{sx:{p:2,pb:1},children:(0,Y.jsx)(D,{fullWidth:!0,size:`small`,placeholder:s(`searchCharacters`),value:l,onChange:e=>u(e.target.value),inputRef:C,InputProps:{startAdornment:(0,Y.jsx)(Ze,{position:`start`,children:(0,Y.jsx)(Fe,{fontSize:`small`})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}})}),(0,Y.jsx)(R,{sx:{borderBottom:`1px solid #e0e0e0`,p:1},children:(0,Y.jsx)(R,{sx:{display:`flex`,flexWrap:`wrap`,gap:.5},children:O.map((e,t)=>(0,Y.jsxs)(R,{onClick:()=>f(t),sx:{display:`flex`,alignItems:`center`,gap:.5,px:1.5,py:.5,borderRadius:1,cursor:`pointer`,fontSize:`0.8rem`,backgroundColor:d===t?e.color:`transparent`,color:d===t?`#fff`:e.color,border:`1px solid ${e.color}`,transition:`all 0.2s`,"&:hover":{backgroundColor:d===t?e.color:`${e.color}15`}},children:[(0,Y.jsx)(R,{sx:{width:8,height:8,borderRadius:`50%`,backgroundColor:d===t?`#fff`:e.color}}),e.label,(0,Y.jsx)(qe,{label:e.key===`selected`?i.length:e.key===`all`?Object.values(E).flat().length:E[e.key]?.length||0,size:`small`,sx:{height:16,fontSize:`0.6rem`,backgroundColor:d===t?`rgba(255,255,255,0.3)`:`rgba(0,0,0,0.1)`,color:d===t?`#fff`:`inherit`,"& .MuiChip-label":{px:.5}}})]},e.key))})}),(0,Y.jsx)(_t,{sx:{flex:1,overflow:`auto`,p:0},children:p?(0,Y.jsxs)(R,{sx:{p:2},children:[(0,Y.jsxs)(R,{sx:{display:`flex`,justifyContent:`center`,alignItems:`center`,mb:3,gap:2},children:[(0,Y.jsx)(ie,{size:24}),(0,Y.jsx)(I,{variant:`body2`,color:`text.secondary`,children:s(`loading`)})]}),[1,2,3,4,5].map(e=>(0,Y.jsxs)(R,{sx:{display:`flex`,alignItems:`center`,p:1.5,mb:1,opacity:.3},children:[(0,Y.jsx)(R,{sx:{width:48,height:48,borderRadius:`50%`,backgroundColor:`grey.300`,mr:2}}),(0,Y.jsxs)(R,{sx:{flex:1},children:[(0,Y.jsx)(R,{sx:{height:16,backgroundColor:`grey.300`,borderRadius:1,mb:1,width:`60%`}}),(0,Y.jsx)(R,{sx:{height:12,backgroundColor:`grey.200`,borderRadius:1,width:`90%`}})]})]},e))]}):ee.length===0?(0,Y.jsx)(R,{sx:{display:`flex`,justifyContent:`center`,alignItems:`center`,height:200,color:`text.secondary`},children:(0,Y.jsx)(I,{variant:`body2`,children:s(l?`noSearchResults`:`noCharactersInTeam`)})}):(0,Y.jsx)(ut,{sx:{p:0},children:ee.map((e,t)=>{let n=k.key===`all`||k.key===`selected`?O.find(t=>t.key===e.team)?.color||Z.text.primary:k.color,r=i.some(t=>t.id===e.id);return(0,Y.jsx)(ce,{character:e,index:t,teamColor:n,showTeamChip:k.key===`all`||k.key===`selected`,isSelected:r,onAddCharacter:te,onRemoveCharacter:A},`${e.team}-${e.id}-${t}`)})})})]})})]})}),Vn=({open:e,title:t,titleImage:n,titleImageSize:r,useTitleImage:i,author:a,playerCount:o,onClose:s,onSave:c})=>{let{t:l,language:u}=X(),[d,f]=(0,G.useState)(i===void 0?!!n:i),[p,m]=(0,G.useState)({title:t||``,titleImage:n||``,author:a||``,playerCount:o||``}),[h,g]=(0,G.useState)(r||160),[_,v]=(0,G.useState)(!1),[y,b]=(0,G.useState)({xs:parseFloat(q.config.titleFontSize.xs),sm:parseFloat(q.config.titleFontSize.sm),md:parseFloat(q.config.titleFontSize.md)});(0,G.useEffect)(()=>{f(i===void 0?!!n:i),m({title:t||``,titleImage:n||``,author:a||``,playerCount:o||``}),g(r||160),b({xs:parseFloat(q.config.titleFontSize.xs),sm:parseFloat(q.config.titleFontSize.sm),md:parseFloat(q.config.titleFontSize.md)})},[e,t,n,r,i,a,o]);let x=(0,G.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),e.type===`dragenter`||e.type===`dragover`?v(!0):e.type===`dragleave`&&v(!1)},[]),S=(0,G.useCallback)(e=>{if(e.preventDefault(),e.stopPropagation(),v(!1),e.dataTransfer.files&&e.dataTransfer.files[0]){let t=e.dataTransfer.files[0];if(t.type.startsWith(`image/`)){let e=new FileReader;e.onload=e=>{let t=e.target?.result;m(e=>({...e,titleImage:t}))},e.readAsDataURL(t)}}},[]);return(0,Y.jsxs)(V,{open:e,onClose:s,maxWidth:`sm`,fullWidth:!0,children:[(0,Y.jsx)(H,{children:(0,Y.jsxs)(R,{display:`flex`,alignItems:`center`,justifyContent:`space-between`,children:[(0,Y.jsx)(I,{variant:`h6`,children:l(`title.editFirstPage`)}),(0,Y.jsx)(B,{onClick:s,size:`small`,children:(0,Y.jsx)(L,{})})]})}),(0,Y.jsx)(W,{dividers:!0,children:(0,Y.jsxs)(R,{sx:{display:`flex`,flexDirection:`column`,gap:2.5},children:[(0,Y.jsx)(Re,{control:(0,Y.jsx)(Ce,{checked:d,onChange:e=>f(e.target.checked)}),label:l(`title.useImage`)}),d?(0,Y.jsxs)(R,{children:[(0,Y.jsx)(I,{variant:`body2`,color:`text.secondary`,sx:{mb:1},children:l(`title.titleImage`)}),(0,Y.jsxs)(Ct,{variant:`outlined`,onDragEnter:x,onDragLeave:x,onDragOver:x,onDrop:S,sx:{p:3,textAlign:`center`,cursor:`pointer`,backgroundColor:_?`action.hover`:`background.paper`,borderStyle:`dashed`,borderWidth:2,borderColor:_?`primary.main`:`divider`,transition:`all 0.2s`},children:[(0,Y.jsx)(`input`,{type:`file`,accept:`image/*`,onChange:e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0];if(t.type.startsWith(`image/`)){let e=new FileReader;e.onload=e=>{let t=e.target?.result;m(e=>({...e,titleImage:t}))},e.readAsDataURL(t)}}},style:{display:`none`},id:`title-image-upload`}),(0,Y.jsx)(`label`,{htmlFor:`title-image-upload`,style:{cursor:`pointer`},children:p.titleImage?(0,Y.jsxs)(R,{children:[(0,Y.jsx)(`img`,{src:p.titleImage,alt:l(`preview`),style:{maxWidth:`100%`,maxHeight:200,objectFit:`contain`}}),(0,Y.jsx)(I,{variant:`body2`,color:`text.secondary`,sx:{mt:1},children:l(`input.reuploadImage`)})]}):(0,Y.jsxs)(R,{children:[(0,Y.jsx)(de,{sx:{fontSize:48,color:`text.secondary`,mb:1}}),(0,Y.jsx)(I,{variant:`body1`,color:`text.secondary`,children:l(`input.uploadImage`)})]})})]}),(0,Y.jsx)(D,{fullWidth:!0,label:l(`title.imageUrl`),value:p.titleImage,onChange:e=>m(t=>({...t,titleImage:e.target.value})),sx:{mt:2},size:`small`})]}):(0,Y.jsx)(D,{fullWidth:!0,label:l(`title.title`),value:p.title,onChange:e=>m(t=>({...t,title:e.target.value})),placeholder:l(`input.titlePlaceholder`)}),(0,Y.jsxs)(R,{children:[(0,Y.jsx)(I,{variant:`body2`,color:`text.secondary`,sx:{mb:1},children:l(d?`title.imageSize`:`title.fontSize`)}),d?(0,Y.jsxs)(R,{children:[(0,Y.jsxs)(I,{variant:`caption`,gutterBottom:!0,children:[l(`title.imageSize`),`: `,h,`px`]}),(0,Y.jsx)(P,{value:h,onChange:(e,t)=>g(t),min:80,max:300,step:10,valueLabelDisplay:`auto`})]}):(0,Y.jsxs)(R,{children:[(0,Y.jsxs)(I,{variant:`caption`,gutterBottom:!0,children:[l(`title.fontSizeMd`),`: `,y.md,`rem`]}),(0,Y.jsx)(P,{value:y.md,onChange:(e,t)=>b(e=>({...e,md:t})),min:2,max:7,step:.1,valueLabelDisplay:`auto`})]})]}),(0,Y.jsx)(D,{fullWidth:!0,label:l(`title.author`),value:p.author,onChange:e=>m(t=>({...t,author:e.target.value})),placeholder:l(`input.authorPlaceholder`),size:`small`}),(0,Y.jsx)(D,{fullWidth:!0,label:l(`title.playerCount`),value:p.playerCount,onChange:e=>m(t=>({...t,playerCount:e.target.value})),placeholder:l(`title.playerCount`),size:`small`})]})}),(0,Y.jsxs)(xt,{children:[(0,Y.jsx)(A,{onClick:s,children:l(`title.cancel`)}),(0,Y.jsx)(A,{onClick:()=>{let e=p.titleImage.startsWith(`data:image`),t={...p,titleImage:d?p.titleImage:e?void 0:p.titleImage,titleImageSize:h,useTitleImage:d};q.updateConfig({titleFontSize:{xs:`${y.xs}rem`,sm:`${y.sm}rem`,md:`${y.md}rem`}}),c(t),s()},variant:`contained`,children:l(`title.save`)})]})]})},Hn=({open:e,title:t,titleImage:n,fontSize:r,imageSize:i,useImage:a,defaultImageUrl:o,onClose:s,onSave:c})=>{let{t:l,language:u}=X(),[d,f]=(0,G.useState)(a===void 0?!!n:a),[p,m]=(0,G.useState)({title:t||``,titleImage:n||o||``}),[h,g]=(0,G.useState)(!1),[_,v]=(0,G.useState)(r||48),[y,b]=(0,G.useState)(i||200);(0,G.useEffect)(()=>{f(a===void 0?!!n:a),m({title:t||``,titleImage:n||o||``}),v(r||48),b(i||200)},[e,t,n,r,i,a,o]);let x=(0,G.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),e.type===`dragenter`||e.type===`dragover`?g(!0):e.type===`dragleave`&&g(!1)},[]),S=(0,G.useCallback)(e=>{if(e.preventDefault(),e.stopPropagation(),g(!1),e.dataTransfer.files&&e.dataTransfer.files[0]){let t=e.dataTransfer.files[0];if(t.type.startsWith(`image/`)){let e=new FileReader;e.onload=e=>{let t=e.target?.result;m(e=>({...e,titleImage:t}))},e.readAsDataURL(t)}}},[]);return(0,Y.jsxs)(V,{open:e,onClose:s,maxWidth:`sm`,fullWidth:!0,children:[(0,Y.jsx)(H,{children:(0,Y.jsxs)(R,{display:`flex`,alignItems:`center`,justifyContent:`space-between`,children:[(0,Y.jsx)(I,{variant:`h6`,children:l(`title.editSecondPage`)}),(0,Y.jsx)(B,{onClick:s,size:`small`,children:(0,Y.jsx)(L,{})})]})}),(0,Y.jsx)(W,{dividers:!0,children:(0,Y.jsxs)(R,{sx:{display:`flex`,flexDirection:`column`,gap:2.5},children:[(0,Y.jsx)(Re,{control:(0,Y.jsx)(Ce,{checked:d,onChange:e=>f(e.target.checked)}),label:l(`title.useImage`)}),d?(0,Y.jsxs)(R,{children:[(0,Y.jsx)(I,{variant:`body2`,color:`text.secondary`,sx:{mb:1},children:l(`title.titleImage`)}),(0,Y.jsxs)(Ct,{variant:`outlined`,onDragEnter:x,onDragLeave:x,onDragOver:x,onDrop:S,sx:{p:3,textAlign:`center`,cursor:`pointer`,backgroundColor:h?`action.hover`:`background.paper`,borderStyle:`dashed`,borderWidth:2,borderColor:h?`primary.main`:`divider`,transition:`all 0.2s`},children:[(0,Y.jsx)(`input`,{type:`file`,accept:`image/*`,onChange:e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0];if(t.type.startsWith(`image/`)){let e=new FileReader;e.onload=e=>{let t=e.target?.result;m(e=>({...e,titleImage:t}))},e.readAsDataURL(t)}}},style:{display:`none`},id:`second-page-title-image-upload`}),(0,Y.jsx)(`label`,{htmlFor:`second-page-title-image-upload`,style:{cursor:`pointer`},children:p.titleImage?(0,Y.jsxs)(R,{children:[(0,Y.jsx)(`img`,{src:p.titleImage,alt:l(`preview`),style:{maxWidth:`100%`,maxHeight:200,objectFit:`contain`}}),(0,Y.jsx)(I,{variant:`body2`,color:`text.secondary`,sx:{mt:1},children:l(`input.reuploadImage`)})]}):(0,Y.jsxs)(R,{children:[(0,Y.jsx)(de,{sx:{fontSize:48,color:`text.secondary`,mb:1}}),(0,Y.jsx)(I,{variant:`body1`,color:`text.secondary`,children:l(`input.uploadImage`)})]})})]}),(0,Y.jsx)(D,{fullWidth:!0,label:l(`title.imageUrl`),value:p.titleImage,onChange:e=>m(t=>({...t,titleImage:e.target.value})),sx:{mt:2},size:`small`})]}):(0,Y.jsx)(D,{fullWidth:!0,label:l(`title.titleText`),value:p.title,onChange:e=>m(t=>({...t,title:e.target.value})),placeholder:l(`input.titlePlaceholder`)}),(0,Y.jsxs)(R,{children:[(0,Y.jsx)(I,{variant:`body2`,color:`text.secondary`,sx:{mb:1},children:l(d?`title.imageSize`:`title.fontSize`)}),d?(0,Y.jsxs)(R,{children:[(0,Y.jsxs)(I,{variant:`caption`,gutterBottom:!0,children:[l(`title.imageSize`),`: `,y,`px`]}),(0,Y.jsx)(P,{value:y,onChange:(e,t)=>b(t),min:50,max:500,step:10,valueLabelDisplay:`auto`})]}):(0,Y.jsxs)(R,{children:[(0,Y.jsxs)(I,{variant:`caption`,gutterBottom:!0,children:[l(`title.fontSize`),`: `,(_/16).toFixed(1),`rem (`,_,`px)`]}),(0,Y.jsx)(P,{value:_,onChange:(e,t)=>v(t),min:32,max:128,step:4,valueLabelDisplay:`auto`})]})]})]})}),(0,Y.jsxs)(xt,{children:[(0,Y.jsx)(A,{onClick:s,children:l(`common.cancel`)}),(0,Y.jsx)(A,{onClick:()=>{let e=p.titleImage.startsWith(`data:image`),t={title:p.title,titleImage:d?p.titleImage:e?void 0:p.titleImage,fontSize:_,imageSize:y,useImage:d};c(t),s()},variant:`contained`,children:l(`common.save`)})]})]})},Un=C(({open:e,rule:t,onClose:n,onSave:r})=>{let{t:i,language:a}=X(),[o,s]=(0,G.useState)({title:``,content:``}),[c,l]=(0,G.useState)(``),[u,d]=(0,G.useState)(``),f=e=>e?typeof e==`string`?e:e[a]||e[`zh-CN`]||e.en||``:``;(0,G.useEffect)(()=>{if(t){s({title:f(t.title),content:f(t.content)});let e=t.content;if(e&&typeof e!=`string`)l(e[`zh-CN`]??``),d(e.en??``);else{let t=typeof e==`string`?e:``;l(t),d(t)}}},[t,a]);let p=()=>{if(t){let e=(e,t)=>{if(!t)return``;if(typeof e==`string`||!e)return a===`zh-CN`?t:{"zh-CN":e||``,en:t};let n={...e};return n[a]=t,n[`zh-CN`]&&!n.en?n[`zh-CN`]:n};r({...t,title:e(t.title,o.title),content:{"zh-CN":c,en:u}}),n()}},m=(e,t)=>{let n=Array.isArray(t)?t[0]:t;q.setSpecialRuleTitleFontSize(n,{persist:!1})},h=(e,t)=>{let n=Array.isArray(t)?t[0]:t;q.setSpecialRuleTitleFontSize(n,{persist:!0})},g=(e,t)=>{let n=Array.isArray(t)?t[0]:t;q.setSpecialRuleContentFontSize(n,{persist:!1})},_=(e,t)=>{let n=Array.isArray(t)?t[0]:t;q.setSpecialRuleContentFontSize(n,{persist:!0})},v=parseFloat(q.specialRuleTitleFontSize)||1,y=parseFloat(q.specialRuleContentFontSize)||.85;return(0,Y.jsxs)(V,{open:e,onClose:n,maxWidth:`md`,fullWidth:!0,children:[(0,Y.jsx)(H,{children:(0,Y.jsxs)(R,{display:`flex`,alignItems:`center`,justifyContent:`space-between`,children:[(0,Y.jsx)(I,{variant:`h6`,children:i(`specialRules.edit`)}),(0,Y.jsx)(B,{onClick:n,size:`small`,children:(0,Y.jsx)(L,{})})]})}),(0,Y.jsx)(W,{dividers:!0,children:(0,Y.jsxs)(R,{sx:{display:`flex`,flexDirection:`column`,gap:2.5},children:[(0,Y.jsx)(D,{fullWidth:!0,label:a===`zh-CN`?`标题`:`Title`,value:o.title,onChange:e=>s(t=>({...t,title:e.target.value})),placeholder:a===`zh-CN`?`请输入规则标题`:`Enter rule title`}),(0,Y.jsx)(D,{fullWidth:!0,label:a===`zh-CN`?`内容`:`Content`,value:o.content,onChange:e=>{let t=e.target.value;s(e=>({...e,content:t})),a===`zh-CN`?l(t):a===`en`&&d(t)},placeholder:a===`zh-CN`?`请输入规则内容`:`Enter rule content`,multiline:!0,rows:4}),(0,Y.jsxs)(R,{sx:{mt:3},children:[(0,Y.jsx)(I,{gutterBottom:!0,children:i(`ui.font.titleFontSize`)}),(0,Y.jsx)(P,{value:v,onChange:m,onChangeCommitted:h,min:.5,max:3,step:.1,valueLabelDisplay:`auto`,valueLabelFormat:e=>`${e}rem`}),(0,Y.jsx)(I,{gutterBottom:!0,sx:{mt:2},children:i(`ui.font.contentFontSize`)}),(0,Y.jsx)(P,{value:y,onChange:g,onChangeCommitted:_,min:.5,max:2,step:.05,valueLabelDisplay:`auto`,valueLabelFormat:e=>`${e}rem`})]})]})}),(0,Y.jsxs)(xt,{children:[(0,Y.jsx)(A,{onClick:n,children:i(`common.cancel`)}),(0,Y.jsx)(A,{onClick:p,variant:`contained`,children:i(`common.save`)})]})]})});const Wn=[{id:`seventh_chair`,title:{"zh-CN":`第七把交椅`,en:`The Seventh Chair`},content:{"zh-CN":`在游戏开始时，第七个座位是空的，但正常发角色。每局游戏限一次，说书人可以代表第七个座位发言，并可以参与提名。说书人决定在扮演第七个座位的角色时，该如何行动。`,en:`At game start, the 7th seat is empty but gets a role. Once per game, the Storyteller may speak and nominate for this seat, deciding how to act.`},description:{"zh-CN":`经典特殊规则，适合增加游戏趣味性`,en:`Classic special rule for added fun`}},{id:`god_in_play`,title:{"zh-CN":`上帝出席`,en:`God in Play`},content:{"zh-CN":`上帝宣布将会与一名玩家同阵营，如果处决说书人，那么该玩家的阵营落败。`,en:`God announces they will be on the same team as a player. If the Storyteller is executed, that player's team loses.`},description:{"zh-CN":`适用于娱乐剧本。`,en:`Just for fun scripts.`}},{id:`secret_objective`,title:{"zh-CN":`碟中谍`,en:`Mission Impossible`},content:{"zh-CN":`游戏开始前, 有两名玩家会收到他们的秘密任务。完成任务的玩家可以获得额外的投票权或特殊能力。`,en:`Each player gets a secret mission at game start. Completing it grants extra votes or abilities.`},description:{"zh-CN":`增加游戏的策略深度`,en:`Adds strategic depth`}}];function Gn(e){return Wn.find(t=>t.id===e)}function Kn(){return Wn}var qn=({open:e,onClose:t,onAddRule:n})=>{let{t:r,language:i}=X(),[a,o]=(0,G.useState)(null),[s,c]=(0,G.useState)(null),l=Kn(),u=()=>{a&&(n(a,s||void 0),t(),o(null),c(null))},d=()=>{t(),o(null),c(null)},f=[{type:`special_rule`,title:r(`specialRules.specialRule`),description:i===`zh-CN`?`类似"第七把交椅"的自定义卷轴规则`:`Custom scroll rules like "The Seventh Chair"`,icon:(0,Y.jsx)(Je,{sx:{fontSize:48,color:`primary.main`}}),example:i===`zh-CN`?`第七把交椅`:`The Seventh Chair`,disabled:!1},{type:`custom_jinx`,title:r(`customJinx.addTitle`),description:i===`zh-CN`?`添加自定义角色相克关系规则`:`Add custom character jinx relationships`,icon:(0,Y.jsx)(Ae,{sx:{fontSize:48,color:`primary.main`}}),example:i===`zh-CN`?`公主 & 食人族`:`Princess & Cannibal`,disabled:!1}];return(0,Y.jsxs)(V,{open:e,onClose:d,maxWidth:`md`,fullWidth:!0,children:[(0,Y.jsx)(H,{children:(0,Y.jsxs)(R,{display:`flex`,alignItems:`center`,justifyContent:`space-between`,children:[(0,Y.jsx)(I,{variant:`h6`,children:r(`specialRules.dialogTitle`)}),(0,Y.jsx)(B,{onClick:d,size:`small`,children:(0,Y.jsx)(L,{})})]})}),(0,Y.jsx)(W,{dividers:!0,children:!a||a===`custom_jinx`?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(I,{variant:`body2`,color:`text.secondary`,sx:{mb:3},children:r(`specialRules.selectType`)}),(0,Y.jsx)(R,{sx:{display:`grid`,gridTemplateColumns:{xs:`1fr`,sm:`1fr 1fr`},gap:2},children:f.map(e=>(0,Y.jsx)(ne,{variant:`outlined`,sx:{height:`100%`,borderColor:a===e.type?`primary.main`:`divider`,borderWidth:a===e.type?2:1,opacity:e.disabled?.5:1,pointerEvents:e.disabled?`none`:`auto`},children:(0,Y.jsx)(be,{onClick:()=>!e.disabled&&o(e.type),sx:{height:`100%`,p:2},disabled:e.disabled,children:(0,Y.jsx)(_t,{children:(0,Y.jsxs)(R,{sx:{display:`flex`,flexDirection:`column`,alignItems:`center`,gap:2},children:[e.icon,(0,Y.jsx)(I,{variant:`h6`,align:`center`,sx:{fontWeight:`bold`},children:e.title}),(0,Y.jsx)(I,{variant:`body2`,color:`text.secondary`,align:`center`,children:e.description}),(0,Y.jsx)(R,{sx:{mt:1,px:2,py:.5,backgroundColor:`action.hover`,borderRadius:1},children:(0,Y.jsxs)(I,{variant:`caption`,color:`text.secondary`,children:[i===`zh-CN`?`示例：`:`Example: `,e.example]})}),e.disabled&&(0,Y.jsx)(I,{variant:`caption`,color:`warning.main`,sx:{fontStyle:`italic`},children:i===`zh-CN`?`敬请期待`:`Coming Soon`})]})})})},e.type))})]}):(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(I,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:i===`zh-CN`?`选择一个模板开始，或直接添加空白规则`:`Choose a template or add a blank rule`}),(0,Y.jsxs)(ut,{children:[(0,Y.jsx)(Ge,{disablePadding:!0,children:(0,Y.jsx)(rt,{selected:s===null,onClick:()=>c(null),sx:{border:1,borderColor:s===null?`primary.main`:`divider`,borderRadius:1,mb:1},children:(0,Y.jsx)(ft,{primary:i===`zh-CN`?`空白规则`:`Blank Rule`,secondary:i===`zh-CN`?`从头开始创建自定义规则`:`Start from scratch`})})}),(0,Y.jsx)(U,{sx:{my:2}}),l.map(e=>(0,Y.jsx)(Ge,{disablePadding:!0,sx:{mb:1},children:(0,Y.jsxs)(rt,{selected:s===e.id,onClick:()=>c(e.id),sx:{border:1,borderColor:s===e.id?`primary.main`:`divider`,borderRadius:1,flexDirection:`column`,alignItems:`flex-start`,py:1.5},children:[(0,Y.jsx)(I,{variant:`subtitle1`,sx:{fontWeight:`bold`,mb:.5},children:e.title[i]||e.title[`zh-CN`]}),(0,Y.jsx)(I,{variant:`body2`,color:`text.secondary`,sx:{mb:1},children:e.content[i]||e.content[`zh-CN`]}),e.description&&(0,Y.jsx)(I,{variant:`caption`,color:`text.disabled`,sx:{fontStyle:`italic`},children:e.description[i]||e.description[`zh-CN`]})]})},e.id))]}),(0,Y.jsx)(A,{onClick:()=>o(null),sx:{mt:2},variant:`outlined`,fullWidth:!0,children:i===`zh-CN`?`← 返回选择类型`:`← Back to Type Selection`})]})}),(0,Y.jsxs)(xt,{children:[(0,Y.jsx)(A,{onClick:d,children:r(`specialRules.cancel`)}),(0,Y.jsx)(A,{onClick:u,variant:`contained`,disabled:!a,children:r(`specialRules.confirm`)})]})]})},Jn=C(({open:e,onClose:t,onSave:n,characters:r,editingJinx:i})=>{let{t:a,language:o}=X(),[s,c]=(0,G.useState)(null),[l,u]=(0,G.useState)(null),[d,f]=(0,G.useState)(``),[p,m]=(0,G.useState)(``);(0,G.useEffect)(()=>{e&&(i?(c(i.characterA),u(i.characterB),typeof i.description==`string`?f(i.description):f(i.description[o]||i.description[`zh-CN`]||``)):(c(null),u(null),f(``)),m(``))},[e,i,o]);let h=()=>{if(!s||!l){m(a(`customJinx.selectCharactersError`));return}if(s.id===l.id){m(a(`customJinx.sameCharacterError`));return}if(!d.trim()){m(a(`customJinx.descriptionError`));return}n(s,l,d.trim()),g()},g=()=>{c(null),u(null),f(``),m(``),t()};return(0,Y.jsxs)(V,{open:e,onClose:g,maxWidth:`md`,fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[(0,Y.jsx)(H,{children:a(i?`customJinx.editTitle`:`customJinx.addTitle`)}),(0,Y.jsx)(W,{children:(0,Y.jsxs)(R,{sx:{display:`flex`,flexDirection:`column`,gap:3,pt:1},children:[p&&(0,Y.jsx)(fe,{severity:`error`,onClose:()=>m(``),children:p}),(0,Y.jsxs)(R,{children:[(0,Y.jsx)(I,{variant:`subtitle2`,gutterBottom:!0,children:a(`customJinx.characterA`)}),(0,Y.jsx)(E,{value:s,onChange:(e,t)=>c(t),options:r,getOptionLabel:e=>e.name,renderOption:(e,t)=>(0,Y.jsxs)(R,{component:`li`,...e,sx:{display:`flex`,alignItems:`center`,gap:1},children:[(0,Y.jsx)($,{component:`avatar`,src:t.image,alt:t.name,sx:{width:32,height:32}}),(0,Y.jsx)(I,{children:t.name})]}),renderInput:e=>(0,Y.jsx)(D,{...e,placeholder:a(`customJinx.selectCharacter`),InputProps:{...e.InputProps,startAdornment:s&&(0,Y.jsx)($,{component:`avatar`,src:s.image,alt:s.name,sx:{width:32,height:32,ml:1}})}})})]}),(0,Y.jsxs)(R,{children:[(0,Y.jsx)(I,{variant:`subtitle2`,gutterBottom:!0,children:a(`customJinx.characterB`)}),(0,Y.jsx)(E,{value:l,onChange:(e,t)=>u(t),options:r,getOptionLabel:e=>e.name,renderOption:(e,t)=>(0,Y.jsxs)(R,{component:`li`,...e,sx:{display:`flex`,alignItems:`center`,gap:1},children:[(0,Y.jsx)($,{component:`avatar`,src:t.image,alt:t.name,sx:{width:32,height:32}}),(0,Y.jsx)(I,{children:t.name})]}),renderInput:e=>(0,Y.jsx)(D,{...e,placeholder:a(`customJinx.selectCharacter`),InputProps:{...e.InputProps,startAdornment:l&&(0,Y.jsx)($,{component:`avatar`,src:l.image,alt:l.name,sx:{width:32,height:32,ml:1}})}})})]}),(0,Y.jsxs)(R,{children:[(0,Y.jsx)(I,{variant:`subtitle2`,gutterBottom:!0,children:a(`customJinx.description`)}),(0,Y.jsx)(D,{fullWidth:!0,multiline:!0,rows:4,value:d,onChange:e=>f(e.target.value),placeholder:a(`customJinx.descriptionPlaceholder`)})]})]})}),(0,Y.jsxs)(xt,{sx:{px:3,pb:2},children:[(0,Y.jsx)(A,{onClick:g,children:a(`common.cancel`)}),(0,Y.jsx)(A,{onClick:h,variant:`contained`,children:a(`common.save`)})]})]})});function Yn(e,t,n=`zh-CN`,r=!1){for(let[n,r]of Object.entries(t))if(r.name===e)return n;if(!r)if(n===`en`){let t=Yn(e,Q,`zh-CN`,!0);if(t){let e=un(t,`en`);return e in Rn?e:null}}else{let t=Yn(e,Rn,`en`,!0);if(t){let e=un(t,`zh-CN`);return e in Q?e:null}}return null}function Xn(e,t,n,r=!1){let i=t.firstNight,a=t.otherNight;if(r){let{dictKey:e,found:r}=Zn(t,n,n===`en`?Rn:Q,!0);if(r){let t=un(e,`zh-CN`),n=0,r=0;return Q[t]?(n=Q[t].firstNight||0,r=Q[t].otherNight||0):Q[e]&&(n=Q[e].firstNight||0,r=Q[e].otherNight||0),{firstNight:n,otherNight:r}}else return{firstNight:i===void 0?0:i||0,otherNight:a===void 0?0:a||0}}let o=un(e,`zh-CN`),s=0,c=0;return Q[o]?(s=Q[o].firstNight||0,c=Q[o].otherNight||0):Q[e]&&(s=Q[e].firstNight||0,c=Q[e].otherNight||0),{firstNight:i===void 0?s:i||0,otherNight:a===void 0?c:a||0}}function Zn(e,t,n,r=!1){if(t===`en`){let r=e.id;if(r in n)return{dictKey:r,found:!0};let i=un(e.id,t);if(i in n)return{dictKey:i,found:!0};if(e.name&&typeof e.name==`string`){let t=Yn(e.name,n,`en`);if(t)return{dictKey:t,found:!0};let r=Yn(e.name,Q,`zh-CN`);if(r){let e=un(r,`en`);if(e in n)return{dictKey:e,found:!0};if(r in n)return{dictKey:r,found:!0}}}return{dictKey:e.id,found:!1}}let i=e.id;if(i in n)return{dictKey:i,found:!0};let a=un(e.id,t);if(a in n)return{dictKey:a,found:!0};if(e.name&&typeof e.name==`string`){let r=Yn(e.name,n,t);if(r)return{dictKey:r,found:!0}}return{dictKey:e.id,found:!1}}function Qn(e,t=`zh-CN`){let n=JSON.parse(e);if(!Array.isArray(n))throw Error(`JSON 必须是数组格式`);let r=t===`en`?Rn:Q,i=K.config.officialIdParseMode,a={title:`自定义剧本`,titleImage:void 0,author:``,playerCount:void 0,characters:{townsfolk:[],outsider:[],minion:[],demon:[],fabled:[],traveler:[],loric:[]},firstnight:[{image:`/imgs/icons/75px-Dusk.png`,index:0},{image:`/imgs/icons/75px-Mi.png`,index:1e-4},{image:`/imgs/icons/75px-Di.png`,index:2e-4}],othernight:[{image:`/imgs/icons/75px-Dusk.png`,index:0}],jinx:{},all:[],specialRules:[],secondPageRules:[]},o=[],s=[];for(let e of n){if(typeof e==`string`&&(e={id:e}),e.id===`_meta`){a.title=e.name||`自定义剧本`,a.titleEn=e.titleEn||e.title_en||e.nameEn||e.name_en,a.titleImage=e.titleImage||e.logo,a.titleImageSize=e.titleImageSize,a.useTitleImage=e.use_title_image===!1?!1:!!a.titleImage,a.author=e.author||``,a.playerCount=e.playerCount,a.secondPageTitle=e.second_page_title,a.secondPageTitleText=e.second_page_title_text,a.secondPageTitleImage=e.second_page_title_image,a.secondPageTitleFontSize=e.second_page_title_font_size,a.secondPageTitleImageSize=e.second_page_title_image_size,a.useSecondPageTitleImage=e.use_second_page_title_image===!1?!1:!!a.secondPageTitleImage,a.secondPagePplTable1=e.second_page_ppl_table1,a.secondPagePplTable2=e.second_page_ppl_table2,e.second_page_order&&typeof e.second_page_order==`string`&&(a.secondPageOrder=e.second_page_order.split(` `).filter(e=>e.length>0)),e.state&&Array.isArray(e.state)&&e.state.forEach((e,t)=>{o.push({id:`_meta_state_${t}`,title:e.stateName,content:e.stateDescription,sourceType:`state`,sourceIndex:t})}),e.status&&Array.isArray(e.status)&&e.status.forEach((e,t)=>{o.push({id:`_meta_status_${t}`,title:e.name,content:e.skill,sourceType:`status`,sourceIndex:t})});continue}if(e.team===`special_rule`){o.push({id:e.id,title:e.title||e.name,content:e.content||e.ability,rules:e.rules,sourceType:`special_rule`,sourceIndex:o.length});continue}let n=e,c=null,{dictKey:l,found:u}=Zn(e,t,r,i);if(u?(c=l,i?(n={...r[l]},n.id=e.id,e.team&&(n.team=e.team)):e.image||(n={...r[l],...e},n.id=e.id)):console.warn(`角色 "${e.id}" (name: "${e.name||`N/A`}") 在字典中未找到，使用JSON自定义数据`),c&&(n._officialId=c),e.team===`a jinxed`){s.push(e);continue}if(n.team){if(a.all.some(e=>e.id===n.id)){console.warn(`跳过重复的角色ID: ${n.id}`);continue}if(a.characters[n.team]||(a.characters[n.team]=[]),a.characters[n.team].some(e=>e.id===n.id)){console.warn(`跳过团队 ${n.team} 中重复的角色ID: ${n.id}`);continue}let o=Xn(n.id,e,t,i),s;if(i)s=u?{...r[l],id:n.id,team:e.team||r[l].team,firstNight:0,otherNight:0}:{...n,firstNight:0,otherNight:0};else if(u){let t=r[l];s={id:n.id,name:e.name!==void 0&&e.name!==null&&e.name!==``?e.name:t.name,ability:e.ability!==void 0&&e.ability!==null&&e.ability!==``?e.ability:t.ability,image:e.image!==void 0&&e.image!==null&&e.image!==``?e.image:t.image,team:e.team!==void 0&&e.team!==null?e.team:t.team,teamColor:e.teamColor===void 0?t.teamColor:e.teamColor,firstNightReminder:e.firstNightReminder===void 0?t.firstNightReminder:e.firstNightReminder,otherNightReminder:e.otherNightReminder===void 0?t.otherNightReminder:e.otherNightReminder,reminders:e.reminders===void 0?t.reminders:e.reminders,remindersGlobal:e.remindersGlobal===void 0?t.remindersGlobal:e.remindersGlobal,setup:e.setup===void 0?t.setup:e.setup,firstNight:0,otherNight:0}}else s={...n,firstNight:0,otherNight:0};c&&(s._officialId=c),a.all.push(s),a.characters[s.team].push({name:s.name,ability:s.ability,image:s.image,id:s.id,team:s.team,teamColor:s.teamColor,firstNight:o.firstNight,otherNight:o.otherNight,firstNightReminder:s.firstNightReminder,otherNightReminder:s.otherNightReminder,reminders:s.reminders,remindersGlobal:s.remindersGlobal,setup:s.setup}),[`townsfolk`,`outsider`,`minion`,`demon`].includes(s.team)&&(o.firstNight&&o.firstNight>0&&a.firstnight.push({image:s.image,index:o.firstNight}),o.otherNight&&o.otherNight>0&&a.othernight.push({image:s.image,index:o.otherNight}))}}for(let e of s){let n=e=>{let n=a.all.find(t=>t.id===e);if(n||(n=a.all.find(t=>t._officialId===e),n))return n.name;let i=r[e];if(i)return i.name;let o=un(e,t),s=r[o];return s?s.name:null};if(e.jinx&&Array.isArray(e.jinx)){let t=n(e.id);if(!t){console.warn(`相克规则中的主角色 "${e.id}" 未找到，跳过该相克关系`);continue}e.jinx.forEach(e=>{let r=n(e.id);if(!r){console.warn(`相克规则中的目标角色 "${e.id}" 未找到，跳过该相克关系`);return}let i=e.reason||e.reasonEn||``,o=e.display!==!1;a.jinx[t]||(a.jinx[t]={}),a.jinx[t][r]={reason:i,display:o,isOfficial:!1},a.jinx[r]||(a.jinx[r]={}),a.jinx[r][t]={reason:i,display:o,isOfficial:!1}})}else if(e.name&&typeof e.name==`string`&&e.name.includes(`&`)){let[t,n]=e.name.split(`&`),r=e.ability||``;a.jinx[t]||(a.jinx[t]={}),a.jinx[t][n]={reason:r,display:!0,isOfficial:!1},a.jinx[n]||(a.jinx[n]={}),a.jinx[n][t]={reason:r,display:!0,isOfficial:!1}}}let c=o.filter((e,t,n)=>t===n.findIndex(t=>t.title===e.title));if(c.length>0){let e=c[0],t={id:e.id||`_meta_${e.sourceType}_${e.sourceIndex}`,title:e.title,content:e.content,rules:e.rules,isState:e.sourceType!==`special_rule`,sourceType:e.sourceType,sourceIndex:e.sourceIndex};a.specialRules.push(t),a.secondPageRules?.push({...t})}if(c.length>1)for(let e=1;e<c.length;e++){let t=c[e];a.secondPageRules?.push({id:t.id||`_meta_${t.sourceType}_${t.sourceIndex}`,title:t.title,content:t.content,rules:t.rules,isState:t.sourceType!==`special_rule`,sourceType:t.sourceType,sourceIndex:t.sourceIndex})}for(let e of a.all)for(let n of a.all)if(e.id!==n.id){let r,i;if(t===`en`?(r=e._officialId||e.id,i=n._officialId||n.id):(r=e.name,i=n.name),kn(r,i,t)){let o=e.name,s=n.name;a.jinx[o]||(a.jinx[o]={}),a.jinx[o][s]||(a.jinx[o][s]={reason:An(r,i,t),display:!0,isOfficial:!0})}}return a.firstnight.sort((e,t)=>e.index-t.index),a.othernight.sort((e,t)=>e.index-t.index),a}function $n(e,t=`zh-CN`){if(!e)return``;let n=`未正常生效.选择或影响.死于处决.恶魔角色.爪牙角色.邪恶玩家.邪恶阵营.邪恶角色."是恶魔".负面能力.小恶魔.小怪宝.维齐尔.被处决.杀死.死亡.邪恶.落败.中毒.爪牙.恶魔.处决.错误.自杀.暴乱.军团.代价.伪装.作弊`.split(`.`),r=`外来者角色.善良玩家.善良阵营.善良角色.镇民角色.恢复健康.起死回生.落难少女.有且只有.有多准确.守夜人.外来者.农夫.书生.疯子.国王.醉酒.复活.反刍.镇民.善良.正确.存活.获胜.大法官.暗影筹码.梭哈`.split(`.`),i=[`非旅行者`,`旅行者`,`疯狂`],a=[`not work correctly`,`not functioning`,`affect or choose`,`evil`,`negative ability`,`executed`,`execution`,`Demon`,`Minion`,`Evil`,`poisoned`,`poison`,`Vizier`,`false`],o=[`drunk`,`good`,`Tea Lady`,`Outsider`,`Good`,`Townsfolk`,`healthy`,`sober`,`alive`,`lives`,`survive`,`resurrect`,`regurgitate`],s=[`Travellers`,`Traveler`,`mad`,`madness`],c=t===`zh-CN`?n:a,l=t===`zh-CN`?r:o,u=t===`zh-CN`?i:s,d=e=>e.replace(/[.*+?^${}()|[\]\\]/g,`\\$&`);t===`en`&&(c=[...c].sort((e,t)=>t.length-e.length),l=[...l].sort((e,t)=>t.length-e.length),u=[...u].sort((e,t)=>t.length-e.length));let f=e;return t===`en`?(c.forEach(e=>{let t=d(e),n=RegExp(`\\b${t}\\b`,`gi`);f=f.replace(n,e=>`<span style="color: ${Z.evil}; font-weight: 700;">${e}</span>`)}),l.forEach(e=>{let t=d(e),n=RegExp(`\\b${t}\\b`,`gi`);f=f.replace(n,e=>`<span style="color: ${Z.good}; font-weight: 700;">${e}</span>`)}),u.forEach(e=>{let t=d(e),n=RegExp(`\\b${t}\\b`,`gi`);f=f.replace(n,e=>`<span style="color: ${Z.purple}; font-weight: 700;">${e}</span>`)})):(c.forEach(e=>{f=f.replaceAll(e,`<span style="color: ${Z.evil}; font-weight: 700;">${e}</span>`)}),l.forEach(e=>{f=f.replaceAll(e,`<span style="color: ${Z.good}; font-weight: 700;">${e}</span>`)}),u.forEach(e=>{f=f.replaceAll(e,`<span style="color: ${Z.purple}; font-weight: 700;">${e}</span>`)})),f}var er=C(({character:e,jinxInfo:n,allCharacters:r,onUpdate:i,onEdit:a,onDelete:o,onReplace:s,readOnly:c=!1})=>{let{t:l}=X(),d=Se(),f=St(d.breakpoints.down(`md`)),[p,m]=(0,G.useState)(null),h=c,g=q.config.characterCard,_=e.team===`fabled`||e.team===`loric`,v={card:{paddingX:f?g.cardPaddingX*.5:g.cardPaddingX,paddingY:f?g.cardPaddingY*.5:g.cardPaddingY,borderRadius:g.cardBorderRadius,gap:f?g.cardGap*.6:g.cardGap},avatar:_?{width:f?g.fabledIconWidthMd*.65:g.fabledIconWidthMd,height:f?g.fabledIconHeightMd*.65:g.fabledIconHeightMd,borderRadius:g.fabledIconBorderRadius}:{width:f?g.avatarWidthMd*.65:g.avatarWidthMd,height:f?g.avatarHeightMd*.65:g.avatarHeightMd,borderRadius:g.avatarBorderRadius},textArea:{gap:f?g.textAreaGap*.6:g.textAreaGap},name:{fontSize:f?`0.95rem`:g.nameFontSizeMd,fontWeight:g.nameFontWeight,lineHeight:g.nameLineHeight},description:{fontSize:f?`0.8rem`:g.descriptionFontSizeMd,lineHeight:g.descriptionLineHeight},jinx:{gap:f?g.jinxGap*.6:g.jinxGap,padding:f?g.jinxPadding*.6:g.jinxPadding,backgroundColor:`#EDE4D5`,borderRadius:g.jinxBorderRadius,iconGap:f?g.jinxIconGap*.6:g.jinxIconGap,icon:{width:f?g.jinxIconWidthMd*.65:g.jinxIconWidthMd,height:f?g.jinxIconHeightMd*.65:g.jinxIconHeightMd,borderRadius:g.jinxIconBorderRadius},text:{fontSize:f?`0.75rem`:g.jinxTextFontSizeMd,lineHeight:g.jinxTextLineHeight,fontStyle:`italic`}}},y=(()=>{switch(e.team){case`townsfolk`:case`outsider`:return Z.good;case`minion`:case`demon`:return Z.evil;case`fabled`:return Z.fabled;case`traveler`:return Z.purple;default:return hn(e.team,e.teamColor)}})(),{attributes:b,listeners:x,setNodeRef:S,transform:C,transition:E,isDragging:D}=t({id:e.id}),O={transform:u.Transform.toString(C),transition:E,opacity:D?.5:1},k=t=>{t.stopPropagation(),!h&&a&&a(e)},ee=e=>{e.preventDefault(),e.stopPropagation(),m(p===null?{mouseX:e.clientX+2,mouseY:e.clientY-6}:null)},A=()=>{m(null)},j=()=>{A(),!h&&a&&a(e)},ne=()=>{A(),!h&&o&&o(e)},re=async()=>{A();try{let t=JSON.stringify(e,null,2);await navigator.clipboard.writeText(t),Ht(l(`character.jsonCopied`))}catch(e){console.error(`Failed to copy character JSON:`,e),Ut(l(`character.jsonCopyFailed`))}},ie=()=>{if(h){A();return}s&&p&&s(e,{x:p.mouseX,y:p.mouseY}),A()};return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(R,{sx:{position:`relative`,width:`100%`,...h?{}:{"&:hover .action-buttons":{opacity:1,pointerEvents:`auto`}}},children:[!h&&(0,Y.jsxs)(R,{className:`action-buttons`,sx:{position:`absolute`,top:f?4:8,right:f?4:8,zIndex:20,display:`flex`,gap:f?.5:1,opacity:0,pointerEvents:`none`,transition:`opacity 0.2s`},children:[(0,Y.jsx)(B,{onClick:t=>{t.stopPropagation(),a&&a(e)},sx:{backgroundColor:`rgba(255, 255, 255, 0.9)`,"&:hover":{backgroundColor:`rgba(255, 255, 255, 1)`},width:f?28:32,height:f?28:32},size:`small`,children:(0,Y.jsx)(te,{sx:{fontSize:f?16:20}})}),(0,Y.jsx)(B,{onClick:t=>{t.stopPropagation(),o&&o(e)},sx:{backgroundColor:`rgba(255, 255, 255, 0.9)`,"&:hover":{backgroundColor:`rgba(255, 255, 255, 1)`},width:f?28:32,height:f?28:32},size:`small`,children:(0,Y.jsx)(T,{sx:{fontSize:f?16:20}})})]}),(0,Y.jsx)(Ct,{ref:S,style:O,...b,...x,elevation:D?6:0,onDoubleClick:k,onContextMenu:ee,sx:{display:`flex`,flexDirection:`column`,width:`100%`,px:v.card.paddingX,py:v.card.paddingY,backgroundColor:`transparent`,borderRadius:v.card.borderRadius,transition:`all 0.2s`,cursor:D?`grabbing`:`grab`,userSelect:`none`,WebkitUserSelect:`none`,MozUserSelect:`none`,msUserSelect:`none`,zIndex:10,"&:hover":{backgroundColor:`rgba(0, 0, 0, 0.02)`,boxShadow:`0 2px 8px rgba(0, 0, 0, 0.1)`}},children:(0,Y.jsxs)(R,{sx:{width:`100%`,display:`flex`,gap:v.card.gap,alignItems:`center`,zIndex:10},children:[(0,Y.jsx)($,{src:e.image,alt:e.name,sx:{width:v.avatar.width,height:v.avatar.height,borderRadius:v.avatar.borderRadius,objectFit:`cover`,flexShrink:0,userDrag:`none`,WebkitUserDrag:`none`,pointerEvents:`none`}}),(0,Y.jsxs)(R,{sx:{flex:1,minWidth:0,display:`flex`,flexDirection:`column`,gap:v.textArea.gap},children:[(0,Y.jsx)(I,{variant:`h6`,sx:{fontWeight:v.name.fontWeight,fontSize:v.name.fontSize,color:y,lineHeight:v.name.lineHeight,fontFamily:q.characterNameFont},children:e.name}),(0,Y.jsx)(I,{variant:`body2`,sx:{fontSize:v.description.fontSize,lineHeight:v.description.lineHeight,color:Z.text.tertiary,fontFamily:q.characterAbilityFont},dangerouslySetInnerHTML:{__html:$n(e.ability,K.language)}}),n&&(()=>{let e=Object.entries(n).filter(([e,t])=>t.display!==!1);return e.length>0&&(q.config.enableTwoPageMode?(0,Y.jsxs)(R,{sx:{display:`flex`,alignItems:`center`,gap:v.jinx.iconGap,flexWrap:`wrap`},children:[(0,Y.jsx)($,{src:`https://wiki.bloodontheclocktower.com/images/8/86/Icon_djinn.png`,alt:`Jinx Icon`,sx:{width:v.jinx.icon.width,height:v.jinx.icon.height,borderRadius:v.jinx.icon.borderRadius,flexShrink:0,userDrag:`none`,WebkitUserDrag:`none`,pointerEvents:`none`}}),e.map(([e,t])=>{let n=r?.find(t=>t.name===e);return n?(0,Y.jsx)($,{src:n.image,alt:e,sx:{width:v.jinx.icon.width,height:v.jinx.icon.height,borderRadius:v.jinx.icon.borderRadius,flexShrink:0,userDrag:`none`,WebkitUserDrag:`none`,pointerEvents:`none`}},e):null})]}):(0,Y.jsx)(R,{sx:{display:`flex`,flexDirection:`column`,gap:v.jinx.gap},children:e.map(([e,t])=>{let n=r?.find(t=>t.name===e);return(0,Y.jsxs)(R,{sx:{display:`flex`,alignItems:`center`,borderRadius:1.7,gap:v.jinx.iconGap,p:v.jinx.padding,backgroundColor:v.jinx.backgroundColor},children:[n&&(0,Y.jsx)($,{src:n.image,alt:e,sx:{width:v.jinx.icon.width,height:v.jinx.icon.height,borderRadius:v.jinx.icon.borderRadius,flexShrink:0,userDrag:`none`,WebkitUserDrag:`none`,pointerEvents:`none`}}),(0,Y.jsxs)(I,{variant:`caption`,sx:{fontSize:v.jinx.text.fontSize,color:Z.text.primary,lineHeight:v.jinx.text.lineHeight,fontStyle:`${v.jinx.text.fontStyle} !important`,flex:1},children:[l(`jinx.rule`),`: `,t.reason]})]},e)})}))})()]})]})})]}),(0,Y.jsxs)(ze,{open:p!==null,onClose:A,anchorReference:`anchorPosition`,anchorPosition:p===null?void 0:{top:p.mouseY,left:p.mouseX},disableScrollLock:!0,slotProps:{paper:{elevation:8,sx:{minWidth:180,borderRadius:2,overflow:`hidden`,mt:.5,"& .MuiList-root":{padding:`6px`}}}},TransitionProps:{timeout:200},children:[(0,Y.jsxs)(w,{onClick:j,disabled:h,sx:{borderRadius:1,mx:.5,px:1.5,py:1,"&:hover":{backgroundColor:`action.hover`}},children:[(0,Y.jsx)(tt,{sx:{minWidth:36},children:(0,Y.jsx)(te,{fontSize:`small`,sx:{color:`primary.main`}})}),(0,Y.jsx)(ft,{primary:l(`character.edit`),primaryTypographyProps:{fontSize:`0.9rem`}})]}),(0,Y.jsxs)(w,{onClick:re,sx:{borderRadius:1,mx:.5,px:1.5,py:1,"&:hover":{backgroundColor:`action.hover`}},children:[(0,Y.jsx)(tt,{sx:{minWidth:36},children:(0,Y.jsx)(Ke,{fontSize:`small`,sx:{color:`success.main`}})}),(0,Y.jsx)(ft,{primary:l(`character.copyJson`),primaryTypographyProps:{fontSize:`0.9rem`}})]}),(0,Y.jsxs)(w,{onClick:ie,disabled:h,sx:{borderRadius:1,mx:.5,px:1.5,py:1,"&:hover":{backgroundColor:`action.hover`}},children:[(0,Y.jsx)(tt,{sx:{minWidth:36},children:(0,Y.jsx)(Me,{fontSize:`small`,sx:{color:`warning.main`}})}),(0,Y.jsx)(ft,{primary:l(`character.replace`),primaryTypographyProps:{fontSize:`0.9rem`}})]}),(0,Y.jsxs)(w,{onClick:ne,disabled:h,sx:{borderRadius:1,mx:.5,px:1.5,py:1,"&:hover":{backgroundColor:`action.hover`}},children:[(0,Y.jsx)(tt,{sx:{minWidth:36},children:(0,Y.jsx)(T,{fontSize:`small`,sx:{color:`error.main`}})}),(0,Y.jsx)(ft,{primary:l(`character.delete`),primaryTypographyProps:{fontSize:`0.9rem`}})]})]})]})}),tr=C(({team:e,characters:t,script:a,onReorder:l,onUpdateCharacter:u,onEditCharacter:h,onDeleteCharacter:g,onReplaceCharacter:_,disableDrag:v=!1,readOnly:y=!1})=>{let{t:b}=X(),x=K.language===`zh-CN`,S=i(r(s,{activationConstraint:v?{distance:999999}:{distance:5}}),r(n,{coordinateGetter:o}));if(t.length===0)return null;let C=[`townsfolk`,`outsider`,`minion`,`demon`,`fabled`,`loric`,`traveler`].includes(e),w=!C||e===`fabled`||e===`loric`||e===`traveler`?``:b(e===`townsfolk`||e===`outsider`?`team.good`:`team.evil`),T=t.length>0?t[0].teamColor:void 0,E=e===`fabled`?Z.fabled:e===`loric`?Z.loric:e===`traveler`?Z.purple:e===`townsfolk`||e===`outsider`?Z.good:e===`minion`||e===`demon`?Z.evil:hn(e,T),D=e=>({townsfolk:b(`team.townsfolk`),outsider:b(`team.outsider`),minion:b(`team.minion`),demon:b(`team.demon`),fabled:b(`team.fabled`),loric:b(`team.loric`),traveler:b(`team.traveler`)})[e]||gn(e);return(0,Y.jsxs)(R,{sx:{backgroundColor:`transparent`},children:[(0,Y.jsxs)(R,{sx:{display:`flex`,alignItems:`center`},children:[(0,Y.jsx)(I,{variant:`h5`,sx:{fontFamily:q.teamDividerFont,fontWeight:`bold`,fontSize:x?{xs:`1rem`,sm:`1.1rem`,md:`1.4rem`}:{xs:`1.1rem`,sm:`1.2rem`,md:`1.6rem`}},children:!C||e===`fabled`||e===`loric`||e===`traveler`?(0,Y.jsx)(`span`,{style:{color:hn(e,T)},children:D(e)}):(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(`span`,{style:{color:E},children:w}),`·`,(0,Y.jsx)(`span`,{style:{color:pn[e]},children:D(e)})]})}),(0,Y.jsx)(U,{sx:{flex:1,ml:1.5,borderColor:Z.gray,borderWidth:1}})]}),(0,Y.jsx)(R,{sx:{px:2},children:(0,Y.jsx)(f,{sensors:S,collisionDetection:m,onDragEnd:n=>{if(v)return;let{active:r,over:i}=n;if(i&&r.id!==i.id){let n=t.findIndex(e=>e.id===r.id),a=t.findIndex(e=>e.id===i.id),o=c(t,n,a).map(e=>e.id);l(e,o)}},children:(0,Y.jsx)(R,{children:(0,Y.jsx)(p,{items:t.map(e=>e.id),strategy:d,children:t.length===1?(0,Y.jsx)(R,{sx:{display:`flex`,justifyContent:`center`,px:{xs:0,sm:2,md:4}},children:(0,Y.jsx)(R,{sx:{width:{xs:`100%`,sm:`50%`},display:`flex`},children:(0,Y.jsx)(er,{character:t[0],jinxInfo:a.jinx[t[0].name],allCharacters:a.all,onUpdate:u,onEdit:h,onDelete:g,onReplace:_,readOnly:y})})}):(0,Y.jsxs)(R,{sx:{display:`flex`,gap:1,flexDirection:{xs:`column`,sm:`row`}},children:[(0,Y.jsx)(R,{sx:{flex:1,display:`flex`,flexDirection:`column`,justifyContent:`space-between`},children:t.slice(0,Math.ceil(t.length/2)).map((e,t,n)=>(0,Y.jsx)(R,{sx:{flex:1,display:`flex`,mb:t<n.length-1?1:0},children:(0,Y.jsx)(er,{character:e,jinxInfo:a.jinx[e.name],allCharacters:a.all,onUpdate:u,onEdit:h,onDelete:g,onReplace:_,readOnly:y})},e.id))}),(0,Y.jsx)(R,{sx:{flex:1,display:`flex`,flexDirection:`column`,justifyContent:`space-between`},children:t.slice(Math.ceil(t.length/2)).map((e,t,n)=>(0,Y.jsx)(R,{sx:{flex:1,display:`flex`,mb:t<n.length-1?1:0},children:(0,Y.jsx)(er,{character:e,jinxInfo:a.jinx[e.name],allCharacters:a.all,onUpdate:u,onEdit:h,onDelete:g,onReplace:_,readOnly:y})},e.id))})]})})})})})]})});function nr({action:e,index:n,isMobile:r,disabled:i=!1}){let{attributes:a,listeners:o,setNodeRef:s,transform:c,transition:l,isDragging:d}=t({id:e.image+n,disabled:i}),f=c?{...c,x:r?c.x:0}:null,p={transform:u.Transform.toString(f),transition:l,opacity:d?.5:1};return(0,Y.jsx)(R,{ref:s,style:p,...a,...i?{}:o,sx:{display:`flex`,justifyContent:`center`,alignItems:`center`,cursor:i?`default`:`grab`,touchAction:i?`auto`:`pan-y`,"&:active":{cursor:i?`default`:`grabbing`}},children:(0,Y.jsx)($,{src:e.image,alt:`Action ${n}`,sx:{width:{xs:35,sm:38,md:52},height:{xs:35,sm:38,md:52},transition:`all 0.2s`,"&:hover":{backgroundColor:`rgba(255, 255, 255, 0.15)`,filter:`brightness(1.1)`}}})})}function rr({title:e,actions:t,isMobile:n=!1,disabled:a=!1,onReorder:o}){let c=i(r(s,{activationConstraint:{distance:8}}));return(0,Y.jsxs)(Ct,{elevation:0,sx:{p:{xs:1.5,sm:0,md:0},backgroundColor:n?Z.nightOrder.background:`transparent`,color:`#fefefe`,borderRadius:1.5,height:`100%`,display:`flex`,flexDirection:`column`,boxShadow:`none`},children:[(0,Y.jsx)(I,{variant:`h4`,sx:{textAlign:`center`,fontWeight:`bold`,fontFamily:`jicao, Dumbledor, serif`,fontSize:{xs:`1rem`,sm:`1.1rem`,md:`1.5rem`},mb:n?1:1.5,mt:.5,color:n?`#fefefe`:`inherit`},children:n?e:e.split(``).map((e,t)=>(0,Y.jsx)(R,{component:`span`,sx:{display:`block`,lineHeight:e===`晚`?1.3:1,mt:e===`晚`?.3:0,minHeight:e===` `?`0.5em`:`auto`},children:e===` `?`\xA0`:e},t))}),(0,Y.jsx)(f,{sensors:c,collisionDetection:m,onDragEnd:e=>{let{active:n,over:r}=e;if(r&&n.id!==r.id&&o){let e=t.findIndex((e,t)=>e.image+t===n.id),i=t.findIndex((e,t)=>e.image+t===r.id);e!==-1&&i!==-1&&o(e,i)}},children:(0,Y.jsx)(p,{items:t.map((e,t)=>e.image+t),strategy:n?d:l,children:(0,Y.jsx)(R,{sx:{flex:1,display:`flex`,flexDirection:n?`row`:`column`,flexWrap:n?`wrap`:`nowrap`,overflowY:`auto`,overscrollBehavior:`contain`,justifyContent:n?`center`:`flex-start`,alignContent:n?`flex-start`:`stretch`,gap:n?.5:0,"&::-webkit-scrollbar":{width:3},"&::-webkit-scrollbar-thumb":{backgroundColor:`rgba(255, 255, 255, 0.3)`,borderRadius:1.5}},children:t.map((e,t)=>(0,Y.jsx)(nr,{action:e,index:t,isMobile:n,disabled:a},e.image+t))})})})]})}var ir=C(({rules:e,onDelete:t,onEdit:n,isMobile:r})=>{let{t:i,language:a}=X(),[o,s]=(0,G.useState)(null),c=parseFloat(q.specialRuleTitleFontSize||`1`),l=parseFloat(q.specialRuleContentFontSize||`0.85`),u=e=>({xs:`${Math.max(e*.8,.1)}rem`,sm:`${Math.max(e*.9,.1)}rem`,md:`${Math.max(e,.1)}rem`}),d=u(c),f=u(l);if(!e||e.length===0)return null;let p=e=>e?typeof e==`string`?e:e[a]||e[`zh-CN`]||e.en||``:``;return(0,Y.jsx)(R,{sx:{width:`100%`,height:r?`auto`:`100%`,display:`flex`,flexDirection:`column`,minWidth:`350px`,overflow:r?`visible`:`auto`,gap:r?2:0,"&::-webkit-scrollbar":{width:`4px`},"&::-webkit-scrollbar-thumb":{backgroundColor:`rgba(0,0,0,0.2)`,borderRadius:`4px`}},children:e.map(e=>(0,Y.jsxs)(R,{onMouseEnter:()=>s(e.id),onMouseLeave:()=>s(null),onDoubleClick:()=>n&&n(e),sx:{position:`relative`,width:`100%`,minHeight:r?120:150,cursor:n?`pointer`:`default`,userSelect:`none`,flexShrink:0},children:[(0,Y.jsx)(R,{sx:{position:`absolute`,top:0,left:0,right:0,bottom:0,backgroundImage:`url(/imgs/images/卷轴.png)`,backgroundSize:`100% 100%`,backgroundPosition:`center`,backgroundRepeat:`no-repeat`,zIndex:0}}),o===e.id&&(0,Y.jsxs)(R,{sx:{position:`absolute`,top:8,right:8,zIndex:2,display:`flex`,gap:1},children:[n&&(0,Y.jsx)(B,{onClick:()=>n(e),sx:{backgroundColor:`rgba(255, 255, 255, 0.9)`,"&:hover":{backgroundColor:`rgba(255, 255, 255, 1)`}},size:`small`,children:(0,Y.jsx)(te,{fontSize:`small`})}),t&&(0,Y.jsx)(B,{onClick:()=>t(e),sx:{backgroundColor:`rgba(255, 255, 255, 0.9)`,"&:hover":{backgroundColor:`rgba(255, 255, 255, 1)`}},size:`small`,children:(0,Y.jsx)(T,{fontSize:`small`})})]}),(0,Y.jsx)(R,{sx:{position:`relative`,zIndex:1,height:`100%`,display:`flex`,flexDirection:`column`,justifyContent:`center`,px:{xs:`10%`,sm:`15%`,md:`17%`},py:{xs:1.5,sm:2,md:2}},children:(0,Y.jsxs)(Y.Fragment,{children:[e.title&&(0,Y.jsx)(I,{component:`div`,sx:{fontFamily:q.specialRuleTitleFont,fontWeight:`bold`,color:`#3d3226`,fontSize:d,mb:.3,lineHeight:1.3,wordBreak:`break-word`,whiteSpace:`pre-wrap`},children:p(e.title).split(/\\n|<br\s*\/?>/).map((e,t,n)=>(0,Y.jsxs)(`span`,{children:[e,t<n.length-1&&(0,Y.jsx)(`br`,{})]},t))}),(0,Y.jsx)(U,{}),e.content&&(0,Y.jsx)(I,{component:`div`,sx:{fontFamily:q.specialRuleContentFont,color:`#5a4a3a`,fontSize:f,lineHeight:a===`en`?1:1.3,textAlign:`justify`,wordBreak:`break-word`,whiteSpace:`pre-wrap`},children:p(e.content).split(/\\n|<br\s*\/?>/).map((e,t,n)=>(0,Y.jsxs)(`span`,{children:[e,t<n.length-1&&(0,Y.jsx)(`br`,{})]},t))})]})})]},e.id))})}),ar=C(({rules:e,onDelete:t,onEdit:n})=>{let{language:r}=X(),[i,a]=(0,G.useState)(null);if(!e||e.length===0)return null;let o=e=>e?typeof e==`string`?e:e[r]||e[`zh-CN`]||e.en||``:``;return(0,Y.jsx)(R,{sx:{mt:4,mb:2},children:e.map((e,s)=>(0,Y.jsxs)(R,{onMouseEnter:()=>a(e.id),onMouseLeave:()=>a(null),onDoubleClick:()=>n&&n(e),sx:{position:`relative`,minHeight:q.titleHeight,display:`flex`,alignItems:`center`,justifyContent:`center`,width:`100%`,mb:3,px:{xs:2,sm:4,md:6},cursor:n?`pointer`:`default`,"&::before":{content:`""`,position:`absolute`,top:0,left:0,right:0,bottom:0,backgroundImage:`url(/imgs/images/pattern.png)`,backgroundSize:`48%`,backgroundPosition:`center`,backgroundRepeat:`no-repeat`,opacity:.6,zIndex:1},"& > *":{position:`relative`,zIndex:1}},children:[i===e.id&&(0,Y.jsxs)(R,{sx:{position:`absolute`,top:8,right:8,zIndex:2,display:`flex`,gap:1},children:[n&&(0,Y.jsx)(B,{onClick:t=>{t.stopPropagation(),n(e)},sx:{backgroundColor:`rgba(255, 255, 255, 0.9)`,"&:hover":{backgroundColor:`rgba(255, 255, 255, 1)`}},size:`small`,children:(0,Y.jsx)(te,{fontSize:`small`})}),t&&(0,Y.jsx)(B,{onClick:n=>{n.stopPropagation(),t(e)},sx:{backgroundColor:`rgba(255, 255, 255, 0.9)`,"&:hover":{backgroundColor:`rgba(255, 255, 255, 1)`}},size:`small`,children:(0,Y.jsx)(T,{fontSize:`small`})})]}),(0,Y.jsxs)(R,{sx:{width:`100%`,textAlign:`center`,py:2},children:[e.title&&(0,Y.jsx)(I,{variant:`h5`,sx:{fontFamily:q.stateRuleTitleFont,fontWeight:`bold`,color:Z.paper.primary,fontSize:r===`en`?{xs:`1.4rem`,sm:`1.7rem`,md:`2.4rem`}:{xs:`1.2rem`,sm:`1.5rem`,md:`2rem`},mb:2,whiteSpace:`pre-wrap`},children:o(e.title).split(/\\n|<br\s*\/?>/).map((e,t,n)=>(0,Y.jsxs)(`span`,{children:[e,t<n.length-1&&(0,Y.jsx)(`br`,{})]},t))}),e.content&&(0,Y.jsx)(I,{variant:`body1`,sx:{fontFamily:q.stateRuleContentFont,fontSize:r===`en`?{xs:`1rem`,sm:`1.1rem`,md:`1.2rem`}:{xs:`0.9rem`,sm:`1rem`,md:`1.1rem`},lineHeight:1.8,color:Z.text.primary,maxWidth:`90%`,margin:`0 auto`,whiteSpace:`pre-wrap`,wordBreak:`break-word`},children:o(e.content).split(/\\n|<br\s*\/?>/).map((e,t,n)=>(0,Y.jsxs)(`span`,{children:[e,t<n.length-1&&(0,Y.jsx)(`br`,{})]},t))}),e.rules&&e.rules.length>0&&(0,Y.jsx)(R,{sx:{mt:2},children:e.rules.map((e,t)=>(0,Y.jsxs)(R,{sx:{mb:2},children:[(0,Y.jsx)(I,{variant:`h6`,sx:{fontWeight:`bold`,color:Z.paper.primary,fontSize:{xs:`1rem`,sm:`1.2rem`,md:`1.4rem`},mb:1},children:e.title}),(0,Y.jsx)(I,{variant:`body2`,sx:{fontSize:{xs:`0.85rem`,sm:`0.95rem`,md:`1rem`},lineHeight:1.6,color:Z.text.secondary},children:e.content})]},t))})]})]},e.id||s))})}),or=C(({script:e})=>{let{t,language:n}=X();q.config.characterCard;let[r,i]=(0,G.useState)(null),a=(()=>{let t=[],n=new Set;return Object.entries(e.jinx).forEach(([r,i])=>{Object.entries(i).forEach(([i,a])=>{if(a.display===!1)return;let o=[r,i].sort().join(`|||`);if(n.has(o))return;let s=e.all.find(e=>e.name===r),c=e.all.find(e=>e.name===i);s&&c&&(t.push({characterA:s,characterB:c,jinxInfo:a}),n.add(o))})}),t})(),o=e=>{e.jinxInfo.isOfficial||J.removeCustomJinx(e.characterA,e.characterB)};return a.length===0?null:(0,Y.jsxs)(R,{sx:{width:`100%`,mb:3,mt:3,position:`relative`},children:[(0,Y.jsxs)(R,{sx:{display:`flex`,justifyContent:`center`,alignItems:`center`,mb:2},children:[(0,Y.jsx)($,{src:`https://wiki.bloodontheclocktower.com/images/8/86/Icon_djinn.png`,alt:`Jinx Icon`,sx:{width:{xs:30,sm:35,md:75},height:{xs:30,sm:35,md:75},mr:2,flexShrink:0,userDrag:`none`,WebkitUserDrag:`none`,pointerEvents:`none`}}),(0,Y.jsx)(I,{variant:`h5`,sx:{fontFamily:q.jinxTextFont,fontWeight:`bold`,color:Z.paper.primary,textAlign:`center`,fontSize:{xs:`1.2rem`,sm:`1.4rem`,md:`1.6rem`}},children:t(`jinx.title`)}),(0,Y.jsx)(U,{sx:{flex:1,ml:1.5,borderColor:Z.paper,borderWidth:1}})]}),(0,Y.jsx)(R,{sx:{display:`flex`,flexDirection:`column`,gap:2},children:a.map((e,n)=>{let a=`${e.characterA.id}-${e.characterB.id}-${n}`;return(0,Y.jsxs)(Ct,{elevation:0,onMouseEnter:()=>i(a),onMouseLeave:()=>i(null),sx:{position:`relative`,display:`flex`,alignItems:`center`,p:.3,backgroundColor:`rgba(237, 228, 213, 0.6)`,borderRadius:2,border:`1px solid rgba(0, 0, 0, 0.1)`},children:[!e.jinxInfo.isOfficial&&r===a&&(0,Y.jsx)(B,{onClick:()=>o(e),sx:{position:`absolute`,top:4,right:4,backgroundColor:`rgba(255, 255, 255, 0.9)`,"&:hover":{backgroundColor:`rgba(255, 255, 255, 1)`},zIndex:1,"@media print":{display:`none`}},size:`small`,children:(0,Y.jsx)(T,{fontSize:`small`})}),(0,Y.jsx)($,{src:e.characterA.image,alt:e.characterA.name,sx:{width:{xs:40,sm:45,md:60},height:{xs:40,sm:45,md:60},borderRadius:1,flexShrink:0,userDrag:`none`,WebkitUserDrag:`none`,pointerEvents:`none`}}),(0,Y.jsx)($,{src:`https://wiki.bloodontheclocktower.com/images/8/86/Icon_djinn.png`,alt:`Jinx Icon`,sx:{width:{xs:30,sm:35,md:45},height:{xs:30,sm:35,md:45},borderRadius:.5,flexShrink:0,userDrag:`none`,WebkitUserDrag:`none`,pointerEvents:`none`}}),(0,Y.jsx)($,{src:e.characterB.image,alt:e.characterB.name,sx:{width:{xs:40,sm:45,md:60},height:{xs:40,sm:45,md:60},borderRadius:1,flexShrink:0,userDrag:`none`,WebkitUserDrag:`none`,pointerEvents:`none`}}),(0,Y.jsx)(R,{sx:{flex:1,minWidth:0},children:(0,Y.jsxs)(I,{variant:`body2`,sx:{fontFamily:q.jinxTextFont,fontSize:{xs:`0.85rem`,sm:`0.9rem`,md:`1.14rem`},lineHeight:1.6,color:Z.text.primary,fontStyle:`italic`},children:[(0,Y.jsx)(`strong`,{children:e.characterA.name}),` `,t(`jinx.and`),` `,(0,Y.jsx)(`strong`,{children:e.characterB.name}),`：`,e.jinxInfo.reason]})})]},a)})})]})});const sr=({title:e,titleImage:t,useImage:n=!0,fontSize:r=48,imageSize:i=200,author:a,playerCount:o,readOnly:s=!1,onDelete:c,onEdit:l})=>{let[u,d]=(0,G.useState)(!1),{t:f}=X();return(0,Y.jsxs)(R,{sx:{textAlign:`center`,mb:0,position:`relative`,zIndex:1,px:{xs:2,sm:3,md:4}},onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onDoubleClick:()=>!s&&l&&l(),children:[(0,Y.jsx)(R,{sx:{position:`relative`,height:{xs:`auto`,md:`${i}px`},minHeight:{xs:`auto`,md:`${r*1.5}px`},width:`100%`,display:`flex`,flexDirection:`column`,alignItems:`center`,justifyContent:`center`,gap:{xs:2,md:0},py:{xs:2,md:0},cursor:s?`default`:`pointer`,"&::before":{content:`""`,position:`absolute`,top:`50%`,left:`50%`,transform:`translate(-50%, -50%)`,width:{xs:`80%`,md:`48%`},height:`100%`,backgroundImage:`url(/imgs/images/pattern.png)`,backgroundSize:`contain`,backgroundPosition:`center`,backgroundRepeat:`no-repeat`,opacity:.6,zIndex:0}},children:(0,Y.jsx)(R,{sx:{position:`relative`,zIndex:1,maxWidth:`100%`,width:`100%`,display:`flex`,justifyContent:`center`},children:n&&t?(0,Y.jsx)(R,{sx:{position:`relative`,display:`flex`,alignItems:`center`,justifyContent:`center`,userSelect:`none`,width:`100%`},children:(0,Y.jsx)($,{src:t,alt:e,sx:{maxWidth:`100%`,maxHeight:{xs:`${i*.75}px`,sm:`${i*.875}px`,md:`${i}px`},width:`auto`,height:`auto`,objectFit:`contain`}})}):(0,Y.jsx)(R,{sx:{position:`relative`,display:`flex`,padding:{xs:1,sm:1.5,md:2},borderRadius:2,userSelect:`none`,width:`100%`,justifyContent:`center`},children:(0,Y.jsx)(I,{variant:`h3`,component:`div`,sx:{fontFamily:q.scriptTitleFont,fontWeight:`bold`,fontSize:{xs:`${r*.6}px`,sm:`${r*.75}px`,md:`${r}px`},lineHeight:1.38,m:0,whiteSpace:`pre-wrap`,textAlign:`center`,wordBreak:`break-word`,background:`url(${q.nightOrderBackgroundUrl})`,backgroundSize:`cover`,backgroundPosition:`center`,backgroundClip:`text`,WebkitBackgroundClip:`text`,WebkitTextFillColor:`transparent`},children:e?e.split(/\\n|<br\s*\/?>/).map((e,t,n)=>(0,Y.jsxs)(`span`,{children:[e,t<n.length-1&&(0,Y.jsx)(`br`,{})]},t)):``})})})}),(a||o)&&(0,Y.jsxs)(I,{sx:{color:Z.paper.secondary,fontSize:{xs:`0.75rem`,sm:`0.95rem`},mt:.5,textAlign:`center`,position:`relative`,zIndex:1},children:[a?`${f(`script.author2`)}：${a}`:``,a&&o?` · `:``,o?`${f(`script.playerCount`)}：${o}`:``]}),!s&&u&&(0,Y.jsxs)(R,{sx:{position:`absolute`,top:8,right:8,zIndex:3,display:`flex`,gap:1},children:[l&&(0,Y.jsx)(B,{onClick:e=>{e.stopPropagation(),l()},sx:{backgroundColor:`rgba(255,255,255,0.9)`,"&:hover":{backgroundColor:`rgba(255,255,255,1)`}},size:`small`,children:(0,Y.jsx)(te,{fontSize:`small`})}),c&&(0,Y.jsx)(B,{onClick:e=>{e.stopPropagation(),c()},sx:{backgroundColor:`rgba(255,255,255,0.9)`,"&:hover":{backgroundColor:`rgba(255,255,255,1)`}},size:`small`,children:(0,Y.jsx)(T,{fontSize:`small`})})]})]})},cr=({type:e,readOnly:t=!1,onDelete:n})=>{let[r,i]=(0,G.useState)(!1),{t:a,language:o}=X(),s={rows:[{label:a(`playerTable.playerCount`),values:[`7`,`8`,`9`,`10`,`11`,`12`,`13`,`14`,`15+`]},{label:a(`playerTable.townsfolk`),values:[5,5,5,7,7,7,9,9,9],color:`#0078ba`},{label:a(`playerTable.outsider`),values:[0,1,2,0,1,2,0,1,2],color:`#0078ba`},{label:a(`playerTable.minion`),values:[1,1,1,2,2,2,3,3,3],color:`#a32222ff`},{label:a(`playerTable.demon`),values:[1,1,1,1,1,1,1,1,1],color:`#a32222ff`}]},c={rows:[{label:a(`playerTable.playerCount`),values:[`6`,`7`,`8`,`9`]},{label:a(`playerTable.townsfolk`),values:[3,4,5,5],color:`#0078ba`},{label:a(`playerTable.outsider`),values:[1,1,1,2],color:`#0078ba`},{label:a(`playerTable.minion`),values:[1,1,1,1],color:`#a32222ff`},{label:a(`playerTable.demon`),values:[1,1,1,1],color:`#a32222ff`}]},l=e===`table1`?s:c;return a(e===`table1`?`secondPage.playerTable1`:`secondPage.playerTable2`),(0,Y.jsxs)(R,{sx:{position:`relative`,py:3,px:4},onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[(0,Y.jsx)(R,{sx:{maxWidth:800,margin:`0 auto`,border:`3px solid`,borderColor:`rgba(0, 0, 0, 0.3)`,borderRadius:2,overflow:`hidden`,backgroundColor:`rgba(255, 250, 240, 0.95)`,backdropFilter:`blur(10px)`,boxShadow:`0 4px 20px rgba(0, 0, 0, 0.15)`},children:l.rows.map((e,t)=>(0,Y.jsxs)(R,{sx:{display:`grid`,gridTemplateColumns:`140px repeat(${e.values.length}, 1fr)`,borderBottom:t<l.rows.length-1?`2px solid rgba(0, 0, 0, 0.15)`:`none`,backgroundColor:t===0?`rgba(245, 235, 220, 1)`:`rgba(255, 250, 240, 0.5)`},children:[(0,Y.jsx)(R,{sx:{padding:`14px 12px`,textAlign:`center`,fontWeight:t===0?800:700,fontSize:t===0?`1rem`:`0.95rem`,borderRight:`2px solid rgba(0, 0, 0, 0.15)`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:t===0?`url(${q.nightOrderBackgroundUrl})`:`transparent`,backgroundSize:`cover`,backgroundPosition:`center`,backgroundClip:t===0?`text`:`unset`,WebkitBackgroundClip:t===0?`text`:`unset`,WebkitTextFillColor:t===0?`transparent`:e.color||`#333`,color:e.color||`#333`},children:e.label}),e.values.map((n,r)=>(0,Y.jsx)(R,{sx:{padding:`14px 8px`,textAlign:`center`,fontWeight:t===0?800:600,fontSize:t===0?`1rem`:`0.95rem`,borderRight:r<e.values.length-1?`1px solid rgba(0, 0, 0, 0.1)`:`none`,display:`flex`,alignItems:`center`,justifyContent:`center`,color:t===0?`#333`:e.color||`#333`},children:n},r))]},t))}),!t&&r&&n&&(0,Y.jsx)(R,{sx:{position:`absolute`,top:8,right:8,zIndex:3,display:`flex`,gap:1},children:(0,Y.jsx)(B,{onClick:e=>{e.stopPropagation(),n()},sx:{backgroundColor:`rgba(255,255,255,0.9)`,"&:hover":{backgroundColor:`rgba(255,255,255,1)`}},size:`small`,children:(0,Y.jsx)(T,{fontSize:`small`})})})]})},lr=({onAddComponent:e})=>{let[t,n]=(0,G.useState)(!1),{t:r,language:i}=X(),a=t=>{e(t),n(!1)};return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(R,{className:`second-page-add-component`,onClick:()=>n(!0),sx:{display:`flex`,alignItems:`center`,justifyContent:`center`,minHeight:200,margin:`40px auto`,maxWidth:600,border:`3px dashed rgba(0, 0, 0, 0.2)`,borderRadius:4,backgroundColor:`rgba(255, 255, 255, 0.5)`,backdropFilter:`blur(10px)`,cursor:`pointer`,transition:`all 0.3s ease`,"&:hover":{backgroundColor:`rgba(25, 118, 210, 0.1)`,borderColor:`rgba(25, 118, 210, 0.5)`,transform:`scale(1.02)`,"& .add-icon":{color:`#1976d2`,transform:`rotate(90deg)`}}},children:(0,Y.jsxs)(R,{sx:{display:`flex`,flexDirection:`column`,alignItems:`center`,gap:2},children:[(0,Y.jsx)(he,{className:`add-icon`,sx:{fontSize:80,color:`rgba(0, 0, 0, 0.3)`,transition:`all 0.3s ease`}}),(0,Y.jsx)(I,{variant:`h6`,sx:{color:`rgba(0, 0, 0, 0.5)`,fontWeight:600},children:r(`secondPage.addComponent`)})]})}),(0,Y.jsxs)(V,{open:t,onClose:()=>n(!1),maxWidth:`sm`,fullWidth:!0,PaperProps:{sx:{borderRadius:3,boxShadow:`0 12px 48px rgba(0,0,0,0.15)`}},children:[(0,Y.jsx)(H,{sx:{textAlign:`center`,fontSize:`1.5rem`,fontWeight:700,pb:2},children:r(`secondPage.addComponent`)}),(0,Y.jsx)(W,{children:(0,Y.jsxs)(R,{sx:{display:`flex`,flexDirection:`column`,gap:2,py:2},children:[(0,Y.jsxs)(A,{variant:`outlined`,onClick:()=>a(`title`),sx:{py:3,fontSize:`1.1rem`,fontWeight:600,borderWidth:2,"&:hover":{borderWidth:2,backgroundColor:`rgba(25, 118, 210, 0.08)`}},children:[`📝 `,r(`secondPage.title`)]}),(0,Y.jsxs)(A,{variant:`outlined`,onClick:()=>a(`ppl_table1`),sx:{py:3,fontSize:`1.1rem`,fontWeight:600,borderWidth:2,"&:hover":{borderWidth:2,backgroundColor:`rgba(25, 118, 210, 0.08)`}},children:[`📊 `,r(`secondPage.playerTable1`)]}),(0,Y.jsxs)(A,{variant:`outlined`,onClick:()=>a(`ppl_table2`),sx:{py:3,fontSize:`1.1rem`,fontWeight:600,borderWidth:2,"&:hover":{borderWidth:2,backgroundColor:`rgba(25, 118, 210, 0.08)`}},children:[`📊 `,r(`secondPage.playerTable2`)]})]})})]})]})},ur=({id:e,children:n,disabled:r})=>{let{attributes:i,listeners:a,setNodeRef:o,transform:s,transition:c,isDragging:l}=t({id:e,disabled:r}),d={transform:u.Transform.toString(s),transition:c,opacity:l?.5:1};return(0,Y.jsx)(R,{ref:o,style:d,...i,...a,sx:{cursor:r?`default`:`grab`,"&:active":{cursor:r?`default`:`grabbing`},position:`relative`},children:n})};var dr=2,fr=C(({script:e,theme:t,readOnly:a=!1,onReorderCharacters:u=()=>{},onUpdateCharacter:d=()=>{},onEditCharacter:h=()=>{},onDeleteCharacter:g=()=>{},onReplaceCharacter:_=()=>{},onTitleEdit:v=()=>{},onSecondPageTitleEdit:y=()=>{},onSpecialRuleEdit:b=()=>{},onSpecialRuleDelete:x=()=>{},onNightOrderReorder:S=()=>{}})=>{let{t:C,language:w}=X(),T=(0,G.useRef)(null),E=St(t.breakpoints.down(`md`)),[D,O]=(0,G.useState)(!1),k=(0,G.useMemo)(()=>{let t=e.titleEn,n=e.secondPageTitleText||e.title;return w===`en`&&t&&t.trim()?t.trim():n},[w,e]),ee=i(r(s,{activationConstraint:a?{distance:999999}:{distance:5}}),r(n,{coordinateGetter:o})),A=(0,G.useCallback)(()=>{let t=[];return t.push(`top_image`),e.secondPageTitle&&t.push(`title`),e.secondPagePplTable1&&t.push(`ppl_table1`),e.secondPagePplTable2&&t.push(`ppl_table2`),e.characters.fabled&&e.characters.fabled.length>0&&t.push(`fabled`),e.characters.loric&&e.characters.loric.length>0&&t.push(`loric`),e.characters.traveler&&e.characters.traveler.length>0&&t.push(`traveler`),Object.keys(e.characters).filter(e=>![`townsfolk`,`outsider`,`minion`,`demon`,`fabled`,`loric`,`traveler`].includes(e)).forEach(n=>{e.characters[n]&&e.characters[n].length>0&&t.push(`team_${n}`)}),e.jinx&&Object.keys(e.jinx).length>0&&t.push(`jinx`),e.secondPageRules&&e.secondPageRules.length>0&&t.push(`secondPageRules`),t},[e]),j=(0,G.useMemo)(()=>{let t=A();if(e.secondPageOrder&&e.secondPageOrder.length>0){let n=e.secondPageOrder.filter(e=>t.includes(e)),r=t.filter(e=>!n.includes(e));return[...n,...r]}return t},[e.secondPageOrder,A]),ne=(0,G.useCallback)(e=>{if(a)return;let{active:t,over:n}=e;if(!n||t.id===n.id)return;let r=j.indexOf(t.id),i=j.indexOf(n.id);if(r!==-1&&i!==-1){let e=c(j,r,i);J.updateSecondPageOrder(e)}},[j,a]),re=(0,G.useCallback)(t=>{switch(t){case`top_image`:return(0,Y.jsx)($,{id:`second_page_top`,component:`img`,src:`/imgs/images/back_4.png`,alt:`Decorative torn paper`,sx:{position:`relative`,top:`0%`,width:`30%`,height:`auto`,zIndex:1,pointerEvents:`none`,opacity:.95,userSelect:`none`,WebkitUserDrag:`none`,margin:`0 auto`,display:`block`}},`top_image`);case`title`:return e.secondPageTitle?(0,Y.jsx)(sr,{title:k,titleImage:e.secondPageTitleImage,useImage:e.useSecondPageTitleImage,fontSize:e.secondPageTitleFontSize??`5.3rem`,imageSize:e.secondPageTitleImageSize,author:e.author,playerCount:e.playerCount,readOnly:a,onDelete:()=>J.removeSecondPageComponent(`title`),onEdit:y},`title`):null;case`ppl_table1`:return e.secondPagePplTable1?(0,Y.jsx)(cr,{type:`table1`,readOnly:a,onDelete:()=>J.removeSecondPageComponent(`ppl_table1`)},`ppl_table1`):null;case`ppl_table2`:return e.secondPagePplTable2?(0,Y.jsx)(cr,{type:`table2`,readOnly:a,onDelete:()=>J.removeSecondPageComponent(`ppl_table2`)},`ppl_table2`):null;case`fabled`:return e.characters.fabled&&e.characters.fabled.length>0?(0,Y.jsx)(tr,{team:`fabled`,characters:e.characters.fabled,script:e,onReorder:a?()=>{}:u,onUpdateCharacter:a?()=>{}:d,onEditCharacter:a?()=>{}:h,onDeleteCharacter:a?()=>{}:g,onReplaceCharacter:a?()=>{}:_,disableDrag:a,readOnly:a},`fabled`):null;case`loric`:return e.characters.loric&&e.characters.loric.length>0?(0,Y.jsx)(tr,{team:`loric`,characters:e.characters.loric,script:e,onReorder:a?()=>{}:u,onUpdateCharacter:a?()=>{}:d,onEditCharacter:a?()=>{}:h,onDeleteCharacter:a?()=>{}:g,onReplaceCharacter:a?()=>{}:_,disableDrag:a,readOnly:a},`loric`):null;case`traveler`:return e.characters.traveler&&e.characters.traveler.length>0?(0,Y.jsx)(tr,{team:`traveler`,characters:e.characters.traveler,script:e,onReorder:a?()=>{}:u,onUpdateCharacter:a?()=>{}:d,onEditCharacter:a?()=>{}:h,onDeleteCharacter:a?()=>{}:g,onReplaceCharacter:a?()=>{}:_,disableDrag:a,readOnly:a},`traveler`):null;case`jinx`:return e.jinx&&Object.keys(e.jinx).length>0?(0,Y.jsx)(or,{script:e},`jinx`):null;case`secondPageRules`:return e.secondPageRules&&e.secondPageRules.length>0?(0,Y.jsx)(ar,{rules:e.secondPageRules,onDelete:a?()=>{}:x,onEdit:a?()=>{}:b},`secondPageRules`):null;default:if(t.startsWith(`team_`)){let n=t.substring(5);return e.characters[n]&&e.characters[n].length>0?(0,Y.jsx)(tr,{team:n,characters:e.characters[n],script:e,onReorder:a?()=>{}:u,onUpdateCharacter:a?()=>{}:d,onEditCharacter:a?()=>{}:h,onDeleteCharacter:a?()=>{}:g,onReplaceCharacter:a?()=>{}:_,disableDrag:a,readOnly:a},t):null}return null}},[e,a,y,u,d,h,g,_,b,x]);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(Ct,{id:`script-preview`,ref:T,elevation:16,sx:{"@media print":{boxShadow:`none !important`,height:`100vh !important`,minHeight:`100vh !important`},display:`flex`,userSelect:`none`,width:`100%`},children:(0,Y.jsxs)(R,{sx:{display:`flex`,width:`100%`,height:`100%`,justifyContent:`center`,position:`relative`},children:[(0,Y.jsx)($,{src:`/imgs/images/flower3_2.png`,alt:`左下角装饰花纹`,sx:{position:`absolute`,bottom:0,left:0,maxWidth:{xs:`25%`,sm:`20%`,md:`15%`},opacity:1,pointerEvents:`none`,zIndex:dr,userSelect:`none`,WebkitUserDrag:`none`}}),(0,Y.jsx)($,{src:`/imgs/images/flower4.png`,alt:`右下角装饰花纹`,sx:{position:`absolute`,bottom:0,right:0,maxWidth:{xs:`25%`,sm:`20%`,md:`15%`},opacity:1,pointerEvents:`none`,zIndex:dr,userSelect:`none`,WebkitUserDrag:`none`}}),(0,Y.jsx)($,{src:`/imgs/images/flower7.png`,alt:`右上角装饰花纹`,sx:{position:`absolute`,top:0,right:0,maxWidth:{xs:`35%`,sm:`20%`,md:`20%`},opacity:1,pointerEvents:`none`,zIndex:dr,userSelect:`none`,WebkitUserDrag:`none`}}),(0,Y.jsx)($,{src:`/imgs/images/flower4_2.png`,alt:`左上角装饰花纹`,sx:{position:`absolute`,top:0,left:0,transform:`rotate(180deg)`,maxWidth:{xs:`25%`,sm:`20%`,md:`15%`},opacity:1,pointerEvents:`none`,zIndex:dr,userSelect:`none`,WebkitUserDrag:`none`}}),!a&&(0,Y.jsxs)(R,{sx:{position:`absolute`,top:{xs:12,sm:16,md:95},left:{xs:12,sm:16,md:140},zIndex:5,display:`flex`,flexDirection:`column`,alignItems:`center`,pointerEvents:`none`},children:[(0,Y.jsx)(R,{component:`img`,src:`/imgs/icons/fabled/onion.png`,alt:`Onion Avatar`,sx:{width:{xs:50,sm:60,md:70},height:{xs:50,sm:60,md:70},borderRadius:`50%`,border:`2px solid #d4af37`,boxShadow:`0 4px 12px rgba(0, 0, 0, 0.3)`,objectFit:`cover`,mb:{xs:-1,sm:-1.5,md:-2},position:`relative`,zIndex:2}}),(0,Y.jsx)(R,{sx:{pt:{xs:1.5,sm:2,md:2.5},pb:{xs:.75,sm:1,md:1.25},position:`relative`,zIndex:1,minWidth:{xs:`80px`,sm:`90px`,md:`100px`}},children:(0,Y.jsxs)(I,{sx:{fontSize:{xs:`0.65rem`,sm:`0.75rem`,md:`0.85rem`},color:`#404040ff`,fontWeight:700,textAlign:`center`,whiteSpace:`nowrap`},children:[C(`credits.designTitle`),`: `,C(`credits.designers`)]})})]}),!E&&(0,Y.jsx)(R,{sx:{padding:1.5,flexShrink:0,position:`relative`,backgroundImage:`url(${q.nightOrderBackgroundUrl})`,display:`flex`,alignItems:`flex-start`,justifyContent:`center`,pt:`30%`,boxShadow:`none`,"& > *":{position:`relative`,zIndex:1}},children:(0,Y.jsx)(rr,{title:C(`night.first`),actions:e.firstnight,disabled:a||K.config.officialIdParseMode,onReorder:(e,t)=>S(`first`,e,t)})}),(0,Y.jsxs)(Ct,{id:`main_script`,elevation:0,sx:{pt:2,flex:1,backgroundImage:`url(${q.mainBackgroundUrl})`,backgroundSize:`100% 100%`,backgroundPosition:`center`,backgroundRepeat:`no-repeat`,borderRadius:0,zIndex:1,position:`relative`,boxShadow:`none`},children:[(0,Y.jsxs)(R,{sx:{textAlign:`center`,mb:0,mt:8,position:`relative`,zIndex:1,px:{xs:2,sm:3,md:4}},children:[(0,Y.jsxs)(R,{sx:{position:`relative`,height:{xs:`auto`,md:q.titleHeight},width:`100%`,minWidth:{xs:`300px`,md:`500px`},display:{xs:`flex`,md:`block`},flexDirection:{xs:`column`,md:`row`},alignItems:{xs:`center`,md:`unset`},gap:{xs:2,md:0},py:{xs:2,md:0},"&::before":{content:`""`,position:`absolute`,top:`50%`,left:`50%`,transform:`translate(-50%, -50%)`,width:{xs:`80%`,md:`48%`},height:`100%`,backgroundImage:`url(/imgs/images/pattern.png)`,backgroundSize:`contain`,backgroundPosition:`center`,backgroundRepeat:`no-repeat`,opacity:.6,zIndex:0}},children:[(0,Y.jsx)(R,{sx:{position:{xs:`relative`,md:`absolute`},top:{xs:`auto`,md:`50%`},left:{xs:`auto`,md:e?.specialRules&&e.specialRules.length>0?`33.33%`:`50%`},transform:{xs:`none`,md:`translate(-50%, -50%)`},zIndex:1,maxWidth:{xs:`100%`,md:e?.specialRules&&e.specialRules.length>0?`32%`:`70%`},width:{xs:`100%`,md:e?.specialRules&&e.specialRules.length>0?`auto`:`100%`},display:`flex`,justifyContent:`center`},children:e.useTitleImage&&e.titleImage?(0,Y.jsxs)(R,{onMouseEnter:()=>!a&&O(!0),onMouseLeave:()=>!a&&O(!1),onDoubleClick:()=>!a&&v(),sx:{position:`relative`,cursor:a?`default`:`pointer`,display:`flex`,alignItems:`center`,justifyContent:`center`,userSelect:`none`,width:`100%`},children:[(0,Y.jsx)($,{src:e.titleImage,alt:k,sx:{maxWidth:`100%`,maxHeight:{xs:`${(e.titleImageSize||160)*.75}px`,sm:`${(e.titleImageSize||160)*.875}px`,md:`${e.titleImageSize||160}px`},width:`auto`,height:`auto`,objectFit:`contain`}}),!a&&D&&(0,Y.jsx)(R,{sx:{position:`absolute`,top:8,right:8,zIndex:3,display:`flex`,gap:1},children:(0,Y.jsx)(B,{onClick:e=>{e.stopPropagation(),v()},sx:{backgroundColor:`rgba(255,255,255,0.9)`,"&:hover":{backgroundColor:`rgba(255,255,255,1)`}},size:`small`,children:(0,Y.jsx)(te,{fontSize:`small`})})})]}):(0,Y.jsxs)(R,{onMouseEnter:()=>!a&&O(!0),onMouseLeave:()=>!a&&O(!1),onDoubleClick:()=>!a&&v(),sx:{position:`relative`,cursor:a?`default`:`pointer`,display:`flex`,padding:{xs:1,sm:1.5,md:2},borderRadius:2,userSelect:`none`,width:`100%`,justifyContent:`center`},children:[(0,Y.jsx)(I,{variant:`h3`,component:`div`,sx:{fontFamily:q.scriptTitleFont,fontWeight:`bold`,fontSize:{xs:`2.3rem`,sm:`3.4rem`,md:q.titleFontSizeMd},lineHeight:1.38,m:0,whiteSpace:`pre-wrap`,textAlign:`center`,wordBreak:`break-word`,background:`url(${q.nightOrderBackgroundUrl})`,backgroundSize:`cover`,backgroundPosition:`center`,backgroundClip:`text`,WebkitBackgroundClip:`text`,WebkitTextFillColor:`transparent`},children:k.split(/\n|<br\s*\/?>(?=)/).map((e,t,n)=>(0,Y.jsxs)(`span`,{children:[e,t<n.length-1&&(0,Y.jsx)(`br`,{})]},t))}),!a&&D&&(0,Y.jsx)(R,{sx:{position:`absolute`,top:8,right:8,zIndex:3,display:`flex`,gap:1},children:(0,Y.jsx)(B,{onClick:e=>{e.stopPropagation(),v()},sx:{backgroundColor:`rgba(255,255,255,0.9)`,"&:hover":{backgroundColor:`rgba(255,255,255,1)`}},size:`small`,children:(0,Y.jsx)(te,{fontSize:`small`})})})]})}),e?.specialRules&&e.specialRules.length>0&&(0,Y.jsx)(R,{sx:{position:{xs:`relative`,md:`absolute`},top:{xs:`auto`,md:`50%`},left:{xs:`auto`,md:`66.67%`},transform:{xs:`none`,md:`translate(-50%, -50%)`},zIndex:1,overflow:`hidden`,width:{xs:`100%`,md:`auto`},maxWidth:{xs:`100%`,md:`32%`}},children:(0,Y.jsx)(ir,{rules:e.specialRules,onDelete:a?()=>{}:x,onEdit:a?()=>{}:b,isMobile:E})})]}),(e?.author||e?.playerCount)&&(0,Y.jsxs)(I,{sx:{color:Z.paper.secondary,fontSize:{xs:`0.75rem`,sm:`0.95rem`},mt:.5},children:[e.author?`${C(`script.author2`)}：${e.author}`:``,e.author&&e.playerCount?` · `:``,e.playerCount?`${C(`script.playerCount`)}：${e.playerCount}`:``]})]}),(0,Y.jsx)(R,{sx:{width:`100%`},children:(0,Y.jsxs)(R,{sx:{px:3},children:[[`townsfolk`,`outsider`,`minion`,`demon`].map(t=>e.characters[t]&&e.characters[t].length>0&&(0,Y.jsx)(tr,{team:t,characters:e.characters[t],script:e,onReorder:a?()=>{}:u,onUpdateCharacter:a?()=>{}:d,onEditCharacter:a?()=>{}:h,onDeleteCharacter:a?()=>{}:g,onReplaceCharacter:a?()=>{}:_,disableDrag:a,readOnly:a},t)),!q.config.enableTwoPageMode&&[`fabled`,`traveler`].map(t=>e.characters[t]&&e.characters[t].length>0&&(0,Y.jsx)(tr,{team:t,characters:e.characters[t],script:e,onReorder:a?()=>{}:u,onUpdateCharacter:a?()=>{}:d,onEditCharacter:a?()=>{}:h,onDeleteCharacter:a?()=>{}:g,onReplaceCharacter:a?()=>{}:_,disableDrag:a,readOnly:a},t)),!q.config.enableTwoPageMode&&Object.keys(e.characters).filter(e=>![`townsfolk`,`outsider`,`minion`,`demon`,`fabled`,`traveler`].includes(e)).map(t=>(0,Y.jsx)(tr,{team:t,characters:e.characters[t],script:e,onReorder:a?()=>{}:u,onUpdateCharacter:a?()=>{}:d,onEditCharacter:a?()=>{}:h,onDeleteCharacter:a?()=>{}:g,onReplaceCharacter:a?()=>{}:_,disableDrag:a,readOnly:a},t))]})}),E&&(0,Y.jsxs)(R,{sx:{mt:2,display:`flex`,gap:1.5,position:`relative`,zIndex:1,px:{xs:1,sm:2,md:3}},children:[(0,Y.jsx)(R,{sx:{flex:1,minWidth:0},children:(0,Y.jsx)(rr,{title:C(`night.first`),actions:e.firstnight,isMobile:!0,disabled:a||K.config.officialIdParseMode,onReorder:(e,t)=>S(`first`,e,t)})}),(0,Y.jsx)(R,{sx:{flex:1,minWidth:0},children:(0,Y.jsx)(rr,{title:C(`night.other`),actions:e.othernight,isMobile:!0,disabled:a||K.config.officialIdParseMode,onReorder:(e,t)=>S(`other`,e,t)})})]}),(0,Y.jsx)($,{component:`img`,src:`/imgs/images/back_tower.png`,alt:`back_tower`,sx:{position:`absolute`,left:`0%`,bottom:`0`,display:`flex`,width:`20%`,zIndex:dr,opacity:.4,userSelect:`none`,WebkitUserDrag:`none`}}),(0,Y.jsx)($,{component:`img`,src:`/imgs/images/back_tower2.png`,alt:`back_tower2`,sx:{position:`absolute`,left:`36%`,bottom:`0%`,display:`flex`,width:`50%`,zIndex:dr,opacity:.8,userSelect:`none`,WebkitUserDrag:`none`}}),(0,Y.jsx)(R,{sx:{height:`20vh`}})]}),!E&&(0,Y.jsx)(R,{sx:{padding:1.5,flexShrink:0,position:`relative`,backgroundImage:`url(${q.nightOrderBackgroundUrl})`,display:`flex`,alignItems:`flex-start`,justifyContent:`center`,pt:`30%`,zIndex:1,boxShadow:`none`,"& > *":{position:`relative`,zIndex:1}},children:(0,Y.jsx)(rr,{title:C(`night.other`),actions:e?.othernight||[],disabled:a||K.config.officialIdParseMode,onReorder:(e,t)=>S(`other`,e,t)})})]})}),e&&q.config.enableTwoPageMode&&(0,Y.jsx)(Ct,{elevation:16,id:`script-preview-2`,sx:{display:`flex`,zIndex:1,mt:5,mb:5,width:`100%`,"@media print":{mt:0,boxShadow:`none !important`,height:`100vh !important`,minHeight:`100vh !important`}},children:(0,Y.jsxs)(R,{sx:{display:`flex`,width:`100%`,height:`100%`,minHeight:`100vh`,justifyContent:`center`,position:`relative`,"@media print":{height:`100vh !important`,minHeight:`100vh !important`}},children:[(0,Y.jsx)($,{src:`/imgs/images/flower3_2.png`,alt:`左下角装饰花纹`,sx:{position:`absolute`,bottom:0,left:0,maxWidth:{xs:`25%`,sm:`20%`,md:`15%`},opacity:1,pointerEvents:`none`,zIndex:dr,userSelect:`none`,WebkitUserDrag:`none`}}),(0,Y.jsx)($,{src:`/imgs/images/flower4.png`,alt:`右下角装饰花纹`,sx:{position:`absolute`,bottom:0,right:0,maxWidth:{xs:`25%`,sm:`20%`,md:`15%`},opacity:1,pointerEvents:`none`,zIndex:dr,userSelect:`none`,WebkitUserDrag:`none`}}),(0,Y.jsx)($,{src:`/imgs/images/flower7.png`,alt:`右上角装饰花纹`,sx:{position:`absolute`,top:0,right:0,maxWidth:{xs:`35%`,sm:`20%`,md:`20%`},opacity:1,pointerEvents:`none`,zIndex:dr,userSelect:`none`,WebkitUserDrag:`none`}}),(0,Y.jsx)($,{src:`/imgs/images/flower4_2.png`,alt:`左上角装饰花纹`,sx:{position:`absolute`,top:0,left:0,transform:`rotate(180deg)`,maxWidth:{xs:`25%`,sm:`20%`,md:`15%`},opacity:1,pointerEvents:`none`,zIndex:dr,userSelect:`none`,WebkitUserDrag:`none`}}),!E&&(0,Y.jsx)(R,{sx:{padding:1.5,flexShrink:0,position:`relative`,backgroundImage:`url(${q.nightOrderBackgroundUrl})`,width:`200px`,boxShadow:`none`}}),(0,Y.jsxs)(Ct,{elevation:0,sx:{pt:2,flex:1,backgroundImage:`url(${q.mainBackgroundUrl})`,backgroundSize:`100% 100%`,backgroundPosition:`center`,backgroundRepeat:`no-repeat`,borderRadius:0,position:`relative`,boxShadow:`none`,display:`flex`,flexDirection:`column`,alignItems:`stretch`,justifyContent:`flex-start`,minHeight:`100vh`,minWidth:0,"@media print":{height:`100vh !important`,minHeight:`100vh !important`}},children:[(0,Y.jsx)(f,{sensors:ee,collisionDetection:m,onDragEnd:ne,children:(0,Y.jsx)(p,{items:j,strategy:l,children:(0,Y.jsxs)(R,{sx:{position:`relative`,zIndex:1,px:{xs:2,sm:3,md:4},pt:{xs:2,sm:3,md:4}},children:[j.map(e=>{let t=re(e);return t?(0,Y.jsx)(ur,{id:e,disabled:a,children:t},e):null}),!a&&(0,Y.jsx)(lr,{onAddComponent:e=>{(e===`title`||e===`ppl_table1`||e===`ppl_table2`)&&J.addSecondPageComponent(e)}})]})})}),(0,Y.jsx)($,{component:`img`,src:`/imgs/images/back_tower.png`,alt:`back_tower`,sx:{position:`absolute`,left:`0%`,bottom:`0`,display:`flex`,width:`20%`,zIndex:dr,opacity:.4,userSelect:`none`,WebkitUserDrag:`none`,pointerEvents:`none`}}),(0,Y.jsx)($,{component:`img`,src:`/imgs/images/back_tower2.png`,alt:`back_tower2`,sx:{position:`absolute`,left:`36%`,bottom:`0%`,display:`flex`,width:`50%`,zIndex:dr,opacity:.8,userSelect:`none`,WebkitUserDrag:`none`,pointerEvents:`none`}})]}),!E&&(0,Y.jsx)(R,{sx:{padding:1.5,flexShrink:0,position:`relative`,backgroundImage:`url(${q.nightOrderBackgroundUrl})`,width:`200px`,boxShadow:`none`}})]})})]})});const pr=C(()=>{let{t:e,language:t}=X();return(0,G.useEffect)(()=>{document.title=e(`seo.title`),document.documentElement.lang=t;let n=document.querySelector(`meta[name="description"]`);n&&n.setAttribute(`content`,e(`seo.description`));let r=document.querySelector(`meta[name="keywords"]`);r&&r.setAttribute(`content`,e(`seo.keywords`));let i=document.querySelector(`meta[property="og:title"]`);i&&i.setAttribute(`content`,e(`seo.title`));let a=document.querySelector(`meta[property="og:description"]`);a&&a.setAttribute(`content`,e(`seo.description`));let o=document.querySelector(`meta[name="twitter:title"]`);o&&o.setAttribute(`content`,e(`seo.title`));let s=document.querySelector(`meta[name="twitter:description"]`);s&&s.setAttribute(`content`,e(`seo.description`))},[e,t]),null});var mr=C(({open:e,onClose:t})=>{let{t:n}=X(),[r,i]=(0,G.useState)(``),[a,o]=(0,G.useState)(``),[s,c]=(0,G.useState)(null),[l,u]=(0,G.useState)(``),[d,f]=(0,G.useState)(!1),p=e=>{let t=e.target.files?.[0];if(!t)return;let a=[`font/ttf`,`font/otf`,`font/woff`,`font/woff2`,`application/x-font-ttf`,`application/x-font-otf`],s=t.name.split(`.`).pop()?.toLowerCase();if(!a.includes(t.type)&&![`ttf`,`otf`,`woff`,`woff2`].includes(s||``)){u(n(`fontUploader.errorInvalidFile`));return}if(t.size>15*1024*1024){u(n(`fontUploader.errorFileSize`));return}if(c(t),u(``),!r){let e=t.name.replace(/\.[^/.]+$/,``);i(e),o(e.replace(/\s+/g,`-`))}},m=async()=>{if(!s||!r.trim()||!a.trim()){u(n(`fontUploader.errorAllFields`));return}f(!0),u(``);try{let e=new FileReader;e.onload=async e=>{try{let t=e.target?.result,n={id:`custom-${Date.now()}`,name:r.trim(),fontFamily:a.trim(),dataUrl:t};await q.addCustomFont(n),i(``),o(``),c(null),f(!1)}catch(e){console.error(`Failed to save font:`,e),u(n(`fontUploader.errorUpload`)),f(!1)}},e.onerror=()=>{u(n(`fontUploader.errorReadFile`)),f(!1)},e.readAsDataURL(s)}catch{u(n(`fontUploader.errorUpload`)),f(!1)}},h=async e=>{if(window.confirm(n(`fontUploader.deleteConfirm`)))try{await q.removeCustomFont(e)}catch(e){console.error(`Failed to delete font:`,e),u(n(`fontUploader.errorUpload`))}},g=()=>{i(``),o(``),c(null),u(``),t()};return(0,Y.jsxs)(V,{open:e,onClose:g,maxWidth:`sm`,fullWidth:!0,children:[(0,Y.jsx)(H,{children:n(`fontUploader.title`)}),(0,Y.jsx)(W,{children:(0,Y.jsxs)(R,{sx:{display:`flex`,flexDirection:`column`,gap:2,pt:1},children:[(0,Y.jsx)(I,{variant:`subtitle2`,sx:{fontWeight:`bold`},children:n(`fontUploader.uploadNew`)}),(0,Y.jsx)(D,{label:n(`fontUploader.fontName`),value:r,onChange:e=>i(e.target.value),fullWidth:!0,size:`small`,helperText:n(`fontUploader.fontNameHelper`)}),(0,Y.jsx)(D,{label:n(`fontUploader.fontFamily`),value:a,onChange:e=>o(e.target.value),fullWidth:!0,size:`small`,helperText:n(`fontUploader.fontFamilyHelper`)}),(0,Y.jsxs)(R,{children:[(0,Y.jsxs)(A,{variant:`outlined`,component:`label`,startIcon:(0,Y.jsx)(st,{}),fullWidth:!0,children:[s?s.name:n(`fontUploader.selectFile`),(0,Y.jsx)(`input`,{type:`file`,hidden:!0,accept:`.ttf,.otf,.woff,.woff2`,onChange:p})]}),(0,Y.jsx)(I,{variant:`caption`,color:`text.secondary`,sx:{mt:.5,display:`block`},children:n(`fontUploader.fileHelper`)})]}),l&&(0,Y.jsx)(fe,{severity:`error`,children:l}),(0,Y.jsx)(A,{variant:`contained`,startIcon:(0,Y.jsx)(he,{}),onClick:m,disabled:!s||!r.trim()||!a.trim()||d,children:n(d?`fontUploader.uploading`:`fontUploader.addFont`)}),q.config.customFonts.length>0&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(I,{variant:`subtitle2`,sx:{fontWeight:`bold`,mt:2},children:[n(`fontUploader.uploadedFonts`),` (`,q.config.customFonts.length,n(`fontUploader.fontCount`),`)`]}),(0,Y.jsx)(ut,{sx:{maxHeight:200,overflow:`auto`},children:q.config.customFonts.map(e=>(0,Y.jsxs)(Ge,{children:[(0,Y.jsx)(ft,{primary:e.name,secondary:`Font Family: ${e.fontFamily}`,primaryTypographyProps:{sx:{fontFamily:e.fontFamily}}}),(0,Y.jsx)(Ne,{children:(0,Y.jsx)(B,{edge:`end`,onClick:()=>h(e.id),size:`small`,children:(0,Y.jsx)(T,{})})})]},e.id))})]})]})}),(0,Y.jsx)(xt,{children:(0,Y.jsx)(A,{onClick:g,children:n(`fontUploader.close`)})})]})}),hr=C(({open:e,onClose:t})=>{let{t:n}=X(),[r,i]=(0,G.useState)(!1),[a,o]=(0,G.useState)(``),[s,c]=(0,G.useState)(!1),l=[{id:`backgroundSettings`,title:n(`ui.category.backgroundSettings`),keywords:[`背景`,`图片`,`上传`,`自定义`,`夜晚`,`顺序`,`中间`,`区域`,`background`,`image`,`upload`,`custom`,`night`,`order`,`main`,`area`]},{id:`pageLayout`,title:n(`ui.category.pageLayout`),keywords:[`页面`,`布局`,`双页`,`背景`,`夜晚`,`顺序`,`标题`,`高度`,`模式`,`page`,`layout`,`two-page`,`two page`,`background`,`night`,`order`,`title`,`height`,`mode`]},{id:`cardLayout`,title:n(`ui.category.cardLayout`),keywords:[`卡片`,`布局`,`内边距`,`间距`,`文本`,`区域`,`padding`,`gap`,`card`,`layout`,`padding`,`gap`,`text`,`area`,`spacing`,`margin`]},{id:`iconSize`,title:n(`ui.category.iconSize`),keywords:[`图标`,`大小`,`头像`,`相克`,`传奇`,`宽度`,`高度`,`icon`,`size`,`icon`,`size`,`avatar`,`jinx`,`fabled`,`width`,`height`,`image`]},{id:`fontSettings`,title:n(`ui.category.fontSettings`),keywords:[`字体`,`标题`,`阵营`,`角色`,`技能`,`相克`,`jinx`,`特殊规则`,`内容`,`font`,`title`,`team`,`character`,`ability`,`rule`,`content`,`text`,`typography`]}],u=()=>{r||t()},d=()=>{window.confirm(n(`dialog.resetUIMessage`)||`确定要重置所有UI设置吗？`)&&q.resetToDefault()},f=()=>{i(!r)},p=(0,G.useMemo)(()=>{if(!a.trim())return l.map(e=>({...e,show:!0}));let e=a.toLowerCase().trim();return l.map(t=>({...t,show:t.keywords.some(t=>t.toLowerCase().includes(e))||t.title.toLowerCase().includes(e)}))},[a,l,n]),m=({label:e,value:t,onChange:n})=>(0,Y.jsxs)(Ve,{fullWidth:!0,size:`small`,sx:{mt:1},children:[(0,Y.jsx)(mt,{sx:{fontSize:`0.875rem`,mb:.5},children:e}),(0,Y.jsx)(Oe,{value:t,onChange:e=>n(e.target.value),sx:{"& .MuiSelect-select":{fontFamily:t}},children:q.availableFonts.map(e=>(0,Y.jsx)(w,{value:e.value,sx:{fontFamily:e.value},children:e.label},e.value))})]});return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)($e,{anchor:`left`,open:e,onClose:u,hideBackdrop:r,disableScrollLock:!0,ModalProps:{keepMounted:!0,disableEnforceFocus:!0,disableAutoFocus:!0,disableScrollLock:!0},sx:{pointerEvents:r?`none`:`auto`,"& .MuiDrawer-paper":{width:{xs:`90%`,sm:420},maxWidth:420,boxShadow:3,pointerEvents:`auto`},...!r&&{"& .MuiBackdrop-root":{backgroundColor:`rgba(0, 0, 0, 0.3)`}}},children:(0,Y.jsxs)(R,{sx:{height:`100%`,display:`flex`,flexDirection:`column`},children:[(0,Y.jsxs)(R,{sx:{p:2,display:`flex`,alignItems:`center`,justifyContent:`space-between`,backgroundColor:r?`primary.light`:`background.paper`,transition:`background-color 0.3s`},children:[(0,Y.jsx)(I,{variant:`h6`,sx:{fontWeight:`bold`,color:r?`primary.contrastText`:`text.primary`},children:n(`ui.settings`)}),(0,Y.jsxs)(R,{sx:{display:`flex`,gap:1},children:[(0,Y.jsx)(le,{title:n(r?`ui.unpinDrawer`:`ui.pinDrawer`),children:(0,Y.jsx)(B,{onClick:f,size:`small`,color:r?`inherit`:`default`,sx:{backgroundColor:r?`rgba(255, 255, 255, 0.2)`:`transparent`,"&:hover":{backgroundColor:r?`rgba(255, 255, 255, 0.3)`:`rgba(0, 0, 0, 0.04)`}},children:r?(0,Y.jsx)(He,{}):(0,Y.jsx)(Ue,{})})}),(0,Y.jsx)(B,{onClick:t,size:`small`,sx:{color:r?`primary.contrastText`:`text.primary`},children:(0,Y.jsx)(L,{})})]})]}),(0,Y.jsx)(U,{}),(0,Y.jsx)(R,{sx:{p:2,pb:1},children:(0,Y.jsx)(D,{fullWidth:!0,size:`small`,placeholder:n(`ui.searchSettings`),value:a,onChange:e=>o(e.target.value),InputProps:{startAdornment:(0,Y.jsx)(Ze,{position:`start`,children:(0,Y.jsx)(Fe,{fontSize:`small`})})}})}),(0,Y.jsx)(R,{sx:{flex:1,overflow:`auto`,p:2,pt:1},children:(0,Y.jsxs)(ae,{spacing:2,children:[p.find(e=>e.id===`backgroundSettings`)?.show&&(0,Y.jsxs)(ge,{defaultExpanded:!a,children:[(0,Y.jsx)(N,{expandIcon:(0,Y.jsx)(j,{}),children:(0,Y.jsx)(I,{variant:`subtitle1`,sx:{fontWeight:`medium`},children:n(`ui.category.backgroundSettings`)})}),(0,Y.jsx)(F,{children:(0,Y.jsxs)(ae,{spacing:3,children:[(0,Y.jsx)(R,{sx:{p:1.5,bgcolor:`info.lighter`,borderRadius:1,border:`1px solid`,borderColor:`info.light`},children:(0,Y.jsx)(I,{variant:`caption`,color:`info.dark`,sx:{display:`block`,mb:.5},children:n(`ui.backgroundTip`)})}),(0,Y.jsxs)(R,{children:[(0,Y.jsx)(mt,{sx:{mb:1,display:`block`},children:n(`ui.nightOrderBackgroundLabel`)}),(0,Y.jsxs)(De,{value:q.config.nightOrderBackgroundMode,onChange:e=>{q.updateConfig({nightOrderBackgroundMode:e.target.value})},children:[(0,Y.jsx)(Re,{value:`official`,control:(0,Y.jsx)(ke,{size:`small`}),label:n(`ui.backgroundMode.official`)}),q.config.nightOrderBackgroundMode===`official`&&(0,Y.jsx)(R,{sx:{ml:4,mt:.5,mb:1},children:(0,Y.jsxs)(De,{value:q.config.nightOrderBackground,onChange:e=>q.updateConfig({nightOrderBackground:e.target.value}),children:[(0,Y.jsx)(Re,{value:`purple`,control:(0,Y.jsx)(ke,{size:`small`}),label:n(`ui.purpleBackground`)}),(0,Y.jsx)(Re,{value:`yellow`,control:(0,Y.jsx)(ke,{size:`small`}),label:n(`ui.yellowBackground`)}),(0,Y.jsx)(Re,{value:`green`,control:(0,Y.jsx)(ke,{size:`small`}),label:n(`ui.greenBackground`)})]})}),(0,Y.jsx)(Re,{value:`custom`,control:(0,Y.jsx)(ke,{size:`small`}),label:n(`ui.backgroundMode.custom`)})]}),q.config.nightOrderBackgroundMode===`custom`&&(0,Y.jsxs)(R,{sx:{mt:1,ml:4},children:[(0,Y.jsx)(`input`,{accept:`image/*`,style:{display:`none`},id:`night-order-background-upload`,type:`file`,onChange:e=>{let t=e.target.files?.[0];if(t){if(t.size>2*1024*1024){alert(`图片大小不能超过 2MB`);return}let e=new FileReader;e.onload=e=>{let t=e.target?.result;q.updateConfig({customNightOrderBackground:t})},e.readAsDataURL(t)}}}),(0,Y.jsx)(`label`,{htmlFor:`night-order-background-upload`,children:(0,Y.jsx)(A,{variant:`outlined`,component:`span`,fullWidth:!0,children:n(`ui.uploadBackground`)})}),q.config.customNightOrderBackground&&(0,Y.jsxs)(R,{sx:{mt:2},children:[(0,Y.jsx)(I,{variant:`caption`,sx:{mb:1,display:`block`},children:n(`ui.backgroundPreview`)}),(0,Y.jsx)(R,{sx:{width:`100%`,height:100,backgroundImage:`url(${q.config.customNightOrderBackground})`,backgroundSize:`cover`,backgroundPosition:`center`,borderRadius:1,border:`1px solid`,borderColor:`divider`}}),(0,Y.jsx)(A,{variant:`text`,color:`error`,size:`small`,fullWidth:!0,sx:{mt:1},onClick:()=>{q.updateConfig({customNightOrderBackground:``})},children:n(`ui.removeBackground`)})]})]})]}),(0,Y.jsx)(U,{}),(0,Y.jsxs)(R,{children:[(0,Y.jsx)(mt,{sx:{mb:1,display:`block`},children:n(`ui.mainBackgroundLabel`)}),(0,Y.jsxs)(De,{value:q.config.mainBackgroundMode,onChange:e=>{q.updateConfig({mainBackgroundMode:e.target.value})},children:[(0,Y.jsx)(Re,{value:`official`,control:(0,Y.jsx)(ke,{size:`small`}),label:n(`ui.backgroundMode.official`)}),(0,Y.jsx)(Re,{value:`custom`,control:(0,Y.jsx)(ke,{size:`small`}),label:n(`ui.backgroundMode.custom`)})]}),q.config.mainBackgroundMode===`custom`&&(0,Y.jsxs)(R,{sx:{mt:1,ml:4},children:[(0,Y.jsx)(`input`,{accept:`image/*`,style:{display:`none`},id:`main-background-upload`,type:`file`,onChange:e=>{let t=e.target.files?.[0];if(t){if(t.size>2*1024*1024){alert(`图片大小不能超过 2MB`);return}let e=new FileReader;e.onload=e=>{let t=e.target?.result;q.updateConfig({customMainBackground:t})},e.readAsDataURL(t)}}}),(0,Y.jsx)(`label`,{htmlFor:`main-background-upload`,children:(0,Y.jsx)(A,{variant:`outlined`,component:`span`,fullWidth:!0,children:n(`ui.uploadBackground`)})}),q.config.customMainBackground&&(0,Y.jsxs)(R,{sx:{mt:2},children:[(0,Y.jsx)(I,{variant:`caption`,sx:{mb:1,display:`block`},children:n(`ui.backgroundPreview`)}),(0,Y.jsx)(R,{sx:{width:`100%`,height:100,backgroundImage:`url(${q.config.customMainBackground})`,backgroundSize:`cover`,backgroundPosition:`center`,borderRadius:1,border:`1px solid`,borderColor:`divider`}}),(0,Y.jsx)(A,{variant:`text`,color:`error`,size:`small`,fullWidth:!0,sx:{mt:1},onClick:()=>{q.updateConfig({customMainBackground:``})},children:n(`ui.removeBackground`)})]})]})]})]})})]}),p.find(e=>e.id===`pageLayout`)?.show&&(0,Y.jsxs)(ge,{defaultExpanded:!a,children:[(0,Y.jsx)(N,{expandIcon:(0,Y.jsx)(j,{}),children:(0,Y.jsx)(I,{variant:`subtitle1`,sx:{fontWeight:`medium`},children:n(`ui.category.pageLayout`)})}),(0,Y.jsx)(F,{children:(0,Y.jsxs)(ae,{spacing:2,children:[(0,Y.jsx)(Ve,{component:`fieldset`,fullWidth:!0,children:(0,Y.jsxs)(R,{sx:{display:`flex`,alignItems:`center`,justifyContent:`space-between`},children:[(0,Y.jsxs)(R,{children:[(0,Y.jsx)(mt,{component:`legend`,children:n(`ui.enableTwoPageMode`)}),(0,Y.jsx)(I,{variant:`caption`,color:`text.secondary`,sx:{display:`block`,mt:.5},children:n(`ui.twoPageModeDesc`)})]}),(0,Y.jsx)(Ce,{checked:q.config.enableTwoPageMode,onChange:e=>q.updateConfig({enableTwoPageMode:e.target.checked})})]})}),(0,Y.jsxs)(R,{children:[(0,Y.jsxs)(I,{variant:`caption`,gutterBottom:!0,children:[n(`ui.titleHeight`),`: `,q.config.titleHeightMd,`px`]}),(0,Y.jsx)(P,{value:q.config.titleHeightMd,onChange:(e,t)=>q.updateConfig({titleHeightMd:t}),min:100,max:300,valueLabelDisplay:`auto`})]}),(0,Y.jsxs)(Ve,{component:`fieldset`,children:[(0,Y.jsx)(mt,{component:`legend`,children:n(`ui.nightOrderBackground`)}),(0,Y.jsxs)(De,{value:q.config.nightOrderBackground,onChange:e=>q.updateConfig({nightOrderBackground:e.target.value}),children:[(0,Y.jsx)(Re,{value:`purple`,control:(0,Y.jsx)(ke,{size:`small`}),label:n(`ui.purpleBackground`)}),(0,Y.jsx)(Re,{value:`yellow`,control:(0,Y.jsx)(ke,{size:`small`}),label:n(`ui.yellowBackground`)}),(0,Y.jsx)(Re,{value:`green`,control:(0,Y.jsx)(ke,{size:`small`}),label:n(`ui.greenBackground`)})]})]})]})})]}),p.find(e=>e.id===`cardLayout`)?.show&&(0,Y.jsxs)(ge,{defaultExpanded:!a,children:[(0,Y.jsx)(N,{expandIcon:(0,Y.jsx)(j,{}),children:(0,Y.jsx)(I,{variant:`subtitle1`,sx:{fontWeight:`medium`},children:n(`ui.category.cardLayout`)})}),(0,Y.jsx)(F,{children:(0,Y.jsxs)(ae,{spacing:2,children:[(0,Y.jsxs)(R,{children:[(0,Y.jsxs)(I,{variant:`caption`,gutterBottom:!0,children:[n(`ui.cardPaddingX`),`: `,q.config.characterCard.cardPaddingX]}),(0,Y.jsx)(P,{value:q.config.characterCard.cardPaddingX,onChange:(e,t)=>q.updateCharacterCardConfig({cardPaddingX:t}),min:0,max:5,step:.5,valueLabelDisplay:`auto`})]}),(0,Y.jsxs)(R,{children:[(0,Y.jsxs)(I,{variant:`caption`,gutterBottom:!0,children:[n(`ui.cardPaddingY`),`: `,q.config.characterCard.cardPaddingY]}),(0,Y.jsx)(P,{value:q.config.characterCard.cardPaddingY,onChange:(e,t)=>q.updateCharacterCardConfig({cardPaddingY:t}),min:0,max:5,step:.5,valueLabelDisplay:`auto`})]}),(0,Y.jsxs)(R,{children:[(0,Y.jsxs)(I,{variant:`caption`,gutterBottom:!0,children:[n(`ui.cardGap`),`: `,q.config.characterCard.cardGap]}),(0,Y.jsx)(P,{value:q.config.characterCard.cardGap,onChange:(e,t)=>q.updateCharacterCardConfig({cardGap:t}),min:0,max:5,step:.5,valueLabelDisplay:`auto`})]}),(0,Y.jsxs)(R,{children:[(0,Y.jsxs)(I,{variant:`caption`,gutterBottom:!0,children:[n(`ui.textAreaGap`),`: `,q.config.characterCard.textAreaGap]}),(0,Y.jsx)(P,{value:q.config.characterCard.textAreaGap,onChange:(e,t)=>q.updateCharacterCardConfig({textAreaGap:t}),min:0,max:2,step:.1,valueLabelDisplay:`auto`})]})]})})]}),p.find(e=>e.id===`iconSize`)?.show&&(0,Y.jsxs)(ge,{defaultExpanded:!a,children:[(0,Y.jsx)(N,{expandIcon:(0,Y.jsx)(j,{}),children:(0,Y.jsx)(I,{variant:`subtitle1`,sx:{fontWeight:`medium`},children:n(`ui.category.iconSize`)})}),(0,Y.jsx)(F,{children:(0,Y.jsxs)(ae,{spacing:2,children:[(0,Y.jsx)(I,{variant:`caption`,sx:{fontWeight:`medium`,mt:1},children:n(`ui.avatarSize`)}),(0,Y.jsxs)(R,{children:[(0,Y.jsxs)(I,{variant:`caption`,gutterBottom:!0,children:[n(`ui.avatarWidthMd`),`: `,q.config.characterCard.avatarWidthMd,`px`]}),(0,Y.jsx)(P,{value:q.config.characterCard.avatarWidthMd,onChange:(e,t)=>q.updateCharacterCardConfig({avatarWidthMd:t}),min:50,max:150,valueLabelDisplay:`auto`})]}),(0,Y.jsxs)(R,{children:[(0,Y.jsxs)(I,{variant:`caption`,gutterBottom:!0,children:[n(`ui.avatarHeightMd`),`: `,q.config.characterCard.avatarHeightMd,`px`]}),(0,Y.jsx)(P,{value:q.config.characterCard.avatarHeightMd,onChange:(e,t)=>q.updateCharacterCardConfig({avatarHeightMd:t}),min:40,max:120,valueLabelDisplay:`auto`})]}),(0,Y.jsx)(I,{variant:`caption`,sx:{fontWeight:`medium`,mt:2},children:n(`ui.jinxIconSize`)}),(0,Y.jsxs)(R,{children:[(0,Y.jsxs)(I,{variant:`caption`,gutterBottom:!0,children:[n(`ui.jinxIconWidthMd`),`: `,q.config.characterCard.jinxIconWidthMd,`px`]}),(0,Y.jsx)(P,{value:q.config.characterCard.jinxIconWidthMd,onChange:(e,t)=>q.updateCharacterCardConfig({jinxIconWidthMd:t}),min:20,max:80,valueLabelDisplay:`auto`})]}),(0,Y.jsxs)(R,{children:[(0,Y.jsxs)(I,{variant:`caption`,gutterBottom:!0,children:[n(`ui.jinxIconHeightMd`),`: `,q.config.characterCard.jinxIconHeightMd,`px`]}),(0,Y.jsx)(P,{value:q.config.characterCard.jinxIconHeightMd,onChange:(e,t)=>q.updateCharacterCardConfig({jinxIconHeightMd:t}),min:20,max:80,valueLabelDisplay:`auto`})]}),(0,Y.jsx)(I,{variant:`caption`,sx:{fontWeight:`medium`,mt:2},children:n(`ui.fabledIconSize`)}),(0,Y.jsxs)(R,{children:[(0,Y.jsxs)(I,{variant:`caption`,gutterBottom:!0,children:[n(`ui.fabledIconWidthMd`),`: `,q.config.characterCard.fabledIconWidthMd,`px`]}),(0,Y.jsx)(P,{value:q.config.characterCard.fabledIconWidthMd,onChange:(e,t)=>q.updateCharacterCardConfig({fabledIconWidthMd:t}),min:20,max:100,valueLabelDisplay:`auto`})]}),(0,Y.jsxs)(R,{children:[(0,Y.jsxs)(I,{variant:`caption`,gutterBottom:!0,children:[n(`ui.fabledIconHeightMd`),`: `,q.config.characterCard.fabledIconHeightMd,`px`]}),(0,Y.jsx)(P,{value:q.config.characterCard.fabledIconHeightMd,onChange:(e,t)=>q.updateCharacterCardConfig({fabledIconHeightMd:t}),min:20,max:100,valueLabelDisplay:`auto`})]})]})})]}),p.find(e=>e.id===`fontSettings`)?.show&&(0,Y.jsxs)(ge,{defaultExpanded:!1,children:[(0,Y.jsx)(N,{expandIcon:(0,Y.jsx)(j,{}),children:(0,Y.jsx)(I,{variant:`subtitle1`,sx:{fontWeight:`medium`},children:n(`ui.category.fontSettings`)})}),(0,Y.jsx)(F,{children:(0,Y.jsxs)(ae,{spacing:2,children:[(0,Y.jsx)(A,{variant:`outlined`,startIcon:(0,Y.jsx)(gt,{}),onClick:()=>c(!0),fullWidth:!0,children:n(`ui.manageCustomFonts`)}),(0,Y.jsx)(U,{}),(0,Y.jsx)(m,{label:n(`ui.font.scriptTitle`),value:q.config.fonts.scriptTitle,onChange:e=>q.updateFontConfig({scriptTitle:e})}),(0,Y.jsx)(m,{label:n(`ui.font.teamDivider`),value:q.config.fonts.teamDivider,onChange:e=>q.updateFontConfig({teamDivider:e})}),(0,Y.jsx)(m,{label:n(`ui.font.characterName`),value:q.config.fonts.characterName,onChange:e=>q.updateFontConfig({characterName:e})}),(0,Y.jsx)(m,{label:n(`ui.font.characterAbility`),value:q.config.fonts.characterAbility,onChange:e=>q.updateFontConfig({characterAbility:e})}),(0,Y.jsx)(m,{label:n(`ui.font.jinxText`),value:q.config.fonts.jinxText,onChange:e=>q.updateFontConfig({jinxText:e})}),(0,Y.jsx)(U,{sx:{my:1}}),(0,Y.jsx)(I,{variant:`caption`,sx:{fontWeight:`medium`},children:n(`ui.font.page1Rules`)}),(0,Y.jsx)(m,{label:n(`ui.font.titleFont`),value:q.config.fonts.specialRuleTitle,onChange:e=>q.updateFontConfig({specialRuleTitle:e})}),(0,Y.jsx)(m,{label:n(`ui.font.contentFont`),value:q.config.fonts.specialRuleContent,onChange:e=>q.updateFontConfig({specialRuleContent:e})}),(0,Y.jsx)(U,{sx:{my:1}}),(0,Y.jsx)(I,{variant:`caption`,sx:{fontWeight:`medium`},children:n(`ui.font.page2Rules`)}),(0,Y.jsx)(m,{label:n(`ui.font.titleFont`),value:q.config.fonts.stateRuleTitle,onChange:e=>q.updateFontConfig({stateRuleTitle:e})}),(0,Y.jsx)(m,{label:n(`ui.font.contentFont`),value:q.config.fonts.stateRuleContent,onChange:e=>q.updateFontConfig({stateRuleContent:e})})]})})]}),a&&!p.some(e=>e.show)&&(0,Y.jsx)(R,{sx:{textAlign:`center`,py:4},children:(0,Y.jsx)(I,{variant:`body2`,color:`text.secondary`,children:n(`ui.noResults`)})})]})}),(0,Y.jsx)(U,{}),(0,Y.jsx)(R,{sx:{p:2},children:(0,Y.jsx)(A,{fullWidth:!0,variant:`outlined`,color:`warning`,startIcon:(0,Y.jsx)(Xe,{}),onClick:d,children:n(`ui.resetUISettings`)})})]})}),(0,Y.jsx)(mr,{open:s,onClose:()=>c(!1)})]})}),gr=({open:e,onClose:t})=>{let{t:n}=X();return(0,Y.jsxs)(V,{open:e,onClose:t,disableScrollLock:!0,maxWidth:`sm`,fullWidth:!0,PaperProps:{sx:{borderRadius:3,backgroundImage:`linear-gradient(to bottom, #fdfbf7 0%, #f8f6f1 100%)`}},children:[(0,Y.jsxs)(H,{sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,pb:1},children:[(0,Y.jsx)(I,{variant:`h5`,sx:{fontWeight:`bold`,color:Z.paper.primary},children:n(`about.title`)}),(0,Y.jsx)(B,{onClick:t,size:`small`,children:(0,Y.jsx)(L,{})})]}),(0,Y.jsxs)(W,{sx:{pt:2},children:[(0,Y.jsxs)(R,{sx:{mb:4},children:[(0,Y.jsx)(I,{variant:`h6`,sx:{fontWeight:`bold`,color:Z.good,mb:2,fontSize:`1.1rem`},children:n(`about.aboutProject`)}),(0,Y.jsx)(I,{sx:{color:Z.paper.secondary,lineHeight:1.8,mb:2,fontSize:`0.95rem`},children:n(`about.projectDescription`)}),(0,Y.jsx)(R,{sx:{display:`flex`,justifyContent:`center`,my:3},children:(0,Y.jsx)(A,{variant:`contained`,startIcon:(0,Y.jsx)(ye,{}),href:`https://ko-fi.com/bigonion`,target:`_blank`,rel:`noopener noreferrer`,sx:{backgroundColor:`#FF5E5B`,color:`white`,px:3,py:1.5,borderRadius:2,textTransform:`none`,fontSize:`1rem`,fontWeight:`bold`,"&:hover":{backgroundColor:`#ff4543`}},children:n(`about.donate`)})})]}),(0,Y.jsx)(U,{sx:{my:3}}),(0,Y.jsxs)(R,{children:[(0,Y.jsx)(I,{variant:`h6`,sx:{fontWeight:`bold`,color:Z.good,mb:2,fontSize:`1.1rem`},children:n(`about.acknowledgments`)}),(0,Y.jsx)(vr,{title:n(`about.artAdviceTest`),content:``,theme:`gold`}),(0,Y.jsx)(vr,{title:`${n(`about.translationProofreading`)}: ${n(`about.weedinAllen`)} `,content:``,theme:`green`}),(0,Y.jsx)(vr,{title:n(`about.designReference`),content:n(`about.museum`),theme:`pink`}),(0,Y.jsx)(vr,{title:n(`about.specialThanks`),content:n(`about.nusClub`),theme:`blue`}),(0,Y.jsx)(I,{sx:{color:Z.paper.secondary,lineHeight:1.9,fontSize:`0.9rem`,textAlign:`right`,fontStyle:`italic`,mt:3,fontFamily:`"Georgia", "Times New Roman", serif`},children:n(`about.letterClosing`)})]})]})]})},_r={blue:{bgGradient:`linear-gradient(135deg, rgba(240, 248, 255, 0.95) 0%, rgba(230, 245, 255, 0.9) 100%)`,borderColor:`rgba(66, 165, 245, 0.3)`,barGradient:`linear-gradient(90deg, #42a5f5 0%, #90caf9 50%, #42a5f5 100%)`,titleColor:`#1565c0`,contentColor:`#0d47a1`},gold:{bgGradient:`linear-gradient(135deg, rgba(255, 249, 240, 0.95) 0%, rgba(255, 245, 230, 0.9) 100%)`,borderColor:`rgba(212, 175, 55, 0.3)`,barGradient:`linear-gradient(90deg, #d4af37 0%, #f0e68c 50%, #d4af37 100%)`,titleColor:`#8b6914`,contentColor:`#8b6914`},pink:{bgGradient:`linear-gradient(135deg, rgba(255, 240, 245, 0.95) 0%, rgba(255, 235, 245, 0.9) 100%)`,borderColor:`rgba(236, 64, 122, 0.3)`,barGradient:`linear-gradient(90deg, #ec407a 0%, #f48fb1 50%, #ec407a 100%)`,titleColor:`#ad1457`,contentColor:`#880e4f`},green:{bgGradient:`linear-gradient(135deg, rgba(245, 255, 245, 0.95) 0%, rgba(235, 255, 235, 0.9) 100%)`,borderColor:`rgba(102, 187, 106, 0.3)`,barGradient:`linear-gradient(90deg, #66bb6a 0%, #a5d6a7 50%, #66bb6a 100%)`,titleColor:`#2e7d32`,contentColor:`#1b5e20`}},vr=({title:e,content:t,theme:n=`blue`})=>{let r=_r[n];return(0,Y.jsx)(R,{sx:{background:r.bgGradient,borderRadius:3,px:2.5,pt:2,mb:2,border:`2px solid`,borderColor:r.borderColor,boxShadow:`0 4px 12px rgba(0, 0, 0, 0.08)`,position:`relative`,overflow:`hidden`,"&::before":{content:`""`,position:`absolute`,top:0,left:0,right:0,height:`4px`,background:r.barGradient}},children:(0,Y.jsxs)(R,{sx:{mb:1.5},children:[(0,Y.jsx)(I,{sx:{fontWeight:`bold`,fontSize:`0.95rem`,color:r.titleColor,mb:.5,letterSpacing:`0.5px`},children:e}),(0,Y.jsx)(R,{sx:{fontSize:`1.05rem`,color:r.contentColor,fontWeight:600,pl:2,whiteSpace:`pre-line`},children:t})]})})},yr=({open:e,onClose:t,onConfirm:n,t:r,language:i})=>(0,Y.jsxs)(V,{open:e,onClose:t,disableScrollLock:!0,"aria-labelledby":`print-dialog-title`,"aria-describedby":`print-dialog-description`,maxWidth:`sm`,fullWidth:!0,PaperProps:{sx:{borderRadius:3,boxShadow:`0 12px 48px rgba(0,0,0,0.15)`}},children:[(0,Y.jsxs)(H,{id:`print-dialog-title`,sx:{display:`flex`,alignItems:`center`,gap:1.5,pb:2,pt:3,px:3},children:[(0,Y.jsx)(it,{sx:{fontSize:32,color:`#1976d2`}}),(0,Y.jsx)(I,{variant:`h6`,component:`span`,sx:{fontWeight:700,fontSize:`1.25rem`},children:r(`dialog.printTitle`)})]}),(0,Y.jsxs)(W,{sx:{px:3,pb:2},children:[(0,Y.jsxs)(R,{sx:{display:`flex`,gap:1.5,p:2.5,mb:3,backgroundColor:`#f0f7ff`,borderRadius:2,border:`1px solid #d0e7ff`},children:[(0,Y.jsx)(vt,{sx:{color:`#1976d2`,flexShrink:0,mt:.2,fontSize:22}}),(0,Y.jsx)(I,{variant:`body2`,sx:{color:`#1565c0`,lineHeight:1.7,fontSize:`0.9rem`},children:r(`dialog.printMessage`)})]}),(0,Y.jsxs)(R,{sx:{display:`flex`,flexDirection:`column`,gap:1.5},children:[(0,Y.jsxs)(R,{sx:{display:`flex`,alignItems:`center`,gap:1.5,py:1},children:[(0,Y.jsx)(z,{sx:{color:`#2e7d32`,fontSize:22,flexShrink:0}}),(0,Y.jsx)(I,{variant:`body2`,sx:{color:`#424242`,fontSize:`0.9rem`},children:r(`dialog.printBrowser`)})]}),(0,Y.jsxs)(R,{sx:{display:`flex`,alignItems:`center`,gap:1.5,py:1},children:[(0,Y.jsx)(z,{sx:{color:`#2e7d32`,fontSize:22,flexShrink:0}}),(0,Y.jsx)(I,{variant:`body2`,sx:{color:`#424242`,fontSize:`0.9rem`},children:r(`dialog.printDevice`)})]}),(0,Y.jsx)(R,{sx:{my:1.5,borderTop:`1px solid #e0e0e0`}}),(0,Y.jsx)(I,{variant:`subtitle2`,sx:{fontWeight:700,fontSize:`0.85rem`,color:`#424242`,textTransform:`uppercase`,letterSpacing:.8,mb:1.5},children:i===`zh-CN`?`推荐配置`:`Recommended Settings`}),(0,Y.jsx)(R,{sx:{backgroundColor:`#fafafa`,borderRadius:2,p:2.5,border:`1px solid #e0e0e0`},children:(0,Y.jsxs)(R,{sx:{display:`flex`,flexDirection:`column`,gap:2},children:[(0,Y.jsxs)(R,{sx:{display:`flex`,alignItems:`center`,gap:2},children:[(0,Y.jsx)(R,{sx:{minWidth:6,height:6,borderRadius:`50%`,backgroundColor:`#757575`,flexShrink:0}}),(0,Y.jsx)(I,{variant:`body2`,sx:{color:`#424242`,fontSize:`0.9rem`},children:r(`dialog.printPaper`)})]}),(0,Y.jsxs)(R,{sx:{display:`flex`,alignItems:`center`,gap:2},children:[(0,Y.jsx)(R,{sx:{minWidth:6,height:6,borderRadius:`50%`,backgroundColor:`#757575`,flexShrink:0}}),(0,Y.jsx)(I,{variant:`body2`,sx:{color:`#424242`,fontSize:`0.9rem`},children:r(`dialog.printScale`)})]}),(0,Y.jsxs)(R,{sx:{display:`flex`,alignItems:`center`,gap:2},children:[(0,Y.jsx)(R,{sx:{minWidth:6,height:6,borderRadius:`50%`,backgroundColor:`#757575`,flexShrink:0}}),(0,Y.jsx)(I,{variant:`body2`,sx:{color:`#424242`,fontSize:`0.9rem`},children:r(`dialog.printMargin`)})]})]})})]})]}),(0,Y.jsxs)(xt,{sx:{px:3,py:2.5,gap:1.5,backgroundColor:`#fafafa`},children:[(0,Y.jsx)(A,{onClick:t,sx:{px:3,py:1,fontWeight:500,color:`#757575`,"&:hover":{backgroundColor:`#eeeeee`}},children:r(`common.cancel`)}),(0,Y.jsx)(A,{onClick:n,variant:`contained`,autoFocus:!0,startIcon:(0,Y.jsx)(it,{}),sx:{px:3.5,py:1,fontWeight:600,backgroundColor:`#1976d2`,boxShadow:`0 2px 8px rgba(25, 118, 210, 0.3)`,"&:hover":{backgroundColor:`#1565c0`,boxShadow:`0 4px 12px rgba(25, 118, 210, 0.4)`}},children:r(`dialog.printConfirm`)})]})]}),br=({open:e,onClose:t,onConfirm:n,t:r})=>(0,Y.jsxs)(V,{open:e,onClose:t,disableScrollLock:!0,maxWidth:`sm`,fullWidth:!0,PaperProps:{sx:{borderRadius:3,boxShadow:`0 12px 48px rgba(0,0,0,0.15)`}},children:[(0,Y.jsxs)(H,{sx:{display:`flex`,alignItems:`center`,gap:1.5,pb:2,pt:3,px:3},children:[(0,Y.jsx)(vt,{sx:{fontSize:32,color:`#ff9800`}}),(0,Y.jsx)(I,{variant:`h6`,component:`span`,sx:{fontWeight:700,fontSize:`1.25rem`},children:r(`dialog.unlockModeTitle`)})]}),(0,Y.jsxs)(W,{sx:{px:3,pb:2},children:[(0,Y.jsx)(R,{sx:{display:`flex`,gap:1.5,p:2.5,backgroundColor:`#fff8e1`,borderRadius:2,border:`1px solid #ffe0b2`},children:(0,Y.jsx)(I,{variant:`body2`,sx:{color:`#e65100`,lineHeight:1.7,fontSize:`0.95rem`},children:r(`dialog.unlockModeMessage`)})}),(0,Y.jsx)(I,{variant:`body2`,sx:{color:`#757575`,mt:2,fontSize:`0.9rem`},children:r(`dialog.unlockModeNote`)})]}),(0,Y.jsxs)(xt,{sx:{px:3,py:2.5,gap:1.5,backgroundColor:`#fafafa`},children:[(0,Y.jsx)(A,{onClick:t,sx:{px:3,py:1,fontWeight:500,color:`#757575`,"&:hover":{backgroundColor:`#eeeeee`}},children:r(`common.cancel`)}),(0,Y.jsx)(A,{onClick:n,variant:`contained`,autoFocus:!0,sx:{px:3.5,py:1,fontWeight:600,backgroundColor:`#ff9800`,boxShadow:`0 2px 8px rgba(255, 152, 0, 0.3)`,"&:hover":{backgroundColor:`#f57c00`,boxShadow:`0 4px 12px rgba(255, 152, 0, 0.4)`}},children:r(`dialog.unlockAndEdit`)})]})]}),xr=({open:e,onClose:t,onExportOriginal:n,onExportCurrentLanguage:r,onExportIdOnly:i,t:a})=>(0,Y.jsxs)(V,{open:e,onClose:t,disableScrollLock:!0,maxWidth:`sm`,fullWidth:!0,PaperProps:{sx:{borderRadius:3,boxShadow:`0 12px 48px rgba(0,0,0,0.15)`}},children:[(0,Y.jsxs)(H,{sx:{display:`flex`,alignItems:`center`,gap:1.5,pb:2,pt:3,px:3},children:[(0,Y.jsx)(_e,{sx:{fontSize:32,color:`#1976d2`}}),(0,Y.jsx)(I,{variant:`h6`,component:`span`,sx:{fontWeight:700,fontSize:`1.25rem`},children:a(`dialog.exportJsonTitle`)})]}),(0,Y.jsxs)(W,{sx:{px:3,pb:3},children:[(0,Y.jsx)(I,{variant:`body2`,sx:{color:`#666`,mb:3,lineHeight:1.7},children:a(`dialog.exportJsonMessage`)}),(0,Y.jsxs)(R,{sx:{mb:2,p:2.5,borderRadius:2,border:`2px solid #fff3e0`,backgroundColor:`#f5f5f5`,cursor:`pointer`,transition:`all 0.2s`,"&:hover":{borderColor:`#ff9800`,backgroundColor:`#fff3e0`}},onClick:n,children:[(0,Y.jsx)(I,{variant:`subtitle1`,sx:{fontWeight:600,color:`#ff9800`,mb:1},children:a(`dialog.exportOriginalJson`)}),(0,Y.jsx)(I,{variant:`body2`,sx:{color:`#666`,fontSize:`0.9rem`},children:a(`dialog.exportOriginalJsonDesc`)})]}),(0,Y.jsxs)(R,{sx:{mb:2,p:2.5,borderRadius:2,border:`2px solid #e3f2fd`,backgroundColor:`#f5f5f5`,cursor:`pointer`,transition:`all 0.2s`,"&:hover":{borderColor:`#1976d2`,backgroundColor:`#e3f2fd`}},onClick:r,children:[(0,Y.jsx)(I,{variant:`subtitle1`,sx:{fontWeight:600,color:`#1976d2`,mb:1},children:a(`dialog.exportCurrentLangJson`)}),(0,Y.jsx)(I,{variant:`body2`,sx:{color:`#666`,fontSize:`0.9rem`},children:a(`dialog.exportCurrentLangJsonDesc`)})]}),(0,Y.jsxs)(R,{sx:{p:2.5,borderRadius:2,border:`2px solid #e8f5e9`,backgroundColor:`#f5f5f5`,cursor:`pointer`,transition:`all 0.2s`,"&:hover":{borderColor:`#4caf50`,backgroundColor:`#e8f5e9`}},onClick:i,children:[(0,Y.jsx)(I,{variant:`subtitle1`,sx:{fontWeight:600,color:`#4caf50`,mb:1},children:a(`dialog.exportIdOnly`)}),(0,Y.jsx)(I,{variant:`body2`,sx:{color:`#666`,fontSize:`0.9rem`},children:a(`dialog.exportIdOnlyDesc`)})]})]}),(0,Y.jsx)(xt,{sx:{px:3,py:2.5,backgroundColor:`#fafafa`},children:(0,Y.jsx)(A,{onClick:t,sx:{px:3,py:1,fontWeight:500,color:`#757575`,"&:hover":{backgroundColor:`#eeeeee`}},children:a(`common.cancel`)})})]}),Sr={"@media print":{"@page":{size:`A4 portrait`,margin:0},"body *":{visibility:`hidden !important`},"#script-preview, #script-preview *, #main_script, #main_script *, #script-preview-2, #script-preview-2 *":{visibility:`visible !important`},".MuiContainer-root":{padding:`0 !important`,margin:`0 !important`,maxWidth:`100% !important`},"#script-preview":{position:`relative !important`,left:`0 !important`,top:`0 !important`,width:`100vw !important`,height:`100vh !important`,margin:`0 !important`,padding:`0 !important`,overflow:`hidden !important`,pageBreakInside:`avoid !important`},"#script-preview:has(~ #script-preview-2)":{pageBreakAfter:`always !important`},"#script-preview-2":{position:`relative !important`,left:`0 !important`,top:`0 !important`,width:`100vw !important`,height:`100vh !important`,margin:`0 !important`,padding:`0 !important`,overflow:`hidden !important`,pageBreakBefore:`always !important`,pageBreakInside:`avoid !important`,marginTop:`0 !important`},"#main_script .MuiBox-root":{visibility:`visible !important`},".MuiIconButton-root":{display:`none !important`},".second-page-add-component":{display:`none !important`}}},Cr=Ee({palette:{primary:{main:Z.good},secondary:{main:Z.evil},background:{default:`#f5f5f5`},text:{primary:Z.text.primary,secondary:Z.text.secondary}},typography:{fontFamily:fn.fontFamily},breakpoints:{values:{xs:0,sm:600,md:960,lg:1280,xl:1920}}}),wr=C(()=>{let e=b(),[t]=g(),{t:n,language:r}=X(),[i,a]=(0,G.useState)(!1),[o,s]=(0,G.useState)(!1),[c,l]=(0,G.useState)(null),[u,d]=(0,G.useState)(!1),[f,p]=(0,G.useState)(null),[m,h]=(0,G.useState)(void 0),[_,v]=(0,G.useState)(!1),[y,x]=(0,G.useState)(!1),[S,C]=(0,G.useState)(!1),[w,T]=(0,G.useState)(!1),[E,D]=(0,G.useState)(null),[ee,te]=(0,G.useState)(!1),[j,ne]=(0,G.useState)(!1),[re,ie]=(0,G.useState)(!1),[ae,oe]=(0,G.useState)(``),[se,M]=(0,G.useState)(!1),[ce,N]=(0,G.useState)(!1),[P,le]=(0,G.useState)(!1),[ue,F]=(0,G.useState)(!1),[de,L]=(0,G.useState)(!1),[fe,pe]=(0,G.useState)(null),{script:z,originalJson:B,normalizedJson:me,customTitle:he,customAuthor:ge}=J;(0,G.useEffect)(()=>{(async()=>{let n=t.get(`json`);if(n){e(`/repo/preview?json=${encodeURIComponent(n)}`);return}if(J.hasStoredData){if(B)try{let e=Qn(B,r);he&&(e.title=he),ge&&(e.author=ge),J.setScript(e)}catch(e){console.error(`重新生成剧本失败:`,e),J.clear()}}else try{let e=await J.loadDefaultExample();ye(e)}catch(e){console.error(`加载默认示例失败:`,e)}te(!0)})()},[t,e]),(0,G.useEffect)(()=>(en(),()=>{Yt(),tn()}),[]),(0,G.useEffect)(()=>(Jt(()=>{let e=J.originalJson;if(e)try{JSON.parse(e),localStorage.getItem(`botc-script-data`)&&Qt(r===`zh-CN`?`已保存到本地存储`:`Saved to local storage`,2500)}catch(e){console.error(`JSON格式错误:`,e),Vt(r===`zh-CN`?`✗ JSON格式错误，无法保存`:`✗ Invalid JSON format`,2500,{kind:`error`})}else console.log(`没有可保存的JSON数据`),Vt(r===`zh-CN`?`⚠ 没有可保存的JSON`:`⚠ No JSON to save`,2e3,{kind:`warning`})}),()=>{Yt()}),[r]);let _e=e=>{J.setOriginalJson(e),oe(``)},ye=(e,t,i)=>{try{let n=Qn(e,r);t&&(n.title=t),i&&(n.author=i),J.updateScript({script:n,originalJson:e,customTitle:t||``,customAuthor:i||``}),oe(``)}catch(e){let t=e instanceof Error?e.message:n(`input.errorParse`);oe(`${n(`input.errorParse`)}: ${t}`)}};(0,G.useEffect)(()=>{if(B&&ee)try{let e=Qn(B,r);he&&(e.title=he),ge&&(e.author=ge),J.setScript(e)}catch(e){console.error(`语言切换时重新生成剧本失败:`,e);let t=e instanceof Error?e.message:n(`input.errorParse`);oe(`${n(`input.errorParse`)}: ${t}`)}},[r,B,he,ge,ee]);let be=(e,t)=>{J.reorderCharacters(e,t)},xe=(e,t)=>{J.updateCharacter(e,t)},Se=e=>{if(K.config.officialIdParseMode){pe(e),L(!0);return}l(e),s(!0)},Ce=()=>{K.setOfficialIdParseMode(!1),L(!1),fe&&(l(fe),s(!0),pe(null),Vt(`${n(`dialog.unlockSuccess`)}`,2500,{kind:`success`}))},Te=()=>{s(!1),l(null)},Ee=e=>{f?J.replaceCharacter(f,e)&&(p(null),d(!1)):J.addCharacter(e)},De=e=>{J.removeCharacter(e)},Oe=(e,t)=>{p(e),h(t),d(!0)},ke=()=>{x(!0)},Ae=()=>{C(!0)},je=e=>{J.updateTitleInfo({title:e.title,titleImage:e.titleImage,titleImageSize:e.titleImageSize,useTitleImage:e.useTitleImage,author:e.author,playerCount:e.playerCount})},Me=e=>{J.updateTitleInfo({secondPageTitleText:e.title,secondPageTitleImage:e.titleImage,secondPageTitleFontSize:e.fontSize,secondPageTitleImageSize:e.imageSize,useSecondPageTitleImage:e.useImage})},Ne=e=>{D(e),T(!0)},Pe=e=>{J.updateSpecialRule(e)},Fe=()=>{ne(!0)},Ie=(e,t,n)=>{if(K.config.officialIdParseMode){console.log(`官方ID解析模式已开启，禁止修改夜间行动顺序`);return}if(!z)return;let r=e===`first`?[...z.firstnight]:[...z.othernight],i=e===`first`?3:1;if(t<i||n<i)return;let a=r[t],o=Math.max(...r.slice(0,i).map(e=>e.index)),s;if(n===i){let e=r[i];if(e){let t=Math.max(o+.1,e.index-.5);s=Math.max(o+.1,t)}else s=o+.5}else if(n===r.length-1){let e=r[r.length-2];s=e?Math.max(e.index+.5,o+.5):o+.5}else{let e=r[n-1],i=r[n+(t<n?1:0)];e&&i?(s=(e.index+i.index)/2,Math.abs(s-e.index)<.01&&(s=e.index+.5),s=Math.max(s,o+.1)):s=e?Math.max(e.index+.5,o+.5):i?Math.max(i.index-.5,o+.5):o+.5}s=Math.max(s,o+.1);let c=a.image,l=z.all.find(e=>e.image===c);if(l){let t={};e===`first`?t.firstNight=s:t.otherNight=s,xe(l.id,t)}},Le=(e,t)=>{if(e===`custom_jinx`){ne(!1),M(!0);return}if(e===`special_rule`){let e;if(t){let n=Gn(t);if(!n){console.error(`未找到特殊规则模板:`,t);return}e={id:`custom_rule_${Date.now()}`,title:{"zh-CN":n.title[`zh-CN`],en:n.title.en},team:`special_rule`,content:{"zh-CN":n.content[`zh-CN`],en:n.content.en},sourceType:`special_rule`,sourceIndex:0}}else e={id:`custom_rule_${Date.now()}`,title:{"zh-CN":`新规则`,en:`New Rule`},team:`special_rule`,content:{"zh-CN":`请输入规则内容...`,en:`Enter rule content...`},sourceType:`special_rule`,sourceIndex:0};if(z){let t={...z};t.specialRules=[...t.specialRules,e],t.secondPageRules&&=[...t.secondPageRules,e],J.setScript(t);try{let t=JSON.parse(B),n=Array.isArray(t)?t:[];n.push({id:e.id,team:`special_rule`,title:e.title,content:e.content});let r=JSON.stringify(n,null,2);J.setOriginalJson(r)}catch(e){console.error(`同步新规则到JSON失败:`,e)}}}},Re=()=>{B&&le(!0)},ze=()=>{if(me)try{let e=JSON.parse(me),t=Array.isArray(e)?e:[],i=r===`en`?Rn:Q,a=e=>{let t=typeof e==`string`?{id:e}:e;if(t.name&&typeof t.name==`string`){for(let e of Object.values(i))if(e.name===t.name)return e}if(i[t.id])return i[t.id];let n=un(t.id,r);return i[n]?i[n]:null},o=[];t.forEach(e=>{let t=typeof e==`string`?{id:e}:e;if(t.id===`_meta`||t.team===`a jinxed`||t.team===`special_rule`)o.push(e);else{let n=a(e);if(n){let e={id:n.id,name:n.name,ability:n.ability,team:n.team,image:n.image};n.firstNight&&(e.firstNight=n.firstNight),n.otherNight&&(e.otherNight=n.otherNight),n.firstNightReminder&&(e.firstNightReminder=n.firstNightReminder),n.otherNightReminder&&(e.otherNightReminder=n.otherNightReminder),n.reminders&&n.reminders.length>0&&(e.reminders=n.reminders),n.remindersGlobal&&n.remindersGlobal.length>0&&(e.remindersGlobal=n.remindersGlobal),n.setup&&(e.setup=n.setup),o.push(e),console.log(`导出当前语言完整信息: ${n.name}`)}else o.push(e),console.warn(`无法在${r}库中找到，保留原始JSON:`,t.id)}});let s=JSON.stringify(o,null,2),c=new Blob([s],{type:`application/json`}),l=URL.createObjectURL(c),u=document.createElement(`a`);u.href=l;let d=n(r===`zh-CN`?`export.chineseLang`:`export.englishLang`);u.download=`${z?.title||n(`export.defaultScriptName`)}-${d}${n(`export.currentLangSuffix`)}.json`,u.click(),URL.revokeObjectURL(l),le(!1)}catch(e){console.error(`导出当前语言JSON失败:`,e),alert(n(`input.exportJsonFailed`))}},Be=()=>{if(B)try{let e=new Blob([B],{type:`application/json`}),t=URL.createObjectURL(e),r=document.createElement(`a`);r.href=t,r.download=`${z?.title||n(`export.defaultScriptName`)}-${n(`export.originalSuffix`)}.json`,r.click(),URL.revokeObjectURL(t),le(!1)}catch(e){console.error(`导出原始JSON失败:`,e),alert(n(`input.exportJsonFailed`))}},Ve=()=>{if(me)try{let e=JSON.parse(me),t=Array.isArray(e)?e:[],r=e=>{let t=typeof e==`string`?{id:e}:e;if(t.name&&typeof t.name==`string`){for(let[e,n]of Object.entries(Q))if(n.name===t.name)return{found:!0,id:e};for(let[e,n]of Object.entries(Rn))if(n.name===t.name)return{found:!0,id:e}}if(Q[t.id]||Rn[t.id])return{found:!0,id:t.id};let n=un(t.id,`en`);return Q[n]||Rn[n]?{found:!0,id:n}:{found:!1}},i=[];t.forEach(e=>{let t=typeof e==`string`?{id:e}:e;if(t.id===`_meta`||t.team===`a jinxed`||t.team===`special_rule`)i.push(e);else{let n=r(e);n.found&&n.id?(i.push(n.id),console.log(`✓ 找到官方ID: ${n.id}${t.name?` (${t.name})`:``}`)):(i.push(e),console.warn(`⚠ 无法找到官方ID，保留完整JSON:`,t.id,t.name||``))}});let a=JSON.stringify(i,null,2),o=new Blob([a],{type:`application/json`}),s=URL.createObjectURL(o),c=document.createElement(`a`);c.href=s,c.download=`${z?.title||n(`export.defaultScriptName`)}-${n(`export.idOnlySuffix`)}.json`,c.click(),URL.revokeObjectURL(s),le(!1)}catch(e){console.error(`导出仅ID JSON失败:`,e),alert(n(`input.exportJsonFailed`))}},He=()=>{N(!0)},Ue=()=>{F(!0)},U=()=>{N(!1),window.print()};return(0,Y.jsxs)(we,{theme:Cr,children:[(0,Y.jsx)(O,{styles:Sr}),` `,(0,Y.jsx)(pr,{}),(0,Y.jsx)(yt,{}),(0,Y.jsx)(R,{sx:{backgroundRepeat:`no-repeat`,background:`#F6F1DC`,backgroundSize:`100% 100%`,backgroundPosition:`center`,backgroundAttachment:`fixed`,minHeight:`100vh`},children:(0,Y.jsxs)(ve,{maxWidth:`xl`,children:[(0,Y.jsx)(sn,{onGenerate:ye,onExportPDF:He,onExportImage:Ue,onExportJson:Re,onShare:()=>a(!0),onClear:()=>{let e=JSON.stringify([{id:`_meta`,author:``,name:`Custom Your Script!`}],null,2);try{let t=Qn(e,r);J.updateScript({script:t,originalJson:e,customTitle:``,customAuthor:``})}catch(t){console.error(`生成默认空剧本失败:`,t),J.setOriginalJson(e),J.setScript(null),J.setCustomTitle(``),J.setCustomAuthor(``)}},onOpenUISettings:()=>v(!0),onAddCustomRule:Fe,onOpenAboutDialog:()=>ie(!0),onJsonChange:_e,hasScript:z!==null,currentJson:B,jsonParseError:ae}),(0,Y.jsx)(xr,{open:P,onClose:()=>le(!1),onExportOriginal:Be,onExportCurrentLanguage:ze,onExportIdOnly:Ve,t:n}),z&&(0,Y.jsx)(fr,{script:z,theme:Cr,readOnly:!1,onReorderCharacters:be,onUpdateCharacter:xe,onEditCharacter:Se,onDeleteCharacter:De,onReplaceCharacter:Oe,onTitleEdit:ke,onSecondPageTitleEdit:Ae,onSpecialRuleEdit:Ne,onSpecialRuleDelete:e=>J.removeSpecialRule(e),onNightOrderReorder:Ie}),!z&&(0,Y.jsx)(Ct,{sx:{p:{xs:4,sm:6,md:8},textAlign:`center`,backgroundColor:`rgba(255, 255, 255, 0.9)`},children:(0,Y.jsx)(I,{variant:`h5`,sx:{color:`#666`,fontSize:{xs:`1.1rem`,sm:`1.3rem`,md:`1.5rem`}},children:n(`app.emptyState`)})})]})}),(0,Y.jsx)(dn,{open:i,onClose:()=>a(!1),script:z,originalJson:B,normalizedJson:me}),(0,Y.jsx)(jn,{open:o,character:c,onClose:Te,onSave:xe}),(0,Y.jsx)(Bn,{open:u,onClose:()=>{d(!1),p(null),h(void 0)},onAddCharacter:Ee,onRemoveCharacter:De,selectedCharacters:z?.all||[],initialTeam:f?.team,position:m}),(0,Y.jsx)(Mn,{onClick:()=>d(!u),show:!!z||!!B}),(0,Y.jsx)(hr,{open:_,onClose:()=>v(!1)}),(0,Y.jsx)(Vn,{open:y,title:z?.title||``,titleImage:z?.titleImage,titleImageSize:z?.titleImageSize,useTitleImage:z?.useTitleImage,author:z?.author||``,playerCount:z?.playerCount||``,onClose:()=>x(!1),onSave:je}),(0,Y.jsx)(Hn,{open:S,title:z?.secondPageTitleText||z?.title||``,titleImage:z?.secondPageTitleImage,fontSize:z?.secondPageTitleFontSize,imageSize:z?.secondPageTitleImageSize,useImage:z?.useSecondPageTitleImage,defaultImageUrl:z?.titleImage,onClose:()=>C(!1),onSave:Me}),(0,Y.jsx)(Un,{open:w,rule:E,onClose:()=>T(!1),onSave:Pe}),(0,Y.jsx)(qn,{open:j,onClose:()=>ne(!1),onAddRule:Le}),(0,Y.jsx)(gr,{open:re,onClose:()=>ie(!1)}),(0,Y.jsx)(Jn,{open:se,onClose:()=>M(!1),onSave:(e,t,n)=>{J.addCustomJinx(e,t,n),M(!1)},characters:z?.all||[]}),(0,Y.jsxs)(V,{open:ue,onClose:()=>F(!1),disableScrollLock:!0,maxWidth:`sm`,fullWidth:!0,PaperProps:{sx:{borderRadius:3,boxShadow:`0 12px 48px rgba(0,0,0,0.15)`}},children:[(0,Y.jsxs)(H,{sx:{display:`flex`,alignItems:`center`,gap:1.5,pb:2,pt:3,px:3},children:[(0,Y.jsx)(k,{sx:{fontSize:32,color:`#ff9800`}}),(0,Y.jsx)(I,{variant:`h6`,component:`span`,sx:{fontWeight:700,fontSize:`1.25rem`},children:n(`dialog.exportImageTitle`)})]}),(0,Y.jsxs)(W,{sx:{px:3,pb:3},children:[(0,Y.jsx)(I,{variant:`body1`,sx:{color:`#333`,mb:3,lineHeight:1.8,fontSize:`1rem`},children:n(`dialog.exportImageMessage`)}),(0,Y.jsx)(R,{sx:{p:2.5,borderRadius:2,border:`2px solid #fff3e0`,backgroundColor:`#fffbf5`,mb:2},children:(0,Y.jsxs)(I,{variant:`body2`,sx:{color:`#666`,fontSize:`0.9rem`,lineHeight:1.6},children:[`💡 `,n(`dialog.exportImageTip`)]})})]}),(0,Y.jsxs)(xt,{sx:{px:3,py:2.5,backgroundColor:`#fafafa`,gap:1},children:[(0,Y.jsx)(A,{onClick:()=>F(!1),sx:{px:3,py:1,fontWeight:500,color:`#757575`,"&:hover":{backgroundColor:`#eeeeee`}},children:n(`common.cancel`)}),(0,Y.jsx)(A,{variant:`contained`,endIcon:(0,Y.jsx)(Qe,{}),onClick:()=>{let e=r===`zh-CN`?`https://www.ilovepdf.com/zh-cn/pdf_to_jpg`:`https://www.ilovepdf.com/pdf_to_jpg`;window.open(e,`_blank`),F(!1)},sx:{px:3,py:1,fontWeight:600,backgroundColor:`#ff9800`,"&:hover":{backgroundColor:`#f57c00`}},children:n(`dialog.gotoILovePDF`)})]})]}),(0,Y.jsx)(yr,{open:ce,onClose:()=>N(!1),onConfirm:U,t:n,language:r}),(0,Y.jsx)(br,{open:de,onClose:()=>{L(!1),pe(null)},onConfirm:Ce,t:n})]})}),Tr=`/scripts/json/official`,Er=[{file:`tb.json`,name:`Trouble Brewing`},{file:`Sects&Violets.json`,name:`Sects & Violets`},{file:`BMR.json`,name:`Bad Moon Rising`}];const Dr=Er.reduce((e,t)=>(e[t.name]=`${Tr}/${t.file}`,e),{}),Or=Er.map(e=>({id:e.name.toLowerCase().replace(/[^a-z0-9]+/g,`-`),name:e.name,author:`官方`,description:`官方剧本`,category:`official`,jsonUrl:Dr[e.name]}));function kr(e){return Dr[e]}async function Ar(e){try{let t=await fetch(e);if(!t.ok)throw Error(`加载剧本失败: ${t.statusText}`);let n=await t.json();return JSON.stringify(n,null,2)}catch(e){throw console.error(`加载剧本JSON失败:`,e),e}}function jr(e){let t=e.toLowerCase().trim();return t?Or.filter(e=>e.name.toLowerCase().includes(t)||e.author.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)):Or}var Mr=C(()=>{let e=b(),{t,language:n}=X(),[r,i]=g(),[a,o]=(0,G.useState)(``),s=r.get(`category`)||`official`,[c,l]=(0,G.useState)(s),[u,d]=(0,G.useState)(jr(``).map(e=>({...e}))),[f,p]=(0,G.useState)([]),[m,h]=(0,G.useState)(1),_=e=>{o(e)},v=e=>{l(e),i({category:e})},y=e=>n===`en`&&e.nameEn?e.nameEn:e.name;(0,G.useEffect)(()=>{let e=r.get(`category`)||`official`;e!==c&&l(e)},[r]),(0,G.useEffect)(()=>{let e=a.toLowerCase(),t=(a?u.filter(t=>y(t).toLowerCase().includes(e)||t.author.toLowerCase().includes(e)||(t.description||``).toLowerCase().includes(e)):u).filter(e=>e.category===c);h(1),p(t)},[c,a,u,n]),(0,G.useEffect)(()=>{(async()=>{try{let e=await fetch(`/scripts/json/manifest.json`,{cache:`no-store`});if(!e.ok)throw Error(`manifest not found`);let t=((await e.json()).scripts||[]).map(e=>({id:e.id,name:e.name,nameEn:e.nameEn,author:e.author||`未知`,description:e.description||``,category:e.category||`custom`,logo:e.logo||void 0,jsonUrl:e.jsonUrl}));d(t)}catch{d(jr(``).map(e=>({...e})))}})()},[]);let x=(0,G.useMemo)(()=>Math.max(1,Math.ceil(f.length/12)),[f.length]),S=(0,G.useMemo)(()=>{let e=(m-1)*12;return f.slice(e,e+12)},[m,f]),C=t=>{e(`/repo/preview?json=${encodeURIComponent(t.jsonUrl)}&category=${c}`)};return(0,Y.jsx)(R,{sx:{minHeight:`100vh`,backgroundColor:`#f5f5f5`,py:4},children:(0,Y.jsxs)(ve,{maxWidth:`lg`,children:[(0,Y.jsxs)(R,{sx:{mb:3,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,Y.jsx)(A,{startIcon:(0,Y.jsx)(ue,{}),onClick:()=>e(`/`),sx:{color:Z.paper.primary},children:t(`repo.backToGenerator`)}),(0,Y.jsx)(nn,{})]}),(0,Y.jsx)(I,{variant:`h3`,sx:{textAlign:`center`,fontWeight:`bold`,mb:1,color:Z.paper.primary,fontSize:{xs:`1.8rem`,sm:`2.2rem`,md:`2.5rem`}},children:t(`repo.title`)}),(0,Y.jsx)(I,{sx:{textAlign:`center`,mb:4,color:Z.paper.secondary,fontSize:{xs:`0.9rem`,sm:`1rem`}},children:t(`repo.subtitle`)}),(0,Y.jsxs)(R,{sx:{mb:2,display:`flex`,justifyContent:`center`,gap:2},children:[(0,Y.jsx)(A,{variant:c===`official`?`contained`:`outlined`,onClick:()=>v(`official`),sx:{minWidth:`120px`,bgcolor:c===`official`?Z.good:`transparent`,color:c===`official`?`#fff`:Z.good,borderColor:Z.good,"&:hover":{bgcolor:c===`official`?Z.good:`rgba(76, 175, 80, 0.08)`,borderColor:Z.good}},children:t(`repo.categoryOfficial`)}),(0,Y.jsx)(A,{variant:c===`official_mix`?`contained`:`outlined`,onClick:()=>v(`official_mix`),sx:{minWidth:`120px`,bgcolor:c===`official_mix`?`#0078ba`:`transparent`,color:c===`official_mix`?`#fff`:`#0078ba`,borderColor:`#0078ba`,"&:hover":{bgcolor:c===`official_mix`?`#005a8c`:`rgba(0, 120, 186, 0.08)`,borderColor:`#0078ba`}},children:t(`repo.categoryOfficialMix`)}),(0,Y.jsx)(A,{variant:c===`custom`?`contained`:`outlined`,onClick:()=>v(`custom`),sx:{minWidth:`120px`,bgcolor:c===`custom`?`#ff9800`:`transparent`,color:c===`custom`?`#fff`:`#ff9800`,borderColor:`#ff9800`,"&:hover":{bgcolor:c===`custom`?`#f57c00`:`rgba(255, 152, 0, 0.08)`,borderColor:`#ff9800`}},children:t(`repo.categoryCustom`)})]}),(0,Y.jsx)(R,{sx:{mb:4,maxWidth:600,mx:`auto`},children:(0,Y.jsx)(D,{fullWidth:!0,variant:`outlined`,placeholder:t(`repo.searchPlaceholder`),value:a,onChange:e=>_(e.target.value),InputProps:{startAdornment:(0,Y.jsx)(Ze,{position:`start`,children:(0,Y.jsx)(Fe,{})})},sx:{backgroundColor:`white`,borderRadius:2,"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:Z.gray},"&:hover fieldset":{borderColor:Z.good},"&.Mui-focused fieldset":{borderColor:Z.good}}}})}),(0,Y.jsx)(R,{sx:{display:`grid`,gridTemplateColumns:{xs:`1fr`,sm:`repeat(2, 1fr)`,md:`repeat(3, 1fr)`},gap:3},children:S.map(e=>(0,Y.jsx)(ne,{sx:{height:`100%`,transition:`all 0.3s`,"&:hover":{transform:`translateY(-4px)`,boxShadow:6}},children:(0,Y.jsx)(be,{onClick:()=>C(e),sx:{height:`100%`,p:2},children:(0,Y.jsxs)(_t,{children:[e.logo&&(0,Y.jsx)(ee,{component:`img`,image:e.logo,alt:y(e),sx:{height:120,objectFit:`contain`,mb:1,borderRadius:1,backgroundColor:`#fff`}}),(0,Y.jsx)(I,{variant:`h5`,sx:{fontWeight:`bold`,mb:1,color:Z.paper.primary,fontSize:{xs:`1.2rem`,sm:`1.4rem`}},children:y(e)}),(0,Y.jsxs)(I,{sx:{color:Z.good,mb:1.5,fontSize:`0.9rem`},children:[t(`repo.author`),`：`,e.author]}),(0,Y.jsx)(I,{sx:{color:Z.paper.secondary,fontSize:`0.85rem`,lineHeight:1.6},children:e.description})]})})},e.id))}),f.length===0&&(0,Y.jsx)(R,{sx:{textAlign:`center`,py:8},children:(0,Y.jsx)(I,{sx:{color:Z.gray,fontSize:`1.1rem`},children:t(`repo.noResults`)})}),f.length>0&&(0,Y.jsx)(R,{sx:{display:`flex`,justifyContent:`center`,mt:3},children:(0,Y.jsx)(me,{count:x,page:m,onChange:(e,t)=>h(t),color:`primary`})})]})})}),Nr=Ee({breakpoints:{values:{xs:0,sm:600,md:960,lg:1280,xl:1920}}}),Pr=C(()=>{let{scriptName:e}=S(),[t]=g(),n=b(),{t:r,language:i}=X(),[a,o]=(0,G.useState)(null),[s,c]=(0,G.useState)(``),[l,u]=(0,G.useState)(!0),[d,f]=(0,G.useState)(``);(0,G.useEffect)(()=>{let e=K.config.officialIdParseMode;return K.setOfficialIdParseMode(!0),()=>{K.setOfficialIdParseMode(e)}},[]),(0,G.useEffect)(()=>{(async()=>{let n=t.get(`json`);if(n){try{let e=``;if(n.startsWith(`http://`)||n.startsWith(`https://`)||n.startsWith(`/`)){let t=await fetch(n);if(!t.ok)throw Error(`HTTP ${t.status}: ${t.statusText}`);e=await t.text()}else e=decodeURIComponent(n);f(e);let t=Qn(e,i);o(t)}catch(e){c(`${r(`error.loadFailed`)}：${e instanceof Error?e.message:r(`error.unknownError`)}`)}finally{u(!1)}return}if(!e){c(r(`error.noScriptName`)),u(!1);return}let a=decodeURIComponent(e),s=kr(a);if(!s){c(`${r(`error.scriptNotFound`)}：${a}`),u(!1);return}try{let e=await Ar(s);f(e);let t=Qn(e,i);o(t)}catch(e){c(`${r(`error.loadFailed`)}：${e instanceof Error?e.message:r(`error.unknownError`)}`)}finally{u(!1)}})()},[e,t,r]),(0,G.useEffect)(()=>{if(d)try{let e=Qn(d,i);o(e)}catch(e){console.error(`Failed to regenerate script:`,e)}},[i,d]);let p=()=>{if(d)try{let e=new Blob([d],{type:`application/json`}),t=URL.createObjectURL(e),n=document.createElement(`a`);n.href=t,n.download=`${a?.title||`剧本`}.json`,n.click(),URL.revokeObjectURL(t)}catch(e){console.error(`导出JSON失败:`,e),alert(r(`input.exportJsonFailed`))}};return l?(0,Y.jsx)(R,{sx:{minHeight:`100vh`,backgroundColor:`#f5f5f5`,py:4,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,Y.jsxs)(R,{sx:{textAlign:`center`},children:[(0,Y.jsx)(ie,{sx:{mb:2}}),(0,Y.jsx)(I,{children:r(`common.loading`)})]})}):s?(0,Y.jsx)(R,{sx:{minHeight:`100vh`,backgroundColor:`#f5f5f5`,py:4,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,Y.jsx)(R,{sx:{maxWidth:600,mx:`auto`},children:(0,Y.jsxs)(Ct,{sx:{p:4,textAlign:`center`},children:[(0,Y.jsx)(I,{variant:`h5`,color:`error`,sx:{mb:2},children:s}),(0,Y.jsx)(A,{startIcon:(0,Y.jsx)(ue,{}),onClick:()=>{let e=t.get(`category`),r=t.get(`json`)?`/`:e?`/repo?category=${e}`:`/repo`;n(r)},variant:`contained`,children:r(`common.back`)})]})})}):a?(0,Y.jsxs)(we,{theme:Nr,children:[(0,Y.jsx)(yt,{}),(0,Y.jsx)(O,{styles:{"@media print":{"@page":{size:`A4 portrait`,margin:0},"body *":{visibility:`hidden !important`},"#script-preview, #script-preview *, #main_script, #main_script *, #script-preview-2, #script-preview-2 *":{visibility:`visible !important`},".MuiContainer-root":{padding:`0 !important`,margin:`0 !important`,maxWidth:`100% !important`},"#script-preview":{position:`relative !important`,left:`0 !important`,top:`0 !important`,width:`100vw !important`,height:`100vh !important`,margin:`0 !important`,padding:`0 !important`,overflow:`hidden !important`,pageBreakInside:`avoid !important`},"#script-preview:has(~ #script-preview-2)":{pageBreakAfter:`always !important`},"#script-preview-2":{position:`relative !important`,left:`0 !important`,top:`0 !important`,width:`100vw !important`,height:`100vh !important`,margin:`0 !important`,padding:`0 !important`,overflow:`hidden !important`,pageBreakBefore:`always !important`,pageBreakInside:`avoid !important`,marginTop:`0 !important`},"#main_script .MuiBox-root":{visibility:`visible !important`},".MuiIconButton-root":{display:`none !important`},"#preview-control-box":{display:`none !important`}}}}),(0,Y.jsxs)(R,{sx:{display:`flex`,flexDirection:`column`},children:[(0,Y.jsx)(R,{id:`preview-control-box`,sx:{display:`flex`,justifyContent:`center`,alignItems:`center`,backgroundColor:`rgba(254, 250, 240, 0.95)`,borderBottom:`1px solid rgba(0, 0, 0, 0.1)`,py:1.5,"@media print":{display:`none !important`,visibility:`hidden !important`}},children:(0,Y.jsx)(R,{sx:{width:`100%`},children:(0,Y.jsxs)(R,{sx:{display:`flex`,gap:1.5,flexWrap:`nowrap`,justifyContent:`center`,alignItems:`center`},children:[(0,Y.jsx)(B,{onClick:()=>{let e=t.get(`category`);n(e?`/repo?category=${e}`:`/repo`)},size:`small`,sx:{color:Z.paper.secondary},"aria-label":`back`,children:(0,Y.jsx)(ue,{})}),(0,Y.jsx)(B,{onClick:p,size:`small`,sx:{color:Z.good},"aria-label":`export-json`,children:(0,Y.jsx)(pe,{})}),(0,Y.jsx)(B,{onClick:()=>window.print(),size:`small`,sx:{color:Z.paper.primary},"aria-label":`print`,children:(0,Y.jsx)(it,{})}),(0,Y.jsx)(Ce,{checked:q.config.enableTwoPageMode,onChange:e=>q.updateConfig({enableTwoPageMode:e.target.checked}),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:Z.paper.primary},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:Z.paper.primary}},inputProps:{"aria-label":`toggle-two-page`}}),(0,Y.jsx)(nn,{})]})})}),(0,Y.jsx)(R,{sx:{display:`flex`,justifyContent:`center`,alignItems:`flex-start`,backgroundColor:`background.default`,"@media print":{minHeight:`auto`}},children:(0,Y.jsx)(R,{sx:{width:`100%`,"@media print":{maxWidth:`100% !important`}},children:a&&(0,Y.jsx)(fr,{script:a,theme:Nr,readOnly:!0})})})]})]}):(0,Y.jsx)(R,{sx:{minHeight:`100vh`,backgroundColor:`#f5f5f5`,py:4,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,Y.jsx)(I,{children:r(`common.loading`)})})});(0,wt.createRoot)(document.getElementById(`root`)).render((0,Y.jsx)(G.StrictMode,{children:(0,Y.jsx)(Ft,{children:(0,Y.jsx)(x,{children:(0,Y.jsxs)(h,{children:[(0,Y.jsx)(_,{path:`/`,element:(0,Y.jsx)(wr,{})}),(0,Y.jsx)(_,{path:`/repo`,element:(0,Y.jsx)(Mr,{})}),(0,Y.jsx)(_,{path:`/repo/preview`,element:(0,Y.jsx)(Pr,{})}),(0,Y.jsx)(_,{path:`/repo/:scriptName`,element:(0,Y.jsx)(Pr,{})})]})})})}));