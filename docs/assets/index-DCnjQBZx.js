import{n as e}from"./rolldown-runtime-y2wrX6ue.js";import{a as t,c as n,d as r,f as i,i as a,l as o,m as s,n as c,o as l,r as u,s as d,t as f,u as p}from"./dnd-vendor-DmqEI5Sv.js";import{a as m,i as h,n as g,o as _,r as v,t as ee}from"./react-vendor-Cy2DCOL6.js";import{C as y,D as b,E as te,O as ne,S as x,T as S,_ as C,a as w,b as T,c as E,d as D,f as O,g as k,h as A,i as j,l as M,m as re,n as N,o as ie,p as ae,r as oe,s as se,t as ce,u as P,v as le,w as F,x as I,y as L}from"./mui-vendor-tQjvrAzf.js";import{t as R}from"./vendor-DV3WL1bQ.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var z=e(_()),B=e(s()),V=e(ne());function H({onGenerate:e,onExportImage:t,onExportJson:n,hasScript:r}){let i=h(),[a,o]=(0,B.useState)(``),[s,c]=(0,B.useState)(``),[l,u]=(0,B.useState)(``),[d,f]=(0,B.useState)(``),[p,m]=(0,B.useState)(!1),g=()=>{try{if(f(``),!a.trim()){f(`请输入剧本 JSON 数据`);return}e(a,s,l)}catch(e){f(e instanceof Error?e.message:`解析 JSON 失败`)}},_=e=>{let t=e.target.files?.[0];if(t){let e=new FileReader;e.onload=e=>{let t=e.target?.result;o(t)},e.readAsText(t)}},v=()=>{o(``),c(``),u(``),f(``)};return(0,V.jsxs)(F,{elevation:3,sx:{p:{xs:2,sm:3,md:4},mb:3,backgroundColor:`#fefefe`,borderRadius:2},children:[(0,V.jsxs)(I,{sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,mb:3,flexWrap:`wrap`,gap:2},children:[(0,V.jsx)(x,{variant:`h5`,sx:{fontWeight:`bold`,color:`#333`,fontSize:{xs:`1.3rem`,sm:`1.5rem`}},children:`血染钟楼剧本生成器`}),(0,V.jsx)(T,{variant:`outlined`,startIcon:(0,V.jsx)(w,{}),onClick:()=>i(`/repo`),sx:{borderColor:`#0078ba`,color:`#0078ba`,"&:hover":{borderColor:`#005a8c`,backgroundColor:`rgba(0, 120, 186, 0.08)`}},children:`剧本仓库`})]}),(0,V.jsxs)(O,{spacing:2,children:[(0,V.jsx)(D,{multiline:!0,rows:6,fullWidth:!0,label:`剧本 JSON`,placeholder:`粘贴官方剧本制作器导出的 JSON 数据...`,value:a,onChange:e=>o(e.target.value),variant:`outlined`,sx:{"& .MuiOutlinedInput-root":{fontFamily:`monospace`,fontSize:{xs:`0.8rem`,sm:`0.9rem`}}}}),d&&(0,V.jsx)(y,{severity:`error`,onClose:()=>f(``),children:d}),(0,V.jsxs)(I,{sx:{display:`flex`,gap:2,flexWrap:`wrap`},children:[(0,V.jsx)(T,{variant:`contained`,size:`large`,startIcon:(0,V.jsx)(j,{}),onClick:g,sx:{flex:{xs:`1 1 100%`,sm:`1 1 auto`},minWidth:{sm:120}},children:`生成剧本`}),(0,V.jsxs)(T,{variant:`outlined`,size:`large`,component:`label`,startIcon:(0,V.jsx)(ce,{}),sx:{flex:{xs:`1 1 100%`,sm:`0 1 auto`}},children:[`上传 JSON`,(0,V.jsx)(`input`,{type:`file`,accept:`.json`,hidden:!0,onChange:_})]}),(0,V.jsx)(T,{variant:`outlined`,size:`large`,startIcon:(0,V.jsx)(E,{}),onClick:t,disabled:!r,sx:{flex:{xs:`1 1 100%`,sm:`0 1 auto`}},children:`导出图片`}),(0,V.jsx)(T,{variant:`outlined`,size:`large`,startIcon:(0,V.jsx)(E,{}),onClick:n,disabled:!r,sx:{flex:{xs:`1 1 100%`,sm:`0 1 auto`}},children:`复制 JSON`}),(0,V.jsx)(T,{variant:`outlined`,size:`large`,color:`secondary`,startIcon:(0,V.jsx)(j,{}),onClick:v,sx:{flex:{xs:`1 1 100%`,sm:`0 1 auto`}},children:`清空`})]}),(0,V.jsxs)(I,{children:[(0,V.jsxs)(T,{size:`small`,onClick:()=>m(!p),endIcon:p?(0,V.jsx)(se,{}):(0,V.jsx)(ie,{}),sx:{mb:1},children:[(0,V.jsx)(N,{sx:{mr:1,fontSize:20}}),`高级选项`]}),(0,V.jsx)(S,{in:p,children:(0,V.jsxs)(O,{spacing:2,sx:{mt:2},children:[(0,V.jsx)(D,{fullWidth:!0,label:`剧本标题（可选）`,placeholder:`自定义剧本`,value:s,onChange:e=>c(e.target.value),variant:`outlined`,size:`small`}),(0,V.jsx)(D,{fullWidth:!0,label:`剧本作者（可选）`,placeholder:`作者名称`,value:l,onChange:e=>u(e.target.value),variant:`outlined`,size:`small`})]})})]}),(0,V.jsx)(y,{severity:`info`,sx:{mt:2},children:(0,V.jsxs)(x,{variant:`body2`,sx:{fontSize:{xs:`0.8rem`,sm:`0.85rem`}},children:[`• 支持官方剧本制作器的剧本 JSON`,(0,V.jsx)(`br`,{}),`• 支持鸦木布拉夫、汀西维尔、福波斯等各个人数的剧本格式`,(0,V.jsx)(`br`,{}),`• 2025/1/3 之后的实验性角色暂未录入，请使用完整 JSON 信息`]})})]})]})}const U={good:`#0078ba`,evil:`#b21e1d`,purple:`#dd38ca`,gray:`#999`,paper:{primary:`#2c2416`,secondary:`#3d3226`},nightOrder:{background:`#1a1d20`},text:{primary:`#000000`,secondary:`#000000`,tertiary:`#000000`}},ue={fontFamily:`"Source Han Serif", "Source Han Serif SC", "Noto Serif CJK SC", "思源宋体", "Microsoft YaHei", "PingFang SC", serif`,fallbackFontFamily:`"Segoe UI", "Microsoft YaHei", "PingFang SC", sans-serif`},de={townsfolk:U.good,outsider:U.good,minion:U.evil,demon:U.evil,traveler:`#808080`},fe={townsfolk:`镇民`,outsider:`外来者`,minion:`爪牙`,demon:`恶魔`,traveler:`旅行者`},W={washerwoman:{id:`washerwoman`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/washerwoman.png`,name:`洗衣妇`,ability:`在你的首个夜晚，你会得知两名玩家和一个镇民角色：这两名玩家之一是该角色。`,team:`townsfolk`,firstNight:3035,otherNight:0},librarian:{id:`librarian`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/librarian.png`,name:`图书管理员`,ability:`在你的首个夜晚，你会得知两名玩家和一个外来者角色：这两名玩家之一是该角色（或者你会得知没有外来者在场）。`,team:`townsfolk`,firstNight:3036,otherNight:0},investigator:{id:`investigator`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/investigator.png`,name:`调查员`,ability:`在你的首个夜晚，你会得知两名玩家和一个爪牙角色：这两名玩家之一是该角色（或者你会得知没有爪牙在场）。`,team:`townsfolk`,firstNight:3037,otherNight:0},chef:{id:`chef`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/chef.png`,name:`厨师`,ability:`在你的首个夜晚，你会得知场上邻座的邪恶玩家有多少对。`,team:`townsfolk`,firstNight:3038,otherNight:0},empath:{id:`empath`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/empath.png`,name:`共情者`,ability:`每个夜晚，你会得知与你邻近的两名存活的玩家中邪恶玩家的数量。`,team:`townsfolk`,firstNight:3039,otherNight:80},fortune_teller:{id:`fortune_teller`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/fortune_teller.png`,name:`占卜师`,ability:`每个夜晚，你要选择两名玩家：你会得知他们之中是否有恶魔。会有一名善良玩家始终被你的能力当作恶魔。`,team:`townsfolk`,firstNight:3040,otherNight:81},monk:{id:`monk`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/monk.png`,name:`僧侣`,ability:`每个夜晚*，你要选择除你以外的一名玩家：当晚恶魔的负面能力对他无效。`,team:`townsfolk`,firstNight:0,otherNight:14},ravenkeeper:{id:`ravenkeeper`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/ravenkeeper.png`,name:`守鸦人`,ability:`如果你在夜晚死亡，你会被唤醒，然后你要选择一名玩家：你会得知他的角色。`,team:`townsfolk`,firstNight:0,otherNight:70},virgin:{id:`virgin`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/virgin.png`,name:`贞洁者`,ability:`当你首次被提名时，如果提名你的玩家是镇民，他立刻被处决。`,team:`townsfolk`,firstNight:0,otherNight:0},slayer:{id:`slayer`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/slayer.png`,name:`猎手`,ability:`每局游戏限一次，你可以在白天时公开选择一名玩家：如果他是恶魔，他死亡。`,team:`townsfolk`,firstNight:0,otherNight:0},soldier:{id:`soldier`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/soldier.png`,name:`士兵`,ability:`恶魔的负面能力对你无效。`,team:`townsfolk`,firstNight:0,otherNight:0},mayor:{id:`mayor`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/mayor.png`,name:`镇长`,ability:`如果只有三名玩家存活且白天没有人被处决，你的阵营获胜。如果你在夜晚死亡，可能会有一名其他玩家代替你死亡。`,team:`townsfolk`,firstNight:0,otherNight:0},undertaker:{id:`undertaker`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/undertaker.png`,name:`送葬者`,ability:`每个夜晚*，你会得知今天白天死于处决的玩家的角色。`,team:`townsfolk`,firstNight:0,otherNight:83},butler:{id:`butler`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/butler.png`,name:`管家`,ability:`每个夜晚，你要选择除你以外的一名玩家：明天白天，只有他投票时你才能投票。`,team:`outsider`,firstNight:3041,otherNight:82},drunk:{id:`drunk`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/drunk.png`,name:`酒鬼`,ability:`你不知道你是酒鬼。你以为你是一个镇民角色，但其实你不是。`,team:`outsider`,firstNight:0,otherNight:0},recluse:{id:`recluse`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/recluse.png`,name:`陌客`,ability:`你可能会被当作邪恶阵营、爪牙角色或恶魔角色，即使你已死亡。`,team:`outsider`,firstNight:0,otherNight:0},saint:{id:`saint`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/saint.png`,name:`圣徒`,ability:`如果你死于处决，你的阵营落败。`,team:`outsider`,firstNight:0,otherNight:0},poisoner:{id:`poisoner`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/poisoner.png`,name:`投毒者`,ability:`每个夜晚，你要选择一名玩家：他在当晚和明天白天中毒。`,team:`minion`,firstNight:3017,otherNight:8},spy:{id:`spy`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/spy.png`,name:`间谍`,ability:`每个夜晚，你能查看魔典。你可能会被当作善良阵营、镇民角色或外来者角色，即使你已死亡。`,team:`minion`,firstNight:3058,otherNight:97},scarlet_woman:{id:`scarlet_woman`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/scarlet_woman.png`,name:`红唇女郎`,ability:`如果有五名及以上的玩家存活时（旅行者不计入人数）恶魔死亡，你会变成恶魔。`,team:`minion`,firstNight:0,otherNight:69},baron:{id:`baron`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/baron.png`,name:`男爵`,ability:`会有额外的外来者在场。[+2外来者]`,team:`minion`,firstNight:0,otherNight:0,setup:!0},imp:{id:`imp`,image:`https://oss.gstonegames.com/data_file/clocktower/web/icons/imp.png`,name:`小恶魔`,ability:`每个夜晚*，你要选择一名玩家：他死亡。如果你以这种方式自杀，一名爪牙会变成小恶魔。`,team:`demon`,firstNight:0,otherNight:50}},G={侍女:{数学家:`侍女会得知数学家是否醒来，即使她是在数学家之前醒来。`},食人族:{管家:`如果食人族获得了管家的能力，他会得知这一信息。`,杂耍艺人:`如果杂耍艺人在自己的首个白天猜测后在当天死于处决，当晚食人族会替杂耍艺人得知对应的信息。`,罂粟种植者:`如果食人族获得了罂粟种植者的能力，当他获得下一个能力时，爪牙和恶魔也会互相认识。`},瘟疫医生:{男爵:`如果说书人获得了男爵的能力，至多两名玩家会变成不在场的外来者。`,炸弹人:`如果瘟疫医生死于处决且说书人会因此获得炸弹人的能力，那么炸弹人的能力会立即被触发。`,镜像双子:`说书人无法在瘟疫医生死亡时获得镜像双子的能力。`,提线木偶:`如果在瘟疫医生死亡时说书人获得了提线木偶的能力，且与恶魔邻座的存活玩家中有镇民或外来者，其中一名玩家会变成邪恶的提线木偶。如果此时场上的邪恶玩家数量比初始设置时的数量超出一名或更多，改为无事发生。`,恐惧之灵:`如果瘟疫医生死亡且说书人会因此获得恐惧之灵的能力，改为一名存活的爪牙玩家获得此能力，且他会得知此事。`,哥布林:`如果瘟疫医生死亡且说书人会因此获得哥布林的能力，改为一名存活的爪牙玩家获得此能力，且他会得知此事。`,红唇女郎:`如果瘟疫医生死亡且说书人会因此获得红唇女郎的能力，改为一名存活的爪牙玩家获得此能力，且他会得知此事。`,间谍:`如果瘟疫医生死亡且说书人会因此获得间谍的能力，改为一名存活的爪牙玩家获得此能力，且他会得知此事。`,赶尸人:`如果瘟疫医生死亡且说书人会因此获得赶尸人的能力，改为一名存活的爪牙玩家获得此能力，且他会得知此事。`,养蛊人:`如果瘟疫医生死亡且说书人会因此获得养蛊人的能力，改为一名存活的爪牙玩家获得此能力，且他会得知此事。`,狐魅娘:`如果瘟疫医生死亡且说书人会因此获得狐魅娘的能力，改为一名存活的爪牙玩家获得此能力，且他会得知此事。`},麻脸巫婆:{异端分子:`麻脸巫婆无法创造异端分子。`,落难少女:`如果麻脸巫婆创造了落难少女，改为由说书人来决定哪一名玩家变成落难少女。`,政客:`被麻脸巫婆创造的邪恶政客无法因为自身能力转变为善良阵营。`,村夫:`如果村夫在场数量不足3人，麻脸巫婆可以创造新的村夫。如果她这么做，村夫的醉酒效果可能会更换目标。`,异教领袖:`被麻脸巫婆创造的邪恶异教领袖无法因为自身能力转变为善良阵营。`,莽夫:`被麻脸巫婆创造的邪恶莽夫无法因为自身能力转变为善良阵营。`},洗脑师:{哥布林:`洗脑师可以选择将玩家洗脑成哥布林。`},间谍:{魔术师:`当间谍查看魔典时，魔术师和恶魔的角色标记会被说书人移除。`,罂粟种植者:`如果罂粟种植者在场，直到其死亡前间谍无法查看魔典。`,落难少女:`如果间谍正在场或曾经在场，落难少女中毒。`,异端分子:`异端分子会被间谍当作一个不在场的外来者，异端分子会知道是哪个外来者。`},寡妇:{魔术师:`当寡妇查看魔典时，魔术师和恶魔的标记会被说书人移除。`,罂粟种植者:`如果罂粟种植者在场，直到其死亡前寡妇无法查看魔典。寡妇会在罂粟种植者死后的首个夜晚触发自身的能力。`,落难少女:`如果寡妇正在场或曾经在场，落难少女中毒。`,异端分子:`异端分子会被寡妇当作一个不在场的外来者，异端分子会知道是哪个外来者。`},教父:{异端分子:`异端分子会被教父当作一个不在场的外来者，异端分子会知道是哪个外来者。`},提线木偶:{告密者:`提线木偶不会得知三个不在场的角色，如果提线木偶与告密者均在场，改为由恶魔额外得知三个不在场角色。`,小怪宝:`提线木偶会与一名爪牙玩家邻座，而不是恶魔。提线木偶不会被唤醒来决定是否照看小怪宝，也不会在照看小怪宝时得知自己是提线木偶。`,罂粟种植者:`当罂粟种植者死亡后，恶魔会知道谁是提线木偶，但提线木偶什么都不会知道。`,气球驾驶员:`如果提线木偶抽到了气球驾驶员，也可能会+1外来者`,落难少女:`提线木偶不会得知落难少女在场。`,巡山人:`如果提线木偶抽到了巡山人，也会增加落难少女。`},男爵:{异端分子:`如果异端分子在剧本中，男爵的效果可能会只增加一个而非两个外来者。`},街头风琴手:{管家:`如果街头风琴手使得玩家需要闭眼投票，管家可以自由举手投票，但只在他的主人投票时他的票才会被统计。`},维齐尔:{调查员:`如果调查员的能力使其得知了维齐尔，则说书人不会告知所有人维齐尔在场。`,传教士:`如果维齐尔失去能力，他会得知这一信息。如果传教士在剧本列表中，且维齐尔在具有能力时被处决，他的阵营获胜。`,侍臣:`如果维齐尔失去能力，他会得知这一信息。如果侍臣在剧本列表中，且维齐尔在具有能力时被处决，他的阵营获胜。`,魔术师:`如果维齐尔和魔术师都在场，恶魔不会得知谁是爪牙。`,恐惧之灵:`在恐惧之灵因为自己的能力被唤醒时，维齐尔会一同被唤醒。他会得知恐惧之灵选择了哪名玩家，并且无法使用自己的能力让那名玩家立即被处决。`,政客:`维齐尔的能力可能会将政客当作邪恶阵营。`},召唤师:{炼金术士:`如果炼金术士获得了召唤师的能力，游戏会以初始有恶魔在场进行。炼金术士召唤师选择的玩家会变成恶魔但不会改变阵营。`,钟表匠:`如果召唤师在场，在创造恶魔之后钟表匠才会得知信息。`,罂粟种植者:`如果召唤师创造恶魔时罂粟种植者存活，由召唤师来选择创造哪种恶魔，由说书人来决定哪名玩家发生转变。`,提线木偶:`在初始设置时，提线木偶会与召唤师邻座。召唤师会得知谁是提线木偶。`,侍臣:`如果召唤师因为侍臣的能力在第三个夜晚醉酒，由召唤师来选择创造哪种恶魔，由说书人来决定哪名玩家发生转变。`,僵怖:`如果召唤师将一名已死亡的玩家变成了僵怖，该玩家会变成“已经死过一次”的僵怖。`,普卡:`召唤师可以选择在第二个夜晚将一名玩家变成普卡。`,工程师:`如果工程师的能力使得召唤师在使用自己的能力前离场，召唤师会在此前立即使用自己的能力。`,传教士:`如果召唤师在第三个夜晚或之前被传教士选中，由召唤师来选择创造哪种恶魔，由说书人来决定哪名玩家发生转变。`,麻脸巫婆:`召唤师无法创造已经在场的恶魔。如果召唤师创造了一名不在场的恶魔，当晚的死亡由说书人决定。`,帽匠:`召唤师无法创造已经在场的恶魔。如果召唤师创造了一个不在场的恶魔，当晚的死亡由说书人决定。`,卡扎力:`召唤师无法创造已经在场的恶魔。如果召唤师创造了一个不在场的恶魔，当晚的死亡由说书人决定。`},利维坦:{士兵:`如果利维坦在场，士兵免疫所有邪恶阵营的负面效果。`,僧侣:`如果利维坦在场，僧侣保护的玩家免疫所有邪恶阵营的负面效果。`,旅店老板:`如果利维坦在场，旅店老板保护的玩家免疫所有邪恶阵营的负面效果。`,守鸦人:`每个夜晚*，利维坦要选择一名存活的善良玩家（与之前的每个夜晚不同）：如果守鸦人被选择，他的能力生效但不会死亡。`,贤者:`每个夜晚*，利维坦要选择一名存活的善良玩家（与之前的每个夜晚不同）：如果贤者被选择，他的能力生效但不会死亡。`,报丧女妖:`每个夜晚*，利维坦要选择一名存活的善良玩家（与之前的每个夜晚不同）：如果报丧女妖被选择，他死亡并能力生效。`,农夫:`每个夜晚*，利维坦要选择一名存活的善良玩家（与之前的每个夜晚不同）：如果农夫被选择，他的能力生效但不会死亡。`,镇长:`如果利维坦在场，镇长存活且第五天没有处决发生，则善良阵营获胜。`,麻脸巫婆:`在第五个白天之后，麻脸巫婆无法创造利维坦。`,帽匠:`如果帽匠在第五个白天或之后死亡，恶魔不能选择变成利维坦。`,祖母:`如果利维坦在场，孙子死于处决，邪恶阵营获胜。`,驱魔人:`如果驱魔人存活并且成功选中过利维坦，即使有多于一名善良玩家被处决，邪恶阵营也不会获胜。`,国王:`如果利维坦在场，当至少一名玩家死亡时，国王每晚就会得知一个存活的角色。`,和尚:`如果利维坦发起的提名中被处决的玩家是与和尚邻近的存活玩家，那么那名玩家不会死亡，并且当晚和尚得知他的能力被触发。`,狸猫:`每个夜晚*，利维坦要选择一名存活的善良玩家（与之前的每个夜晚不同）：如果“太子”被选择，他会与狸猫交换角色但不会死亡。`,巡察:`如果利维坦在场，巡察保护的玩家免疫所有邪恶阵营的负面效果。`},哈迪寂亚:{红唇女郎:`如果出现两名存活的哈迪寂亚，则红唇女郎变成的哈迪寂亚会变回红唇女郎。`,主谋:`如果哈迪寂亚死于处决，且主谋存活，当晚哈迪寂亚要选择三名善良玩家：如果他们都选择存活，邪恶阵营获胜。否则，善良阵营获胜。`},小怪宝:{罂粟种植者:`如果罂粟种植者在场，爪牙们不会同时醒来选择照看小怪宝。他们会依次单独被唤醒，直到其中一人选择照看小怪宝。`,魔术师:`每个夜晚，由魔术师来选择一个爪牙角色：如果他和小怪宝均存活，由他来照看小怪宝。`,红唇女郎:`如果在五名及以上的玩家存活时照看小怪宝的玩家死亡，当晚红唇女郎必须要照看小怪宝。`,维齐尔:`照看小怪宝的维齐尔能够死于处决。`,帽匠:`如果恶魔选择了小怪宝，则还需要选择一个爪牙角色，他变成这个爪牙且当晚照看小怪宝。`},军团:{工程师:`军团和工程师不能在初始时同时在场。如果工程师创造了军团，那么包括所有邪恶玩家在内的绝大多数玩家都会变成邪恶的军团。`,传教士:`如果传教士选中了军团，军团仍然保留能力，但传教士可能会得知自己选中了军团。`,吟游诗人:`如果军团死于处决，所有军团保留能力，但吟游诗人可能会在当晚得知今天白天死于处决的玩家是军团。`,帽匠:`如果帽匠死亡时军团在场，则无事发生。如果帽匠死亡时一名邪恶玩家选择变成军团，当前所有邪恶玩家都会一同变成军团。`,召唤师:`如果召唤师创造了军团，包括所有邪恶玩家在内的绝大多数玩家都会变成邪恶的军团。`},方古:{红唇女郎:`如果方古成功转化了外来者并因此死去，红唇女郎不会变成方古。`},暴乱:{镇长:`镇长可以停止提名。如果他这样做了，并且场上只有一名暴乱存活，善良阵营获胜；否则，邪恶阵营获胜。`,僧侣:`如果暴乱在场，僧侣保护的玩家免疫所有邪恶阵营的负面效果。`,农夫:`每个夜晚*，暴乱要选择一名存活的善良玩家（与之前的每个夜晚不同）：如果农夫被选择，他的能力生效但不会死亡。`,旅店老板:`如果暴乱在场，旅店老板保护的玩家免疫所有邪恶阵营的负面效果。`,贤者:`每个夜晚*，暴乱要选择一名存活的善良玩家（与之前的每个夜晚不同）：如果贤者被选择，他的能力生效但不会死亡。`,守鸦人:`每个夜晚*，暴乱要选择一名存活的善良玩家（与之前的每个夜晚不同）：如果守鸦人被选择，他的能力生效但不会死亡。`,报丧女妖:`每个夜晚*，暴乱要选择一名存活的善良玩家（与之前的每个夜晚不同）：如果报丧女妖被选择，他死亡并能力生效。`,士兵:`如果暴乱在场，士兵免疫所有邪恶阵营的负面效果。`,祖母:`如果暴乱在场，孙子在白天死亡，祖母会一同死亡。`,国王:`如果暴乱在场，当至少一名玩家死亡时，国王每晚就会得知一个存活的角色。`,驱魔人:`如果驱魔人在第三个夜晚选中了暴乱，爪牙不会变成暴乱。`,巡察:`如果暴乱在场，巡察保护的玩家免疫所有邪恶阵营的负面效果。`},痢蛭:{主谋:`如果主谋存活且痢蛭的宿主死于处决，痢蛭存活但失去能力。`,猎手:`如果猎手选择了痢蛭的宿主，则宿主会死亡。`,异端分子:`如果痢蛭选择异端分子作为宿主，痢蛭死亡时异端分子仍会中毒。`},卡扎力:{赏金猎人:`在卡扎力行动完毕后，如果赏金猎人仍然在场，才会创造邪恶镇民。`,莽夫:`卡扎力可以把莽夫转变成邪恶的爪牙。`,提线木偶:`如果卡扎力选择创造提线木偶，他只能选择将自己的邻座玩家变成提线木偶。`,唱诗男孩:`如果唱诗男孩在场，卡扎力在选择国王后无法将他变成爪牙。`,巡山人:`如果卡扎力将落难少女变成了爪牙，并且巡山人在场，一名善良的玩家会变成落难少女。`,士兵:`卡扎力可以把士兵转变成邪恶的爪牙。`,半仙:`卡扎力可以把半仙转变成邪恶的爪牙。`,和尚:`卡扎力可以把与和尚邻近的玩家转变成邪恶的爪牙。`},牙噶巴卜:{驱魔人:`如果驱魔人选中了牙噶巴卜，那么牙噶巴卜的能力在当晚无法造成死亡。`},涡流:{报丧女妖:`如果恶魔杀死报丧女妖时涡流在场，玩家仍然会得知正确信息。`},理发师:{异教领袖:`通过理发师交换的邪恶异教领袖无法因为自身能力转变为善良阵营。`,莽夫:`通过理发师交换的邪恶莽夫无法因为自身能力转变为善良阵营。`,政客:`通过理发师交换的邪恶政客无法因为自身能力转变为善良阵营。`,落难少女:`如果恶魔选择交换落难少女的角色，参与角色交换的另一名玩家改为由说书人来决定。`},"戏子（改）":{间谍:`互为克星的角色在同一时间里只能有其中一个角色在场。`,镜像双子:`互为克星的角色在同一时间里只能有其中一个角色在场。`,寡妇:`互为克星的角色在同一时间里只能有其中一个角色在场。`,召唤师:`互为克星的角色在同一时间里只能有其中一个角色在场。`,暴乱:`互为克星的角色在同一时间里只能有其中一个角色在场。`,军团:`在戏子（改）存在于剧本中时，军团可以在游戏中任意时候向说书人示意自己“想要死亡”。说书人会在夜晚一同唤醒所有军团，并询问他们是否要一同死亡。`,利维坦:`在戏子（改）存在于剧本中时，利维坦可以在游戏中任意时候向说书人示意自己“想要死亡”。说书人会在当晚杀死这名玩家。`,小怪宝:`在戏子（改）存在于剧本中时，照看小怪宝的玩家可以在游戏中任意时候向说书人示意自己“想要死亡”。说书人会在当晚将小怪宝从游戏中移除。`,普卡:`在戏子（改）存在于剧本中时，普卡可以在游戏中任意时候向说书人示意自己“想要死亡”。说书人会在当晚杀死这名玩家。`,哥布林:`戏子（改）无法反转由哥布林的能力产生的胜负结果。`,恐惧之灵:`戏子（改）无法反转由恐惧之灵的能力产生的胜负结果。`,麻脸巫婆:`麻脸巫婆无法创造戏子（改），麻脸巫婆创造的邪恶玩家无法获得戏子（改）的能力。`,科学怪人:`科学怪人无法使恶魔获得戏子（改）的能力。`,无神论者:`无神论者在剧本中时，处决说书人导致的胜负结果不会被反转，无神论者不会因为戏子（改）的能力醉酒。`,疯子:`疯子不会因为戏子（改）能力参与互认，也不会因为戏子（改）的能力醉酒。`,国王:`国王不会因为戏子（改）的能力醉酒。`,告密者:`告密者不会因为戏子（改）的能力醉酒。`,落难少女:`落难少女不会因为戏子（改）的能力醉酒。`,书生:`书生不会因为戏子（改）的能力醉酒。`},悟道者:{村夫:`如果村夫在场数量不足3人，悟道者可以变成新的村夫。如果因此使得村夫的在场数量超过1人，会有一名村夫醉酒。`},异端分子:{狐魅娘:`互为克星的角色在同一时间里只能有其中一个角色在场。`},梼杌:{红唇女郎:`红唇女郎在梼杌的能力判断中被当作“不具有能力”。`,镜像双子:`镜像双子在梼杌的能力判断中被当作“不具有能力”。`,主谋:`主谋在梼杌的能力判断中被当作“不具有能力”。`,街头风琴手:`当梼杌被处决时，如果街头风琴手具有能力，说书人会宣布“无人被处决”。`,提线木偶:`梼杌不会得知谁是提线木偶。在梼杌使得提线木偶失去能力后，梼杌会得知对应的那一名提线木偶是谁，但提线木偶会仍然以为自己是一个善良角色。`,帽匠:`如果梼杌变成了其他角色，因为梼杌而失去能力的爪牙会立即死亡。`,麻脸巫婆:`如果梼杌变成了其他角色，因为梼杌而失去能力的爪牙会立即死亡。`,工程师:`如果梼杌变成了其他角色，因为梼杌而失去能力的爪牙会立即死亡。`,舞蛇人:`如果梼杌变成了其他角色，因为梼杌而失去能力的爪牙会立即死亡。`,理发师:`如果梼杌变成了其他角色，因为梼杌而失去能力的爪牙会立即死亡。`},食人魔:{陌客:`如果陌客被食人魔当作邪恶阵营，食人魔会得知自己转变为邪恶。`,熬药巫婆:`被麻脸巫婆创造的邪恶食人魔无法因为自身能力转变为善良阵营。`,间谍:`间谍必定被食人魔当作邪恶阵营。`},哲学家:{赏金猎人:`如果哲学家获得了赏金猎人的能力，可能会有一名镇民玩家转变为邪恶。`},戏法师:{维齐尔:`如果维齐尔在场，戏法师在进行猜测时还需要猜测恶魔的具体角色。`},狂热者:{食人族:`如果食人族获得了狂热者的能力，他会得知这一信息。`,维齐尔:`维齐尔的能力可能会将狂热者当作邪恶阵营。`,军团:`军团的能力可能会将狂热者当作邪恶阵营。`,暴乱:`狂热者在被提名后必须立马发起提名，即使自己已死亡。`},堤丰之首:{召唤师:`如果召唤师创造了堤丰之首，则堤丰之首必须与一名爪牙相邻，且堤丰之首另一侧的玩家变成一个不在场的邪恶爪牙。`},科学怪人:{村夫:`如果村夫在场数量不足3人，科学怪人可以让恶魔拥有村夫的能力。`,异教领袖:`如果恶魔拥有异教领袖的能力，他无法因为该能力转变为善良阵营。`,莽夫:`如果恶魔拥有莽夫的能力，他无法因为该能力转变为善良阵营。`,异端分子:`恶魔无法拥有异端分子的能力。`,食人魔:`恶魔无法拥有食人魔的能力。`,政客:`恶魔无法拥有政客的能力。`,酒鬼:`如果恶魔拥有酒鬼的能力，改为由科学怪人选择一名玩家：如果他是镇民，他醉酒。`},炼金术士:{科学怪人:`如果炼金术士拥有科学怪人的能力，炼金术士不会得知恶魔因此获得了哪个角色的能力。`,间谍:`如果炼金术士获得了间谍的能力，他无法查看魔典，并且间谍不能被当作善良阵营、镇民角色或外来者角色。`,寡妇:`如果炼金术士获得了寡妇的能力，他无法查看魔典。`},引路人:{侍女:`侍女会得知引路人是否醒来，即使她是在引路人之前醒来。`,数学家:`引路人会得知数学家是否被影响，即使他是在数学家之前醒来。`},入殓师:{红唇女郎:`入殓师提名并处决了恶魔并成功变成邪恶恶魔时，红唇女郎不会变成恶魔。`,哈迪寂亚:`如果出现两名存活的哈迪寂亚，则入殓师变成的哈迪寂亚会变回入殓师，但阵营保持邪恶。`,小怪宝:`如果在五名及以上的玩家存活时，入殓师提名并处决了照看小怪宝的玩家，入殓师会变为邪恶的该角色，当晚原入殓师玩家必须要照看小怪宝。`,痢蛭:`如果在大于等于五名玩家存活时，入殓师提名并处决了宿主且他死于这次处决，原本的痢蛭会在当晚死亡，入殓师变为邪恶的痢蛭且当晚无法攻击。`}};function pe(e,t){return e in G&&t in G[e]||t in G&&e in G[t]}function me(e,t){return e in G&&t in G[e]?G[e][t]:t in G&&e in G[t]?G[t][e]:``}function K(e){let t=JSON.parse(e);if(!Array.isArray(t))throw Error(`JSON 必须是数组格式`);let n={title:`自定义剧本`,author:``,characters:{townsfolk:[],outsider:[],minion:[],demon:[]},firstnight:[{image:`https://clocktower-wiki.gstonegames.com/images/thumb/5/5d/Dusk.png/75px-Dusk.png`,index:0},{image:`https://clocktower-wiki.gstonegames.com/images/thumb/8/85/Mi.png/75px-Mi.png`,index:1},{image:`https://clocktower-wiki.gstonegames.com/images/thumb/1/18/Di.png/75px-Di.png`,index:2}],othernight:[{image:`https://clocktower-wiki.gstonegames.com/images/thumb/5/5d/Dusk.png/75px-Dusk.png`,index:0}],jinx:{},all:[]};for(let e of t){if(e.id===`_meta`){n.title=e.name||`自定义剧本`,n.author=e.author||``;continue}let t=e;if(e.id in W&&!e.image&&(t={...W[e.id],...e}),e.team===`a jinxed`){let[t,r]=e.name.split(`&`);n.jinx[t]||(n.jinx[t]={}),n.jinx[t][r]=e.ability;continue}if(t.team&&t.team in n.characters){n.all.push(t);let e=t.team;n.characters[e].push({name:t.name,ability:t.ability,image:t.image,id:t.id,team:t.team,firstNight:t.firstNight,otherNight:t.otherNight}),t.firstNight&&t.firstNight>0&&n.firstnight.push({image:t.image,index:t.firstNight}),t.otherNight&&t.otherNight>0&&n.othernight.push({image:t.image,index:t.otherNight})}}for(let e of n.all)for(let t of n.all)e.name!==t.name&&pe(e.name,t.name)&&(n.jinx[e.name]||(n.jinx[e.name]={}),n.jinx[e.name][t.name]||(n.jinx[e.name][t.name]=me(e.name,t.name)));return n.firstnight.sort((e,t)=>e.index-t.index),n.othernight.sort((e,t)=>e.index-t.index),n}function he(e){let t=`未正常生效.选择或影响.死于处决.恶魔角色.爪牙角色.邪恶玩家.邪恶阵营.邪恶角色."是恶魔".负面能力.小恶魔.小怪宝.狐媚娘.维齐尔.被处决.杀死.死亡.邪恶.落败.中毒.爪牙.恶魔.处决.错误.自杀.暴乱.军团.代价.伪装`.split(`.`),n=[`外来者角色`,`善良玩家`,`善良阵营`,`善良角色`,`镇民角色`,`恢复健康`,`起死回生`,`落难少女`,`有且只有`,`有多准确`,`守夜人`,`外来者`,`农夫`,`书生`,`疯子`,`国王`,`醉酒`,`复活`,`反刍`,`镇民`,`善良`,`正确`,`存活`,`获胜`],r=[`非旅行者`,`旅行者`,`"疯狂"`],i=e;return t.forEach(e=>{i=i.replaceAll(e,`<span style="color: ${U.evil}; font-weight: 700;">${e}</span>`)}),n.forEach(e=>{i=i.replaceAll(e,`<span style="color: ${U.good}; font-weight: 700;">${e}</span>`)}),r.forEach(e=>{i=i.replaceAll(e,`<span style="color: ${U.purple}; font-weight: 700;">${e}</span>`)}),i}function q({character:e,jinxInfo:t,allCharacters:n}){let r=e.team===`townsfolk`||e.team===`outsider`?U.good:U.evil,{attributes:o,listeners:s,setNodeRef:c,transform:l,transition:u,isDragging:d}=a({id:e.id}),f={transform:i.Transform.toString(l),transition:u,opacity:d?.5:1};return(0,V.jsxs)(F,{ref:c,style:f,...o,...s,elevation:d?6:0,sx:{display:`flex`,gap:1,p:1,backgroundColor:`transparent`,borderRadius:1,transition:`all 0.2s`,height:`100%`,cursor:d?`grabbing`:`grab`,"&:hover":{backgroundColor:`rgba(0, 0, 0, 0.02)`,boxShadow:`0 2px 8px rgba(0, 0, 0, 0.1)`}},children:[(0,V.jsx)(I,{component:`img`,src:e.image,alt:e.name,sx:{width:{xs:50,sm:55,md:60},height:{xs:50,sm:55,md:60},borderRadius:1,objectFit:`cover`,flexShrink:0}}),(0,V.jsxs)(I,{sx:{flex:1,minWidth:0},children:[(0,V.jsx)(x,{variant:`h6`,sx:{fontWeight:`bold`,fontSize:{xs:`0.9rem`,sm:`0.95rem`,md:`1rem`},mb:.3,color:r,lineHeight:1.3},children:e.name}),(0,V.jsx)(x,{variant:`body2`,sx:{fontSize:{xs:`0.75rem`,sm:`0.8rem`,md:`0.85rem`},lineHeight:1.5,color:U.text.tertiary},dangerouslySetInnerHTML:{__html:he(e.ability)}}),t&&Object.keys(t).length>0&&(0,V.jsx)(I,{sx:{mt:.5},children:Object.entries(t).map(([e,t])=>{let r=n?.find(t=>t.name===e);return(0,V.jsxs)(I,{sx:{display:`flex`,gap:.6,alignItems:`flex-start`,mt:.5,p:.6,backgroundColor:`rgba(0, 0, 0, 0.1)`,borderRadius:.5,border:`1px solid rgba(255, 232, 157, 0.8)`},children:[r&&(0,V.jsx)(I,{component:`img`,src:r.image,alt:e,sx:{width:{xs:20,sm:22,md:24},height:{xs:20,sm:22,md:24},borderRadius:.5,flexShrink:0}}),(0,V.jsxs)(x,{variant:`caption`,sx:{fontSize:{xs:`0.7rem`,sm:`0.72rem`},color:U.text.primary,lineHeight:1.4,flex:1,fontStyle:`italic`},children:[`（相克规则：`,t,`）`]})]},e)})})]})]})}function J({team:e,characters:i,script:a,onReorder:s}){if(i.length===0)return null;let m=r(p(n),p(d,{coordinateGetter:u})),h=e===`townsfolk`||e===`outsider`?`善良阵营`:`邪恶阵营`,g=e===`townsfolk`||e===`outsider`?U.good:U.evil;return(0,V.jsxs)(I,{sx:{p:1,backgroundColor:`transparent`},children:[(0,V.jsxs)(I,{sx:{display:`flex`,alignItems:`center`},children:[(0,V.jsxs)(x,{variant:`h5`,sx:{fontWeight:`bold`,fontSize:{xs:`1rem`,sm:`1.1rem`,md:`1.2rem`}},children:[(0,V.jsx)(`span`,{style:{color:g},children:h}),`·`,(0,V.jsx)(`span`,{style:{color:de[e]},children:fe[e]})]}),(0,V.jsx)(re,{sx:{flex:1,ml:1.5,borderColor:U.gray,borderWidth:1}})]}),(0,V.jsx)(l,{sensors:m,collisionDetection:o,onDragEnd:t=>{let{active:n,over:r}=t;if(r&&n.id!==r.id){let t=i.findIndex(e=>e.id===n.id),a=i.findIndex(e=>e.id===r.id),o=c(i,t,a).map(e=>e.id);s(e,o)}},children:(0,V.jsx)(f,{items:i.map(e=>e.id),strategy:t,children:(0,V.jsxs)(I,{sx:{display:`flex`,gap:1,flexDirection:{xs:`column`,sm:`row`}},children:[(0,V.jsx)(I,{sx:{flex:1,display:`flex`,flexDirection:`column`,justifyContent:`space-between`},children:i.filter((e,t)=>t%2==0).map((e,t,n)=>(0,V.jsx)(I,{sx:{flex:1,display:`flex`,mb:t<n.length-1?1:0},children:(0,V.jsx)(q,{character:e,jinxInfo:a.jinx[e.name],allCharacters:a.all})},e.id))}),(0,V.jsx)(I,{sx:{flex:1,display:`flex`,flexDirection:`column`,justifyContent:`space-between`},children:i.filter((e,t)=>t%2==1).map((e,t,n)=>(0,V.jsx)(I,{sx:{flex:1,display:`flex`,mb:t<n.length-1?1:0},children:(0,V.jsx)(q,{character:e,jinxInfo:a.jinx[e.name],allCharacters:a.all})},e.id))})]})})})]})}function Y({title:e,actions:t,isMobile:n=!1}){return(0,V.jsxs)(F,{elevation:0,sx:{p:{xs:1.5,sm:0,md:0},backgroundColor:n?U.nightOrder.background:`transparent`,color:`#fefefe`,borderRadius:1.5,height:`100%`,display:`flex`,flexDirection:`column`,boxShadow:`none`},children:[(0,V.jsx)(x,{variant:`h4`,sx:{textAlign:`center`,fontWeight:`bold`,fontSize:{xs:`1rem`,sm:`1.1rem`,md:`1.3rem`},mb:n?1:1.5,mt:.5,color:n?`#fefefe`:`inherit`},children:n?e:e.split(``).map((e,t)=>(0,V.jsx)(I,{component:`span`,sx:{display:`block`,lineHeight:e===`晚`?1.3:1,mt:e===`晚`?.3:0},children:e},t))}),(0,V.jsx)(I,{sx:{flex:1,display:`flex`,flexDirection:n?`row`:`column`,flexWrap:n?`wrap`:`nowrap`,gap:.5,overflowY:n?`visible`:`auto`,px:.3,justifyContent:n?`center`:`flex-start`,"&::-webkit-scrollbar":{width:3},"&::-webkit-scrollbar-thumb":{backgroundColor:`rgba(255, 255, 255, 0.3)`,borderRadius:1.5}},children:t.map((e,t)=>(0,V.jsx)(I,{sx:{display:`flex`,justifyContent:`center`,alignItems:`center`},children:(0,V.jsx)(I,{component:`img`,src:e.image,alt:`Action ${t}`,sx:{width:{xs:35,sm:38,md:42},height:{xs:35,sm:38,md:42},borderRadius:1,backgroundColor:`rgba(255, 255, 255, 0.08)`,p:.2,transition:`all 0.2s`,"&:hover":{transform:`scale(1.05)`,backgroundColor:`rgba(255, 255, 255, 0.15)`}}})},t))})]})}var ge=e(R()),X=b({palette:{primary:{main:U.good},secondary:{main:U.evil},background:{default:`#f5f5f5`},text:{primary:U.text.primary,secondary:U.text.secondary}},typography:{fontFamily:ue.fontFamily},breakpoints:{values:{xs:0,sm:600,md:960,lg:1280,xl:1920}}});function _e(){let[e,t]=(0,B.useState)(null),[n,r]=(0,B.useState)(``),i=(0,B.useRef)(null),a=P(X.breakpoints.down(`md`)),o=(e,n,i)=>{let a=K(e);n&&(a.title=n),i&&(a.author=i),t(a),r(e)},s=(n,r)=>{if(!e)return;let i={...e,characters:{...e.characters,[n]:r.map(t=>e.characters[n].find(e=>e.id===t))}};t(i)};return(0,V.jsxs)(te,{theme:X,children:[(0,V.jsx)(A,{}),(0,V.jsx)(I,{sx:{minHeight:`100vh`,backgroundColor:`background.default`,py:{xs:2,sm:3,md:4}},children:(0,V.jsxs)(k,{maxWidth:`xl`,children:[(0,V.jsx)(H,{onGenerate:o,onExportImage:async()=>{if(i.current)try{let t=i.current.querySelectorAll(`img`);await Promise.all(Array.from(t).map(e=>e.complete?Promise.resolve():new Promise(t=>{e.onload=()=>t(null),e.onerror=()=>t(null),setTimeout(()=>t(null),5e3)})));let n=await(0,ge.default)(i.current,{scale:2,backgroundColor:`#242424`,logging:!1,useCORS:!0,allowTaint:!0,width:i.current.scrollWidth,height:i.current.scrollHeight,windowWidth:i.current.scrollWidth,windowHeight:i.current.scrollHeight,imageTimeout:0,removeContainer:!0}),r=document.createElement(`a`);r.download=`${e?.title||`剧本`}.png`,r.href=n.toDataURL(`image/jpeg`,.92),r.click()}catch(e){console.error(`导出图片失败:`,e),alert(`导出图片失败，请重试。如果问题持续，请刷新页面后重试。`)}},onExportJson:()=>{if(e)try{let t=JSON.parse(n),r=Array.isArray(t)?t:[],i=[],a=r.find(e=>e.id===`_meta`);a&&i.push(a),[`townsfolk`,`outsider`,`minion`,`demon`].forEach(t=>{let n=t;e.characters[n].forEach(e=>{let t=r.find(t=>t.id===e.id);t&&i.push(t)})}),r.forEach(e=>{e.team===`a jinxed`&&i.push(e)});let o=JSON.stringify(i,null,2);navigator.clipboard.writeText(o).then(()=>{alert(`JSON已复制到剪贴板！`)}).catch(()=>{let e=document.createElement(`textarea`);e.value=o,document.body.appendChild(e),e.select(),document.execCommand(`copy`),document.body.removeChild(e),alert(`JSON已复制到剪贴板！`)})}catch(e){console.error(`导出JSON失败:`,e),alert(`导出JSON失败，请重试`)}},hasScript:e!==null}),e&&(0,V.jsx)(I,{id:`script-preview`,ref:i,sx:{display:`flex`,width:`100%`,justifyContent:`center`},children:(0,V.jsxs)(I,{sx:{display:`flex`,width:`100%`,justifyContent:`center`,gap:`2px`,alignItems:`stretch`},children:[!a&&(0,V.jsx)(I,{sx:{padding:1.5,flexShrink:0,backgroundColor:U.nightOrder.background,position:`relative`,display:`flex`,alignItems:`flex-start`,pt:`33.33%`,overflow:`hidden`,boxShadow:`none`,"&::before":{content:`""`,position:`absolute`,top:0,left:0,right:0,bottom:0,zIndex:0,backgroundImage:`url("data:image/svg+xml,%3Csvg width='200' height='200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='6' seed='2' /%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='0 0 0 0 0 0.15 0 0.25 0 0 0.35 0 0 0.45'/%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Crect width='200' height='200' filter='url(%23noiseFilter)' opacity='1'/%3E%3C/svg%3E")`,opacity:.5,pointerEvents:`none`,backgroundSize:`150px 150px`},"&::after":{content:`""`,position:`absolute`,top:0,left:0,right:0,bottom:0,zIndex:0,background:`
                      radial-gradient(circle at 15% 25%, rgba(10, 12, 15, 0.9) 0%, transparent 3%),
                      radial-gradient(circle at 45% 15%, rgba(8, 10, 12, 0.85) 0%, transparent 4%),
                      radial-gradient(circle at 75% 35%, rgba(5, 8, 10, 0.95) 0%, transparent 2.5%),
                      radial-gradient(circle at 35% 55%, rgba(12, 15, 18, 0.8) 0%, transparent 3.5%),
                      radial-gradient(circle at 85% 65%, rgba(8, 10, 12, 0.9) 0%, transparent 3%),
                      radial-gradient(circle at 20% 75%, rgba(6, 8, 10, 0.85) 0%, transparent 4%),
                      radial-gradient(circle at 60% 85%, rgba(10, 12, 15, 0.95) 0%, transparent 2%),
                      radial-gradient(circle at 90% 20%, rgba(8, 10, 12, 0.75) 0%, transparent 3.5%),
                      radial-gradient(circle at 50% 45%, rgba(6, 8, 10, 0.9) 0%, transparent 3%),
                      radial-gradient(circle at 10% 90%, rgba(10, 12, 15, 0.85) 0%, transparent 4%)
                    `,backgroundSize:`100% 100%`,pointerEvents:`none`},"& > *":{position:`relative`,zIndex:1}},children:(0,V.jsx)(Y,{title:`首个夜晚`,actions:e.firstnight})}),(0,V.jsxs)(F,{elevation:0,sx:{pb:2,pt:2,flex:1,maxWidth:`1200px`,backgroundImage:`url(/bg.png)`,backgroundSize:`cover`,backgroundPosition:`center`,backgroundRepeat:`no-repeat`,borderRadius:0,position:`relative`,overflow:`hidden`,boxShadow:`none`},children:[(0,V.jsx)(I,{component:`img`,src:`https://clocktower-wiki.gstonegames.com/skins/pivot/assets/image/flower3.png`,sx:{position:`absolute`,bottom:0,left:0,maxWidth:{xs:`25%`,sm:`20%`,md:`15%`},opacity:.25,pointerEvents:`none`}}),(0,V.jsx)(I,{component:`img`,src:`https://clocktower-wiki.gstonegames.com/skins/pivot/assets/image/flower4.png`,sx:{position:`absolute`,bottom:0,right:0,maxWidth:{xs:`25%`,sm:`20%`,md:`15%`},opacity:.25,pointerEvents:`none`}}),(0,V.jsxs)(I,{sx:{textAlign:`center`,mb:2,position:`relative`,zIndex:1,px:{xs:1,sm:2}},children:[!a&&e.author&&(0,V.jsx)(I,{sx:{position:`absolute`,top:0,right:{sm:20,md:30},textAlign:`right`},children:(0,V.jsxs)(x,{sx:{color:U.paper.secondary,fontSize:{sm:`0.85rem`},mb:.3},children:[`剧本作者：`,e.author,(0,V.jsx)(`br`,{}),`支持7-15人`]})}),(0,V.jsx)(x,{variant:`h3`,sx:{fontWeight:`bold`,color:U.paper.primary,fontSize:{xs:`1.5rem`,sm:`1.8rem`,md:`2rem`},mb:{xs:.5,sm:.5}},children:e.title}),a&&e.author&&(0,V.jsxs)(x,{sx:{color:U.paper.secondary,fontSize:`0.75rem`,mt:.5},children:[`作者：`,e.author,` · 支持7-15人`]})]}),(0,V.jsxs)(I,{sx:{position:`relative`,zIndex:1},children:[(0,V.jsx)(J,{team:`townsfolk`,characters:e.characters.townsfolk,script:e,onReorder:s}),(0,V.jsx)(J,{team:`outsider`,characters:e.characters.outsider,script:e,onReorder:s}),(0,V.jsx)(J,{team:`minion`,characters:e.characters.minion,script:e,onReorder:s}),(0,V.jsx)(J,{team:`demon`,characters:e.characters.demon,script:e,onReorder:s})]}),a&&(0,V.jsxs)(I,{sx:{mt:2,display:`flex`,gap:1.5,position:`relative`,zIndex:1,px:{xs:1,sm:2,md:3}},children:[(0,V.jsx)(I,{sx:{flex:1,minWidth:0},children:(0,V.jsx)(Y,{title:`首个夜晚`,actions:e.firstnight,isMobile:!0})}),(0,V.jsx)(I,{sx:{flex:1,minWidth:0},children:(0,V.jsx)(Y,{title:`其他夜晚`,actions:e.othernight,isMobile:!0})})]}),(0,V.jsx)(I,{sx:{mt:2.5,position:`relative`,zIndex:1,px:{xs:1,sm:2,md:3}},children:(0,V.jsxs)(I,{sx:{border:`2px solid rgba(61, 50, 38, 0.4)`,borderRadius:2,p:{xs:1.5,sm:2},backgroundColor:`rgba(254, 250, 240, 0.5)`,mb:1},children:[(0,V.jsxs)(I,{sx:{mb:1.5},children:[(0,V.jsx)(x,{component:`span`,sx:{fontWeight:`bold`,color:U.paper.secondary,fontSize:{xs:`0.9rem`,sm:`1rem`}},children:`可使`}),(0,V.jsx)(x,{component:`span`,sx:{color:U.paper.secondary,fontSize:{xs:`0.8rem`,sm:`0.9rem`},ml:1},children:`某些事情"可能"发生。代表由说书人来决定该事情是否发生。`})]}),(0,V.jsxs)(I,{children:[(0,V.jsx)(x,{component:`span`,sx:{fontWeight:`bold`,color:U.paper.secondary,fontSize:{xs:`0.9rem`,sm:`1rem`}},children:`中毒`}),(0,V.jsx)(x,{component:`span`,sx:{color:U.paper.secondary,fontSize:{xs:`0.8rem`,sm:`0.9rem`},ml:1},children:`中毒的玩家会失去能力，但会认为自己的真实有能力。说书人会给出该玩家应得的错误信息，让玩家不可能会给出中毒信息。中毒的玩家不会得知自己中毒。`})]})]})})]}),!a&&(0,V.jsx)(I,{sx:{padding:1.5,flexShrink:0,backgroundColor:U.nightOrder.background,position:`relative`,display:`flex`,alignItems:`flex-start`,pt:`33.33%`,overflow:`hidden`,boxShadow:`none`,"&::before":{content:`""`,position:`absolute`,top:0,left:0,right:0,bottom:0,zIndex:0,backgroundImage:`url("data:image/svg+xml,%3Csvg width='200' height='200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='6' seed='2' /%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='0 0 0 0 0 0.15 0 0.25 0 0 0.35 0 0 0.45'/%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Crect width='200' height='200' filter='url(%23noiseFilter)' opacity='1'/%3E%3C/svg%3E")`,opacity:.5,pointerEvents:`none`,backgroundSize:`150px 150px`},"&::after":{content:`""`,position:`absolute`,top:0,left:0,right:0,bottom:0,zIndex:0,background:`
                      radial-gradient(circle at 15% 25%, rgba(10, 12, 15, 0.9) 0%, transparent 3%),
                      radial-gradient(circle at 45% 15%, rgba(8, 10, 12, 0.85) 0%, transparent 4%),
                      radial-gradient(circle at 75% 35%, rgba(5, 8, 10, 0.95) 0%, transparent 2.5%),
                      radial-gradient(circle at 35% 55%, rgba(12, 15, 18, 0.8) 0%, transparent 3.5%),
                      radial-gradient(circle at 85% 65%, rgba(8, 10, 12, 0.9) 0%, transparent 3%),
                      radial-gradient(circle at 20% 75%, rgba(6, 8, 10, 0.85) 0%, transparent 4%),
                      radial-gradient(circle at 60% 85%, rgba(10, 12, 15, 0.95) 0%, transparent 2%),
                      radial-gradient(circle at 90% 20%, rgba(8, 10, 12, 0.75) 0%, transparent 3.5%),
                      radial-gradient(circle at 50% 45%, rgba(6, 8, 10, 0.9) 0%, transparent 3%),
                      radial-gradient(circle at 10% 90%, rgba(10, 12, 15, 0.85) 0%, transparent 4%)
                    `,backgroundSize:`100% 100%`,pointerEvents:`none`},"& > *":{position:`relative`,zIndex:1}},children:(0,V.jsx)(Y,{title:`其他夜晚`,actions:e.othernight})})]})}),!e&&(0,V.jsx)(F,{sx:{p:{xs:4,sm:6,md:8},textAlign:`center`,backgroundColor:`rgba(255, 255, 255, 0.9)`},children:(0,V.jsx)(x,{variant:`h5`,sx:{color:`#666`,fontSize:{xs:`1.1rem`,sm:`1.3rem`,md:`1.5rem`}},children:`请在上方输入剧本 JSON 并点击"生成剧本"按钮`})})]})})]})}var ve=_e;const Z={"7席谜案录":`/scripts/常见剧本/#7席谜案录-TrashWarlock.json`,三神谜题:`/scripts/常见剧本/#三神谜题-华稽.json`,公爵夫人的晚宴:`/scripts/常见剧本/#公爵夫人的晚宴-Lei.json`,嚣张跋扈:`/scripts/常见剧本/#嚣张跋扈-刘中奇.json`,"地狱二重奏2.0":`/scripts/常见剧本/#地狱二重奏2.0-钟楼剧本博物馆.json`,复活庆典:`/scripts/常见剧本/#复活庆典-Zets.json`,大师之夜:`/scripts/常见剧本/#大师之夜-王鑫.json`,奇异人生:`/scripts/常见剧本/#奇异人生-海雾&奇异人生推理馆.json`,森罗万象:`/scripts/常见剧本/#森罗万象-503.json`,横行霸道:`/scripts/常见剧本/#横行霸道V5.0.json`,菜市场:`/scripts/常见剧本/#菜市场v4-蓝铃兰.json`,飞越疯人院Ⅱ:`/scripts/常见剧本/#飞越疯人院Ⅱv1.1.1-太一.json`,Idiocracy:`/scripts/常见剧本/Idiocracy v1.4 Allen.json`,赌徒悖论:`/scripts/常见剧本/赌徒悖论.json`,"横行霸道+":`/scripts/常见剧本/鸭镇制作《横行霸道+Ver.4.7》（集石魔典）.json`,一夜鱼龙舞:`/scripts/自定义剧本/#一夜鱼龙舞3.2-驯鹿&痴愚.json`,惊弓之鸟:`/scripts/全员许愿/惊弓之鸟.json`},Q=[{id:`7xmyl`,name:`7席谜案录`,author:`TrashWarlock`,description:`常见剧本`,jsonUrl:Z[`7席谜案录`]},{id:`ssmt`,name:`三神谜题`,author:`华稽`,description:`常见剧本`,jsonUrl:Z.三神谜题},{id:`gfrdwy`,name:`公爵夫人的晚宴`,author:`Lei`,description:`常见剧本`,jsonUrl:Z.公爵夫人的晚宴},{id:`xzbd`,name:`嚣张跋扈`,author:`刘中奇`,description:`常见剧本`,jsonUrl:Z.嚣张跋扈},{id:`dfecz`,name:`地狱二重奏2.0`,author:`钟楼剧本博物馆`,description:`常见剧本`,jsonUrl:Z[`地狱二重奏2.0`]},{id:`fhqd`,name:`复活庆典`,author:`Zets`,description:`常见剧本`,jsonUrl:Z.复活庆典},{id:`dsyy`,name:`大师之夜`,author:`王鑫`,description:`常见剧本`,jsonUrl:Z.大师之夜},{id:`qyrs`,name:`奇异人生`,author:`海雾&奇异人生推理馆`,description:`常见剧本`,jsonUrl:Z.奇异人生},{id:`slwx`,name:`森罗万象`,author:`503`,description:`常见剧本`,jsonUrl:Z.森罗万象},{id:`hxbd`,name:`横行霸道`,author:`官方`,description:`常见剧本`,jsonUrl:Z.横行霸道},{id:`csc`,name:`菜市场`,author:`蓝铃兰`,description:`常见剧本`,jsonUrl:Z.菜市场},{id:`fyfry`,name:`飞越疯人院Ⅱ`,author:`太一`,description:`常见剧本`,jsonUrl:Z.飞越疯人院Ⅱ},{id:`idiocracy`,name:`Idiocracy`,author:`Allen`,description:`常见剧本`,jsonUrl:Z.Idiocracy},{id:`dtbl`,name:`赌徒悖论`,author:`未知`,description:`常见剧本`,jsonUrl:Z.赌徒悖论},{id:`hxbd-plus`,name:`横行霸道+`,author:`鸭镇制作`,description:`常见剧本`,jsonUrl:Z[`横行霸道+`]},{id:`yylw`,name:`一夜鱼龙舞`,author:`驯鹿&痴愚`,description:`自定义剧本`,jsonUrl:Z.一夜鱼龙舞},{id:`jgzn`,name:`惊弓之鸟`,author:`未知`,description:`全员许愿`,jsonUrl:Z.惊弓之鸟}];function ye(e){return Z[e]}async function be(e){try{let t=await fetch(e);if(!t.ok)throw Error(`加载剧本失败: ${t.statusText}`);let n=await t.json();return JSON.stringify(n,null,2)}catch(e){throw console.error(`加载剧本JSON失败:`,e),e}}function $(e){let t=e.toLowerCase().trim();return t?Q.filter(e=>e.name.toLowerCase().includes(t)||e.author.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)):Q}function xe(){let e=h(),[t,n]=(0,B.useState)(``),[r,i]=(0,B.useState)($(``)),a=e=>{n(e),i($(e))},o=t=>{e(`/repo/${encodeURIComponent(t)}`)};return(0,V.jsx)(I,{sx:{minHeight:`100vh`,backgroundColor:`#f5f5f5`,py:4},children:(0,V.jsxs)(k,{maxWidth:`lg`,children:[(0,V.jsx)(I,{sx:{mb:3},children:(0,V.jsx)(T,{startIcon:(0,V.jsx)(M,{}),onClick:()=>e(`/`),sx:{color:U.paper.primary},children:`返回剧本生成器`})}),(0,V.jsx)(x,{variant:`h3`,sx:{textAlign:`center`,fontWeight:`bold`,mb:1,color:U.paper.primary,fontSize:{xs:`1.8rem`,sm:`2.2rem`,md:`2.5rem`}},children:`剧本仓库`}),(0,V.jsx)(x,{sx:{textAlign:`center`,mb:4,color:U.paper.secondary,fontSize:{xs:`0.9rem`,sm:`1rem`}},children:`浏览和预览血染钟楼剧本`}),(0,V.jsx)(I,{sx:{mb:4,maxWidth:600,mx:`auto`},children:(0,V.jsx)(D,{fullWidth:!0,variant:`outlined`,placeholder:`搜索剧本名称、作者...`,value:t,onChange:e=>a(e.target.value),InputProps:{startAdornment:(0,V.jsx)(ae,{position:`start`,children:(0,V.jsx)(oe,{})})},sx:{backgroundColor:`white`,borderRadius:2,"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:U.gray},"&:hover fieldset":{borderColor:U.good},"&.Mui-focused fieldset":{borderColor:U.good}}}})}),(0,V.jsx)(I,{sx:{display:`grid`,gridTemplateColumns:{xs:`1fr`,sm:`repeat(2, 1fr)`,md:`repeat(3, 1fr)`},gap:3},children:r.map(e=>(0,V.jsx)(L,{sx:{height:`100%`,transition:`all 0.3s`,"&:hover":{transform:`translateY(-4px)`,boxShadow:6}},children:(0,V.jsx)(le,{onClick:()=>o(e.name),sx:{height:`100%`,p:2},children:(0,V.jsxs)(C,{children:[(0,V.jsx)(x,{variant:`h5`,sx:{fontWeight:`bold`,mb:1,color:U.paper.primary,fontSize:{xs:`1.2rem`,sm:`1.4rem`}},children:e.name}),(0,V.jsxs)(x,{sx:{color:U.good,mb:1.5,fontSize:`0.9rem`},children:[`作者：`,e.author]}),(0,V.jsx)(x,{sx:{color:U.paper.secondary,fontSize:`0.85rem`,lineHeight:1.6},children:e.description})]})})},e.id))}),r.length===0&&(0,V.jsx)(I,{sx:{textAlign:`center`,py:8},children:(0,V.jsx)(x,{sx:{color:U.gray,fontSize:`1.1rem`},children:`未找到匹配的剧本`})})]})})}var Se=e(R()),Ce=b({breakpoints:{values:{xs:0,sm:600,md:960,lg:1280,xl:1920}}});function we(){let{scriptName:e}=m(),t=h(),[n,r]=(0,B.useState)(null),[i,a]=(0,B.useState)(``),o=(0,B.useRef)(null),s=P(Ce.breakpoints.down(`md`));return(0,B.useEffect)(()=>{(async()=>{if(!e){a(`未指定剧本名称`);return}let t=decodeURIComponent(e),n=ye(t);if(!n){a(`未找到剧本：${t}`);return}try{let e=await be(n),t=K(e);r(t)}catch(e){a(`加载剧本失败：${e instanceof Error?e.message:`未知错误`}`)}})()},[e]),i?(0,V.jsx)(I,{sx:{minHeight:`100vh`,backgroundColor:`#f5f5f5`,py:4,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,V.jsx)(k,{maxWidth:`sm`,children:(0,V.jsxs)(F,{sx:{p:4,textAlign:`center`},children:[(0,V.jsx)(x,{variant:`h5`,color:`error`,sx:{mb:2},children:i}),(0,V.jsx)(T,{startIcon:(0,V.jsx)(M,{}),onClick:()=>t(`/repo`),variant:`contained`,children:`返回剧本仓库`})]})})}):n?(0,V.jsx)(I,{sx:{minHeight:`100vh`,backgroundColor:`background.default`,py:{xs:2,sm:3,md:4}},children:(0,V.jsxs)(k,{maxWidth:`xl`,children:[(0,V.jsxs)(I,{sx:{mb:3,display:`flex`,gap:2,flexWrap:`wrap`,justifyContent:`space-between`,alignItems:`center`},children:[(0,V.jsx)(T,{startIcon:(0,V.jsx)(M,{}),onClick:()=>t(`/repo`),sx:{color:U.paper.primary},children:`返回剧本仓库`}),(0,V.jsx)(T,{startIcon:(0,V.jsx)(E,{}),onClick:async()=>{if(!(!o.current||!n))try{let e=o.current.querySelectorAll(`img`);await Promise.all(Array.from(e).map(e=>e.complete?Promise.resolve():new Promise(t=>{e.onload=()=>t(null),e.onerror=()=>t(null),setTimeout(()=>t(null),5e3)})));let t=await(0,Se.default)(o.current,{scale:2,backgroundColor:`#242424`,logging:!1,useCORS:!0,allowTaint:!0,width:o.current.scrollWidth,height:o.current.scrollHeight,windowWidth:o.current.scrollWidth,windowHeight:o.current.scrollHeight,imageTimeout:0,removeContainer:!0}),r=document.createElement(`a`);r.download=`${n.title||`剧本`}.png`,r.href=t.toDataURL(`image/jpeg`,.92),r.click()}catch(e){console.error(`导出图片失败:`,e),alert(`导出图片失败，请重试`)}},variant:`contained`,sx:{backgroundColor:U.good,"&:hover":{backgroundColor:U.good,opacity:.9}},children:`导出图片`})]}),(0,V.jsx)(I,{id:`script-preview`,ref:o,sx:{display:`flex`,width:`100%`,justifyContent:`center`},children:(0,V.jsxs)(I,{sx:{display:`flex`,width:`100%`,justifyContent:`center`,gap:`2px`,alignItems:`stretch`},children:[!s&&(0,V.jsx)(I,{sx:{padding:1.5,flexShrink:0,backgroundColor:U.nightOrder.background,position:`relative`,display:`flex`,alignItems:`flex-start`,pt:`33.33%`,overflow:`hidden`,boxShadow:`none`,"&::before":{content:`""`,position:`absolute`,top:0,left:0,right:0,bottom:0,zIndex:0,backgroundImage:`url("data:image/svg+xml,%3Csvg width='200' height='200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='6' seed='2' /%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='0 0 0 0 0 0.15 0 0.25 0 0 0.35 0 0 0.45'/%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Crect width='200' height='200' filter='url(%23noiseFilter)' opacity='1'/%3E%3C/svg%3E")`,opacity:.5,pointerEvents:`none`,backgroundSize:`150px 150px`},"&::after":{content:`""`,position:`absolute`,top:0,left:0,right:0,bottom:0,zIndex:0,background:`
                      radial-gradient(circle at 15% 25%, rgba(10, 12, 15, 0.9) 0%, transparent 3%),
                      radial-gradient(circle at 45% 15%, rgba(8, 10, 12, 0.85) 0%, transparent 4%),
                      radial-gradient(circle at 75% 35%, rgba(5, 8, 10, 0.95) 0%, transparent 2.5%),
                      radial-gradient(circle at 35% 55%, rgba(12, 15, 18, 0.8) 0%, transparent 3.5%),
                      radial-gradient(circle at 85% 65%, rgba(8, 10, 12, 0.9) 0%, transparent 3%),
                      radial-gradient(circle at 20% 75%, rgba(6, 8, 10, 0.85) 0%, transparent 4%),
                      radial-gradient(circle at 60% 85%, rgba(10, 12, 15, 0.95) 0%, transparent 2%),
                      radial-gradient(circle at 90% 20%, rgba(8, 10, 12, 0.75) 0%, transparent 3.5%),
                      radial-gradient(circle at 50% 45%, rgba(6, 8, 10, 0.9) 0%, transparent 3%),
                      radial-gradient(circle at 10% 90%, rgba(10, 12, 15, 0.85) 0%, transparent 4%)
                    `,backgroundSize:`100% 100%`,pointerEvents:`none`},"& > *":{position:`relative`,zIndex:1}},children:(0,V.jsx)(Y,{title:`首个夜晚`,actions:n.firstnight})}),(0,V.jsxs)(F,{elevation:0,sx:{pb:2,pt:2,flex:1,maxWidth:`1200px`,backgroundImage:`url(/bg.png)`,backgroundSize:`cover`,backgroundPosition:`center`,backgroundRepeat:`no-repeat`,borderRadius:0,position:`relative`,overflow:`hidden`,boxShadow:`none`},children:[(0,V.jsx)(I,{component:`img`,src:`https://clocktower-wiki.gstonegames.com/skins/pivot/assets/image/flower3.png`,sx:{position:`absolute`,bottom:0,left:0,maxWidth:{xs:`25%`,sm:`20%`,md:`15%`},opacity:.25,pointerEvents:`none`}}),(0,V.jsx)(I,{component:`img`,src:`https://clocktower-wiki.gstonegames.com/skins/pivot/assets/image/flower4.png`,sx:{position:`absolute`,bottom:0,right:0,maxWidth:{xs:`25%`,sm:`20%`,md:`15%`},opacity:.25,pointerEvents:`none`}}),(0,V.jsxs)(I,{sx:{textAlign:`center`,mb:2,position:`relative`,zIndex:1,px:{xs:1,sm:2}},children:[!s&&n.author&&(0,V.jsx)(I,{sx:{position:`absolute`,top:0,right:{sm:20,md:30},textAlign:`right`},children:(0,V.jsxs)(x,{sx:{color:U.paper.secondary,fontSize:{sm:`0.85rem`},mb:.3},children:[`剧本作者：`,n.author,(0,V.jsx)(`br`,{}),`支持7-15人`]})}),(0,V.jsx)(x,{variant:`h3`,sx:{fontWeight:`bold`,color:U.paper.primary,fontSize:{xs:`1.5rem`,sm:`1.8rem`,md:`2rem`},mb:{xs:.5,sm:.5}},children:n.title}),s&&n.author&&(0,V.jsxs)(x,{sx:{color:U.paper.secondary,fontSize:`0.75rem`,mt:.5},children:[`作者：`,n.author,` · 支持7-15人`]})]}),(0,V.jsxs)(I,{sx:{position:`relative`,zIndex:1},children:[(0,V.jsx)(J,{team:`townsfolk`,characters:n.characters.townsfolk,script:n,onReorder:()=>{}}),(0,V.jsx)(J,{team:`outsider`,characters:n.characters.outsider,script:n,onReorder:()=>{}}),(0,V.jsx)(J,{team:`minion`,characters:n.characters.minion,script:n,onReorder:()=>{}}),(0,V.jsx)(J,{team:`demon`,characters:n.characters.demon,script:n,onReorder:()=>{}})]}),s&&(0,V.jsxs)(I,{sx:{mt:2,display:`flex`,gap:1.5,position:`relative`,zIndex:1,px:{xs:1,sm:2,md:3}},children:[(0,V.jsx)(I,{sx:{flex:1,minWidth:0},children:(0,V.jsx)(Y,{title:`首个夜晚`,actions:n.firstnight,isMobile:!0})}),(0,V.jsx)(I,{sx:{flex:1,minWidth:0},children:(0,V.jsx)(Y,{title:`其他夜晚`,actions:n.othernight,isMobile:!0})})]}),(0,V.jsx)(I,{sx:{mt:2.5,position:`relative`,zIndex:1,px:{xs:1,sm:2,md:3}},children:(0,V.jsxs)(I,{sx:{border:`2px solid rgba(61, 50, 38, 0.4)`,borderRadius:2,p:{xs:1.5,sm:2},backgroundColor:`rgba(254, 250, 240, 0.5)`,mb:1},children:[(0,V.jsxs)(I,{sx:{mb:1.5},children:[(0,V.jsx)(x,{component:`span`,sx:{fontWeight:`bold`,color:U.paper.secondary,fontSize:{xs:`0.9rem`,sm:`1rem`}},children:`可使`}),(0,V.jsx)(x,{component:`span`,sx:{color:U.paper.secondary,fontSize:{xs:`0.8rem`,sm:`0.9rem`},ml:1},children:`某些事情"可能"发生。代表由说书人来决定该事情是否发生。`})]}),(0,V.jsxs)(I,{children:[(0,V.jsx)(x,{component:`span`,sx:{fontWeight:`bold`,color:U.paper.secondary,fontSize:{xs:`0.9rem`,sm:`1rem`}},children:`中毒`}),(0,V.jsx)(x,{component:`span`,sx:{color:U.paper.secondary,fontSize:{xs:`0.8rem`,sm:`0.9rem`},ml:1},children:`中毒的玩家会失去能力，但会认为自己的真实有能力。说书人会给出该玩家应得的错误信息，让玩家不可能会给出中毒信息。中毒的玩家不会得知自己中毒。`})]})]})})]}),!s&&(0,V.jsx)(I,{sx:{padding:1.5,flexShrink:0,backgroundColor:U.nightOrder.background,position:`relative`,display:`flex`,alignItems:`flex-start`,pt:`33.33%`,overflow:`hidden`,boxShadow:`none`,"&::before":{content:`""`,position:`absolute`,top:0,left:0,right:0,bottom:0,zIndex:0,backgroundImage:`url("data:image/svg+xml,%3Csvg width='200' height='200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='6' seed='2' /%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='0 0 0 0 0 0.15 0 0.25 0 0 0.35 0 0 0.45'/%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Crect width='200' height='200' filter='url(%23noiseFilter)' opacity='1'/%3E%3C/svg%3E")`,opacity:.5,pointerEvents:`none`,backgroundSize:`150px 150px`},"&::after":{content:`""`,position:`absolute`,top:0,left:0,right:0,bottom:0,zIndex:0,background:`
                      radial-gradient(circle at 15% 25%, rgba(10, 12, 15, 0.9) 0%, transparent 3%),
                      radial-gradient(circle at 45% 15%, rgba(8, 10, 12, 0.85) 0%, transparent 4%),
                      radial-gradient(circle at 75% 35%, rgba(5, 8, 10, 0.95) 0%, transparent 2.5%),
                      radial-gradient(circle at 35% 55%, rgba(12, 15, 18, 0.8) 0%, transparent 3.5%),
                      radial-gradient(circle at 85% 65%, rgba(8, 10, 12, 0.9) 0%, transparent 3%),
                      radial-gradient(circle at 20% 75%, rgba(6, 8, 10, 0.85) 0%, transparent 4%),
                      radial-gradient(circle at 60% 85%, rgba(10, 12, 15, 0.95) 0%, transparent 2%),
                      radial-gradient(circle at 90% 20%, rgba(8, 10, 12, 0.75) 0%, transparent 3.5%),
                      radial-gradient(circle at 50% 45%, rgba(6, 8, 10, 0.9) 0%, transparent 3%),
                      radial-gradient(circle at 10% 90%, rgba(10, 12, 15, 0.85) 0%, transparent 4%)
                    `,backgroundSize:`100% 100%`,pointerEvents:`none`},"& > *":{position:`relative`,zIndex:1}},children:(0,V.jsx)(Y,{title:`其他夜晚`,actions:n.othernight})})]})})]})}):(0,V.jsx)(I,{sx:{minHeight:`100vh`,backgroundColor:`#f5f5f5`,py:4,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,V.jsx)(x,{children:`加载中...`})})}(0,z.createRoot)(document.getElementById(`root`)).render((0,V.jsx)(B.StrictMode,{children:(0,V.jsx)(ee,{children:(0,V.jsxs)(v,{children:[(0,V.jsx)(g,{path:`/`,element:(0,V.jsx)(ve,{})}),(0,V.jsx)(g,{path:`/repo`,element:(0,V.jsx)(xe,{})}),(0,V.jsx)(g,{path:`/repo/:scriptName`,element:(0,V.jsx)(we,{})})]})})}));